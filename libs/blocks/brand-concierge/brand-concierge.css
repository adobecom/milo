.brand-concierge {
  --bc-header-color: #131313;
  --bc-card-radius: 12px;
  --bc-input-radius: 12px;
  --bc-sticky-input-radius: 22px;
  --bc-input-height: 52px;
  --bc-sticky-input-height: 44px;
  --bc-input-border: linear-gradient(98.11deg, #9A3CF9 -4.21%, #E743C8 35.46%, #ED457E 68.67%, #FF7918 104.7%);
  --bc-button-dimensions: 32px;
  --bc-button-radius: 8px;
  --bc-button-color: #292929;
  --bc-button-hover-color: #555;
  --bc-keyboard-focus-color: #5574F7;
  --bc-sticky-delay: 3s;

  background: var(--brand-concierge-bg);
  box-sizing: border-box;
  padding: 40px 20px 10px;
}

.bc-header {
  color: var(--bc-header-color);
  display: flex;
  flex-direction: column;
  gap: 4px;
  text-align: center;
  margin-bottom: 32px;
}

.bc-header-title {
  font-size: var(--type-heading-xl-size);
  line-height: var(--type-heading-xl-lh);
  margin: 0;
}

.bc-header-subtitle {
  font-size: var(--type-body-s-size);
  line-height: var(--type-body-s-lh);
  margin: 0;
}

.bc-prompt-cards {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 32px;
  padding: 0 12px;
}

.prompt-card-button {
  background: #fffc;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-family: inherit;
  padding: 0;
  width: 100%;
}

.prompt-card-button:hover {
  background: #fff;
}

.prompt-card-button:focus-visible {
  outline: 2px solid var(--bc-keyboard-focus-color);
  outline-offset: 2px;
}

.prompt-card-image {
  display: none;
}

.prompt-card-text {
  align-items: center;
  color: var(--bc-button-color);
  display: flex;
  font-size: var(--type-body-s-size);
  gap: 8px;
  line-height: var(--type-body-s-lh);
  margin: 0;
  padding: 12px 16px;
  text-align: left;
}

.prompt-card-text svg {
  width: 16px;
  height: 16px;
}

.prompt-card-text p {
  color: var(--bc-button-color);
  margin: 0;
}

.bc-input-field {
  position: relative;
}

.bc-input-field-container {
  align-items: center;
  background: #fff;
  border-radius: calc(var(--bc-input-radius) - 2px);
  display: flex;
  height: var(--bc-input-height);
  margin-bottom: 40px;
  padding: 0 12px 0 20px;
  position: relative;
  gap: 12px;
  z-index: 9;
}

[dir="rtl"] .bc-input-field-container {
  padding: 0 20px 0 12px;
}

.bc-input-field::before {
  background: var(--bc-input-border);
  border-radius: var(--bc-input-radius);
  content: '';
  height: 100%;
  left: 50%;
  padding: 2px;
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
}

.bc-input-field::after {
  background: var(--bc-input-border);
  border-radius: var(--bc-input-radius);
  content: '';
  filter: blur(30px);
  height: 100%;
  left: 50%;
  opacity: 0.5;
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  transition: opacity 0.3s ease;
  width: 100%;
  z-index: 1;
}

.bc-input-field-label {
  border-radius: 4px;
  display: flex;
  align-items: center;
  user-select: none;
  align-self: start;
  margin-top: 10px;
  height: 32px;
  width: 32px;
  justify-content: center;
}

.bc-input-field-label:focus-visible {
  outline: 2px solid var(--bc-keyboard-focus-color);
}

.bc-input-tooltip {
  display: none;
  background: var(--bc-button-color);
  color: #fff;
  border-radius: 7px;
  box-shadow: 0 0 10px 0 rgba(0 0 0 / 25%);
  font-size: var(--type-body-xs-size);
  line-height: var(--type-body-xs-lh);
  left: 36px;
  padding: 5px 10px;
  position: absolute;
  top: -24px;
  transform: translateX(-50%);
  user-select: none;
  z-index: 9;
} 

.bc-input-tooltip::before {
  border-top: 5px solid var(--bc-button-color);
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
}

[dir="rtl"] .bc-input-tooltip {
  left: unset;
  right: -22px;
}

.sticky .bc-input-tooltip {
  left: 28px;
  top: -28px;
}

.bc-input-field-label:focus-visible + .bc-input-tooltip,
.bc-input-field-label:hover + .bc-input-tooltip {
  display: block;
}

.bc-input-field-container input {
  background: transparent;
  border: none;
  flex: 1;
  font-family: inherit;
  font-size: var(--type-body-s-size);
  line-height: 1.5;
  outline: none;
  width: 100%;
}

.bc-input-field-container input::placeholder {
  color: #757575;
}

.input-field-button {
  background: var(--bc-button-color);
  border: none;
  border-radius: var(--bc-button-radius);
  color: #fff;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  height: var(--bc-button-dimensions);
  transition: background 0.3s ease;
  width: var(--bc-button-dimensions);
}

.input-field-button:hover {
  background: var(--bc-button-hover-color);
}

.input-field-button:focus-visible {
  outline: 2px solid var(--bc-keyboard-focus-color);
  outline-offset: 2px;
}

.input-field-button:disabled {
  background: #fff;
  color: #0004;
  pointer-events: none;
}

.bc-legal {
  color: #4B4B4B;
  font-size: var(--type-body-xxs-size);
  line-height: var(--type-body-xxs-lh);
  margin: 0;
  text-align: center;
}

.bc-legal a {
  color: #4B4B4B;
}

.bc-legal-header {
  align-items: center;
  display: flex;
  gap: 8px;
}

/* Temporary override to chat styling */
#brand-concierge-mount .container-mobile .chat-input {
  font-size: 16px !important;
}

#brand-concierge-mount .container-mobile .chat-history {
  padding-left: 28px !important;
  padding-right: 28px !important;
}

/* Sticky */
@keyframes sticky-in {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.brand-concierge.sticky {
  animation-name: sticky-in;
  animation-duration: 0.4s;
  animation-fill-mode: forwards;
  animation-timing-function: ease-in;
  animation-delay: var(--bc-sticky-delay);
  bottom: 0;
  opacity: 0;
  padding: 0 20px 40px;
  position: fixed;
  right: 0;
  z-index: 9;
}

.sticky .bc-input-field {
  margin-bottom: 0;
}

.sticky .bc-input-field::before {
  border-radius: 50%;
}

.sticky .bc-input-field::after {
  border-radius: 50%;
  opacity: 0;
}

.sticky .bc-input-field-container {
  border-radius: 50%;
  box-shadow: 0 2px 8px 0 rgba(0 0 0 / 16%);
  height: var(--bc-sticky-input-height);
  margin: 0;
  padding: 0;
}

.sticky .bc-input-field-label {
  align-self: center;
  margin: 0;
}

.sticky .bc-input-field-label,
.sticky input,
.sticky .input-field-button {
  display: none;
}

.bc-input-field-container:has(input:focus-visible) {
  outline: 2px solid var(--bc-keyboard-focus-color);
}

.sticky .bc-input-field:has(input:focus-visible)::after {
  opacity: 0.5;
}

.sticky .input-field-button {
  opacity: 1;
  background: none;
  border-radius: 50%;
  color: inherit;
}

.sticky .input-field-button:disabled {
  opacity: 0;
}

.sticky .bc-legal, .bc-legal.legal-closed.legal-shown {
  opacity: 0;
}

.sticky .bc-mobile-button {
  background: #fff;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  height: var(--bc-sticky-input-height);
  padding: 0;
  position: relative;
  width: var(--bc-sticky-input-height);
  z-index: 9;
}

.sticky .bc-mobile-button:focus-visible {
  outline: 2px solid var(--bc-keyboard-focus-color);
}

.sticky .bc-legal {
  background: #fff;
  border-radius: 8px;
  box-sizing: border-box;
  box-shadow: 0 0 8px 0 #00000026;
  color: #000;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
  padding: 10px 12px;
  position: relative;
  text-align: left;
  z-index: 9;
}

.sticky .bc-legal h1,
.sticky .bc-legal h2,
.sticky .bc-legal h3,
.sticky .bc-legal h4,
.sticky .bc-legal h5,
.sticky .bc-legal h6 {
  font-size: var(--type-body-xxs-size);
  font-weight: normal;
  line-height: var(--type-body-xxs-lh);
  margin: 0;
}

.sticky .bc-legal p {
  margin: 0;
}

.sticky .bc-legal-close {
  background: none;
  border: none;
  cursor: pointer;
  font-size: var(--type-body-m-size);
  position: absolute;
  top: 6px;
  right: 0;
}

.sticky .bc-legal-close:focus-visible {
  border-radius: 8px;
  outline: 2px solid var(--bc-keyboard-focus-color);
}

#brand-concierge-modal {
  --modal-header-height: 56px;
}

#brand-concierge-modal.dialog-modal {
  height: calc(100dvh - 22px);
  width: 100vw;
  max-width: unset;
  max-height: unset;
  margin-top: 22px;
  border-radius: 24px 24px 0 0;
  font-size: 16px;
  top: unset;
}

/* Fallback for browsers that don't support dvh */
@supports not (height: 100dvh) {
  #brand-concierge-modal.dialog-modal {
    height: calc(100vh - 22px);
  }
}

#brand-concierge-modal  .dialog-close {
  z-index: 2;
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExLjA2MDYgMTBMMTYuMjY3MSA0Ljc5Mzk1QzE2LjU2MDEgNC41MDA5OCAxNi41NjAxIDQuMDI2MzcgMTYuMjY3MSAzLjczMzRDMTUuOTc0MSAzLjQ0MDQzIDE1LjQ5OTUgMy40NDA0MyAxNS4yMDY1IDMuNzMzNEwxMCA4LjkzOTQ1TDQuNzkzNDYgMy43MzM0QzQuNTAwNDkgMy40NDA0MyA0LjAyNTg4IDMuNDQwNDMgMy43MzI5MSAzLjczMzRDMy40Mzk5NCA0LjAyNjM3IDMuNDM5OTQgNC41MDA5OCAzLjczMjkxIDQuNzkzOTVMOC45MzkzOSAxMEwzLjczMjkxIDE1LjIwNkMzLjQzOTk0IDE1LjQ5OSAzLjQzOTk0IDE1Ljk3MzYgMy43MzI5MSAxNi4yNjY2QzMuODc5MzkgMTYuNDEzMSA0LjA3MTI5IDE2LjQ4NjMgNC4yNjMxOCAxNi40ODYzQzQuNDU1MDcgMTYuNDg2MyA0LjY0Njk3IDE2LjQxMzEgNC43OTM0NSAxNi4yNjY2TDkuOTk5OTkgMTEuMDYwNUwxNS4yMDY1IDE2LjI2NjZDMTUuMzUzIDE2LjQxMzEgMTUuNTQ0OSAxNi40ODYzIDE1LjczNjggMTYuNDg2M0MxNS45Mjg3IDE2LjQ4NjMgMTYuMTIwNiAxNi40MTMxIDE2LjI2NzEgMTYuMjY2NkMxNi41NiAxNS45NzM2IDE2LjU2IDE1LjQ5OSAxNi4yNjcxIDE1LjIwNkwxMS4wNjA2IDEwWiIgZmlsbD0iIzI5MjkyOSIvPgo8L3N2Zz4K');
  background-repeat: no-repeat;
  background-position: center;
  height: 32px;
  width: 32px;
  border: none;
  top: 12px;
  right: 16px;
}

#brand-concierge-modal  .dialog-close:focus-visible {
  outline: 2px solid #5574F7;
  outline-offset: 2px;
  border-radius: 8px;
}

#brand-concierge-modal  .dialog-close svg {
  display: none;
}

.bc-modal-header {
  height: 56px;
  padding: 12px 16px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  gap: 8px;
}

.bc-modal-title {
  font-size: 16px;
  line-height: 32px;
  font-weight: 700;
  color: #000;
}

.bc-beta-label {
  font-size: 10px;
  font-weight: 700;
  line-height: 14px;
  text-transform: uppercase;
  color: #5258E4;
  background: #E0E2FF;
  border-radius: 4px;
  height: 14px;
  width: 30px;
  text-align: center;
}

#brand-concierge-modal #brand-concierge-mount {
  height: calc(100% - var(--modal-header-height));
}


/* Tablet up */
@media screen and (min-width: 768px) {
  .brand-concierge {
    padding: 80px 40px 10px;
  }

  .bc-prompt-cards {
    flex-wrap: nowrap;
    gap: 16px;
    justify-content: center;
    margin: 0 auto 32px;
    max-width: 670px;
    padding: 0;
  }

  .prompt-card-button {
    display: flex;
    flex-direction: column;
    gap: 0;
    justify-content: flex-start;
  }

  .prompt-card-image {
    border-radius: var(--bc-card-radius) var(--bc-card-radius) 0 0;
    display: block;
  }

  .prompt-card-image img,
  .prompt-card-image  {
    display: block;
    border-radius: var(--bc-card-radius) var(--bc-card-radius) 0 0;
  }

  .prompt-card-text {
    flex-wrap: wrap;
  }

  .bc-input-field {
    margin: 0 auto 80px;
    max-width: calc(670px - 4px);
  }

  .bc-legal {
    margin: 0 auto;
    max-width: calc(670px - 4px);
  }

  .brand-concierge.sticky {
    right: initial;
    width: 100%;
  }

  .sticky .bc-legal.legal-shown:not(.legal-closed) {
    opacity: 1;
  }

  .sticky .bc-input-field::before {
    border-radius: var(--bc-sticky-input-radius);
  }
  
  .sticky .bc-input-field::after {
    border-radius: var(--bc-sticky-input-radius);
  }

  .sticky .bc-input-field-container {
    border-radius: calc(var(--bc-sticky-input-radius) - 2px);
    padding: 0 12px;
  }

  .sticky .bc-input-field-label,
  .sticky input,
  .sticky .input-field-button {
    display: flex;
  }

  .sticky .bc-mobile-button {
    display: none;
  }

  #brand-concierge-modal.dialog-modal {
    height: calc(100dvh - 32px);
    margin-top: 32px;
    border-radius: 12px 12px 0 0;
  }

  /* Fallback for browsers that don't support dvh */
  @supports not (height: 100dvh) {
    #brand-concierge-modal.dialog-modal {
      height: calc(100vh - 32px);
    }
  }
}

/* desktop up */
@media screen and (min-width: 1200px) {
  .bc-prompt-cards {
    max-width: 768px;
  }

  .bc-legal {
    max-width: 678px;
  }

  .bc-input-field{
    max-width: calc(768px - 4px);
  }

  .sticky .bc-input-field,
  .sticky .bc-legal {
    max-width: calc(600px - 4px);
  }
}
