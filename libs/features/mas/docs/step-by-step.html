
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>M@S Web Components</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="spectrum.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://p.typekit.net/p.css?s=1&amp;k=hah7vzn&amp;ht=tk&amp;f=7180.7181.7182.7183.22474.22749.22750.22751.22753&amp;a=8634977&amp;app=typekit&amp;e=css">
    <link rel="stylesheet" href="https://use.typekit.net/hah7vzn.css">
  
  <!-- Include your custom element script as an ES6 module -->
  <script type="module">
    import { init } from './common.js';
    init();
  </script>
  <!-- Include Highlight.js stylesheet for syntax highlighting -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
  <script type="module" src="./mas-sidenav.js"></script>
</head>
<body class="spectrum spectrum--medium spectrum--light">
<aside class="sidenav">
    <a href="/libs/features/mas/docs/mas.html">Home</a>
    <a href="/libs/features/mas/docs/mas.js.html">mas.js</a>
    <a href="/libs/features/mas/docs/step-by-step.html">Step By Step - Enable M@S</a>
    <a href="/libs/features/mas/docs/checkout-link.html">Checkout Link</a>
    <a href="/libs/features/mas/docs/checkout-button.html">Checkout Button</a>
    <a href="/libs/features/mas/docs/inline-price.html">Inline Price</a>
    <a href="/libs/features/mas/docs/merch-card.html">Merch Card</a>
    <a href="/libs/features/mas/docs/ccd.html">CCD Gallery</a>
    <a href="/libs/features/mas/docs/adobe-home.html">Adobe Home Gallery</a>
    <a href="/libs/features/mas/docs/plans.html">Plans Gallery</a>
    <a href="/libs/features/mas/docs/benchmarks.html">Benchmarks</a>
</aside>
<main>
<sp-theme color="light" scale="medium">
<h1 id="step-by-step---enable-m%40s" tabindex="-1">Step By Step - Enable M@S <a class="header-anchor" href="#step-by-step---enable-m%40s" href="#step-by-step---enable-m%40s" title="Permalink to this heading">#</a></h1>
<ol>
<li>Import mas.js</li>
</ol>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://www.adobe.com/libs/features/mas/dist/mas.js&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<ol start="2">
<li>Create and attach <code>&lt;mas-commerce-service&gt;</code> element to your DOM. Preferrably, place it inside the <head> tag.
(!) Mas Commerce Service should be added to DOM <em>before</em> <code>&lt;aem-fragment&gt;</code> elements are created.</li>
</ol>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  ...
  <span class="hljs-tag">&lt;<span class="hljs-name">mas-commerce-service</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mas-commerce-service</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  
</code></pre>
<ol start="3">
<li>
<p>Create and attach <code>&lt;merch-card&gt;</code> and <code>&lt;aem-fragment&gt;</code> elements.</p>
</li>
<li>
<p>Import spectrum css / spectrum web components /</p>
</li>
<li>
<p>Import polyfill, if required</p>
</li>
</ol>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://www.adobe.comlibs/deps/custom-elements.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Example how to load polyfill only if required:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">polyfills</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">if</span> (polyfills.<span class="hljs-property">promise</span>) <span class="hljs-keyword">return</span> polyfills.<span class="hljs-property">promise</span>;
  <span class="hljs-keyword">let</span> isSupported = <span class="hljs-literal">false</span>;
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>, {
    <span class="hljs-comment">// eslint-disable-next-line getter-return</span>
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">is</span>() {
      isSupported = <span class="hljs-literal">true</span>;
    },
  });
  <span class="hljs-keyword">if</span> (isSupported) {
    polyfills.<span class="hljs-property">promise</span> = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> { base } = <span class="hljs-title function_">getConfig</span>();
    polyfills.<span class="hljs-property">promise</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadScript</span>(<span class="hljs-string">`<span class="hljs-subst">${base}</span>/deps/custom-elements.js`</span>);
  }
  <span class="hljs-keyword">return</span> polyfills.<span class="hljs-property">promise</span>;
}
</code></pre>

</sp-theme>
</main>
<script type="module">
  document.querySelectorAll('code.demo').forEach(el => {
      const targetContainer = document.createElement('div');
      targetContainer.classList.toggle('light', el.classList.contains('light'));
      targetContainer.innerHTML = `<h4>Demo: </h4><div class="demo-container">${el.textContent}</div>`;
      el.parentElement.after(targetContainer);
      // Extract and evaluate <script> tags
      const scriptTags = targetContainer.getElementsByTagName('script');
      for (let i = 0; i < scriptTags.length; i++) {
          const script = document.createElement('script');
          script.type = 'module';
          script.text = scriptTags[i].text;
          document.body.appendChild(script); // Appends to the document to execute
          scriptTags[i].remove(); // Remove the script tag
      }
  });
</script>
</body>
</html>
