
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>M@S Web Components</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script type="module" src="../../../deps/custom-elements.js"></script>
  
  <script>
    if (/localhost/.test(window.location.host)) {
      const meta = document.createElement('meta');
      meta.name = 'aem-base-url';
      meta.content = 'http://localhost:8080'; // local AEM proxy URL
      document.head.appendChild(meta);
      }
  </script>
  <!-- Include your custom element script as an ES6 module -->
  <script src="../../../features/spectrum-web-components/dist/theme.js" type="module"></script>
  <script src="../../../features/spectrum-web-components/dist/button.js" type="module"></script>
  <script type="module" src="../../../deps/mas/mas.js"></script>

  <script type="module">
    const params = new URLSearchParams(document.location.search);
    const masCommerceService = document.createElement('mas-commerce-service');
    ['locale','language','env'].forEach((attribute) => {
      const value = params.get(attribute);
      if (value) masCommerceService.setAttribute(attribute, value);
    });
    document.head.appendChild(masCommerceService);
  </script>
  <!-- Include Highlight.js stylesheet for syntax highlighting -->
  <link rel="stylesheet" href="../../../styles/styles.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
  <!-- Include any additional stylesheets -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<main>
<sp-theme color="light" scale="medium">
<h1 id="inline-price" tabindex="-1">inline-price <a class="header-anchor" href="#inline-price" href="#inline-price" title="Permalink to this heading">#</a></h1>
<h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>This custom element renders an inline price supporting various display options and configurations. It retrieves pricing information from WCS based on the provided Offer Selector ID.</p>
<p>See <a href="mas.html#terminology">MAS</a> to learn more.</p>
<h3 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" href="#example" title="Permalink to this heading">#</a></h3>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<h2 id="attributes" tabindex="-1">Attributes <a class="header-anchor" href="#attributes" href="#attributes" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Default Value</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data-wcs-osi</code></td>
<td>Offer Selector ID</td>
<td></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>data-display-old-price</code></td>
<td>Whether to display the old price (in case of flex or legacy promo offer)</td>
<td><code>true</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-display-per-unit</code></td>
<td>Whether to display the price per unit (e.g:, per license)</td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-display-recurrence</code></td>
<td>Whether to display the recurrence information (e.g:, /mo)</td>
<td><code>true</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-display-tax</code></td>
<td>Whether to display tax information</td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-perpetual</code></td>
<td>Whether this is a perpetual offer</td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-promotion-code</code></td>
<td>Flex promotion code to apply, if applicable</td>
<td></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-tax-exclusive</code></td>
<td>Whether to force tax exclusive price, if <code>false</code>, itâ€™s automatic, driven by country service</td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>data-template</code></td>
<td>One of price, discount, optical, strikethrough, priceAnnual</td>
<td>price</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="data-template-values" tabindex="-1">data-template values <a class="header-anchor" href="#data-template-values" href="#data-template-values" title="Permalink to this heading">#</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>price</code></td>
<td>The default price of the offer</td>
</tr>
<tr>
<td><code>discount</code></td>
<td>Displays the promo price in percentage, e.g:, 19%</td>
</tr>
<tr>
<td><code>optical</code></td>
<td>For <strong>paid upfront offers</strong>(PUF), renders the monthly price</td>
</tr>
<tr>
<td><code>annual</code></td>
<td>For <strong>annual, billed monthly</strong> offers, renders the yearly price</td>
</tr>
<tr>
<td><code>strikethrough</code></td>
<td>render the price as strikethrough.</td>
</tr>
</tbody>
</table>
<h3 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" href="#examples" title="Permalink to this heading">#</a></h3>
<h4 id="display-per-unit-price-with-tax" tabindex="-1">Display Per Unit Price with Tax <a class="header-anchor" href="#display-per-unit-price-with-tax" href="#display-per-unit-price-with-tax" title="Permalink to this heading">#</a></h4>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
    <span class="hljs-attr">data-display-per-unit</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-display-tax</span>=<span class="hljs-string">&quot;true&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<h4 id="template%3Doptical" tabindex="-1">template=optical <a class="header-anchor" href="#template%3Doptical" href="#template%3Doptical" title="Permalink to this heading">#</a></h4>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;1ZyMOJpSngx9IU5AjEDyp7oRBz843zNlbbtPKbIb1gM&quot;</span>
    <span class="hljs-attr">data-display-per-unit</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-display-tax</span>=<span class="hljs-string">&quot;true&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
vs
<span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;1ZyMOJpSngx9IU5AjEDyp7oRBz843zNlbbtPKbIb1gM&quot;</span>
    <span class="hljs-attr">data-display-per-unit</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-display-tax</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-template</span>=<span class="hljs-string">&quot;optical&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<h4 id="template%3Dannual" tabindex="-1">template=annual <a class="header-anchor" href="#template%3Dannual" href="#template%3Dannual" title="Permalink to this heading">#</a></h4>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;Mutn1LYoGojkrcMdCLO7LQlx1FyTHw27ETsfLv0h8DQ&quot;</span>
    <span class="hljs-attr">data-display-per-unit</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-display-tax</span>=<span class="hljs-string">&quot;true&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
vs
<span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;Mutn1LYoGojkrcMdCLO7LQlx1FyTHw27ETsfLv0h8DQ&quot;</span>
    <span class="hljs-attr">data-display-per-unit</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-display-tax</span>=<span class="hljs-string">&quot;true&quot;</span>
    <span class="hljs-attr">data-template</span>=<span class="hljs-string">&quot;annual&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<h2 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" href="#properties" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isInlinePrice</code></td>
<td>on inline price elements, it will return <code>true</code></td>
</tr>
<tr>
<td><code>onceSettled</code></td>
<td>Promise that resolves when the custom-element either resolves or fails to retrieve the price</td>
</tr>
<tr>
<td><code>options</code></td>
<td>JSON object with the complete set of properties used to resolve the price</td>
</tr>
<tr>
<td><code>value</code></td>
<td>The actual price data that is used to render the inline price.</td>
</tr>
</tbody>
</table>
<h3 id="example-1" tabindex="-1">Example <a class="header-anchor" href="#example-1" href="#example-1" title="Permalink to this heading">#</a></h3>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;ip1&quot;</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;r_JXAnlFI7xD6FxWKl2ODvZriLYBoSL701Kd1hRyhe8&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">
    <span class="hljs-variable language_">document</span>
        .<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;ip1&#x27;</span>)
        .<span class="hljs-title function_">onceSettled</span>()
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;ipValue&#x27;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
                el.<span class="hljs-property">value</span>,
                <span class="hljs-literal">null</span>,
                <span class="hljs-string">&#x27;\t&#x27;</span>,
            );
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;ipOptions&#x27;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
                el.<span class="hljs-property">options</span>,
                <span class="hljs-literal">null</span>,
                <span class="hljs-string">&#x27;\t&#x27;</span>,
            );
        });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h5 id="value-property" tabindex="-1">value property <a class="header-anchor" href="#value-property" href="#value-property" title="Permalink to this heading">#</a></h5>
<pre><code id="ipValue" class="language-json">
</code></pre>
<h5 id="options-property" tabindex="-1">options property <a class="header-anchor" href="#options-property" href="#options-property" title="Permalink to this heading">#</a></h5>
<pre><code id="ipOptions" class="language-json">
</code></pre>
<h2 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" href="#methods" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>requestUpdate(true | false)</code></td>
<td>Causes a re-render using the actual options, force = false by default, meaning if no change is found will skip</td>
</tr>
</tbody>
</table>
<h2 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" href="#events" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mas:pending</code></td>
<td>Fires when inline price starts loading</td>
</tr>
<tr>
<td><code>mas:resolved</code></td>
<td>Fires when the price is successfully resolved</td>
</tr>
<tr>
<td><code>mas:failed</code></td>
<td>Fires when the price could not be found or fetched</td>
</tr>
</tbody>
</table>
<p>For each event, the following CSS classes are toggled on the element: <code>placeholder-pending</code>, <code>placeholder-resolved</code>, <code>placeholder-failed</code>.</p>
<div class="warning">
<p><strong>Note</strong>: Event names with <code>wcms:placeholder</code> prefix may be subject to change.</p>
</div>
<h3 id="example-2" tabindex="-1">Example <a class="header-anchor" href="#example-2" href="#example-2" title="Permalink to this heading">#</a></h3>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>
    <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;ip2&quot;</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;inline-price&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;r_JXAnlFI7xD6FxWKl2ODvZriLYBoSL701Kd1hRyhe8&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btnRefresh&quot;</span>&gt;</span>Refresh<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">const</span> log = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;log&#x27;</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">logger</span> = (<span class="hljs-params">...messages</span>) =&gt;
        (log.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`<span class="hljs-subst">${messages.join(<span class="hljs-string">&#x27; &#x27;</span>)}</span>&lt;br&gt;<span class="hljs-subst">${log.innerHTML}</span>`</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;ip2&#x27;</span>);
    span.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mas:pending&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;inline-price pending&#x27;</span>));
    span.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mas:resolved&#x27;</span>, <span class="hljs-function">() =&gt;</span>
        <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;inline-price resolved&#x27;</span>),
    );
    span.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mas:failed&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;inline-price failed&#x27;</span>));
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btnRefresh&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        span.<span class="hljs-title function_">requestUpdate</span>(<span class="hljs-literal">true</span>);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 id="logs" tabindex="-1">Logs <a class="header-anchor" href="#logs" href="#logs" title="Permalink to this heading">#</a></h4>
<pre><code id="log" class="language-html">
</code></pre>

</sp-theme>
</main>
<script type="module">
  document.querySelectorAll('code.demo').forEach(el => {
      const targetContainer = document.createElement('div');
      targetContainer.classList.toggle('light', el.classList.contains('light'));
      targetContainer.innerHTML = `<h4>Demo: </h4><div class="demo-container">${el.textContent}</div>`;
      el.parentElement.after(targetContainer);
      // Extract and evaluate <script> tags
      const scriptTags = targetContainer.getElementsByTagName('script');
      for (let i = 0; i < scriptTags.length; i++) {
          const script = document.createElement('script');
          script.text = scriptTags[i].text;
          document.body.appendChild(script); // Appends to the document to execute
          scriptTags[i].remove(); // Remove the script tag
      }
  });
</script>
</body>
</html>
