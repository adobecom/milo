
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>M@S Web Components</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="spectrum.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://use.typekit.net/hah7vzn.css">
  
  <!-- Include your custom element script as an ES6 module -->
  <script type="module">
    import { init } from './common.js';
    init();
  </script>
  <!-- Include Highlight.js stylesheet for syntax highlighting -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
  <script type="module" src="./mas-sidenav.js"></script>
</head>
<body class="spectrum spectrum--medium spectrum--light">
<aside class="sidenav">
    <a href="/libs/features/mas/docs/mas.html">Home</a>
    <a href="/libs/features/mas/docs/mas.js.html">mas.js</a>
    <a href="/libs/features/mas/docs/checkout-link.html">Checkout Link</a>
    <a href="/libs/features/mas/docs/checkout-button.html">Checkout Button</a>
    <a href="/libs/features/mas/docs/inline-price.html">Inline Price</a>
    <a href="/libs/features/mas/docs/merch-card.html">Merch Card</a>
    <a href="/libs/features/mas/docs/ccd.html">CCD Gallery</a>
    <a href="/libs/features/mas/docs/adobe-home.html">Adobe Home Gallery</a>
    <a href="/libs/features/mas/docs/plans.html">Plans Gallery</a>
    <a href="/libs/features/mas/docs/benchmarks.html">Benchmarks</a>
</aside>
<main>
<sp-theme color="light" scale="medium">
<h1 id="checkout-button" tabindex="-1">checkout-button <a class="header-anchor" href="#checkout-button" href="#checkout-button" title="Permalink to this heading">#</a></h1>
<h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>This custom element renders a checkout button supporting most of the features documented at <a href="https://wiki.corp.adobe.com/pages/viewpage.action?spaceKey=businessservices&amp;title=UCv3+button+Creation+Guide.">https://wiki.corp.adobe.com/pages/viewpage.action?spaceKey=businessservices&amp;title=UCv3+button+Creation+Guide.</a><br></p>
<p>Behind the scene, it uses <a href="https://git.corp.adobe.com/PandoraUI/commerce-core">https://git.corp.adobe.com/PandoraUI/commerce-core</a> to generate the checkout url.</p>
<p>It requires an Offer Selector ID to retrieve the offer details from WCS.</p>
<p>See <a href="mas.html#terminology">MAS</a> to learn more.</p>
<p>ℹ️ Unlike <code>checkout-link</code>, in order to prevent the default click event from redirecting to checkout url, register the click event using <code>{capture: true}</code>.
<br>See the demo at the <a href="#example-2">end</a></p>
<h3 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" href="#example" title="Permalink to this heading">#</a></h3>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
&gt;</span>
    Buy now
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h2 id="attributes" tabindex="-1">Attributes <a class="header-anchor" href="#attributes" href="#attributes" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Default Value</th>
<th>Required</th>
<th>Provider</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data-wcs-osi</code></td>
<td>Offer Selector ID, can be multiple, separeted by comma</td>
<td></td>
<td><code>true</code></td>
<td>mas.js or consumer code</td>
</tr>
<tr>
<td><code>data-checkout-workflow</code></td>
<td>Target checkout workflow for the generation of checkout urls</td>
<td>UCv3</td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-checkout-workflow-step</code></td>
<td><a href="https://wiki.corp.adobe.com/pages/viewpage.action?spaceKey=businessservices&amp;title=UCv3+button+Creation+Guide#UCv3buttonCreationGuide-RegularWorkflow">workflow step</a> to land on the unified checkout page</td>
<td>email</td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-extra-options</code></td>
<td>additional query params to append to the url, see: <a href="https://wiki.corp.adobe.com/pages/viewpage.action?spaceKey=businessservices&amp;title=UCv3+button+Creation+Guide#UCv3buttonCreationGuide-Tableofpublicqueryparams">Table of public query params</a></td>
<td>{}</td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-ims-country</code></td>
<td>the ims country to code of the user if signed in, overrides the locale country in the generated checkout url</td>
<td></td>
<td><code>false</code></td>
<td>mas.js or consumer code</td>
</tr>
<tr>
<td><code>data-perpetual</code></td>
<td>whether this is a perpetual offer <code>true|false</code></td>
<td></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-promotion-code</code></td>
<td>Flex promotion code, if applicable</td>
<td></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-quantity</code></td>
<td>Quantity of the offer to purchase</td>
<td>1</td>
<td><code>false</code></td>
<td>mas.js or consumer code</td>
</tr>
<tr>
<td><code>data-entitlement</code></td>
<td><code>entitlement</code> flag for client side interpretation</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-upgrade</code></td>
<td><code>upgrade</code> flag for client side interpretation</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-modal</code></td>
<td><code>modal</code> flag for client side interpretation</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>data-analytics-id</code></td>
<td>human-readable, non-translatable button id for analytics. Authored in Studio in button Editor.</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
<tr>
<td><code>daa-ll</code></td>
<td>martech-compatible button id for analytics. Format: ‘${data-analytics-id}-${#}’, where # is the position of the button within a card. E.g. : see-terms-1, buy-now-2</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>mas.js</td>
</tr>
</tbody>
</table>
<h3 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" href="#examples" title="Permalink to this heading">#</a></h3>
<h4 id="custom-workflow-step" tabindex="-1">Custom Workflow Step <a class="header-anchor" href="#custom-workflow-step" href="#custom-workflow-step" title="Permalink to this heading">#</a></h4>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
    <span class="hljs-attr">data-checkout-workflow-step</span>=<span class="hljs-string">&quot;recommendation&quot;</span>
&gt;</span>
    Buy now
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 id="multiple-quantities" tabindex="-1">Multiple Quantities <a class="header-anchor" href="#multiple-quantities" href="#multiple-quantities" title="Permalink to this heading">#</a></h4>
<p>Two photoshop and three acrobat pro single apps (TEAMS):</p>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;yHKQJK2VOMSY5bINgg7oa2ov9RnmnU1oJe4NOg4QTYI,vV01ci-KLH6hYdRfUKMBFx009hdpxZcIRG1-BY_PutE&quot;</span>
    <span class="hljs-attr">data-quantity</span>=<span class="hljs-string">&quot;2,3&quot;</span>
&gt;</span>
    Buy now
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 id="custom-query-params" tabindex="-1">Custom query params <a class="header-anchor" href="#custom-query-params" href="#custom-query-params" title="Permalink to this heading">#</a></h4>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
    <span class="hljs-attr">data-extra-options</span>=<span class="hljs-string">&#x27;{&quot;promoid&quot;:&quot;promo12345&quot;,&quot;mv&quot;:1,&quot;mv2&quot;:2}&#x27;</span>
&gt;</span>
    Buy now
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 id="ims-country" tabindex="-1">IMS Country <a class="header-anchor" href="#ims-country" href="#ims-country" title="Permalink to this heading">#</a></h4>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
    <span class="hljs-attr">data-ims-country</span>=<span class="hljs-string">&quot;JP&quot;</span>
&gt;</span>
    Buy now
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h2 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" href="#properties" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isCheckoutButton</code></td>
<td>on checkout button elements, it will return <code>true</code></td>
</tr>
<tr>
<td><code>onceSettled</code></td>
<td>promise that resolves when the custom-element either resolves or fails to resolve the offer</td>
</tr>
<tr>
<td><code>options</code></td>
<td>JSON object with the complete set of properties used to resolve the offer</td>
</tr>
<tr>
<td><code>value</code></td>
<td>The actual offer that is used to render the checkout button. In some cases WCS can return multiple offers but only one will be picked to render for a single app.</td>
</tr>
</tbody>
</table>
<h3 id="example-1" tabindex="-1">Example <a class="header-anchor" href="#example-1" href="#example-1" title="Permalink to this heading">#</a></h3>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
    <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;co1&quot;</span>
    <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
    <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
    <span class="hljs-attr">data-ims-country</span>=<span class="hljs-string">&quot;CA&quot;</span>
&gt;</span>
    Buy now
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">
    <span class="hljs-variable language_">document</span>
        .<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;co1&#x27;</span>)
        .<span class="hljs-title function_">onceSettled</span>()
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;coValue&#x27;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
                el.<span class="hljs-property">value</span>,
                <span class="hljs-literal">null</span>,
                <span class="hljs-string">&#x27;\t&#x27;</span>,
            );
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;coOptions&#x27;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
                el.<span class="hljs-property">options</span>,
                <span class="hljs-literal">null</span>,
                <span class="hljs-string">&#x27;\t&#x27;</span>,
            );
        });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 id="value-property" tabindex="-1">value property <a class="header-anchor" href="#value-property" href="#value-property" title="Permalink to this heading">#</a></h4>
<pre><code id="coValue" class="language-json">
</code></pre>
<h4 id="options-property" tabindex="-1">options property <a class="header-anchor" href="#options-property" href="#options-property" title="Permalink to this heading">#</a></h4>
<pre><code id="coOptions" class="language-json">
</code></pre>
<h2 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" href="#methods" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>requestUpdate(true | false)</code></td>
<td>Causes a re-render using the actual options, force = false by default, meaning if no change is found will skip</td>
</tr>
</tbody>
</table>
<h2 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" href="#events" title="Permalink to this heading">#</a></h2>
<table>
<thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mas:pending</code></td>
<td>fires when checkout button starts loading</td>
</tr>
<tr>
<td><code>mas:resolved</code></td>
<td>fires when the offer is successfully resolved</td>
</tr>
<tr>
<td><code>mas:failed</code></td>
<td>fires when the offer could not be found or fetched</td>
</tr>
</tbody>
</table>
<br>
<p>For each event, the following css classes are toggled on the element: <code>placeholder-pending</code>, <code>placeholder-resolved</code>, <code>placeholder-failed</code>.</p>
<h3 id="example-2" tabindex="-1">Example <a class="header-anchor" href="#example-2" href="#example-2" title="Permalink to this heading">#</a></h3>
<pre><code class="hljs demo language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;eventsDemo&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
        <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
        &gt;</span>Buy now (click me)&lt;/a
    &gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">is</span>=<span class="hljs-string">&quot;checkout-button&quot;</span>
        <span class="hljs-attr">data-wcs-osi</span>=<span class="hljs-string">&quot;A1xn6EL4pK93bWjM8flffQpfEL-bnvtoQKQAvkx574M&quot;</span>
        &gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;pointer-events: none;&quot;</span>&gt;</span>Span + <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Strong + Buy now<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&lt;/a
    &gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btnRefresh&quot;</span>&gt;</span>Refresh<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">const</span> log = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;log&#x27;</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">logger</span> = (<span class="hljs-params">...messages</span>) =&gt;
        (log.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`<span class="hljs-subst">${messages.join(<span class="hljs-string">&#x27; &#x27;</span>)}</span>&lt;br&gt;<span class="hljs-subst">${log.innerHTML}</span>`</span>);
    <span class="hljs-keyword">const</span> eventsDemo = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;eventsDemo&#x27;</span>);
    eventsDemo.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mas:pending&#x27;</span>, <span class="hljs-function">() =&gt;</span>
        <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;checkout-button pending&#x27;</span>),
    );
    eventsDemo.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mas:resolved&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span>
        <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;checkout-button resolved&#x27;</span>),
    );
    eventsDemo.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mas:failed&#x27;</span>, <span class="hljs-function">() =&gt;</span>
        <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;checkout-button failed&#x27;</span>),
    );
    eventsDemo.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        e.<span class="hljs-title function_">preventDefault</span>();
        e.<span class="hljs-title function_">stopPropagation</span>();
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-property">isCheckoutButton</span>) {
            <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;checkout button is clicked: &#x27;</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">href</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_">logger</span>(<span class="hljs-string">&#x27;element clicked: &#x27;</span>, e.<span class="hljs-property">target</span>);
        }
    }, {<span class="hljs-attr">capture</span>: <span class="hljs-literal">true</span>});
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btnRefresh&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        [...eventsDemo.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&#x27;a&#x27;</span>)].<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span>
            a.<span class="hljs-title function_">requestUpdate</span>(<span class="hljs-literal">true</span>),
        );
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 id="logs" tabindex="-1">Logs <a class="header-anchor" href="#logs" href="#logs" title="Permalink to this heading">#</a></h4>
<pre><code id="log" class="language-html">
</code></pre>

</sp-theme>
</main>
<script type="module">
  document.querySelectorAll('code.demo').forEach(el => {
      const targetContainer = document.createElement('div');
      targetContainer.classList.toggle('light', el.classList.contains('light'));
      targetContainer.innerHTML = `<h4>Demo: </h4><div class="demo-container">${el.textContent}</div>`;
      el.parentElement.after(targetContainer);
      // Extract and evaluate <script> tags
      const scriptTags = targetContainer.getElementsByTagName('script');
      for (let i = 0; i < scriptTags.length; i++) {
          const script = document.createElement('script');
          script.type = 'module';
          script.text = scriptTags[i].text;
          document.body.appendChild(script); // Appends to the document to execute
          scriptTags[i].remove(); // Remove the script tag
      }
  });
</script>
</body>
</html>
