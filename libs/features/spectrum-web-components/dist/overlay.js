/* eslint-disable */
/* Generated by Milo */

var ei=Object.defineProperty;var R=(n,t)=>()=>(n&&(t=n(n=0)),t);var Be=(n,t)=>{for(var e in t)ei(n,e,{get:t[e],enumerable:!0})};var _t,Me=R(()=>{"use strict";_t=class{constructor(t={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,this.isWarm?!1:(this.promise=new Promise(e=>{this.resolve=e,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}});import{SpectrumElement as ni}from"./base.js";import{reparentChildren as ii}from"./shared.js";function V(){return new Promise(n=>requestAnimationFrame(()=>n()))}var xt,et,Ht,ut,dt=R(()=>{"use strict";Me();xt=new _t,et=()=>{},Ht=(n,t,e)=>{let i=new AbortController,o=new Map,s=()=>{i.abort(),e()},r,a,l=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{s()})})}),c=h=>{h.target===n&&(o.set(h.propertyName,o.get(h.propertyName)-1),o.get(h.propertyName)||o.delete(h.propertyName),o.size===0&&s())},p=h=>{h.target===n&&(o.has(h.propertyName)||o.set(h.propertyName,0),o.set(h.propertyName,o.get(h.propertyName)+1),cancelAnimationFrame(l),cancelAnimationFrame(r),cancelAnimationFrame(a))};n.addEventListener("transitionrun",p,{signal:i.signal}),n.addEventListener("transitionend",c,{signal:i.signal}),n.addEventListener("transitioncancel",c,{signal:i.signal}),t()};ut=class n extends ni{constructor(){super(...arguments),this.dispose=et,this.offset=0,this.willPreventClose=!1}async applyFocus(t,e){}get delayed(){return!1}set delayed(t){}get disabled(){return!1}set disabled(t){}get elementResolver(){return this._elementResolver}set elementResolver(t){this._elementResolver=t}async ensureOnDOM(t){}async makeTransition(t){return null}async manageDelay(t){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(t){}get placementController(){return this._placementController}set placementController(t){this._placementController=t}requestSlottable(){}returnFocus(){}get state(){return"closed"}set state(t){}manuallyKeepOpen(){}static update(){let t=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(t)}static async open(t,e,i,o){await Promise.resolve().then(()=>(Rt(),_e));let s=arguments.length===2,r=i||t,a=new this,l=!1;a.dispose=()=>{a.addEventListener("sp-closed",()=>{l||(c(),l=!0),requestAnimationFrame(()=>{a.remove()})}),a.open=!1,a.dispose=et};let c=ii([r],a,{position:"beforeend",prepareCallback:h=>{let m=h.slot;return h.removeAttribute("slot"),()=>{h.slot=m}}});if(!s&&r&&o){let h=t,m=e,f=o;return n.applyOptions(a,{...f,delayed:f.delayed||r.hasAttribute("delayed"),trigger:f.virtualTrigger||h,type:m==="modal"?"modal":m==="hover"?"hint":"auto"}),h.insertAdjacentElement("afterend",a),await a.updateComplete,a.open=!0,a.dispose}let p=e;return a.append(r),n.applyOptions(a,{...p,delayed:p.delayed||r.hasAttribute("delayed")}),a.updateComplete.then(()=>{a.open=!0}),a}static applyOptions(t,e){var i,o;t.delayed=!!e.delayed,t.receivesFocus=(i=e.receivesFocus)!=null?i:"auto",t.triggerElement=e.trigger||null,t.type=e.type||"modal",t.offset=(o=e.offset)!=null?o:0,t.placement=e.placement,t.willPreventClose=!!e.notImmediatelyClosable}disconnectedCallback(){super.disconnectedCallback()}}});var rt,Wt=R(()=>{"use strict";dt();rt=class{constructor(t,e){this.x=0,this.y=0,this.x=t,this.y=e}updateBoundingClientRect(t,e){this.x=t,this.y=e,ut.update()}getBoundingClientRect(){return{width:0,height:0,top:this.y,right:this.x,y:this.y,x:this.x,bottom:this.y,left:this.x,toJSON(){}}}}});var Et,Ct,Y,ye=R(()=>{"use strict";Et=class extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="open",this.newState="closed"}},Ct=class extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="closed",this.newState="open"}},Y=class extends Event{constructor(t,e,{publish:i,interaction:o,reason:s}){super(t,{bubbles:i,composed:i}),this.overlay=e,this.detail={interaction:o,reason:s}}}});import{firstFocusableIn as oi,firstFocusableSlottedIn as ri}from"./shared.js";import{userFocusableSelector as si}from"./shared.js";function He(n){let t=!1;try{t=n.matches(":popover-open")}catch{}let e=!1;try{e=n.matches(":open")}catch{}return t||e}function We(n){class t extends n{async manageDelay(i){if(i===!1||i!==this.open){xt.close(this);return}this.delayed&&await xt.openTimer(this)&&(this.open=!i)}async shouldHidePopover(i){if(i&&this.open!==i)return;let o=async({newState:s}={})=>{s!=="open"&&await this.placementController.resetOverlayPosition()};if(!He(this.dialogEl)){o();return}this.dialogEl.addEventListener("toggle",o,{once:!0})}shouldShowPopover(i){let o=!1;try{o=this.dialogEl.matches(":popover-open")}catch{}let s=!1;try{s=this.dialogEl.matches(":open")}catch{}i&&this.open===i&&!o&&!s&&this.isConnected&&(this.dialogEl.showPopover(),this.managePosition())}async ensureOnDOM(i){ai||await this.shouldHidePopover(i),this.shouldShowPopover(i),await V()}async makeTransition(i){if(this.open!==i)return null;let o=null,s=(a,l)=>()=>{if(a.open=i,l===0){let c=i?Ct:Et;this.dispatchEvent(new c)}!i||(a.matches(si)&&(o=a),o=o||oi(a),o)||a.querySelectorAll("slot").forEach(c=>{o||(o=ri(c))})},r=(a,l)=>async()=>{if(this.open!==i)return;let c=i?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new Y(c,this,{interaction:this.type,publish:!1}));return}let p=async()=>{if(this.open!==i)return;await V();let m=this.triggerElement instanceof rt;this.dispatchEvent(new Y(c,this,{interaction:this.type,publish:m})),a.dispatchEvent(new Y(c,this,{interaction:this.type,publish:!1})),this.triggerElement&&!m&&this.triggerElement.dispatchEvent(new Y(c,this,{interaction:this.type,publish:!0})),this.state=i?"opened":"closed",this.returnFocus(),await V(),await V(),i===this.open&&i===!1&&this.requestSlottable()};if(this.open!==i)return;let h=He(this.dialogEl);i!==!0&&h&&this.isConnected?(this.dialogEl.addEventListener("beforetoggle",()=>{p()},{once:!0}),this.dialogEl.hidePopover()):p()};return this.elements.forEach((a,l)=>{Ht(a,s(a,l),r(a,l))}),o}}return t}var ai,qe=R(()=>{"use strict";Wt();dt();ye();ai=CSS.supports("(overlay: auto)")});import{firstFocusableIn as li,firstFocusableSlottedIn as ci}from"./shared.js";import{userFocusableSelector as ui}from"./shared.js";function je(n){class t extends n{async managePopoverOpen(){await this.managePosition()}async manageDelay(i){if(i===!1||i!==this.open){xt.close(this);return}this.delayed&&await xt.openTimer(this)&&(this.open=!i)}async ensureOnDOM(i){document.body.offsetHeight}async makeTransition(i){if(this.open!==i)return null;let o=null,s=(a,l)=>()=>{if(i===this.open){if(a.open=i,l===0){let c=i?Ct:Et;this.dispatchEvent(new c)}i!==!0||(a.matches(ui)&&(o=a),o=o||li(a),o)||a.querySelectorAll("slot").forEach(c=>{o||(o=ci(c))})}},r=(a,l)=>async()=>{if(this.open!==i)return;let c=i?"sp-opened":"sp-closed";if(a.dispatchEvent(new Y(c,this,{interaction:this.type})),l>0)return;let p=this.triggerElement instanceof rt;this.dispatchEvent(new Y(c,this,{interaction:this.type,publish:p})),this.triggerElement&&!p&&this.triggerElement.dispatchEvent(new Y(c,this,{interaction:this.type,publish:!0})),this.state=i?"opened":"closed",this.returnFocus(),await V(),await V(),i===this.open&&i===!1&&this.requestSlottable()};return this.elements.forEach((a,l)=>{Ht(a,s(a,l),r(a,l))}),o}}return t}var Ke=R(()=>{"use strict";Wt();dt();ye()});var di,be,we,Ve=R(()=>{"use strict";di="showPopover"in document.createElement("div"),be=class{constructor(){this.root=document.body,this.stack=[],this.handleScroll=t=>{t.target!==document&&t.target!==document.documentElement&&t.target!==document.body||this.stack.forEach(e=>{e.open&&(e.type==="auto"&&e.triggerElement instanceof HTMLElement&&e.triggerElement.closest("sp-picker, sp-action-menu")&&t.stopPropagation(),document.dispatchEvent(new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0})))})},this.handlePointerdown=t=>{this.pointerdownPath=t.composedPath(),this.lastOverlay=this.stack[this.stack.length-1]},this.handlePointerup=()=>{let t=this.pointerdownPath;if(this.pointerdownPath=void 0,!this.stack.length||!(t!=null&&t.length))return;let e=this.lastOverlay;this.lastOverlay=void 0;let i=this.stack.length-1,o=this.stack.filter((s,r)=>!t.find(a=>a===s||a===s?.triggerElement&&s?.type==="hint"||r===i&&s!==e&&s.triggerInteraction==="longpress")&&!s.shouldPreventClose()&&s.type!=="manual"&&!(s.type==="modal"&&e!==s));o.reverse(),o.forEach(s=>{this.closeOverlay(s);let r=s.parentOverlayToForceClose;for(;r;)this.closeOverlay(r),r=r.parentOverlayToForceClose})},this.handleBeforetoggle=t=>{let{target:e,newState:i}=t;i!=="open"&&this.closeOverlay(e)},this.handleKeydown=t=>{if(t.code!=="Escape"||!this.stack.length)return;let e=this.stack[this.stack.length-1];if(e?.type==="page"){t.preventDefault();return}if(e?.type==="manual"){this.closeOverlay(e);return}di||e&&this.closeOverlay(e)},this.bindEvents()}get document(){return this.root.ownerDocument||document}bindEvents(){this.document.addEventListener("pointerdown",this.handlePointerdown),this.document.addEventListener("pointerup",this.handlePointerup),this.document.addEventListener("keydown",this.handleKeydown),this.document.addEventListener("scroll",this.handleScroll,{capture:!0})}closeOverlay(t){let e=this.stack.indexOf(t);e>-1&&this.stack.splice(e,1),t.open=!1}overlaysByTriggerElement(t){return this.stack.filter(e=>e.triggerElement===t)}add(t){if(this.stack.includes(t)){let e=this.stack.indexOf(t);e>-1&&(this.stack.splice(e,1),this.stack.push(t));return}if(t.type==="auto"||t.type==="modal"||t.type==="page"){let e="sp-overlay-query-path",i=new Event(e,{composed:!0,bubbles:!0});t.addEventListener(e,o=>{let s=o.composedPath();this.stack.forEach(r=>{!s.find(a=>a===r)&&r.type!=="manual"&&r.type!=="modal"&&this.closeOverlay(r)})},{once:!0}),t.dispatchEvent(i)}else if(t.type==="hint"){if(this.stack.some(e=>e.type!=="manual"&&e.triggerElement&&e.triggerElement===t.triggerElement)){t.open=!1;return}this.stack.forEach(e=>{e.type==="hint"&&this.closeOverlay(e)})}requestAnimationFrame(()=>{this.stack.push(t),t.addEventListener("beforetoggle",this.handleBeforetoggle,{once:!0})})}remove(t){this.closeOverlay(t)}},we=new be});function jt(n,t,e){return B(n,Q(t,e))}function ht(n,t){return typeof n=="function"?n(t):n}function nt(n){return n.split("-")[0]}function pt(n){return n.split("-")[1]}function xe(n){return n==="x"?"y":"x"}function Kt(n){return n==="y"?"height":"width"}function tt(n){return fi.has(nt(n))?"y":"x"}function Vt(n){return xe(tt(n))}function Ye(n,t,e){e===void 0&&(e=!1);let i=pt(n),o=Vt(n),s=Kt(o),r=o==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=kt(r)),[r,kt(r)]}function Ge(n){let t=kt(n);return[qt(n),t,qt(t)]}function qt(n){return n.replace(/start|end/g,t=>pi[t])}function vi(n,t,e){switch(n){case"top":case"bottom":return e?t?ze:Ue:t?Ue:ze;case"left":case"right":return t?mi:gi;default:return[]}}function Xe(n,t,e,i){let o=pt(n),s=vi(nt(n),e==="start",i);return o&&(s=s.map(r=>r+"-"+o),t&&(s=s.concat(s.map(qt)))),s}function kt(n){return n.replace(/left|right|bottom|top/g,t=>hi[t])}function yi(n){return{top:0,right:0,bottom:0,left:0,...n}}function Ee(n){return typeof n!="number"?yi(n):{top:n,right:n,bottom:n,left:n}}function ft(n){let{x:t,y:e,width:i,height:o}=n;return{width:i,height:o,top:e,left:t,right:t+i,bottom:e+o,x:t,y:e}}var Q,B,Ft,Nt,G,hi,pi,fi,Ue,ze,mi,gi,Ut=R(()=>{Q=Math.min,B=Math.max,Ft=Math.round,Nt=Math.floor,G=n=>({x:n,y:n}),hi={left:"right",right:"left",bottom:"top",top:"bottom"},pi={start:"end",end:"start"};fi=new Set(["top","bottom"]);Ue=["left","right"],ze=["right","left"],mi=["top","bottom"],gi=["bottom","top"]});function Ze(n,t,e){let{reference:i,floating:o}=n,s=tt(t),r=Vt(t),a=Kt(r),l=nt(t),c=s==="y",p=i.x+i.width/2-o.width/2,h=i.y+i.height/2-o.height/2,m=i[a]/2-o[a]/2,f;switch(l){case"top":f={x:p,y:i.y-o.height};break;case"bottom":f={x:p,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:h};break;case"left":f={x:i.x-o.width,y:h};break;default:f={x:i.x,y:i.y}}switch(pt(t)){case"start":f[r]-=m*(e&&c?-1:1);break;case"end":f[r]+=m*(e&&c?-1:1);break}return f}async function zt(n,t){var e;t===void 0&&(t={});let{x:i,y:o,platform:s,rects:r,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=ht(t,n),g=Ee(f),C=a[m?h==="floating"?"reference":"floating":h],b=ft(await s.getClippingRect({element:(e=await(s.isElement==null?void 0:s.isElement(C)))==null||e?C:C.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:p,strategy:l})),O=h==="floating"?{x:i,y:o,width:r.floating.width,height:r.floating.height}:r.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},A=ft(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:O,offsetParent:S,strategy:l}):O);return{top:(b.top-A.top+g.top)/k.y,bottom:(A.bottom-b.bottom+g.bottom)/k.y,left:(b.left-A.left+g.left)/k.x,right:(A.right-b.right+g.right)/k.x}}async function wi(n,t){let{placement:e,platform:i,elements:o}=n,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),r=nt(e),a=pt(e),l=tt(e)==="y",c=bi.has(r)?-1:1,p=s&&l?-1:1,h=ht(t,n),{mainAxis:m,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*p,y:m*c}:{x:m*c,y:f*p}}var Je,Qe,tn,bi,en,nn,on,rn=R(()=>{Ut();Ut();Je=async(n,t,e)=>{let{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:r}=e,a=s.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t)),c=await r.getElementRects({reference:n,floating:t,strategy:o}),{x:p,y:h}=Ze(c,i,l),m=i,f={},g=0;for(let y=0;y<a.length;y++){let{name:C,fn:b}=a[y],{x:O,y:S,data:k,reset:A}=await b({x:p,y:h,initialPlacement:i,placement:m,strategy:o,middlewareData:f,rects:c,platform:r,elements:{reference:n,floating:t}});p=O??p,h=S??h,f={...f,[C]:{...f[C],...k}},A&&g<=50&&(g++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await r.getElementRects({reference:n,floating:t,strategy:o}):A.rects),{x:p,y:h}=Ze(c,m,l)),y=-1)}return{x:p,y:h,placement:m,strategy:o,middlewareData:f}};Qe=n=>({name:"arrow",options:n,async fn(t){let{x:e,y:i,placement:o,rects:s,platform:r,elements:a,middlewareData:l}=t,{element:c,padding:p=0}=ht(n,t)||{};if(c==null)return{};let h=Ee(p),m={x:e,y:i},f=Vt(o),g=Kt(f),y=await r.getDimensions(c),C=f==="y",b=C?"top":"left",O=C?"bottom":"right",S=C?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[f]-m[f]-s.floating[g],A=m[f]-s.reference[f],_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c)),N=_?_[S]:0;(!N||!await(r.isElement==null?void 0:r.isElement(_)))&&(N=a.floating[S]||s.floating[g]);let j=k/2-A/2,K=N/2-y[g]/2-1,$=Q(h[b],K),H=Q(h[O],K),T=$,u=N-y[g]-H,d=N/2-y[g]/2+j,v=jt(T,d,u),E=!l.arrow&&pt(o)!=null&&d!==v&&s.reference[g]/2-(d<T?$:H)-y[g]/2<0,w=E?d<T?d-T:d-u:0;return{[f]:m[f]+w,data:{[f]:v,centerOffset:d-v-w,...E&&{alignmentOffset:w}},reset:E}}}),tn=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var e,i;let{placement:o,middlewareData:s,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...C}=ht(n,t);if((e=s.arrow)!=null&&e.alignmentOffset)return{};let b=nt(o),O=tt(a),S=nt(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=m||(S||!y?[kt(a)]:Ge(a)),_=g!=="none";!m&&_&&A.push(...Xe(a,y,g,k));let N=[a,...A],j=await zt(t,C),K=[],$=((i=s.flip)==null?void 0:i.overflows)||[];if(p&&K.push(j[b]),h){let d=Ye(o,r,k);K.push(j[d[0]],j[d[1]])}if($=[...$,{placement:o,overflows:K}],!K.every(d=>d<=0)){var H,T;let d=(((H=s.flip)==null?void 0:H.index)||0)+1,v=N[d];if(v&&(!(h==="alignment"?O!==tt(v):!1)||$.every(P=>P.overflows[0]>0&&tt(P.placement)===O)))return{data:{index:d,overflows:$},reset:{placement:v}};let E=(T=$.filter(w=>w.overflows[0]<=0).sort((w,P)=>w.overflows[1]-P.overflows[1])[0])==null?void 0:T.placement;if(!E)switch(f){case"bestFit":{var u;let w=(u=$.filter(P=>{if(_){let x=tt(P.placement);return x===O||x==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(x=>x>0).reduce((x,F)=>x+F,0)]).sort((P,x)=>P[1]-x[1])[0])==null?void 0:u[0];w&&(E=w);break}case"initialPlacement":E=a;break}if(o!==E)return{reset:{placement:E}}}return{}}}},bi=new Set(["left","top"]);en=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var e,i;let{x:o,y:s,placement:r,middlewareData:a}=t,l=await wi(t,n);return r===((e=a.offset)==null?void 0:e.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:r}}}}},nn=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){let{x:e,y:i,placement:o}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:a={fn:C=>{let{x:b,y:O}=C;return{x:b,y:O}}},...l}=ht(n,t),c={x:e,y:i},p=await zt(t,l),h=tt(nt(o)),m=xe(h),f=c[m],g=c[h];if(s){let C=m==="y"?"top":"left",b=m==="y"?"bottom":"right",O=f+p[C],S=f-p[b];f=jt(O,f,S)}if(r){let C=h==="y"?"top":"left",b=h==="y"?"bottom":"right",O=g+p[C],S=g-p[b];g=jt(O,g,S)}let y=a.fn({...t,[m]:f,[h]:g});return{...y,data:{x:y.x-e,y:y.y-i,enabled:{[m]:s,[h]:r}}}}}},on=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(t){var e,i;let{placement:o,rects:s,platform:r,elements:a}=t,{apply:l=()=>{},...c}=ht(n,t),p=await zt(t,c),h=nt(o),m=pt(o),f=tt(o)==="y",{width:g,height:y}=s.floating,C,b;h==="top"||h==="bottom"?(C=h,b=m===(await(r.isRTL==null?void 0:r.isRTL(a.floating))?"start":"end")?"left":"right"):(b=h,C=m==="end"?"top":"bottom");let O=y-p.top-p.bottom,S=g-p.left-p.right,k=Q(y-p[C],O),A=Q(g-p[b],S),_=!t.middlewareData.shift,N=k,j=A;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(j=S),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(N=O),_&&!m){let $=B(p.left,0),H=B(p.right,0),T=B(p.top,0),u=B(p.bottom,0);f?j=g-2*($!==0||H!==0?$+H:B(p.left,p.right)):N=y-2*(T!==0||u!==0?T+u:B(p.top,p.bottom))}await l({...t,availableWidth:j,availableHeight:N});let K=await r.getDimensions(a.floating);return g!==K.width||y!==K.height?{reset:{rects:!0}}:{}}}}});function Yt(){return typeof window<"u"}function mt(n){return an(n)?(n.nodeName||"").toLowerCase():"#document"}function W(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function X(n){var t;return(t=(an(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function an(n){return Yt()?n instanceof Node||n instanceof W(n).Node:!1}function U(n){return Yt()?n instanceof Element||n instanceof W(n).Element:!1}function Z(n){return Yt()?n instanceof HTMLElement||n instanceof W(n).HTMLElement:!1}function sn(n){return!Yt()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof W(n).ShadowRoot}function Tt(n){let{overflow:t,overflowX:e,overflowY:i,display:o}=z(n);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!xi.has(o)}function ln(n){return Ei.has(mt(n))}function Dt(n){return Ci.some(t=>{try{return n.matches(t)}catch{return!1}})}function Gt(n){let t=Xt(),e=U(n)?z(n):n;return Oi.some(i=>e[i]?e[i]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||Ti.some(i=>(e.willChange||"").includes(i))||Pi.some(i=>(e.contain||"").includes(i))}function cn(n){let t=it(n);for(;Z(t)&&!gt(t);){if(Gt(t))return t;if(Dt(t))return null;t=it(t)}return null}function Xt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function gt(n){return Si.has(mt(n))}function z(n){return W(n).getComputedStyle(n)}function Lt(n){return U(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function it(n){if(mt(n)==="html")return n;let t=n.assignedSlot||n.parentNode||sn(n)&&n.host||X(n);return sn(t)?t.host:t}function un(n){let t=it(n);return gt(t)?n.ownerDocument?n.ownerDocument.body:n.body:Z(t)&&Tt(t)?t:un(t)}function Ot(n,t,e){var i;t===void 0&&(t=[]),e===void 0&&(e=!0);let o=un(n),s=o===((i=n.ownerDocument)==null?void 0:i.body),r=W(o);if(s){let a=Zt(r);return t.concat(r,r.visualViewport||[],Tt(o)?o:[],a&&e?Ot(a):[])}return t.concat(o,Ot(o,[],e))}function Zt(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}var xi,Ei,Ci,Oi,Ti,Pi,Si,dn=R(()=>{xi=new Set(["inline","contents"]);Ei=new Set(["table","td","th"]);Ci=[":popover-open",":modal"];Oi=["transform","translate","scale","rotate","perspective"],Ti=["transform","translate","scale","rotate","perspective","filter"],Pi=["paint","layout","strict","content"];Si=new Set(["html","body","#document"])});function fn(n){let t=z(n),e=parseFloat(t.width)||0,i=parseFloat(t.height)||0,o=Z(n),s=o?n.offsetWidth:e,r=o?n.offsetHeight:i,a=Ft(e)!==s||Ft(i)!==r;return a&&(e=s,i=r),{width:e,height:i,$:a}}function Oe(n){return U(n)?n:n.contextElement}function Pt(n){let t=Oe(n);if(!Z(t))return G(1);let e=t.getBoundingClientRect(),{width:i,height:o,$:s}=fn(t),r=(s?Ft(e.width):e.width)/i,a=(s?Ft(e.height):e.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}function mn(n){let t=W(n);return!Xt()||!t.visualViewport?Ai:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ri(n,t,e){return t===void 0&&(t=!1),!e||t&&e!==W(n)?!1:t}function vt(n,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);let o=n.getBoundingClientRect(),s=Oe(n),r=G(1);t&&(i?U(i)&&(r=Pt(i)):r=Pt(n));let a=Ri(s,e,i)?mn(s):G(0),l=(o.left+a.x)/r.x,c=(o.top+a.y)/r.y,p=o.width/r.x,h=o.height/r.y;if(s){let m=W(s),f=i&&U(i)?W(i):i,g=m,y=Zt(g);for(;y&&i&&f!==g;){let C=Pt(y),b=y.getBoundingClientRect(),O=z(y),S=b.left+(y.clientLeft+parseFloat(O.paddingLeft))*C.x,k=b.top+(y.clientTop+parseFloat(O.paddingTop))*C.y;l*=C.x,c*=C.y,p*=C.x,h*=C.y,l+=S,c+=k,g=W(y),y=Zt(g)}}return ft({width:p,height:h,x:l,y:c})}function Te(n,t){let e=Lt(n).scrollLeft;return t?t.left+e:vt(X(n)).left+e}function gn(n,t,e){e===void 0&&(e=!1);let i=n.getBoundingClientRect(),o=i.left+t.scrollLeft-(e?0:Te(n,i)),s=i.top+t.scrollTop;return{x:o,y:s}}function ki(n){let{elements:t,rect:e,offsetParent:i,strategy:o}=n,s=o==="fixed",r=X(i),a=t?Dt(t.floating):!1;if(i===r||a&&s)return e;let l={scrollLeft:0,scrollTop:0},c=G(1),p=G(0),h=Z(i);if((h||!h&&!s)&&((mt(i)!=="body"||Tt(r))&&(l=Lt(i)),Z(i))){let f=vt(i);c=Pt(i),p.x=f.x+i.clientLeft,p.y=f.y+i.clientTop}let m=r&&!h&&!s?gn(r,l,!0):G(0);return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+p.x+m.x,y:e.y*c.y-l.scrollTop*c.y+p.y+m.y}}function Fi(n){return Array.from(n.getClientRects())}function Ni(n){let t=X(n),e=Lt(n),i=n.ownerDocument.body,o=B(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=B(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),r=-e.scrollLeft+Te(n),a=-e.scrollTop;return z(i).direction==="rtl"&&(r+=B(t.clientWidth,i.clientWidth)-o),{width:o,height:s,x:r,y:a}}function Di(n,t){let e=W(n),i=X(n),o=e.visualViewport,s=i.clientWidth,r=i.clientHeight,a=0,l=0;if(o){s=o.width,r=o.height;let c=Xt();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:r,x:a,y:l}}function Ii(n,t){let e=vt(n,!0,t==="fixed"),i=e.top+n.clientTop,o=e.left+n.clientLeft,s=Z(n)?Pt(n):G(1),r=n.clientWidth*s.x,a=n.clientHeight*s.y,l=o*s.x,c=i*s.y;return{width:r,height:a,x:l,y:c}}function hn(n,t,e){let i;if(t==="viewport")i=Di(n,e);else if(t==="document")i=Ni(X(n));else if(U(t))i=Ii(t,e);else{let o=mn(n);i={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return ft(i)}function vn(n,t){let e=it(n);return e===t||!U(e)||gt(e)?!1:z(e).position==="fixed"||vn(e,t)}function $i(n,t){let e=t.get(n);if(e)return e;let i=Ot(n,[],!1).filter(a=>U(a)&&mt(a)!=="body"),o=null,s=z(n).position==="fixed",r=s?it(n):n;for(;U(r)&&!gt(r);){let a=z(r),l=Gt(r);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&Li.has(o.position)||Tt(r)&&!l&&vn(n,r))?i=i.filter(p=>p!==r):o=a,r=it(r)}return t.set(n,i),i}function Bi(n){let{element:t,boundary:e,rootBoundary:i,strategy:o}=n,r=[...e==="clippingAncestors"?Dt(t)?[]:$i(t,this._c):[].concat(e),i],a=r[0],l=r.reduce((c,p)=>{let h=hn(t,p,o);return c.top=B(h.top,c.top),c.right=Q(h.right,c.right),c.bottom=Q(h.bottom,c.bottom),c.left=B(h.left,c.left),c},hn(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Mi(n){let{width:t,height:e}=fn(n);return{width:t,height:e}}function _i(n,t,e){let i=Z(t),o=X(t),s=e==="fixed",r=vt(n,!0,s,t),a={scrollLeft:0,scrollTop:0},l=G(0);function c(){l.x=Te(o)}if(i||!i&&!s)if((mt(t)!=="body"||Tt(o))&&(a=Lt(t)),i){let f=vt(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else o&&c();s&&!i&&o&&c();let p=o&&!i&&!s?gn(o,a):G(0),h=r.left+a.scrollLeft-l.x-p.x,m=r.top+a.scrollTop-l.y-p.y;return{x:h,y:m,width:r.width,height:r.height}}function Ce(n){return z(n).position==="static"}function pn(n,t){if(!Z(n)||z(n).position==="fixed")return null;if(t)return t(n);let e=n.offsetParent;return X(n)===e&&(e=e.ownerDocument.body),e}function yn(n,t){let e=W(n);if(Dt(n))return e;if(!Z(n)){let o=it(n);for(;o&&!gt(o);){if(U(o)&&!Ce(o))return o;o=it(o)}return e}let i=pn(n,t);for(;i&&ln(i)&&Ce(i);)i=pn(i,t);return i&&gt(i)&&Ce(i)&&!Gt(i)?e:i||cn(n)||e}function Wi(n){return z(n).direction==="rtl"}function bn(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function ji(n,t){let e=null,i,o=X(n);function s(){var a;clearTimeout(i),(a=e)==null||a.disconnect(),e=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();let c=n.getBoundingClientRect(),{left:p,top:h,width:m,height:f}=c;if(a||t(),!m||!f)return;let g=Nt(h),y=Nt(o.clientWidth-(p+m)),C=Nt(o.clientHeight-(h+f)),b=Nt(p),S={rootMargin:-g+"px "+-y+"px "+-C+"px "+-b+"px",threshold:B(0,Q(1,l))||1},k=!0;function A(_){let N=_[0].intersectionRatio;if(N!==l){if(!k)return r();N?r(!1,N):i=setTimeout(()=>{r(!1,1e-7)},1e3)}N===1&&!bn(c,n.getBoundingClientRect())&&r(),k=!1}try{e=new IntersectionObserver(A,{...S,root:o.ownerDocument})}catch{e=new IntersectionObserver(A,S)}e.observe(n)}return r(!0),s}function Pe(n,t,e,i){i===void 0&&(i={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=Oe(n),p=o||s?[...c?Ot(c):[],...Ot(t)]:[];p.forEach(b=>{o&&b.addEventListener("scroll",e,{passive:!0}),s&&b.addEventListener("resize",e)});let h=c&&a?ji(c,e):null,m=-1,f=null;r&&(f=new ResizeObserver(b=>{let[O]=b;O&&O.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=f)==null||S.observe(t)})),e()}),c&&!l&&f.observe(c),f.observe(t));let g,y=l?vt(n):null;l&&C();function C(){let b=vt(n);y&&!bn(y,b)&&e(),y=b,g=requestAnimationFrame(C)}return e(),()=>{var b;p.forEach(O=>{o&&O.removeEventListener("scroll",e),s&&O.removeEventListener("resize",e)}),h?.(),(b=f)==null||b.disconnect(),f=null,l&&cancelAnimationFrame(g)}}var Ai,Li,Hi,qi,wn,xn,Se,En,Cn,On,Tn=R(()=>{rn();Ut();dn();Ai=G(0);Li=new Set(["absolute","fixed"]);Hi=async function(n){let t=this.getOffsetParent||yn,e=this.getDimensions,i=await e(n.floating);return{reference:_i(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};qi={convertOffsetParentRelativeRectToViewportRelativeRect:ki,getDocumentElement:X,getClippingRect:Bi,getOffsetParent:yn,getElementRects:Hi,getClientRects:Fi,getDimensions:Mi,getScale:Pt,isElement:U,isRTL:Wi};wn=en,xn=nn,Se=tn,En=on,Cn=Qe,On=(n,t,e)=>{let i=new Map,o={platform:qi,...e},s={...o.platform,_c:i};return Je(n,t,{...o,platform:s})}});function Jt(n){if(typeof n>"u")return 0;let t=window.devicePixelRatio||1;return Math.round(n*t)/t}var Qt,Ki,Vi,Nr,te,Pn=R(()=>{"use strict";Tn();Qt=8,Ki=100,Vi=n=>{var t;return(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[n])!=null?t:[n]},Nr=Symbol("placement updated"),te=class{constructor(t){this.originalPlacements=new WeakMap,this.allowPlacementUpdate=!1,this.closeForAncestorUpdate=()=>{!this.allowPlacementUpdate&&this.options.type!=="modal"&&this.cleanup&&this.target.dispatchEvent(new Event("close",{bubbles:!0})),this.allowPlacementUpdate=!1},this.updatePlacement=()=>{this.computePlacement()},this.resetOverlayPosition=()=>{!this.target||!this.options||(this.clearOverlayPosition(),this.host.offsetHeight,this.computePlacement())},this.host=t,this.host.addController(this)}async placeOverlay(t=this.target,e=this.options){if(this.target=t,this.options=e,!t||!e)return;let i=Pe(e.trigger,t,this.closeForAncestorUpdate,{ancestorResize:!1,elementResize:!1,layoutShift:!1}),o=Pe(e.trigger,t,this.updatePlacement,{ancestorScroll:!1});this.cleanup=()=>{var s;(s=this.host.elements)==null||s.forEach(r=>{r.addEventListener("sp-closed",()=>{let a=this.originalPlacements.get(r);a&&r.setAttribute("placement",a),this.originalPlacements.delete(r)},{once:!0})}),i(),o()}}async computePlacement(){var t,e;let{options:i,target:o}=this;await(document.fonts?document.fonts.ready:Promise.resolve());let s=i.trigger instanceof HTMLElement?Se():Se({padding:Qt,fallbackPlacements:Vi(i.placement)}),[r=0,a=0]=Array.isArray(i?.offset)?i.offset:[i.offset,0],l=(t=this.host.elements.find(g=>g.tipElement))==null?void 0:t.tipElement,c=[wn({mainAxis:r,crossAxis:a}),xn({padding:Qt}),s,En({padding:Qt,apply:({availableWidth:g,availableHeight:y,rects:{floating:C}})=>{let b=Math.max(Ki,Math.floor(y)),O=C.height;this.initialHeight=this.isConstrained&&this.initialHeight||O,this.isConstrained=O<this.initialHeight||b<=O;let S=this.isConstrained?`${b}px`:"";Object.assign(o.style,{maxWidth:`${Math.floor(g)}px`,maxHeight:S})}}),...l?[Cn({element:l,padding:i.tipPadding||Qt})]:[]],{x:p,y:h,placement:m,middlewareData:f}=await On(i.trigger,o,{placement:i.placement,middleware:c,strategy:"fixed"});if(Object.assign(o.style,{top:"0px",left:"0px",translate:`${Jt(p)}px ${Jt(h)}px`}),o.setAttribute("actual-placement",m),(e=this.host.elements)==null||e.forEach(g=>{this.originalPlacements.has(g)||this.originalPlacements.set(g,g.getAttribute("placement")),g.setAttribute("placement",m)}),l&&f.arrow){let{x:g,y}=f.arrow;Object.assign(l.style,{top:m.startsWith("right")||m.startsWith("left")?"0px":"",left:m.startsWith("bottom")||m.startsWith("top")?"0px":"",translate:`${Jt(g)}px ${Jt(y)}px`})}}clearOverlayPosition(){this.target&&(this.target.style.removeProperty("max-height"),this.target.style.removeProperty("max-width"),this.initialHeight=void 0,this.isConstrained=!1)}hostConnected(){document.addEventListener("sp-update-overlays",this.resetOverlayPosition)}hostUpdated(){var t;this.host.open||((t=this.cleanup)==null||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0,document.removeEventListener("sp-update-overlays",this.resetOverlayPosition)}}});var at,ee,st,ne=R(()=>{"use strict";at=(n=>(n.click="click",n.hover="hover",n.longpress="longpress",n))(at||{}),ee=Symbol("lastInteractionType"),st=class{constructor(t,{overlay:e,isPersistent:i,handleOverlayReady:o}){this.target=t,this.isLazilyOpen=!1,this.isPersistent=!1,this.isPersistent=!!i,this.handleOverlayReady=o,this.isPersistent&&this.init(),this.overlay=e}get activelyOpening(){return!1}get open(){var t,e;return(e=(t=this.overlay)==null?void 0:t.open)!=null?e:this.isLazilyOpen}set open(t){if(t!==this.open){if(this.isLazilyOpen=t,this.overlay){this.overlay.open=t,this.target[ee]=this.type;return}t&&(customElements.whenDefined("sp-overlay").then(async()=>{let{Overlay:e}=await Promise.resolve().then(()=>(ie(),Sn));this.overlay=new e,this.overlay.open=!0,this.target[ee]=this.type}),Promise.resolve().then(()=>(Rt(),_e)))}}get overlay(){return this._overlay}set overlay(t){var e;t&&this.overlay!==t&&(this.overlay&&this.overlay.removeController(this),this._overlay=t,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(e=this.handleOverlayReady)==null||e.call(this,this.overlay))}prepareDescription(t){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var t;this.releaseDescription(),(t=this.abortController)==null||t.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}});import{isAndroid as Ui,isIOS as zi}from"./shared.js";import{conditionAttributeWithId as Yi}from"./base.js";import{randomID as Gi}from"./shared.js";var Xi,Ae,oe,Re=R(()=>{"use strict";dt();ne();Xi=300,Ae={touch:"Double tap and long press for additional options",keyboard:"Press Space or Alt+Down Arrow for additional options",mouse:"Click and hold for additional options"},oe=class extends st{constructor(){super(...arguments),this.type=at.longpress,this.longpressState=null,this.releaseDescription=et,this.handlePointerup=()=>{var t;clearTimeout(this.timeout),this.target&&(this.longpressState=((t=this.overlay)==null?void 0:t.state)==="opening"?"pressed":null,document.removeEventListener("pointerup",this.handlePointerup),document.removeEventListener("pointercancel",this.handlePointerup))}}get activelyOpening(){return this.longpressState==="opening"||this.longpressState==="pressed"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState==="potential"?"opening":"pressed"}handlePointerdown(t){!this.target||t.button!==0||(this.longpressState="potential",document.addEventListener("pointerup",this.handlePointerup),document.addEventListener("pointercancel",this.handlePointerup),"holdAffordance"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"pointer"}}))},Xi))}handleKeydown(t){let{code:e,altKey:i}=t;i&&e==="ArrowDown"&&(t.stopPropagation(),t.stopImmediatePropagation())}handleKeyup(t){let{code:e,altKey:i}=t;if(e==="Space"||i&&e==="ArrowDown"){if(!this.target)return;t.stopPropagation(),this.target.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"keyboard"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(t){if(this.releaseDescription!==et||!this.overlay.elements.length)return;let e=document.createElement("div");e.id=`longpress-describedby-descriptor-${Gi()}`;let i=zi()||Ui()?"touch":"keyboard";e.textContent=Ae[i],e.slot="longpress-describedby-descriptor";let o=t.getRootNode(),s=this.overlay.getRootNode();o===s?this.overlay.append(e):(e.hidden=!("host"in o),t.insertAdjacentElement("afterend",e));let r=Yi(t,"aria-describedby",[e.id]);this.releaseDescription=()=>{r(),e.remove(),this.releaseDescription=et}}shouldCompleteOpen(){this.longpressState=this.longpressState==="pressed"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;let{signal:e}=this.abortController;this.target.addEventListener("longpress",()=>this.handleLongpress(),{signal:e}),this.target.addEventListener("pointerdown",i=>this.handlePointerdown(i),{signal:e}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener("keydown",i=>this.handleKeydown(i),{signal:e}),this.target.addEventListener("keyup",i=>this.handleKeyup(i),{signal:e}))}}});var re,An=R(()=>{"use strict";ne();re=class extends st{constructor(){super(...arguments),this.type=at.click,this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;let{signal:e}=this.abortController;this.target.addEventListener("click",()=>this.handleClick(),{signal:e}),this.target.addEventListener("pointerdown",()=>this.handlePointerdown(),{signal:e})}}});import{conditionAttributeWithId as Rn}from"./base.js";import{isWebKit as Zi}from"./shared.js";import{randomID as Ji}from"./shared.js";var Qi,se,kn=R(()=>{"use strict";dt();ne();Qi=300,se=class extends st{constructor(){super(...arguments),this.type=at.hover,this.elementIds=[],this.focusedin=!1,this.pointerentered=!1}handleKeyup(t){(t.code==="Tab"||t.code==="Escape")&&(this.open=!0)}handleTargetFocusin(){this.target.matches(":focus-visible")&&(Zi()&&this.target[ee]===at.click||(this.open=!0,this.focusedin=!0))}handleTargetFocusout(){this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var t;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((t=this.overlay)!=null&&t.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;let t=this.target.getRootNode(),e=this.overlay.elements[0].getRootNode(),i=this.overlay.getRootNode();t===i?this.prepareOverlayRelativeDescription():t===e&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){let t=Rn(this.target,"aria-describedby",[this.overlay.id]);this.releaseDescription=()=>{t(),this.releaseDescription=et}}prepareContentRelativeDescription(){let t=[],e=this.overlay.elements.map(o=>(t.push(o.id),o.id||(o.id=`${this.overlay.tagName.toLowerCase()}-helper-${Ji()}`),o.id));this.elementIds=t;let i=Rn(this.target,"aria-describedby",e);this.releaseDescription=()=>{i(),this.overlay.elements.map((o,s)=>{o.id=this.elementIds[s]}),this.releaseDescription=et}}doPointerleave(){this.pointerentered=!1;let t=this.target;this.focusedin&&t.matches(":focus-visible")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},Qi))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;let{signal:e}=this.abortController;this.target.addEventListener("keyup",i=>this.handleKeyup(i),{signal:e}),this.target.addEventListener("focusin",()=>this.handleTargetFocusin(),{signal:e}),this.target.addEventListener("focusout",()=>this.handleTargetFocusout(),{signal:e}),this.target.addEventListener("pointerenter",()=>this.handleTargetPointerenter(),{signal:e}),this.target.addEventListener("pointerleave",()=>this.handleTargetPointerleave(),{signal:e}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;let{signal:t}=this.abortController;this.overlay.addEventListener("pointerenter",()=>this.handleHostPointerenter(),{signal:t}),this.overlay.addEventListener("pointerleave",()=>this.handleHostPointerleave(),{signal:t})}}});var Fn,Nn=R(()=>{"use strict";An();kn();Re();Fn={click:re,longpress:oe,hover:se}});var It,Dn,ke=R(()=>{"use strict";It=class extends Event{constructor(t,e,i){super("slottable-request",{bubbles:!1,cancelable:!0,composed:!1}),this.name=t,this.data=e,this.slotName=i!==void 0?`${t}.${i}`:t}},Dn=Symbol("remove-slottable-request")});import{css as to}from"./base.js";var eo,Ln,In=R(()=>{"use strict";eo=to`
    :host{pointer-events:none;--swc-overlay-animation-distance:var(--spectrum-spacing-100);display:contents}:host(:has(>sp-tooltip)){--swc-overlay-animation-distance:var(--spectrum-tooltip-animation-distance)}.dialog{box-sizing:border-box;max-height:calc(100vh - 16px);max-height:calc(100dvh - 16px);max-width:calc(100vw - 16px);height:auto;--sp-overlay-open:true;background:0 0;border:0;margin:0;padding:0;display:flex;position:fixed;inset:0 auto auto 0;overflow:visible;opacity:1!important}.dialog:not([is-visible]){display:none}.dialog:focus{outline:none}dialog:modal{--mod-popover-filter:var(--spectrum-popover-filter)}:host(:not([open])) .dialog{--sp-overlay-open:false}.dialog::backdrop{display:none}.dialog:before{content:"";position:absolute;inset:-999em;pointer-events:auto!important}.dialog:not(.not-immediately-closable):before{display:none}.dialog>div{width:100%}::slotted(*){pointer-events:auto;visibility:visible!important}::slotted(sp-popover){position:static}.dialog:not([actual-placement])[placement*=top]{padding-block:var(--swc-overlay-animation-distance);margin-top:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=right]{padding-inline:var(--swc-overlay-animation-distance);margin-left:calc(-1*var(--swc-overlay-animation-distance))}.dialog:not([actual-placement])[placement*=bottom]{padding-block:var(--swc-overlay-animation-distance);margin-top:calc(-1*var(--swc-overlay-animation-distance))}.dialog:not([actual-placement])[placement*=left]{padding-inline:var(--swc-overlay-animation-distance);margin-left:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=top]{padding-block:var(--swc-overlay-animation-distance);margin-top:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=right]{padding-inline:var(--swc-overlay-animation-distance);margin-left:calc(-1*var(--swc-overlay-animation-distance))}.dialog[actual-placement*=bottom]{padding-block:var(--swc-overlay-animation-distance);margin-top:calc(-1*var(--swc-overlay-animation-distance))}.dialog[actual-placement*=left]{padding-inline:var(--swc-overlay-animation-distance);margin-left:var(--swc-overlay-animation-distance)}slot[name=longpress-describedby-descriptor]{display:none}@supports selector(:open){.dialog{opacity:0}.dialog:open{opacity:1;--mod-popover-filter:var(--spectrum-popover-filter)}}@supports selector(:popover-open){.dialog{opacity:0}.dialog:popover-open{opacity:1;--mod-popover-filter:var(--spectrum-popover-filter)}}@supports (overlay:auto){.dialog{transition:all var(--mod-overlay-animation-duration,var(--spectrum-animation-duration-100,.13s)),translate 0s,display var(--mod-overlay-animation-duration,var(--spectrum-animation-duration-100,.13s));transition-behavior:allow-discrete;display:none}.dialog:popover-open{display:flex}}@supports (not selector(:open)) and (not selector(:popover-open)){:host:not([open]) .dialog{pointer-events:none}.dialog[actual-placement]{z-index:calc(var(--swc-overlay-z-index-base,1000) + var(--swc-overlay-open-count))}}
`,Ln=eo});var Bn,ae,Mn,yt,le,ce,no,_n,Hn,Wn,lt,io,oo,qn,ro,so,ao,lo,co,uo,ho,$n,po,fo,ue,Fe,mo,go,jn,Kn,bt,vo,de,Vn=R(()=>{Bn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ae=Bn.join(","),Mn=typeof Element>"u",yt=Mn?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,le=!Mn&&Element.prototype.getRootNode?function(n){var t;return n==null||(t=n.getRootNode)===null||t===void 0?void 0:t.call(n)}:function(n){return n?.ownerDocument},ce=function n(t,e){var i;e===void 0&&(e=!0);var o=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"inert"),s=o===""||o==="true",r=s||e&&t&&n(t.parentNode);return r},no=function(t){var e,i=t==null||(e=t.getAttribute)===null||e===void 0?void 0:e.call(t,"contenteditable");return i===""||i==="true"},_n=function(t,e,i){if(ce(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(ae));return e&&yt.call(t,ae)&&o.unshift(t),o=o.filter(i),o},Hn=function n(t,e,i){for(var o=[],s=Array.from(t);s.length;){var r=s.shift();if(!ce(r,!1))if(r.tagName==="SLOT"){var a=r.assignedElements(),l=a.length?a:r.children,c=n(l,!0,i);i.flatten?o.push.apply(o,c):o.push({scopeParent:r,candidates:c})}else{var p=yt.call(r,ae);p&&i.filter(r)&&(e||!t.includes(r))&&o.push(r);var h=r.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(r),m=!ce(h,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(r));if(h&&m){var f=n(h===!0?r.children:h.children,!0,i);i.flatten?o.push.apply(o,f):o.push({scopeParent:r,candidates:f})}else s.unshift.apply(s,r.children)}}return o},Wn=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},lt=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||no(t))&&!Wn(t)?0:t.tabIndex},io=function(t,e){var i=lt(t);return i<0&&e&&!Wn(t)?0:i},oo=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},qn=function(t){return t.tagName==="INPUT"},ro=function(t){return qn(t)&&t.type==="hidden"},so=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return e},ao=function(t,e){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===e)return t[i]},lo=function(t){if(!t.name)return!0;var e=t.form||le(t),i=function(a){return e.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=i(window.CSS.escape(t.name));else try{o=i(t.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var s=ao(o,t.form);return!s||s===t},co=function(t){return qn(t)&&t.type==="radio"},uo=function(t){return co(t)&&!lo(t)},ho=function(t){var e,i=t&&le(t),o=(e=i)===null||e===void 0?void 0:e.host,s=!1;if(i&&i!==t){var r,a,l;for(s=!!((r=o)!==null&&r!==void 0&&(a=r.ownerDocument)!==null&&a!==void 0&&a.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&o;){var c,p,h;i=le(o),o=(c=i)===null||c===void 0?void 0:c.host,s=!!((p=o)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(o))}}return s},$n=function(t){var e=t.getBoundingClientRect(),i=e.width,o=e.height;return i===0&&o===0},po=function(t,e){var i=e.displayCheck,o=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=yt.call(t,"details>summary:first-of-type"),r=s?t.parentElement:t;if(yt.call(r,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof o=="function"){for(var a=t;t;){var l=t.parentElement,c=le(t);if(l&&!l.shadowRoot&&o(l)===!0)return $n(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=a}if(ho(t))return!t.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return $n(t);return!1},fo=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var i=0;i<e.children.length;i++){var o=e.children.item(i);if(o.tagName==="LEGEND")return yt.call(e,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}e=e.parentElement}return!1},ue=function(t,e){return!(e.disabled||ce(e)||ro(e)||po(e,t)||so(e)||fo(e))},Fe=function(t,e){return!(uo(e)||lt(e)<0||!ue(t,e))},mo=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},go=function n(t){var e=[],i=[];return t.forEach(function(o,s){var r=!!o.scopeParent,a=r?o.scopeParent:o,l=io(a,r),c=r?n(o.candidates):a;l===0?r?e.push.apply(e,c):e.push(a):i.push({documentOrder:s,tabIndex:l,item:o,isScope:r,content:c})}),i.sort(oo).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(e)},jn=function(t,e){e=e||{};var i;return e.getShadowRoot?i=Hn([t],e.includeContainer,{filter:Fe.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:mo}):i=_n(t,e.includeContainer,Fe.bind(null,e)),go(i)},Kn=function(t,e){e=e||{};var i;return e.getShadowRoot?i=Hn([t],e.includeContainer,{filter:ue.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):i=_n(t,e.includeContainer,ue.bind(null,e)),i},bt=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return yt.call(t,ae)===!1?!1:Fe(e,t)},vo=Bn.concat("iframe").join(","),de=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return yt.call(t,vo)===!1?!1:ue(e,t)}});var Xn={};Be(Xn,{createFocusTrap:()=>Fo});function Ne(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function yo(n){if(Array.isArray(n))return Ne(n)}function bo(n,t,e){return(t=Oo(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function wo(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Un(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,i)}return e}function zn(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Un(Object(e),!0).forEach(function(i){bo(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Un(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Eo(n){return yo(n)||wo(n)||To(n)||xo()}function Co(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Oo(n){var t=Co(n,"string");return typeof t=="symbol"?t:t+""}function To(n,t){if(n){if(typeof n=="string")return Ne(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ne(n,t):void 0}}var Yn,Po,So,Bt,Ao,Ro,Gn,$t,he,ko,Fo,Zn=R(()=>{Vn();Yn={activateTrap:function(t,e){if(t.length>0){var i=t[t.length-1];i!==e&&i._setPausedState(!0)}var o=t.indexOf(e);o===-1||t.splice(o,1),t.push(e)},deactivateTrap:function(t,e){var i=t.indexOf(e);i!==-1&&t.splice(i,1),t.length>0&&!t[t.length-1]._isManuallyPaused()&&t[t.length-1]._setPausedState(!1)}},Po=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},So=function(t){return t?.key==="Escape"||t?.key==="Esc"||t?.keyCode===27},Bt=function(t){return t?.key==="Tab"||t?.keyCode===9},Ao=function(t){return Bt(t)&&!t.shiftKey},Ro=function(t){return Bt(t)&&t.shiftKey},Gn=function(t){return setTimeout(t,0)},$t=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];return typeof t=="function"?t.apply(void 0,i):t},he=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ko=[],Fo=function(t,e){var i=e?.document||document,o=e?.trapStack||ko,s=zn({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Ao,isKeyBackward:Ro},e),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(u,d,v){return u&&u[d]!==void 0?u[d]:s[v||d]},c=function(u,d){var v=typeof d?.composedPath=="function"?d.composedPath():void 0;return r.containerGroups.findIndex(function(E){var w=E.container,P=E.tabbableNodes;return w.contains(u)||v?.includes(w)||P.find(function(x){return x===u})})},p=function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=d.hasFallback,E=v===void 0?!1:v,w=d.params,P=w===void 0?[]:w,x=s[u];if(typeof x=="function"&&(x=x.apply(void 0,Eo(P))),x===!0&&(x=void 0),!x){if(x===void 0||x===!1)return x;throw new Error("`".concat(u,"` was specified but was not a node, or did not return a node"))}var F=x;if(typeof x=="string"){try{F=i.querySelector(x)}catch(D){throw new Error("`".concat(u,'` appears to be an invalid selector; error="').concat(D.message,'"'))}if(!F&&!E)throw new Error("`".concat(u,"` as selector refers to no known node"))}return F},h=function(){var u=p("initialFocus",{hasFallback:!0});if(u===!1)return!1;if(u===void 0||u&&!de(u,s.tabbableOptions))if(c(i.activeElement)>=0)u=i.activeElement;else{var d=r.tabbableGroups[0],v=d&&d.firstTabbableNode;u=v||p("fallbackFocus")}else u===null&&(u=p("fallbackFocus"));if(!u)throw new Error("Your focus-trap needs to have at least one focusable element");return u},m=function(){if(r.containerGroups=r.containers.map(function(u){var d=jn(u,s.tabbableOptions),v=Kn(u,s.tabbableOptions),E=d.length>0?d[0]:void 0,w=d.length>0?d[d.length-1]:void 0,P=v.find(function(D){return bt(D)}),x=v.slice().reverse().find(function(D){return bt(D)}),F=!!d.find(function(D){return lt(D)>0});return{container:u,tabbableNodes:d,focusableNodes:v,posTabIndexesFound:F,firstTabbableNode:E,lastTabbableNode:w,firstDomTabbableNode:P,lastDomTabbableNode:x,nextTabbableNode:function(ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ot=d.indexOf(ct);return ot<0?St?v.slice(v.indexOf(ct)+1).find(function(At){return bt(At)}):v.slice(0,v.indexOf(ct)).reverse().find(function(At){return bt(At)}):d[ot+(St?1:-1)]}}}),r.tabbableGroups=r.containerGroups.filter(function(u){return u.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(r.containerGroups.find(function(u){return u.posTabIndexesFound})&&r.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},f=function(u){var d=u.activeElement;if(d)return d.shadowRoot&&d.shadowRoot.activeElement!==null?f(d.shadowRoot):d},g=function(u){if(u!==!1&&u!==f(document)){if(!u||!u.focus){g(h());return}u.focus({preventScroll:!!s.preventScroll}),r.mostRecentlyFocusedNode=u,Po(u)&&u.select()}},y=function(u){var d=p("setReturnFocus",{params:[u]});return d||(d===!1?!1:u)},C=function(u){var d=u.target,v=u.event,E=u.isBackward,w=E===void 0?!1:E;d=d||he(v),m();var P=null;if(r.tabbableGroups.length>0){var x=c(d,v),F=x>=0?r.containerGroups[x]:void 0;if(x<0)w?P=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:P=r.tabbableGroups[0].firstTabbableNode;else if(w){var D=r.tabbableGroups.findIndex(function(ge){var ve=ge.firstTabbableNode;return d===ve});if(D<0&&(F.container===d||de(d,s.tabbableOptions)&&!bt(d,s.tabbableOptions)&&!F.nextTabbableNode(d,!1))&&(D=x),D>=0){var ct=D===0?r.tabbableGroups.length-1:D-1,St=r.tabbableGroups[ct];P=lt(d)>=0?St.lastTabbableNode:St.lastDomTabbableNode}else Bt(v)||(P=F.nextTabbableNode(d,!1))}else{var ot=r.tabbableGroups.findIndex(function(ge){var ve=ge.lastTabbableNode;return d===ve});if(ot<0&&(F.container===d||de(d,s.tabbableOptions)&&!bt(d,s.tabbableOptions)&&!F.nextTabbableNode(d))&&(ot=x),ot>=0){var At=ot===r.tabbableGroups.length-1?0:ot+1,$e=r.tabbableGroups[At];P=lt(d)>=0?$e.firstTabbableNode:$e.firstDomTabbableNode}else Bt(v)||(P=F.nextTabbableNode(d))}}else P=p("fallbackFocus");return P},b=function(u){var d=he(u);if(!(c(d,u)>=0)){if($t(s.clickOutsideDeactivates,u)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}$t(s.allowOutsideClick,u)||u.preventDefault()}},O=function(u){var d=he(u),v=c(d,u)>=0;if(v||d instanceof Document)v&&(r.mostRecentlyFocusedNode=d);else{u.stopImmediatePropagation();var E,w=!0;if(r.mostRecentlyFocusedNode)if(lt(r.mostRecentlyFocusedNode)>0){var P=c(r.mostRecentlyFocusedNode),x=r.containerGroups[P].tabbableNodes;if(x.length>0){var F=x.findIndex(function(D){return D===r.mostRecentlyFocusedNode});F>=0&&(s.isKeyForward(r.recentNavEvent)?F+1<x.length&&(E=x[F+1],w=!1):F-1>=0&&(E=x[F-1],w=!1))}}else r.containerGroups.some(function(D){return D.tabbableNodes.some(function(ct){return lt(ct)>0})})||(w=!1);else w=!1;w&&(E=C({target:r.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(r.recentNavEvent)})),g(E||r.mostRecentlyFocusedNode||h())}r.recentNavEvent=void 0},S=function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.recentNavEvent=u;var v=C({event:u,isBackward:d});v&&(Bt(u)&&u.preventDefault(),g(v))},k=function(u){(s.isKeyForward(u)||s.isKeyBackward(u))&&S(u,s.isKeyBackward(u))},A=function(u){So(u)&&$t(s.escapeDeactivates,u)!==!1&&(u.preventDefault(),a.deactivate())},_=function(u){var d=he(u);c(d,u)>=0||$t(s.clickOutsideDeactivates,u)||$t(s.allowOutsideClick,u)||(u.preventDefault(),u.stopImmediatePropagation())},N=function(){if(r.active)return Yn.activateTrap(o,a),r.delayInitialFocusTimer=s.delayInitialFocus?Gn(function(){g(h())}):g(h()),i.addEventListener("focusin",O,!0),i.addEventListener("mousedown",b,{capture:!0,passive:!1}),i.addEventListener("touchstart",b,{capture:!0,passive:!1}),i.addEventListener("click",_,{capture:!0,passive:!1}),i.addEventListener("keydown",k,{capture:!0,passive:!1}),i.addEventListener("keydown",A),a},j=function(){if(r.active)return i.removeEventListener("focusin",O,!0),i.removeEventListener("mousedown",b,!0),i.removeEventListener("touchstart",b,!0),i.removeEventListener("click",_,!0),i.removeEventListener("keydown",k,!0),i.removeEventListener("keydown",A),a},K=function(u){var d=u.some(function(v){var E=Array.from(v.removedNodes);return E.some(function(w){return w===r.mostRecentlyFocusedNode})});d&&g(h())},$=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(K):void 0,H=function(){$&&($.disconnect(),r.active&&!r.paused&&r.containers.map(function(u){$.observe(u,{subtree:!0,childList:!0})}))};return a={get active(){return r.active},get paused(){return r.paused},activate:function(u){if(r.active)return this;var d=l(u,"onActivate"),v=l(u,"onPostActivate"),E=l(u,"checkCanFocusTrap");E||m(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=f(i),d?.();var w=function(){E&&m(),N(),H(),v?.()};return E?(E(r.containers.concat()).then(w,w),this):(w(),this)},deactivate:function(u){if(!r.active)return this;var d=zn({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},u);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,j(),r.active=!1,r.paused=!1,H(),Yn.deactivateTrap(o,a);var v=l(d,"onDeactivate"),E=l(d,"onPostDeactivate"),w=l(d,"checkCanReturnFocus"),P=l(d,"returnFocus","returnFocusOnDeactivate");v?.();var x=function(){Gn(function(){P&&g(y(r.nodeFocusedBeforeActivation)),E?.()})};return P&&w?(w(y(r.nodeFocusedBeforeActivation)).then(x,x),this):(x(),this)},pause:function(u){return r.active?(r.manuallyPaused=!0,this._setPausedState(!0,u)):this},unpause:function(u){return r.active?(r.manuallyPaused=!1,o[o.length-1]!==this?this:this._setPausedState(!1,u)):this},updateContainerElements:function(u){var d=[].concat(u).filter(Boolean);return r.containers=d.map(function(v){return typeof v=="string"?i.querySelector(v):v}),r.active&&m(),H(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return r.manuallyPaused}},_setPausedState:{value:function(u,d){if(r.paused===u)return this;if(r.paused=u,u){var v=l(d,"onPause"),E=l(d,"onPostPause");v?.(),j(),H(),E?.()}else{var w=l(d,"onUnpause"),P=l(d,"onPostUnpause");w?.(),m(),N(),H(),P?.()}return this}}}),a.updateContainerElements(t),a}});var Sn={};Be(Sn,{LONGPRESS_INSTRUCTIONS:()=>Ae,Overlay:()=>fe});import{html as De}from"./base.js";import{property as J,query as Jn,queryAssignedElements as Lo,state as Io}from"./base.js";import{ElementResolutionController as $o,elementResolverUpdatedSymbol as Bo}from"./reactive-controllers.js";import{ifDefined as pe,styleMap as Mo}from"./base.js";import{randomID as _o}from"./shared.js";var No,Do,M,Ho,Qn,L,fe,ie=R(()=>{"use strict";dt();qe();Ke();Ve();Wt();Pn();Re();Nn();ke();In();No=Object.defineProperty,Do=Object.getOwnPropertyDescriptor,M=(n,t,e,i)=>{for(var o=i>1?void 0:i?Do(t,e):t,s=n.length-1,r;s>=0;s--)(r=n[s])&&(o=(i?r(t,e,o):r(o))||o);return i&&o&&No(t,e,o),o},Ho="showPopover"in document.createElement("div"),Qn=We(ut);Ho||(Qn=je(ut));L=class Le extends Qn{constructor(){super(...arguments),this._delayed=!1,this._disabled=!1,this.offset=0,this._open=!1,this.lastRequestSlottableState=!1,this.receivesFocus="auto",this._state="closed",this.triggerElement=null,this.type="auto",this.wasOpen=!1,this._focusTrap=null,this.closeOnFocusOut=t=>{if(!t.relatedTarget)return;let e=new Event("overlay-relation-query",{bubbles:!0,composed:!0});t.relatedTarget.addEventListener(e.type,i=>{i.composedPath().some(o=>o===this)||(this.open=!1)}),t.relatedTarget.dispatchEvent(e)},this.closeOnCancelEvent=()=>{this.open=!1}}get delayed(){var t;return((t=this.elements.at(-1))==null?void 0:t.hasAttribute("delayed"))||this._delayed}set delayed(t){this._delayed=t}get disabled(){return this._disabled}set disabled(t){var e;this._disabled=t,t?((e=this.strategy)==null||e.abort(),this.wasOpen=this.open,this.open=!1):(this.bindEvents(),this.open=this.open||this.wasOpen,this.wasOpen=!1)}get hasNonVirtualTrigger(){return!!this.triggerElement&&!(this.triggerElement instanceof rt)}get placementController(){return this._placementController||(this._placementController=new te(this)),this._placementController}get open(){return this._open}set open(t){var e;t&&this.disabled||t!==this.open&&((e=this.strategy)!=null&&e.activelyOpening&&!t||(this._open=t,this.open&&(Le.openCount+=1),this.requestUpdate("open",!this.open),this.open&&this.requestSlottable()))}get state(){return this._state}set state(t){var e;if(t===this.state)return;let i=this.state;this._state=t,(this.state==="opened"||this.state==="closed")&&((e=this.strategy)==null||e.shouldCompleteOpen()),this.requestUpdate("state",i)}get elementResolver(){return this._elementResolver||(this._elementResolver=new $o(this)),this._elementResolver}get popoverValue(){if("popover"in this)switch(this.type){case"modal":return"auto";case"page":return"manual";case"hint":return"manual";default:return this.type}}get requiresPositioning(){return!(this.type==="page"||!this.open||!this.triggerElement||!this.placement&&this.type!=="hint")}managePosition(){if(!this.requiresPositioning||!this.open)return;let t=this.offset||0,e=this.triggerElement,i=this.placement||"right",o=this.tipPadding;this.placementController.placeOverlay(this.dialogEl,{offset:t,placement:i,tipPadding:o,trigger:e,type:this.type})}async managePopoverOpen(){super.managePopoverOpen();let t=this.open;if(this.open!==t||(await this.manageDelay(t),this.open!==t)||(this.triggerInteraction==="longpress"&&await V(),await this.ensureOnDOM(t),this.open!==t))return;let e=await this.makeTransition(t);if(this.open===t){if(t){let i=await Promise.resolve().then(()=>(Zn(),Xn));this._focusTrap=i.createFocusTrap(this.dialogEl,{initialFocus:e||void 0,tabbableOptions:{getShadowRoot:!0},fallbackFocus:()=>(this.dialogEl.setAttribute("tabIndex","-1"),this.dialogEl),escapeDeactivates:!1}),(this.type==="modal"||this.type==="page")&&this._focusTrap.activate()}await this.applyFocus(t,e)}}async applyFocus(t,e){if(!(this.receivesFocus==="false"||this.type==="hint")){if(await V(),await V(),t===this.open&&!this.open){this.hasNonVirtualTrigger&&this.contains(this.getRootNode().activeElement)&&this.triggerElement.focus();return}e?.focus()}}returnFocus(){var t;if(this.open||this.type==="hint")return;let e=()=>{var i,o;let s=[],r=document.activeElement;for(;(i=r?.shadowRoot)!=null&&i.activeElement;)r=r.shadowRoot.activeElement;for(;r;){let a=r.assignedSlot||r.parentElement||((o=r.getRootNode())==null?void 0:o.host);a&&s.push(a),r=a}return s};this.receivesFocus!=="false"&&(t=this.triggerElement)!=null&&t.focus&&(this.contains(this.getRootNode().activeElement)||e().includes(this)||document.activeElement===document.body)&&this.triggerElement.focus()}async manageOpen(t){var e;if(!this.isConnected&&this.open)return;this.hasUpdated||await this.updateComplete,this.open?(we.add(this),this.willPreventClose&&(document.addEventListener("pointerup",()=>{this.dialogEl.classList.toggle("not-immediately-closable",!1),this.willPreventClose=!1},{once:!0}),this.dialogEl.classList.toggle("not-immediately-closable",!0))):(t&&((e=this._focusTrap)==null||e.deactivate(),this._focusTrap=null,this.dispose()),we.remove(this)),this.open&&this.state!=="opened"?this.state="opening":!this.open&&this.state!=="closed"&&(this.state="closing"),this.managePopoverOpen();let i=this.getRootNode();this.type==="auto"&&(this.open?i.addEventListener("focusout",this.closeOnFocusOut,{capture:!0}):i.removeEventListener("focusout",this.closeOnFocusOut,{capture:!0})),(this.type==="modal"||this.type==="page")&&(this.open?i.addEventListener("cancel",this.closeOnCancelEvent,{capture:!0}):i.removeEventListener("cancel",this.closeOnCancelEvent,{capture:!0}))}bindEvents(){var t;(t=this.strategy)==null||t.abort(),this.strategy=void 0,this.hasNonVirtualTrigger&&this.triggerInteraction&&(this.strategy=new Fn[this.triggerInteraction](this.triggerElement,{overlay:this}))}handleBeforetoggle(t){t.newState!=="open"&&this.handleBrowserClose(t)}handleBrowserClose(t){var e;if(t.stopPropagation(),!((e=this.strategy)!=null&&e.activelyOpening)){this.open=!1;return}this.manuallyKeepOpen()}manuallyKeepOpen(){this.open=!0,this.placementController.allowPlacementUpdate=!0,this.manageOpen(!1)}handleSlotchange(){var t,e;this.elements.length?this.hasNonVirtualTrigger&&((e=this.strategy)==null||e.prepareDescription(this.triggerElement)):(t=this.strategy)==null||t.releaseDescription()}shouldPreventClose(){let t=this.willPreventClose;return this.willPreventClose=!1,t}requestSlottable(){this.lastRequestSlottableState!==this.open&&(this.open||document.body.offsetHeight,this.dispatchEvent(new It("overlay-content",this.open?{}:Dn)),this.lastRequestSlottableState=this.open)}willUpdate(t){var e;if(this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${_o()}`),t.has("open")&&(this.hasUpdated||this.open)&&this.manageOpen(t.get("open")),t.has("trigger")){let[o,s]=((e=this.trigger)==null?void 0:e.split("@"))||[];this.elementResolver.selector=o?`#${o}`:"",this.triggerInteraction=s}let i=!1;t.has(Bo)&&(i=this.triggerElement,this.triggerElement=this.elementResolver.element),t.has("triggerElement")&&(i=t.get("triggerElement")),i!==!1&&this.bindEvents()}updated(t){super.updated(t),t.has("placement")&&(this.placement?this.dialogEl.setAttribute("actual-placement",this.placement):this.dialogEl.removeAttribute("actual-placement"),this.open&&typeof t.get("placement")<"u"&&this.placementController.resetOverlayPosition()),t.has("state")&&this.state==="closed"&&typeof t.get("state")<"u"&&this.placementController.clearOverlayPosition()}renderContent(){return De`
            <slot @slotchange=${this.handleSlotchange}></slot>
        `}get dialogStyleMap(){return{"--swc-overlay-open-count":Le.openCount.toString()}}renderPopover(){return De`
            <div
                class="dialog"
                part="dialog"
                role=${pe(this.type==="modal"||this.type==="page"?"dialog":void 0)}
                aria-modal=${pe(this.type==="modal"||this.type==="page"?"true":void 0)}
                placement=${pe(this.requiresPositioning?this.placement||"right":void 0)}
                popover=${pe(this.popoverValue)}
                style=${Mo(this.dialogStyleMap)}
                @beforetoggle=${this.handleBeforetoggle}
                @close=${this.handleBrowserClose}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </div>
        `}render(){return De`
            ${this.renderPopover()}
            <slot name="longpress-describedby-descriptor"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("close",()=>{this.open=!1}),this.hasUpdated&&this.bindEvents()}disconnectedCallback(){var t;(t=this.strategy)==null||t.releaseDescription(),this.open=!1,super.disconnectedCallback()}};L.styles=[Ln],L.openCount=1,M([J({type:Boolean})],L.prototype,"delayed",1),M([Jn(".dialog")],L.prototype,"dialogEl",2),M([J({type:Boolean})],L.prototype,"disabled",1),M([Lo({flatten:!0,selector:':not([slot="longpress-describedby-descriptor"], slot)'})],L.prototype,"elements",2),M([J({type:Number})],L.prototype,"offset",2),M([J({type:Boolean,reflect:!0})],L.prototype,"open",1),M([J()],L.prototype,"placement",2),M([J({attribute:"receives-focus"})],L.prototype,"receivesFocus",2),M([Jn("slot")],L.prototype,"slotEl",2),M([Io()],L.prototype,"state",1),M([J({type:Number,attribute:"tip-padding"})],L.prototype,"tipPadding",2),M([J()],L.prototype,"trigger",2),M([J({attribute:!1})],L.prototype,"triggerElement",2),M([J({attribute:!1})],L.prototype,"triggerInteraction",2),M([J()],L.prototype,"type",2);fe=L});var _e={};import{defineElement as Wo}from"./base.js";var Rt=R(()=>{"use strict";ie();Wo("sp-overlay",fe)});Rt();import{defineElement as zo}from"./base.js";Rt();import{html as Mt,SpectrumElement as Uo}from"./base.js";import{property as wt,query as Ie,state as me}from"./base.js";import{css as qo}from"./base.js";var jo=qo`
    slot[name=longpress-describedby-descriptor]{display:none}
`,ti=jo;var Ko=Object.defineProperty,Vo=Object.getOwnPropertyDescriptor,q=(n,t,e,i)=>{for(var o=i>1?void 0:i?Vo(t,e):t,s=n.length-1,r;s>=0;s--)(r=n[s])&&(o=(i?r(t,e,o):r(o))||o);return i&&o&&Ko(t,e,o),o},I=class extends Uo{constructor(){super(...arguments),this.offset=6,this.disabled=!1,this.receivesFocus="auto",this.clickContent=[],this.longpressContent=[],this.hoverContent=[],this.targetContent=[]}static get styles(){return[ti]}getAssignedElementsFromSlot(t){return t.assignedElements({flatten:!0})}handleTriggerContent(t){this.targetContent=this.getAssignedElementsFromSlot(t.target)}handleSlotContent(t){switch(t.target.name){case"click-content":this.clickContent=this.getAssignedElementsFromSlot(t.target);break;case"longpress-content":this.longpressContent=this.getAssignedElementsFromSlot(t.target);break;case"hover-content":this.hoverContent=this.getAssignedElementsFromSlot(t.target);break}}handleBeforetoggle(t){let{target:e}=t,i;if(e===this.clickOverlayElement)i="click";else if(e===this.longpressOverlayElement)i="longpress";else if(e===this.hoverOverlayElement)i="hover";else return;t.newState==="open"?this.open=i:this.open===i&&(this.open=void 0)}update(t){var e,i,o,s,r,a;t.has("clickContent")&&(this.clickPlacement=((e=this.clickContent[0])==null?void 0:e.getAttribute("placement"))||((i=this.clickContent[0])==null?void 0:i.getAttribute("direction"))||void 0),t.has("hoverContent")&&(this.hoverPlacement=((o=this.hoverContent[0])==null?void 0:o.getAttribute("placement"))||((s=this.hoverContent[0])==null?void 0:s.getAttribute("direction"))||void 0),t.has("longpressContent")&&(this.longpressPlacement=((r=this.longpressContent[0])==null?void 0:r.getAttribute("placement"))||((a=this.longpressContent[0])==null?void 0:a.getAttribute("direction"))||void 0),super.update(t)}renderSlot(t){return Mt`
            <slot name=${t} @slotchange=${this.handleSlotContent}></slot>
        `}renderClickOverlay(){var t;let e=this.renderSlot("click-content"),i=Mt`
            <sp-overlay
                id="click-overlay"
                ?disabled=${this.disabled||!this.clickContent.length}
                ?open=${this.open==="click"&&!!this.clickContent.length}
                .offset=${this.offset}
                .placement=${this.clickPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"click"}
                .type=${this.type!=="modal"?"auto":"modal"}
                @beforetoggle=${this.handleBeforetoggle}
                .receivesFocus=${this.receivesFocus}
            >
                ${e}
            </sp-overlay>
        `;return(t=this.triggeredBy)!=null&&t.includes("click")||this.clickContent.length?i:e}renderHoverOverlay(){var t;let e=this.renderSlot("hover-content"),i=Mt`
            <sp-overlay
                id="hover-overlay"
                ?open=${this.open==="hover"&&!!this.hoverContent.length}
                ?disabled=${this.disabled||!this.hoverContent.length||!!this.open&&this.open!=="hover"}
                .offset=${this.offset}
                .placement=${this.hoverPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"hover"}
                .type=${"hint"}
                @beforetoggle=${this.handleBeforetoggle}
                .receivesFocus=${this.receivesFocus}
            >
                ${e}
            </sp-overlay>
        `;return(t=this.triggeredBy)!=null&&t.includes("hover")||this.hoverContent.length?i:e}renderLongpressOverlay(){var t;let e=this.renderSlot("longpress-content"),i=Mt`
            <sp-overlay
                id="longpress-overlay"
                ?disabled=${this.disabled||!this.longpressContent.length}
                ?open=${this.open==="longpress"&&!!this.longpressContent.length}
                .offset=${this.offset}
                .placement=${this.longpressPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"longpress"}
                .type=${"auto"}
                @beforetoggle=${this.handleBeforetoggle}
                .receivesFocus=${this.receivesFocus}
            >
                ${e}
            </sp-overlay>
            <slot name="longpress-describedby-descriptor"></slot>
        `;return(t=this.triggeredBy)!=null&&t.includes("longpress")||this.longpressContent.length?i:e}render(){return Mt`
            <slot
                id="trigger"
                name="trigger"
                @slotchange=${this.handleTriggerContent}
            ></slot>
            ${[this.renderClickOverlay(),this.renderHoverOverlay(),this.renderLongpressOverlay()]}
        `}updated(t){if(super.updated(t),this.disabled&&t.has("disabled")){this.open=void 0;return}}async getUpdateComplete(){return await super.getUpdateComplete()}};q([wt({attribute:"triggered-by"})],I.prototype,"triggeredBy",2),q([wt({reflect:!0})],I.prototype,"placement",2),q([wt()],I.prototype,"type",2),q([wt({type:Number})],I.prototype,"offset",2),q([wt({reflect:!0})],I.prototype,"open",2),q([wt({type:Boolean,reflect:!0})],I.prototype,"disabled",2),q([wt({attribute:"receives-focus"})],I.prototype,"receivesFocus",2),q([me()],I.prototype,"clickContent",2),q([me()],I.prototype,"longpressContent",2),q([me()],I.prototype,"hoverContent",2),q([me()],I.prototype,"targetContent",2),q([Ie("#click-overlay",!0)],I.prototype,"clickOverlayElement",2),q([Ie("#longpress-overlay",!0)],I.prototype,"longpressOverlayElement",2),q([Ie("#hover-overlay",!0)],I.prototype,"hoverOverlayElement",2);zo("overlay-trigger",I);ie();ke();export{fe as Overlay,It as SlottableRequestEvent};
