/* eslint-disable */
/* Generated by Milo */

var A=(e,t)=>()=>(e&&(t=e(e=0)),t);var Pt,ne=A(()=>{"use strict";Pt=class{constructor(t={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}});import{SpectrumElement as Ke}from"/libs/features/spectrum-web-components/dist/base.js";import{reparentChildren as Ye}from"/libs/features/spectrum-web-components/dist/shared.js";function Z(){return new Promise(e=>requestAnimationFrame(()=>e()))}function oe(){document.body.offsetHeight}var at,V,G,J,P,lt,rt,tt=A(()=>{"use strict";ne();at=new Pt,V=()=>{},G=class extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="open",this.newState="closed"}},J=class extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="closed",this.newState="open"}},P=class extends Event{constructor(t,o,{publish:n,interaction:i,reason:s}){super(t,{bubbles:n,composed:n}),this.overlay=o,this.detail={interaction:i,reason:s}}},lt=(e,t,o)=>{let n=new AbortController,i=new Map,s=()=>{n.abort(),o()},r,a,l=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{s()})})}),c=h=>{h.target===e&&(i.set(h.propertyName,i.get(h.propertyName)-1),i.get(h.propertyName)||i.delete(h.propertyName),i.size===0&&s())},p=h=>{h.target===e&&(i.has(h.propertyName)||i.set(h.propertyName,0),i.set(h.propertyName,i.get(h.propertyName)+1),cancelAnimationFrame(l),cancelAnimationFrame(r),cancelAnimationFrame(a))};e.addEventListener("transitionrun",p,{signal:n.signal}),e.addEventListener("transitionend",c,{signal:n.signal}),e.addEventListener("transitioncancel",c,{signal:n.signal}),t()};rt=class extends Ke{constructor(){super(...arguments),this.dispose=V,this.offset=6,this.willPreventClose=!1}async applyFocus(t,o){}get delayed(){return!1}set delayed(t){}async ensureOnDOM(t){}async makeTransition(t){return null}async manageDelay(t){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(t){}get state(){return"closed"}set state(t){}manuallyKeepOpen(){}static update(){let t=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(t)}static async open(t,o,n,i){var s,r,a,l;await Promise.resolve().then(()=>(ct(),At));let c=arguments.length===2,p=n||t,h=new this,m=!1;h.dispose=()=>{h.addEventListener("sp-closed",()=>{m||(u(),m=!0),requestAnimationFrame(()=>{h.remove()})}),h.open=!1,h.dispose=V};let u=Ye([p],h,{position:"beforeend",prepareCallback:f=>{let v=f.slot;return f.removeAttribute("slot"),()=>{f.slot=v}}});if(!c&&p&&i){let f=t,v=o,g=i;return h.delayed=g.delayed||p.hasAttribute("delayed"),h.receivesFocus=(s=g.receivesFocus)!=null?s:"auto",h.triggerElement=g.virtualTrigger||f,h.type=v==="modal"?"modal":v==="hover"?"hint":"auto",h.offset=(r=g.offset)!=null?r:6,h.placement=g.placement,h.willPreventClose=!!g.notImmediatelyClosable,f.insertAdjacentElement("afterend",h),await h.updateComplete,h.open=!0,h.dispose}let d=o;return h.append(p),h.delayed=d.delayed||p.hasAttribute("delayed"),h.receivesFocus=(a=d.receivesFocus)!=null?a:"auto",h.triggerElement=d.trigger||null,h.type=d.type||"modal",h.offset=(l=d.offset)!=null?l:6,h.placement=d.placement,h.willPreventClose=!!d.notImmediatelyClosable,h.updateComplete.then(()=>{h.open=!0}),h}}});var N,yt=A(()=>{"use strict";tt();N=class{constructor(t,o){this.x=0,this.y=0,this.x=t,this.y=o}updateBoundingClientRect(t,o){this.x=t,this.y=o,rt.update()}getBoundingClientRect(){return{width:0,height:0,top:this.y,right:this.x,y:this.y,x:this.x,bottom:this.y,left:this.x,toJSON(){}}}}});import{firstFocusableIn as Xe,firstFocusableSlottedIn as Ge}from"/libs/features/spectrum-web-components/dist/shared.js";import{userFocusableSelector as Je}from"/libs/features/spectrum-web-components/dist/shared.js";function ie(e){class t extends e{async manageDialogOpen(){let n=this.open;if(await this.managePosition(),this.open!==n)return;let i=await this.dialogMakeTransition(n);this.open===n&&await this.dialogApplyFocus(n,i)}async dialogMakeTransition(n){let i=null,s=(a,l)=>async()=>{if(a.open=n,!n){let p=()=>{a.removeEventListener("close",p),r(a,l)};a.addEventListener("close",p)}if(l>0)return;let c=n?J:G;this.dispatchEvent(new c),n&&(a.matches(Je)&&(i=a),i=i||Xe(a),i||a.querySelectorAll("slot").forEach(p=>{i||(i=Ge(p))}),!(!this.isConnected||this.dialogEl.open)&&this.dialogEl.showModal())},r=(a,l)=>()=>{if(this.open!==n)return;let c=n?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new P(c,this,{interaction:this.type,publish:!1}));return}if(!this.isConnected||n!==this.open)return;let p=()=>{let h=this.triggerElement instanceof N;this.dispatchEvent(new P(c,this,{interaction:this.type,publish:h})),a.dispatchEvent(new P(c,this,{interaction:this.type,publish:!1})),this.triggerElement&&!h&&this.triggerElement.dispatchEvent(new P(c,this,{interaction:this.type,publish:!0})),this.state=n?"opened":"closed"};!n&&this.dialogEl.open?(this.dialogEl.addEventListener("close",()=>{p()},{once:!0}),this.dialogEl.close()):p()};return this.elements.forEach((a,l)=>{lt(a,s(a,l),r(a,l))}),i}async dialogApplyFocus(n,i){this.applyFocus(n,i)}}return t}var se=A(()=>{"use strict";yt();tt()});import{firstFocusableIn as Qe,firstFocusableSlottedIn as Ze}from"/libs/features/spectrum-web-components/dist/shared.js";import{userFocusableSelector as tn}from"/libs/features/spectrum-web-components/dist/shared.js";function re(e){let t=!1;try{t=e.matches(":popover-open")}catch{}let o=!1;try{o=e.matches(":open")}catch{}return t||o}function ae(e){class t extends e{async manageDelay(n){if(n===!1||n!==this.open){at.close(this);return}this.delayed&&await at.openTimer(this)&&(this.open=!n)}async shouldHidePopover(n){if(n&&this.open!==n)return;let i=async({newState:s}={})=>{s!=="open"&&await this.placementController.resetOverlayPosition()};if(!re(this.dialogEl)){i();return}this.dialogEl.addEventListener("toggle",i,{once:!0})}async shouldShowPopover(n){let i=!1;try{i=this.dialogEl.matches(":popover-open")}catch{}let s=!1;try{s=this.dialogEl.matches(":open")}catch{}n&&this.open===n&&!i&&!s&&this.isConnected&&(this.dialogEl.showPopover(),await this.managePosition())}async ensureOnDOM(n){await Z(),await this.shouldHidePopover(n),await this.shouldShowPopover(n),await Z()}async makeTransition(n){if(this.open!==n)return null;let i=null,s=(a,l)=>()=>{if(a.open=n,l===0){let c=n?J:G;this.dispatchEvent(new c)}!n||(a.matches(tn)&&(i=a),i=i||Qe(a),i)||a.querySelectorAll("slot").forEach(c=>{i||(i=Ze(c))})},r=(a,l)=>async()=>{if(this.open!==n)return;let c=n?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new P(c,this,{interaction:this.type,publish:!1}));return}let p=async()=>{if(this.open!==n)return;await Z();let m=this.triggerElement instanceof N;this.dispatchEvent(new P(c,this,{interaction:this.type,publish:m})),a.dispatchEvent(new P(c,this,{interaction:this.type,publish:!1})),this.triggerElement&&!m&&this.triggerElement.dispatchEvent(new P(c,this,{interaction:this.type,publish:!0})),this.state=n?"opened":"closed"};if(this.open!==n)return;let h=re(this.dialogEl);n!==!0&&h&&this.isConnected?(this.dialogEl.addEventListener("beforetoggle",()=>{p()},{once:!0}),this.dialogEl.hidePopover()):p()};return this.elements.forEach((a,l)=>{lt(a,s(a,l),r(a,l))}),i}}return t}var le=A(()=>{"use strict";yt();tt()});import{firstFocusableIn as en,firstFocusableSlottedIn as nn}from"/libs/features/spectrum-web-components/dist/shared.js";import{userFocusableSelector as on}from"/libs/features/spectrum-web-components/dist/shared.js";function ce(e){class t extends e{async managePopoverOpen(){await this.managePosition()}async manageDelay(n){if(n===!1||n!==this.open){at.close(this);return}this.delayed&&await at.openTimer(this)&&(this.open=!n)}async ensureOnDOM(n){oe()}async makeTransition(n){if(this.open!==n)return null;let i=null,s=(a,l)=>()=>{if(n===this.open){if(a.open=n,l===0){let c=n?J:G;this.dispatchEvent(new c)}n!==!0||(a.matches(on)&&(i=a),i=i||en(a),i)||a.querySelectorAll("slot").forEach(c=>{i||(i=nn(c))})}},r=(a,l)=>()=>{if(this.open!==n)return;let c=n?"sp-opened":"sp-closed";if(a.dispatchEvent(new P(c,this,{interaction:this.type})),l>0)return;let p=this.triggerElement instanceof N;this.dispatchEvent(new P(c,this,{interaction:this.type,publish:p})),this.triggerElement&&!p&&this.triggerElement.dispatchEvent(new P(c,this,{interaction:this.type,publish:!0})),this.state=n?"opened":"closed"};return this.elements.forEach((a,l)=>{lt(a,s(a,l),r(a,l))}),i}}return t}var he=A(()=>{"use strict";yt();tt()});var sn,Vt,_t,pe=A(()=>{"use strict";sn="showPopover"in document.createElement("div"),Vt=class{constructor(){this.root=document.body,this.stack=[],this.handlePointerdown=t=>{this.pointerdownPath=t.composedPath(),this.lastOverlay=this.stack.at(-1)},this.handlePointerup=()=>{var t;if(!this.stack.length||!((t=this.pointerdownPath)!=null&&t.length))return;let o=this.pointerdownPath;this.pointerdownPath=void 0;let n=this.stack.length-1,i=this.stack.filter((s,r)=>!o.find(a=>a===s||a===s?.triggerElement&&s?.type==="hint"||r===n&&s!==this.lastOverlay&&s.triggerInteraction==="longpress")&&!s.shouldPreventClose()&&s.type!=="manual");i.reverse(),i.forEach(s=>{this.closeOverlay(s);let r=s.parentOverlayToForceClose;for(;r;)this.closeOverlay(r),r=r.parentOverlayToForceClose})},this.handleBeforetoggle=t=>{let{target:o,newState:n}=t;n!=="open"&&this.closeOverlay(o)},this.handleKeydown=t=>{if(t.code!=="Escape"||!this.stack.length)return;let o=this.stack.at(-1);if(o?.type==="page"){t.preventDefault();return}sn||o&&this.closeOverlay(o)},this.bindEvents()}get document(){return this.root.ownerDocument||document}bindEvents(){this.document.addEventListener("pointerdown",this.handlePointerdown),this.document.addEventListener("pointerup",this.handlePointerup),this.document.addEventListener("keydown",this.handleKeydown)}closeOverlay(t){let o=this.stack.indexOf(t);o>-1&&this.stack.splice(o,1),t.open=!1}overlaysByTriggerElement(t){return this.stack.filter(o=>o.triggerElement===t)}add(t){if(this.stack.includes(t)){let o=this.stack.indexOf(t);o>-1&&(this.stack.splice(o,1),this.stack.push(t));return}if(t.type==="auto"||t.type==="modal"||t.type==="page"){let o="sp-overlay-query-path",n=new Event(o,{composed:!0,bubbles:!0});t.addEventListener(o,i=>{let s=i.composedPath();this.stack.forEach(r=>{!s.find(a=>a===r)&&r.type!=="manual"&&this.closeOverlay(r)})},{once:!0}),t.dispatchEvent(n)}else t.type==="hint"&&this.stack.forEach(o=>{o.type==="hint"&&this.closeOverlay(o)});requestAnimationFrame(()=>{this.stack.push(t),t.addEventListener("beforetoggle",this.handleBeforetoggle,{once:!0})})}remove(t){this.closeOverlay(t)}},_t=new Vt});function St(e,t,o){return T(e,_(t,o))}function et(e,t){return typeof e=="function"?e(t):e}function K(e){return e.split("-")[0]}function nt(e){return e.split("-")[1]}function qt(e){return e==="x"?"y":"x"}function Lt(e){return e==="y"?"height":"width"}function ht(e){return["top","bottom"].includes(K(e))?"y":"x"}function kt(e){return qt(ht(e))}function de(e,t,o){o===void 0&&(o=!1);let n=nt(e),i=kt(e),s=Lt(i),r=i==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=wt(r)),[r,wt(r)]}function ue(e){let t=wt(e);return[Tt(e),t,Tt(t)]}function Tt(e){return e.replace(/start|end/g,t=>an[t])}function ln(e,t,o){let n=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return o?t?i:n:t?n:i;case"left":case"right":return t?s:r;default:return[]}}function me(e,t,o,n){let i=nt(e),s=ln(K(e),o==="start",n);return i&&(s=s.map(r=>r+"-"+i),t&&(s=s.concat(s.map(Tt)))),s}function wt(e){return e.replace(/left|right|bottom|top/g,t=>rn[t])}function cn(e){return{top:0,right:0,bottom:0,left:0,...e}}function zt(e){return typeof e!="number"?cn(e):{top:e,right:e,bottom:e,left:e}}function ot(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}var _,T,bt,xt,j,rn,an,Rt=A(()=>{_=Math.min,T=Math.max,bt=Math.round,xt=Math.floor,j=e=>({x:e,y:e}),rn={left:"right",right:"left",bottom:"top",top:"bottom"},an={start:"end",end:"start"}});function fe(e,t,o){let{reference:n,floating:i}=e,s=ht(t),r=kt(t),a=Lt(r),l=K(t),c=s==="y",p=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,m=n[a]/2-i[a]/2,u;switch(l){case"top":u={x:p,y:n.y-i.height};break;case"bottom":u={x:p,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:h};break;case"left":u={x:n.x-i.width,y:h};break;default:u={x:n.x,y:n.y}}switch(nt(t)){case"start":u[r]-=m*(o&&c?-1:1);break;case"end":u[r]+=m*(o&&c?-1:1);break}return u}async function Dt(e,t){var o;t===void 0&&(t={});let{x:n,y:i,platform:s,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:m=!1,padding:u=0}=et(t,e),d=zt(u),v=a[m?h==="floating"?"reference":"floating":h],g=ot(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(v)))==null||o?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:p,strategy:l})),y=h==="floating"?{...r.floating,x:n,y:i}:r.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},b=ot(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(g.top-b.top+d.top)/x.y,bottom:(b.bottom-g.bottom+d.bottom)/x.y,left:(g.left-b.left+d.left)/x.x,right:(b.right-g.right+d.right)/x.x}}async function hn(e,t){let{placement:o,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),r=K(o),a=nt(o),l=ht(o)==="y",c=["left","top"].includes(r)?-1:1,p=s&&l?-1:1,h=et(t,e),{mainAxis:m,crossAxis:u,alignmentAxis:d}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof d=="number"&&(u=a==="end"?d*-1:d),l?{x:u*p,y:m*c}:{x:m*c,y:u*p}}var ge,ve,ye,Ut,we,be,jt=A(()=>{Rt();Rt();ge=async(e,t,o)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:r}=o,a=s.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t)),c=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:p,y:h}=fe(c,n,l),m=n,u={},d=0;for(let f=0;f<a.length;f++){let{name:v,fn:g}=a[f],{x:y,y:w,data:x,reset:b}=await g({x:p,y:h,initialPlacement:n,placement:m,strategy:i,middlewareData:u,rects:c,platform:r,elements:{reference:e,floating:t}});p=y??p,h=w??h,u={...u,[v]:{...u[v],...x}},b&&d<=50&&(d++,typeof b=="object"&&(b.placement&&(m=b.placement),b.rects&&(c=b.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:p,y:h}=fe(c,m,l)),f=-1)}return{x:p,y:h,placement:m,strategy:i,middlewareData:u}};ve=e=>({name:"arrow",options:e,async fn(t){let{x:o,y:n,placement:i,rects:s,platform:r,elements:a,middlewareData:l}=t,{element:c,padding:p=0}=et(e,t)||{};if(c==null)return{};let h=zt(p),m={x:o,y:n},u=kt(i),d=Lt(u),f=await r.getDimensions(c),v=u==="y",g=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",x=s.reference[d]+s.reference[u]-m[u]-s.floating[d],b=m[u]-s.reference[u],E=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c)),k=E?E[w]:0;(!k||!await(r.isElement==null?void 0:r.isElement(E)))&&(k=a.floating[w]||s.floating[d]);let H=x/2-b/2,X=k/2-f[d]/2-1,ft=_(h[g],X),gt=_(h[y],X),$=ft,vt=k-f[d]-gt,R=k/2-f[d]/2+H,I=St($,R,vt),W=!l.arrow&&nt(i)!=null&&R!==I&&s.reference[d]/2-(R<$?ft:gt)-f[d]/2<0,U=W?R<$?R-$:R-vt:0;return{[u]:m[u]+U,data:{[u]:I,centerOffset:R-I-U,...W&&{alignmentOffset:U}},reset:W}}}),ye=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var o,n;let{placement:i,middlewareData:s,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:f=!0,...v}=et(e,t);if((o=s.arrow)!=null&&o.alignmentOffset)return{};let g=K(i),y=K(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=m||(y||!f?[wt(a)]:ue(a));!m&&d!=="none"&&x.push(...me(a,f,d,w));let b=[a,...x],E=await Dt(t,v),k=[],H=((n=s.flip)==null?void 0:n.overflows)||[];if(p&&k.push(E[g]),h){let $=de(i,r,w);k.push(E[$[0]],E[$[1]])}if(H=[...H,{placement:i,overflows:k}],!k.every($=>$<=0)){var X,ft;let $=(((X=s.flip)==null?void 0:X.index)||0)+1,vt=b[$];if(vt)return{data:{index:$,overflows:H},reset:{placement:vt}};let R=(ft=H.filter(I=>I.overflows[0]<=0).sort((I,W)=>I.overflows[1]-W.overflows[1])[0])==null?void 0:ft.placement;if(!R)switch(u){case"bestFit":{var gt;let I=(gt=H.map(W=>[W.placement,W.overflows.filter(U=>U>0).reduce((U,je)=>U+je,0)]).sort((W,U)=>W[1]-U[1])[0])==null?void 0:gt[0];I&&(R=I);break}case"initialPlacement":R=a;break}if(i!==R)return{reset:{placement:R}}}return{}}}};Ut=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var o,n;let{x:i,y:s,placement:r,middlewareData:a}=t,l=await hn(t,e);return r===((o=a.offset)==null?void 0:o.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:r}}}}},we=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:o,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=et(e,t),c={x:o,y:n},p=await Dt(t,l),h=ht(K(i)),m=qt(h),u=c[m],d=c[h];if(s){let v=m==="y"?"top":"left",g=m==="y"?"bottom":"right",y=u+p[v],w=u-p[g];u=St(y,u,w)}if(r){let v=h==="y"?"top":"left",g=h==="y"?"bottom":"right",y=d+p[v],w=d-p[g];d=St(y,d,w)}let f=a.fn({...t,[m]:u,[h]:d});return{...f,data:{x:f.x-o,y:f.y-n}}}}},be=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){let{placement:o,rects:n,platform:i,elements:s}=t,{apply:r=()=>{},...a}=et(e,t),l=await Dt(t,a),c=K(o),p=nt(o),h=ht(o)==="y",{width:m,height:u}=n.floating,d,f;c==="top"||c==="bottom"?(d=c,f=p===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(f=c,d=p==="end"?"top":"bottom");let v=u-l[d],g=m-l[f],y=!t.middlewareData.shift,w=v,x=g;if(h){let E=m-l.left-l.right;x=p||y?_(g,E):E}else{let E=u-l.top-l.bottom;w=p||y?_(v,E):E}if(y&&!p){let E=T(l.left,0),k=T(l.right,0),H=T(l.top,0),X=T(l.bottom,0);h?x=m-2*(E!==0||k!==0?E+k:T(l.left,l.right)):w=u-2*(H!==0||X!==0?H+X:T(l.top,l.bottom))}await r({...t,availableWidth:x,availableHeight:w});let b=await i.getDimensions(s.floating);return m!==b.width||u!==b.height?{reset:{rects:!0}}:{}}}}});function Y(e){return Ee(e)?(e.nodeName||"").toLowerCase():"#document"}function L(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function q(e){var t;return(t=(Ee(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ee(e){return e instanceof Node||e instanceof L(e).Node}function z(e){return e instanceof Element||e instanceof L(e).Element}function B(e){return e instanceof HTMLElement||e instanceof L(e).HTMLElement}function xe(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof L(e).ShadowRoot}function dt(e){let{overflow:t,overflowX:o,overflowY:n,display:i}=D(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+o)&&!["inline","contents"].includes(i)}function Ce(e){return["table","td","th"].includes(Y(e))}function Ft(e){let t=$t(),o=D(e);return o.transform!=="none"||o.perspective!=="none"||(o.containerType?o.containerType!=="normal":!1)||!t&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!t&&(o.filter?o.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function Oe(e){let t=it(e);for(;B(t)&&!Et(t);){if(Ft(t))return t;t=it(t)}return null}function $t(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Et(e){return["html","body","#document"].includes(Y(e))}function D(e){return L(e).getComputedStyle(e)}function Ct(e){return z(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function it(e){if(Y(e)==="html")return e;let t=e.assignedSlot||e.parentNode||xe(e)&&e.host||q(e);return xe(t)?t.host:t}function Pe(e){let t=it(e);return Et(t)?e.ownerDocument?e.ownerDocument.body:e.body:B(t)&&dt(t)?t:Pe(t)}function pt(e,t,o){var n;t===void 0&&(t=[]),o===void 0&&(o=!0);let i=Pe(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),r=L(i);return s?t.concat(r,r.visualViewport||[],dt(i)?i:[],r.frameElement&&o?pt(r.frameElement):[]):t.concat(i,pt(i,[],o))}var Ae=A(()=>{});function Le(e){let t=D(e),o=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=B(e),s=i?e.offsetWidth:o,r=i?e.offsetHeight:n,a=bt(o)!==s||bt(n)!==r;return a&&(o=s,n=r),{width:o,height:n,$:a}}function Kt(e){return z(e)?e:e.contextElement}function ut(e){let t=Kt(e);if(!B(t))return j(1);let o=t.getBoundingClientRect(),{width:n,height:i,$:s}=Le(t),r=(s?bt(o.width):o.width)/n,a=(s?bt(o.height):o.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}function ke(e){let t=L(e);return!$t()||!t.visualViewport?pn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dn(e,t,o){return t===void 0&&(t=!1),!o||t&&o!==L(e)?!1:t}function st(e,t,o,n){t===void 0&&(t=!1),o===void 0&&(o=!1);let i=e.getBoundingClientRect(),s=Kt(e),r=j(1);t&&(n?z(n)&&(r=ut(n)):r=ut(e));let a=dn(s,o,n)?ke(s):j(0),l=(i.left+a.x)/r.x,c=(i.top+a.y)/r.y,p=i.width/r.x,h=i.height/r.y;if(s){let m=L(s),u=n&&z(n)?L(n):n,d=m,f=d.frameElement;for(;f&&n&&u!==d;){let v=ut(f),g=f.getBoundingClientRect(),y=D(f),w=g.left+(f.clientLeft+parseFloat(y.paddingLeft))*v.x,x=g.top+(f.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,p*=v.x,h*=v.y,l+=w,c+=x,d=L(f),f=d.frameElement}}return ot({width:p,height:h,x:l,y:c})}function Re(e){return un.some(t=>{try{return e.matches(t)}catch{return!1}})}function mn(e){let{elements:t,rect:o,offsetParent:n,strategy:i}=e,s=i==="fixed",r=q(n),a=t?Re(t.floating):!1;if(n===r||a&&s)return o;let l={scrollLeft:0,scrollTop:0},c=j(1),p=j(0),h=B(n);if((h||!h&&!s)&&((Y(n)!=="body"||dt(r))&&(l=Ct(n)),B(n))){let m=st(n);c=ut(n),p.x=m.x+n.clientLeft,p.y=m.y+n.clientTop}return{width:o.width*c.x,height:o.height*c.y,x:o.x*c.x-l.scrollLeft*c.x+p.x,y:o.y*c.y-l.scrollTop*c.y+p.y}}function fn(e){return Array.from(e.getClientRects())}function De(e){return st(q(e)).left+Ct(e).scrollLeft}function gn(e){let t=q(e),o=Ct(e),n=e.ownerDocument.body,i=T(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=T(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),r=-o.scrollLeft+De(e),a=-o.scrollTop;return D(n).direction==="rtl"&&(r+=T(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:r,y:a}}function vn(e,t){let o=L(e),n=q(e),i=o.visualViewport,s=n.clientWidth,r=n.clientHeight,a=0,l=0;if(i){s=i.width,r=i.height;let c=$t();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:r,x:a,y:l}}function yn(e,t){let o=st(e,!0,t==="fixed"),n=o.top+e.clientTop,i=o.left+e.clientLeft,s=B(e)?ut(e):j(1),r=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:r,height:a,x:l,y:c}}function Te(e,t,o){let n;if(t==="viewport")n=vn(e,o);else if(t==="document")n=gn(q(e));else if(z(t))n=yn(t,o);else{let i=ke(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return ot(n)}function Fe(e,t){let o=it(e);return o===t||!z(o)||Et(o)?!1:D(o).position==="fixed"||Fe(o,t)}function wn(e,t){let o=t.get(e);if(o)return o;let n=pt(e,[],!1).filter(a=>z(a)&&Y(a)!=="body"),i=null,s=D(e).position==="fixed",r=s?it(e):e;for(;z(r)&&!Et(r);){let a=D(r),l=Ft(r);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||dt(r)&&!l&&Fe(e,r))?n=n.filter(p=>p!==r):i=a,r=it(r)}return t.set(e,n),n}function bn(e){let{element:t,boundary:o,rootBoundary:n,strategy:i}=e,r=[...o==="clippingAncestors"?wn(t,this._c):[].concat(o),n],a=r[0],l=r.reduce((c,p)=>{let h=Te(t,p,i);return c.top=T(h.top,c.top),c.right=_(h.right,c.right),c.bottom=_(h.bottom,c.bottom),c.left=T(h.left,c.left),c},Te(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function xn(e){let{width:t,height:o}=Le(e);return{width:t,height:o}}function En(e,t,o){let n=B(t),i=q(t),s=o==="fixed",r=st(e,!0,s,t),a={scrollLeft:0,scrollTop:0},l=j(0);if(n||!n&&!s)if((Y(t)!=="body"||dt(i))&&(a=Ct(t)),n){let h=st(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=De(i));let c=r.left+a.scrollLeft-l.x,p=r.top+a.scrollTop-l.y;return{x:c,y:p,width:r.width,height:r.height}}function Se(e,t){return!B(e)||D(e).position==="fixed"?null:t?t(e):e.offsetParent}function $e(e,t){let o=L(e);if(!B(e)||Re(e))return o;let n=Se(e,t);for(;n&&Ce(n)&&D(n).position==="static";)n=Se(n,t);return n&&(Y(n)==="html"||Y(n)==="body"&&D(n).position==="static"&&!Ft(n))?o:n||Oe(e)||o}function On(e){return D(e).direction==="rtl"}function An(e,t){let o=null,n,i=q(e);function s(){var a;clearTimeout(n),(a=o)==null||a.disconnect(),o=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();let{left:c,top:p,width:h,height:m}=e.getBoundingClientRect();if(a||t(),!h||!m)return;let u=xt(p),d=xt(i.clientWidth-(c+h)),f=xt(i.clientHeight-(p+m)),v=xt(c),y={rootMargin:-u+"px "+-d+"px "+-f+"px "+-v+"px",threshold:T(0,_(1,l))||1},w=!0;function x(b){let E=b[0].intersectionRatio;if(E!==l){if(!w)return r();E?r(!1,E):n=setTimeout(()=>{r(!1,1e-7)},100)}w=!1}try{o=new IntersectionObserver(x,{...y,root:i.ownerDocument})}catch{o=new IntersectionObserver(x,y)}o.observe(e)}return r(!0),s}function Yt(e,t,o,n){n===void 0&&(n={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Kt(e),p=i||s?[...c?pt(c):[],...pt(t)]:[];p.forEach(g=>{i&&g.addEventListener("scroll",o,{passive:!0}),s&&g.addEventListener("resize",o)});let h=c&&a?An(c,o):null,m=-1,u=null;r&&(u=new ResizeObserver(g=>{let[y]=g;y&&y.target===c&&u&&(u.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=u)==null||w.observe(t)})),o()}),c&&!l&&u.observe(c),u.observe(t));let d,f=l?st(e):null;l&&v();function v(){let g=st(e);f&&(g.x!==f.x||g.y!==f.y||g.width!==f.width||g.height!==f.height)&&o(),f=g,d=requestAnimationFrame(v)}return o(),()=>{var g;p.forEach(y=>{i&&y.removeEventListener("scroll",o),s&&y.removeEventListener("resize",o)}),h?.(),(g=u)==null||g.disconnect(),u=null,l&&cancelAnimationFrame(d)}}var pn,un,Cn,Pn,Ne,Xt,Be,Me,He,Ie=A(()=>{jt();jt();Rt();Ae();pn=j(0);un=[":popover-open",":modal"];Cn=async function(e){let t=this.getOffsetParent||$e,o=this.getDimensions;return{reference:En(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await o(e.floating)}}};Pn={convertOffsetParentRelativeRectToViewportRelativeRect:mn,getDocumentElement:q,getClippingRect:bn,getOffsetParent:$e,getElementRects:Cn,getClientRects:fn,getDimensions:xn,getScale:ut,isElement:z,isRTL:On};Ne=we,Xt=ye,Be=be,Me=ve,He=(e,t,o)=>{let n=new Map,i={platform:Pn,...o},s={...i.platform,_c:n};return ge(e,t,{...i,platform:s})}});function Nt(e){if(typeof e>"u")return 0;let t=window.devicePixelRatio||1;return Math.round(e*t)/t}var Bt,Tn,Sn,Ho,Mt,We=A(()=>{"use strict";Ie();Bt=8,Tn=100,Sn=e=>{var t;return(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[e])!=null?t:[e]},Ho=Symbol("placement updated"),Mt=class{constructor(t){this.originalPlacements=new WeakMap,this.allowPlacementUpdate=!1,this.closeForAncestorUpdate=()=>{!this.allowPlacementUpdate&&this.options.type!=="modal"&&this.cleanup&&this.target.dispatchEvent(new Event("close",{bubbles:!0})),this.allowPlacementUpdate=!1},this.updatePlacement=()=>{this.computePlacement()},this.resetOverlayPosition=()=>{!this.target||!this.options||(this.clearOverlayPosition(),this.host.offsetHeight,this.computePlacement())},this.host=t,this.host.addController(this)}async placeOverlay(t=this.target,o=this.options){if(this.target=t,this.options=o,!t||!o)return;let n=Yt(o.trigger,t,this.closeForAncestorUpdate,{ancestorResize:!1,elementResize:!1,layoutShift:!1}),i=Yt(o.trigger,t,this.updatePlacement,{ancestorScroll:!1});this.cleanup=()=>{var s;(s=this.host.elements)==null||s.forEach(r=>{r.addEventListener("sp-closed",()=>{let a=this.originalPlacements.get(r);a&&r.setAttribute("placement",a),this.originalPlacements.delete(r)},{once:!0})}),n(),i()}}async computePlacement(){var t,o;let{options:n,target:i}=this;await(document.fonts?document.fonts.ready:Promise.resolve());let s=n.trigger instanceof HTMLElement?Xt():Xt({padding:Bt,fallbackPlacements:Sn(n.placement)}),[r=0,a=0]=Array.isArray(n?.offset)?n.offset:[n.offset,0],l=(t=this.host.elements.find(d=>d.tipElement))==null?void 0:t.tipElement,c=[Ut({mainAxis:r,crossAxis:a}),Ne({padding:Bt}),s,Be({padding:Bt,apply:({availableWidth:d,availableHeight:f,rects:{floating:v}})=>{let g=Math.max(Tn,Math.floor(f)),y=v.height;this.initialHeight=this.isConstrained&&this.initialHeight||y,this.isConstrained=y<this.initialHeight||g<=y;let w=this.isConstrained?`${g}px`:"";Object.assign(i.style,{maxWidth:`${Math.floor(d)}px`,maxHeight:w})}}),...l?[Me({element:l,padding:n.tipPadding||Bt})]:[]],{x:p,y:h,placement:m,middlewareData:u}=await He(n.trigger,i,{placement:n.placement,middleware:c,strategy:"fixed"});if(Object.assign(i.style,{top:"0px",left:"0px",translate:`${Nt(p)}px ${Nt(h)}px`}),i.setAttribute("actual-placement",m),(o=this.host.elements)==null||o.forEach(d=>{this.originalPlacements.has(d)||this.originalPlacements.set(d,d.getAttribute("placement")),d.setAttribute("placement",m)}),l&&u.arrow){let{x:d,y:f}=u.arrow;Object.assign(l.style,{top:m.startsWith("right")||m.startsWith("left")?"0px":"",left:m.startsWith("bottom")||m.startsWith("top")?"0px":"",translate:`${Nt(d)}px ${Nt(f)}px`})}}clearOverlayPosition(){this.target&&(this.target.style.removeProperty("max-height"),this.target.style.removeProperty("max-width"),this.initialHeight=void 0,this.isConstrained=!1)}hostConnected(){document.addEventListener("sp-update-overlays",this.resetOverlayPosition)}hostUpdated(){var t;this.host.open||((t=this.cleanup)==null||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0,document.removeEventListener("sp-update-overlays",this.resetOverlayPosition)}}});import{css as Ln}from"/libs/features/spectrum-web-components/dist/base.js";var kn,Ve,_e=A(()=>{"use strict";kn=Ln`
:host{display:contents;pointer-events:none;--swc-overlay-animation-distance:var(--spectrum-spacing-100)}:host(:has(>sp-tooltip)){--swc-overlay-animation-distance:var(
--spectrum-tooltip-animation-distance
)}.dialog{background:none;border:0;box-sizing:border-box;display:flex;height:auto;inset:auto;left:0;margin:0;max-height:calc(100vh - 16px);max-height:calc(100dvh - 16px);max-width:calc(100vw - 16px);opacity:1!important;overflow:visible;padding:0;position:fixed;top:0;--sp-overlay-open:true}.dialog:not([is-visible]){display:none}.dialog:focus{outline:none}dialog:modal{--mod-popover-filter:var(--spectrum-popover-filter)}:host(:not([open])) .dialog{--sp-overlay-open:false}.dialog::backdrop{display:none}.dialog:before{content:"";inset:-999em;pointer-events:auto!important;position:absolute}.dialog:not(.not-immediately-closable):before{display:none}.dialog>div{width:100%}::slotted(*){pointer-events:auto;visibility:visible!important}::slotted(sp-popover){position:static}.dialog:not([actual-placement])[placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}slot[name=longpress-describedby-descriptor]{display:none}@supports selector(:open){.dialog{opacity:0}.dialog:open{opacity:1;--mod-popover-filter:var(--spectrum-popover-filter)}}@supports selector(:popover-open){.dialog{opacity:0}.dialog:popover-open{opacity:1;--mod-popover-filter:var(--spectrum-popover-filter)}}@supports (not selector(:open)) and (not selector(:popover-open)){:host:not([open]) .dialog{pointer-events:none}.dialog[actual-placement]{z-index:calc(var(--swc-overlay-z-index-base, 1000) + var(--swc-overlay-open-count))}}
`,Ve=kn});import{html as Ht}from"/libs/features/spectrum-web-components/dist/base.js";import{property as M,query as qe,queryAssignedElements as Fn,state as $n}from"/libs/features/spectrum-web-components/dist/base.js";import{isAndroid as Nn,isIOS as Bn}from"/libs/features/spectrum-web-components/dist/shared.js";import{ElementResolutionController as Mn,elementResolverUpdatedSymbol as Hn}from"/libs/features/spectrum-web-components/dist/reactive-controllers.js";import{conditionAttributeWithId as Gt}from"/libs/features/spectrum-web-components/dist/base.js";import{ifDefined as Jt,styleMap as ze}from"/libs/features/spectrum-web-components/dist/base.js";import{randomID as Qt}from"/libs/features/spectrum-web-components/dist/shared.js";var Rn,Dn,S,In,Wn,Vn,_n,Ot,C,It,te=A(()=>{"use strict";tt();se();le();he();pe();tt();yt();We();_e();Rn=Object.defineProperty,Dn=Object.getOwnPropertyDescriptor,S=(e,t,o,n)=>{for(var i=n>1?void 0:n?Dn(t,o):t,s=e.length-1,r;s>=0;s--)(r=e[s])&&(i=(n?r(t,o,i):r(i))||i);return n&&i&&Rn(t,o,i),i},In=300,Wn=300,Vn={touch:"Double tap and long press for additional options",keyboard:"Press Space or Alt+Down Arrow for additional options",mouse:"Click and hold for additional options"},_n="showPopover"in document.createElement("div"),Ot=ie(rt);_n?Ot=ae(Ot):Ot=ce(Ot);C=class Zt extends Ot{constructor(){super(...arguments),this._delayed=!1,this._disabled=!1,this.longpressState="null",this.offset=0,this.placementController=new Mt(this),this._open=!1,this.receivesFocus="auto",this.releaseAriaDescribedby=V,this.releaseLongpressDescribedby=V,this._state="closed",this.triggerElement=null,this.type="auto",this.wasOpen=!1,this.elementResolver=new Mn(this),this.closeOnFocusOut=t=>{if(!t.relatedTarget)return;let o=new Event("overlay-relation-query",{bubbles:!0,composed:!0});t.relatedTarget.addEventListener(o.type,n=>{n.composedPath().includes(this)||(this.open=!1)}),t.relatedTarget.dispatchEvent(o)},this.elementIds=[],this.handlePointerdown=t=>{if(!this.triggerElement||t.button!==0)return;let o=this.triggerElement;this.longpressState="potential",document.addEventListener("pointerup",this.handlePointerup),document.addEventListener("pointercancel",this.handlePointerup),!o.holdAffordance&&(this.longressTimeout=setTimeout(()=>{o&&o.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"pointer"}}))},In))},this.handlePointerup=()=>{clearTimeout(this.longressTimeout),this.triggerElement&&(this.longpressState=this.state==="opening"?"pressed":"null",document.removeEventListener("pointerup",this.handlePointerup),document.removeEventListener("pointercancel",this.handlePointerup))},this.handleKeydown=t=>{let{code:o,altKey:n}=t;(o==="Space"||n&&o==="ArrowDown")&&o==="ArrowDown"&&(t.stopPropagation(),t.stopImmediatePropagation())},this.handleKeyup=t=>{let{code:o,altKey:n}=t;if(o==="Space"||n&&o==="ArrowDown"){if(!this.triggerElement||!this.hasNonVirtualTrigger)return;t.stopPropagation(),this.triggerElement.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"keyboard"}})),setTimeout(()=>{this.longpressState="null"})}},this.preventNextToggle=!1,this.handlePointerdownForClick=()=>{this.preventNextToggle=this.open},this.handleClick=()=>{this.longpressState==="opening"||this.longpressState==="pressed"||(this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1)},this.focusedin=!1,this.handleFocusin=()=>{this.open=!0,this.focusedin=!0},this.handleFocusout=()=>{this.focusedin=!1,!this.pointerentered&&(this.open=!1)},this.pointerentered=!1,this.handlePointerenter=()=>{this.hoverTimeout&&(clearTimeout(this.hoverTimeout),delete this.hoverTimeout),!this.disabled&&(this.open=!0,this.pointerentered=!0)},this.handleOverlayPointerenter=()=>{this.hoverTimeout&&(clearTimeout(this.hoverTimeout),delete this.hoverTimeout)},this.handlePointerleave=()=>{this.doPointerleave()},this.handleOverlayPointerleave=()=>{this.doPointerleave()},this.handleLongpress=()=>{this.open=!0,this.longpressState=this.longpressState==="potential"?"opening":"pressed"}}get delayed(){var t;return((t=this.elements.at(-1))==null?void 0:t.hasAttribute("delayed"))||this._delayed}set delayed(t){this._delayed=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t,t?(this.hasNonVirtualTrigger&&this.unbindEvents(),this.wasOpen=this.open,this.open=!1):(this.bindEvents(),this.open=this.open||this.wasOpen,this.wasOpen=!1)}get hasNonVirtualTrigger(){return!!this.triggerElement&&!(this.triggerElement instanceof N)}get open(){return this._open}set open(t){t&&this.disabled||t!==this.open&&((this.longpressState==="opening"||this.longpressState==="pressed")&&!t||(this._open=t,this.open&&(Zt.openCount+=1),this.requestUpdate("open",!this.open)))}get state(){return this._state}set state(t){if(t===this.state)return;let o=this.state;this._state=t,(this.state==="opened"||this.state==="closed")&&(this.longpressState=this.longpressState==="pressed"?"null":this.longpressState),this.requestUpdate("state",o)}get usesDialog(){return this.type==="modal"||this.type==="page"}get popoverValue(){if("popover"in this)switch(this.type){case"modal":case"page":return;case"hint":return"manual";default:return this.type}}get requiresPosition(){return!(this.type==="page"||!this.open||!this.triggerElement||!this.placement&&this.type!=="hint")}managePosition(){if(!this.requiresPosition||!this.open)return;let t=this.offset||0,o=this.triggerElement,n=this.placement||"right",i=this.tipPadding;this.placementController.placeOverlay(this.dialogEl,{offset:t,placement:n,tipPadding:i,trigger:o,type:this.type})}async managePopoverOpen(){super.managePopoverOpen();let t=this.open;if(this.open!==t||(await this.manageDelay(t),this.open!==t)||(await this.ensureOnDOM(t),this.open!==t))return;let o=await this.makeTransition(t);this.open===t&&await this.applyFocus(t,o)}async applyFocus(t,o){if(!(this.receivesFocus==="false"||this.type==="hint")){if(await Z(),await Z(),t===this.open&&!this.open){this.hasNonVirtualTrigger&&this.contains(this.getRootNode().activeElement)&&this.triggerElement.focus();return}o?.focus()}}async manageOpen(t){var o;if(!(!this.isConnected&&this.open)){if(this.hasUpdated||await this.updateComplete,this.open?(_t.add(this),this.willPreventClose&&(document.addEventListener("pointerup",()=>{this.dialogEl.classList.toggle("not-immediately-closable",!1),this.willPreventClose=!1},{once:!0}),this.dialogEl.classList.toggle("not-immediately-closable",!0))):(t&&this.dispose(),_t.remove(this)),this.open&&this.state!=="opened"?this.state="opening":!this.open&&this.state!=="closed"&&(this.state="closing"),this.usesDialog?this.manageDialogOpen():this.managePopoverOpen(),this.type==="auto"){let n=this.getRootNode();this.open?n.addEventListener("focusout",this.closeOnFocusOut,{capture:!0}):n.removeEventListener("focusout",this.closeOnFocusOut,{capture:!0})}if(!this.open&&this.type!=="hint"){let n=()=>{var i;let s=[],r=document.activeElement;for(;r!=null&&r.shadowRoot&&r.shadowRoot.activeElement;)r=r.shadowRoot.activeElement;for(;r;){let a=r.assignedSlot||r.parentElement||((i=r.getRootNode())==null?void 0:i.host);a&&s.push(a),r=a}return s};(o=this.triggerElement)!=null&&o.focus&&(this.contains(this.getRootNode().activeElement)||n().includes(this))&&this.triggerElement.focus()}}}unbindEvents(){var t;(t=this.abortController)==null||t.abort()}bindEvents(){var t;if(!this.hasNonVirtualTrigger)return;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;let o=this.triggerElement;switch(this.triggerInteraction){case"click":this.bindClickEvents(o);return;case"longpress":this.bindLongpressEvents(o);return;case"hover":this.bindHoverEvents(o);return}}bindClickEvents(t){let o={signal:this.abortController.signal};t.addEventListener("click",this.handleClick,o),t.addEventListener("pointerdown",this.handlePointerdownForClick,o)}bindLongpressEvents(t){let o={signal:this.abortController.signal};t.addEventListener("longpress",this.handleLongpress,o),t.addEventListener("pointerdown",this.handlePointerdown,o),this.prepareLongpressDescription(t),!t.holdAffordance&&(t.addEventListener("keydown",this.handleKeydown,o),t.addEventListener("keyup",this.handleKeyup,o))}bindHoverEvents(t){let o={signal:this.abortController.signal};t.addEventListener("focusin",this.handleFocusin,o),t.addEventListener("focusout",this.handleFocusout,o),t.addEventListener("pointerenter",this.handlePointerenter,o),t.addEventListener("pointerleave",this.handlePointerleave,o),this.addEventListener("pointerenter",this.handleOverlayPointerenter,o),this.addEventListener("pointerleave",this.handleOverlayPointerleave,o)}manageTriggerElement(t){t&&(this.unbindEvents(),this.releaseAriaDescribedby()),!(!this.triggerElement||this.triggerElement instanceof N)&&(this.bindEvents(),this.receivesFocus!=="true"&&this.prepareAriaDescribedby())}prepareLongpressDescription(t){if(this.triggerInteraction!=="longpress"||this.releaseLongpressDescribedby!==V||!this.elements.length)return;let o=document.createElement("div");o.id=`longpress-describedby-descriptor-${Qt()}`;let n=Bn()||Nn()?"touch":"keyboard";o.textContent=Vn[n],o.slot="longpress-describedby-descriptor";let i=t.getRootNode(),s=this.getRootNode();i===s?this.append(o):(o.hidden=!("host"in i),t.insertAdjacentElement("afterend",o));let r=Gt(t,"aria-describedby",[o.id]);this.releaseLongpressDescribedby=()=>{r(),o.remove(),this.releaseLongpressDescribedby=V}}prepareAriaDescribedby(){if(this.triggerInteraction!=="hover"||this.releaseAriaDescribedby!==V||!this.elements.length||!this.hasNonVirtualTrigger)return;let t=this.triggerElement,o=t.getRootNode(),n=this.elements[0].getRootNode(),i=this.getRootNode();if(o==i){let s=Gt(t,"aria-describedby",[this.id]);this.releaseAriaDescribedby=()=>{s(),this.releaseAriaDescribedby=V}}else if(o===n){this.elementIds=this.elements.map(a=>a.id);let s=this.elements.map(a=>(a.id||(a.id=`${this.tagName.toLowerCase()}-helper-${Qt()}`),a.id)),r=Gt(t,"aria-describedby",s);this.releaseAriaDescribedby=()=>{r(),this.elements.map((a,l)=>{a.id=this.elementIds[l]}),this.releaseAriaDescribedby=V}}}doPointerleave(){this.pointerentered=!1;let t=this.triggerElement;this.focusedin&&t.matches(":focus-visible")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},Wn))}handleBeforetoggle(t){t.newState!=="open"&&this.handleBrowserClose()}handleBrowserClose(){if(this.longpressState!=="opening"&&this.longpressState!=="pressed"){this.open=!1;return}this.manuallyKeepOpen()}manuallyKeepOpen(){this.open=!0,this.placementController.allowPlacementUpdate=!0,this.manageOpen(!1)}handleSlotchange(){this.triggerElement&&this.prepareAriaDescribedby(),this.elements.length?this.hasNonVirtualTrigger&&this.prepareLongpressDescription(this.triggerElement):this.releaseLongpressDescribedby()}shouldPreventClose(){let t=this.willPreventClose;return this.willPreventClose=!1,t}willUpdate(t){var o;if(this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${Qt()}`),t.has("open")&&(typeof t.get("open")<"u"||this.open)&&this.manageOpen(t.get("open")),t.has("trigger")){let[i,s]=((o=this.trigger)==null?void 0:o.split("@"))||[];this.elementResolver.selector=i?`#${i}`:"",this.triggerInteraction=s}let n=!1;t.has(Hn)&&(n=this.triggerElement,this.triggerElement=this.elementResolver.element),t.has("triggerElement")&&(n=t.get("triggerElement")),n!==!1&&this.manageTriggerElement(n)}updated(t){super.updated(t),t.has("placement")&&(this.placement?this.dialogEl.setAttribute("actual-placement",this.placement):this.dialogEl.removeAttribute("actual-placement"),this.open&&typeof t.get("placement")<"u"&&this.placementController.resetOverlayPosition()),t.has("state")&&this.state==="closed"&&this.placementController.clearOverlayPosition()}renderContent(){return Ht`
            <slot @slotchange=${this.handleSlotchange}></slot>
        `}get dialogStyleMap(){return{"--swc-overlay-open-count":Zt.openCount.toString()}}renderDialog(){return Ht`
            <dialog
                class="dialog"
                part="dialog"
                placement=${Jt(this.requiresPosition?this.placement||"right":void 0)}
                style=${ze(this.dialogStyleMap)}
                @close=${this.handleBrowserClose}
                @cancel=${this.handleBrowserClose}
                @beforetoggle=${this.handleBeforetoggle}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </dialog>
        `}renderPopover(){return Ht`
            <div
                class="dialog"
                part="dialog"
                placement=${Jt(this.requiresPosition?this.placement||"right":void 0)}
                popover=${Jt(this.popoverValue)}
                style=${ze(this.dialogStyleMap)}
                @beforetoggle=${this.handleBeforetoggle}
                @close=${this.handleBrowserClose}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </div>
        `}render(){let t=this.type==="modal"||this.type==="page";return Ht`
            ${t?this.renderDialog():this.renderPopover()}
            <slot name="longpress-describedby-descriptor"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("close",()=>{this.open=!1}),this.hasNonVirtualTrigger&&this.bindEvents()}disconnectedCallback(){this.hasNonVirtualTrigger&&this.unbindEvents(),this.releaseAriaDescribedby(),this.releaseLongpressDescribedby(),this.open=!1,super.disconnectedCallback()}};C.styles=[Ve],C.openCount=1,S([M({type:Boolean})],C.prototype,"delayed",1),S([qe(".dialog")],C.prototype,"dialogEl",2),S([M({type:Boolean})],C.prototype,"disabled",1),S([Fn({flatten:!0,selector:':not([slot="longpress-describedby-descriptor"], slot)'})],C.prototype,"elements",2),S([M({type:Number})],C.prototype,"offset",2),S([M({type:Boolean,reflect:!0})],C.prototype,"open",1),S([M()],C.prototype,"placement",2),S([M({attribute:"receives-focus"})],C.prototype,"receivesFocus",2),S([qe("slot")],C.prototype,"slotEl",2),S([$n()],C.prototype,"state",1),S([M({type:Number,attribute:"tip-padding"})],C.prototype,"tipPadding",2),S([M()],C.prototype,"trigger",2),S([M({attribute:!1})],C.prototype,"triggerElement",2),S([M({attribute:!1})],C.prototype,"triggerInteraction",2),S([M()],C.prototype,"type",2);It=C});var At={};import{defineElement as qn}from"/libs/features/spectrum-web-components/dist/base.js";var ct=A(()=>{"use strict";te();qn("sp-overlay",It)});ct();import{defineElement as Xn}from"/libs/features/spectrum-web-components/dist/base.js";import{html as Q,SpectrumElement as Yn}from"/libs/features/spectrum-web-components/dist/base.js";import{property as mt,query as ee,state as Wt}from"/libs/features/spectrum-web-components/dist/base.js";import{css as zn}from"/libs/features/spectrum-web-components/dist/base.js";var Un=zn`
:host([disabled]) ::slotted([slot=trigger]){pointer-events:none}slot[name=longpress-describedby-descriptor]{display:none}
`,Ue=Un;var jn=Object.defineProperty,Kn=Object.getOwnPropertyDescriptor,F=(e,t,o,n)=>{for(var i=n>1?void 0:n?Kn(t,o):t,s=e.length-1,r;s>=0;s--)(r=e[s])&&(i=(n?r(t,o,i):r(i))||i);return n&&i&&jn(t,o,i),i},O=class extends Yn{constructor(){super(...arguments),this.content="click hover longpress",this.offset=6,this.disabled=!1,this.clickContent=[],this.longpressContent=[],this.hoverContent=[],this.targetContent=[]}static get styles(){return[Ue]}getAssignedElementsFromSlot(t){return t.assignedElements({flatten:!0})}handleTriggerContent(t){this.targetContent=this.getAssignedElementsFromSlot(t.target)}handleSlotContent(t){switch(t.target.name){case"click-content":this.clickContent=this.getAssignedElementsFromSlot(t.target);break;case"longpress-content":this.longpressContent=this.getAssignedElementsFromSlot(t.target);break;case"hover-content":this.hoverContent=this.getAssignedElementsFromSlot(t.target);break}}handleBeforetoggle(t){let{target:o}=t,n;if(o===this.clickOverlayElement)n="click";else if(o===this.longpressOverlayElement)n="longpress";else if(o===this.hoverOverlayElement)n="hover";else return;t.newState==="open"?this.open=n:this.open===n&&(this.open=void 0)}update(t){var o,n,i,s,r,a;t.has("clickContent")&&(this.clickPlacement=((o=this.clickContent[0])==null?void 0:o.getAttribute("placement"))||((n=this.clickContent[0])==null?void 0:n.getAttribute("direction"))||void 0),t.has("hoverContent")&&(this.hoverPlacement=((i=this.hoverContent[0])==null?void 0:i.getAttribute("placement"))||((s=this.hoverContent[0])==null?void 0:s.getAttribute("direction"))||void 0),t.has("longpressContent")&&(this.longpressPlacement=((r=this.longpressContent[0])==null?void 0:r.getAttribute("placement"))||((a=this.longpressContent[0])==null?void 0:a.getAttribute("direction"))||void 0),super.update(t)}renderSlot(t){return Q`
            <slot name=${t} @slotchange=${this.handleSlotContent}></slot>
        `}renderClickOverlay(){Promise.resolve().then(()=>ct());let t=this.renderSlot("click-content");return this.clickContent.length?Q`
            <sp-overlay
                id="click-overlay"
                ?disabled=${this.disabled||!this.clickContent.length}
                ?open=${this.open==="click"&&!!this.clickContent.length}
                .offset=${this.offset}
                .placement=${this.clickPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"click"}
                .type=${this.type!=="modal"?"auto":"modal"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${t}
            </sp-overlay>
        `:t}renderHoverOverlay(){Promise.resolve().then(()=>ct());let t=this.renderSlot("hover-content");return this.hoverContent.length?Q`
            <sp-overlay
                id="hover-overlay"
                ?open=${this.open==="hover"&&!!this.hoverContent.length}
                ?disabled=${this.disabled||!this.hoverContent.length||!!this.open&&this.open!=="hover"}
                .offset=${this.offset}
                .placement=${this.hoverPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"hover"}
                .type=${"hint"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${t}
            </sp-overlay>
        `:t}renderLongpressOverlay(){Promise.resolve().then(()=>ct());let t=this.renderSlot("longpress-content");return this.longpressContent.length?Q`
            <sp-overlay
                id="longpress-overlay"
                ?disabled=${this.disabled||!this.longpressContent.length}
                ?open=${this.open==="longpress"&&!!this.longpressContent.length}
                .offset=${this.offset}
                .placement=${this.longpressPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"longpress"}
                .type=${"auto"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${t}
            </sp-overlay>
            <slot name="longpress-describedby-descriptor"></slot>
        `:t}render(){let t=this.content.split(" ");return Q`
            <slot
                id="trigger"
                name="trigger"
                @slotchange=${this.handleTriggerContent}
            ></slot>
            ${[t.includes("click")?this.renderClickOverlay():Q``,t.includes("hover")?this.renderHoverOverlay():Q``,t.includes("longpress")?this.renderLongpressOverlay():Q``]}
        `}updated(t){if(super.updated(t),this.disabled&&t.has("disabled")){this.open=void 0;return}}async getUpdateComplete(){return await super.getUpdateComplete()}};F([mt()],O.prototype,"content",2),F([mt({reflect:!0})],O.prototype,"placement",2),F([mt()],O.prototype,"type",2),F([mt({type:Number})],O.prototype,"offset",2),F([mt({reflect:!0})],O.prototype,"open",2),F([mt({type:Boolean,reflect:!0})],O.prototype,"disabled",2),F([Wt()],O.prototype,"clickContent",2),F([Wt()],O.prototype,"longpressContent",2),F([Wt()],O.prototype,"hoverContent",2),F([Wt()],O.prototype,"targetContent",2),F([ee("#click-overlay",!0)],O.prototype,"clickOverlayElement",2),F([ee("#longpress-overlay",!0)],O.prototype,"longpressOverlayElement",2),F([ee("#hover-overlay",!0)],O.prototype,"hoverOverlayElement",2);Xn("overlay-trigger",O);te();window.__merch__spectrum_Overlay=It;
