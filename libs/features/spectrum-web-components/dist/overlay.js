/* eslint-disable */
/* Generated by Milo */

var P=(e,t)=>()=>(e&&(t=e(e=0)),t);var Pt,ie=P(()=>{"use strict";Pt=class{constructor(t={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,this.isWarm?!1:(this.promise=new Promise(n=>{this.resolve=n,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}});import{SpectrumElement as Ue}from"/libs/features/spectrum-web-components/dist/base.js";import{reparentChildren as qe}from"/libs/features/spectrum-web-components/dist/shared.js";function Q(){return new Promise(e=>requestAnimationFrame(()=>e()))}function se(){document.body.offsetHeight}var rt,W,X,G,at,st,Z=P(()=>{"use strict";ie();rt=new Pt,W=()=>{},X=class extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="open",this.newState="closed"}},G=class extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="closed",this.newState="open"}},at=(e,t,n)=>{let o=new AbortController,i=new Map,s=()=>{o.abort(),n()},r,a,l=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{s()})})}),d=c=>{c.target===e&&(i.set(c.propertyName,i.get(c.propertyName)-1),i.get(c.propertyName)||i.delete(c.propertyName),i.size===0&&s())},m=c=>{c.target===e&&(i.has(c.propertyName)||i.set(c.propertyName,0),i.set(c.propertyName,i.get(c.propertyName)+1),cancelAnimationFrame(l),cancelAnimationFrame(r),cancelAnimationFrame(a))};e.addEventListener("transitionrun",m,{signal:o.signal}),e.addEventListener("transitionend",d,{signal:o.signal}),e.addEventListener("transitioncancel",d,{signal:o.signal}),t()};st=class extends Ue{constructor(){super(...arguments),this.dispose=W,this.offset=6,this.willPreventClose=!1}async applyFocus(t,n){}get delayed(){return!1}set delayed(t){}async ensureOnDOM(t){}async makeTransition(t){return null}async manageDelay(t){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(t){}get state(){return"closed"}set state(t){}manuallyKeepOpen(){}static update(){let t=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(t)}static async open(t,n,o,i){var s,r,a,l;await Promise.resolve().then(()=>(lt(),At));let d=arguments.length===2,m=o||t,c=new this,u=!1;c.dispose=()=>{c.addEventListener("sp-closed",()=>{u||(p(),u=!0),requestAnimationFrame(()=>{c.remove()})}),c.open=!1,c.dispose=W};let p=qe([m],c,{position:"beforeend",prepareCallback:f=>{let v=f.slot;return f.removeAttribute("slot"),()=>{f.slot=v}}});if(!d&&m&&i){let f=t,v=n,g=i;return c.delayed=g.delayed||m.hasAttribute("delayed"),c.receivesFocus=(s=g.receivesFocus)!=null?s:"auto",c.triggerElement=g.virtualTrigger||f,c.type=v==="modal"?"modal":v==="hover"?"hint":"auto",c.offset=(r=g.offset)!=null?r:6,c.placement=g.placement,c.willPreventClose=!!g.notImmediatelyClosable,f.insertAdjacentElement("afterend",c),await c.updateComplete,c.open=!0,c.dispose}let h=n;return c.append(m),c.delayed=h.delayed||m.hasAttribute("delayed"),c.receivesFocus=(a=h.receivesFocus)!=null?a:"auto",c.triggerElement=h.trigger||null,c.type=h.type||"modal",c.offset=(l=h.offset)!=null?l:6,c.placement=h.placement,c.willPreventClose=!!h.notImmediatelyClosable,c.updateComplete.then(()=>{c.open=!0}),c}}});var R,ct=P(()=>{"use strict";Z();R=class{constructor(t,n){this.x=0,this.y=0,this.x=t,this.y=n}updateBoundingClientRect(t,n){this.x=t,this.y=n,st.update()}getBoundingClientRect(){return{width:0,height:0,top:this.y,right:this.x,y:this.y,x:this.x,bottom:this.y,left:this.x,toJSON(){}}}}});import{firstFocusableIn as _e,firstFocusableSlottedIn as ze}from"/libs/features/spectrum-web-components/dist/shared.js";import{userFocusableSelector as je}from"/libs/features/spectrum-web-components/dist/shared.js";function re(e){class t extends e{async manageDialogOpen(){let o=this.open;if(await this.managePosition(),this.open!==o||this.open!==o)return;let i=await this.dialogMakeTransition(o);this.open===o&&await this.dialogApplyFocus(o,i)}async dialogMakeTransition(o){let i=null,s=(a,l)=>async()=>{if(typeof a.open<"u"&&(a.open=o),!o){let m=()=>{a.removeEventListener("close",m),r(a,l)};a.addEventListener("close",m)}if(l>0)return;let d=o?G:X;this.dispatchEvent(new d),o&&(a.matches(je)&&(i=a),i=i||_e(a),i||a.querySelectorAll("slot").forEach(m=>{i||(i=ze(m))}),!(!this.isConnected||this.dialogEl.open)&&this.dialogEl.showModal())},r=(a,l)=>()=>{if(this.open!==o)return;let d=o?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new CustomEvent(d,{bubbles:!1,composed:!1,detail:{interaction:this.type}}));return}if(!this.isConnected||o!==this.open)return;let m=()=>{let c=this.triggerElement instanceof R;this.dispatchEvent(new Event(d,{bubbles:c,composed:c})),a.dispatchEvent(new Event(d,{bubbles:!1,composed:!1})),this.triggerElement&&!c&&this.triggerElement.dispatchEvent(new CustomEvent(d,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=o?"opened":"closed"};!o&&this.dialogEl.open?(this.dialogEl.addEventListener("close",()=>{m()},{once:!0}),this.dialogEl.close()):m()};return this.elements.forEach((a,l)=>{at(a,s(a,l),r(a,l))}),i}async dialogApplyFocus(o,i){this.applyFocus(o,i)}}return t}var ae=P(()=>{"use strict";ct();Z()});import{firstFocusableIn as Ke,firstFocusableSlottedIn as Ye}from"/libs/features/spectrum-web-components/dist/shared.js";import{userFocusableSelector as Xe}from"/libs/features/spectrum-web-components/dist/shared.js";function le(e){let t=!1;try{t=e.matches(":popover-open")}catch{}let n=!1;try{n=e.matches(":open")}catch{}return t||n}function ce(e){class t extends e{async manageDelay(o){if(o===!1||o!==this.open){rt.close(this);return}this.delayed&&await rt.openTimer(this)&&(this.open=!o)}async shouldHidePopover(o){if(o&&this.open!==o)return;let i=async({newState:s}={})=>{s!=="open"&&await this.placementController.resetOverlayPosition()};if(!le(this.dialogEl)){i();return}this.dialogEl.addEventListener("toggle",i,{once:!0})}async shouldShowPopover(o){let i=!1;try{i=this.dialogEl.matches(":popover-open")}catch{}let s=!1;try{s=this.dialogEl.matches(":open")}catch{}o&&this.open===o&&!i&&!s&&this.isConnected&&(this.dialogEl.showPopover(),await this.managePosition())}async ensureOnDOM(o){await Q(),await this.shouldHidePopover(o),await this.shouldShowPopover(o),await Q()}async makeTransition(o){if(this.open!==o)return null;let i=null,s=(a,l)=>()=>{if(typeof a.open<"u"&&(a.open=o),l===0){let d=o?G:X;this.dispatchEvent(new d)}!o||(a.matches(Xe)&&(i=a),i=i||Ke(a),i)||a.querySelectorAll("slot").forEach(d=>{i||(i=Ye(d))})},r=(a,l)=>async()=>{if(this.open!==o)return;let d=o?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new CustomEvent(d,{bubbles:!1,composed:!1,detail:{interaction:this.type}}));return}let m=async()=>{if(this.open!==o)return;await Q();let u=this.triggerElement instanceof R;this.dispatchEvent(new Event(d,{bubbles:u,composed:u})),a.dispatchEvent(new CustomEvent(d,{bubbles:!1,composed:!1,detail:{interaction:this.type}})),this.triggerElement&&!u&&this.triggerElement.dispatchEvent(new CustomEvent(d,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=o?"opened":"closed"};if(this.open!==o)return;let c=le(this.dialogEl);o!==!0&&c&&this.isConnected?(this.dialogEl.addEventListener("beforetoggle",()=>{m()},{once:!0}),this.dialogEl.hidePopover()):m()};return this.elements.forEach((a,l)=>{at(a,s(a,l),r(a,l))}),i}}return t}var de=P(()=>{"use strict";ct();Z()});import{firstFocusableIn as Ge,firstFocusableSlottedIn as Je}from"/libs/features/spectrum-web-components/dist/shared.js";import{userFocusableSelector as Qe}from"/libs/features/spectrum-web-components/dist/shared.js";function pe(e){class t extends e{async managePopoverOpen(){await this.managePosition()}async manageDelay(o){if(o===!1||o!==this.open){rt.close(this);return}this.delayed&&await rt.openTimer(this)&&(this.open=!o)}async ensureOnDOM(o){se()}async makeTransition(o){if(this.open!==o)return null;let i=null,s=(a,l)=>()=>{if(o===this.open){if(typeof a.open<"u"&&(a.open=o),l===0){let d=o?G:X;this.dispatchEvent(new d)}o!==!0||(a.matches(Qe)&&(i=a),i=i||Ge(a),i)||a.querySelectorAll("slot").forEach(d=>{i||(i=Je(d))})}},r=(a,l)=>()=>{if(this.open!==o)return;let d=o?"sp-opened":"sp-closed";if(a.dispatchEvent(new CustomEvent(d,{bubbles:!1,composed:!1,detail:{interaction:this.type}})),l>0)return;let m=this.triggerElement instanceof R;this.dispatchEvent(new Event(d,{bubbles:m,composed:m})),this.triggerElement&&!m&&this.triggerElement.dispatchEvent(new CustomEvent(d,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=o?"opened":"closed"};return this.elements.forEach((a,l)=>{at(a,s(a,l),r(a,l))}),i}}return t}var he=P(()=>{"use strict";ct();Z()});var Ze,Ut,qt,me=P(()=>{"use strict";Ze="showPopover"in document.createElement("div"),Ut=class{constructor(){this.root=document.body,this.stack=[],this.handlePointerdown=t=>{this.pointerdownPath=t.composedPath()},this.handlePointerup=()=>{var t;if(!this.stack.length||!((t=this.pointerdownPath)!=null&&t.length))return;let n=this.pointerdownPath;this.pointerdownPath=void 0;let o=this.stack.filter(i=>!n.find(s=>s===i||s===i?.triggerElement)&&!i.shouldPreventClose()&&i.type!=="manual");o.reverse(),o.forEach(i=>{this.closeOverlay(i);let s=i.parentOverlayToForceClose;for(;s;)this.closeOverlay(s),s=s.parentOverlayToForceClose})},this.handleBeforetoggle=t=>{let{target:n,newState:o}=t;o!=="open"&&this.closeOverlay(n)},this.handleKeydown=t=>{if(t.code!=="Escape")return;let n=this.stack.at(-1);if(n?.type==="page"){t.preventDefault();return}Ze||this.stack.length&&n&&this.closeOverlay(n)},this.bindEvents()}get document(){return this.root.ownerDocument||document}bindEvents(){this.document.addEventListener("pointerdown",this.handlePointerdown),this.document.addEventListener("pointerup",this.handlePointerup),this.document.addEventListener("keydown",this.handleKeydown)}closeOverlay(t){let n=this.stack.indexOf(t);n>-1&&this.stack.splice(n,1),t.open=!1}overlaysByTriggerElement(t){return this.stack.filter(n=>n.triggerElement===t)}add(t){if(this.stack.includes(t)){let n=this.stack.indexOf(t);n>-1&&(this.stack.splice(n,1),this.stack.push(t));return}if(t.type==="auto"||t.type==="modal"||t.type==="page"){let n="sp-overlay-query-path",o=new Event(n,{composed:!0,bubbles:!0});t.addEventListener(n,i=>{let s=i.composedPath();this.stack.forEach(r=>{!s.find(a=>a===r)&&r.type!=="manual"&&this.closeOverlay(r)})},{once:!0}),t.dispatchEvent(o)}else t.type==="hint"&&this.stack.forEach(n=>{n.type==="hint"&&this.closeOverlay(n)});requestAnimationFrame(()=>{this.stack.push(t),t.addEventListener("beforetoggle",this.handleBeforetoggle,{once:!0})})}remove(t){this.closeOverlay(t)}},qt=new Ut});function St(e,t,n){return T(e,V(t,n))}function tt(e,t){return typeof e=="function"?e(t):e}function j(e){return e.split("-")[0]}function et(e){return e.split("-")[1]}function _t(e){return e==="x"?"y":"x"}function kt(e){return e==="y"?"height":"width"}function dt(e){return["top","bottom"].includes(j(e))?"y":"x"}function Lt(e){return _t(dt(e))}function ue(e,t,n){n===void 0&&(n=!1);let o=et(e),i=Lt(e),s=kt(i),r=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=bt(r)),[r,bt(r)]}function fe(e){let t=bt(e);return[Tt(e),t,Tt(t)]}function Tt(e){return e.replace(/start|end/g,t=>en[t])}function nn(e,t,n){let o=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?s:r;default:return[]}}function ge(e,t,n,o){let i=et(e),s=nn(j(e),n==="start",o);return i&&(s=s.map(r=>r+"-"+i),t&&(s=s.concat(s.map(Tt)))),s}function bt(e){return e.replace(/left|right|bottom|top/g,t=>tn[t])}function on(e){return{top:0,right:0,bottom:0,left:0,...e}}function zt(e){return typeof e!="number"?on(e):{top:e,right:e,bottom:e,left:e}}function nt(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}var V,T,wt,xt,z,tn,en,Rt=P(()=>{V=Math.min,T=Math.max,wt=Math.round,xt=Math.floor,z=e=>({x:e,y:e}),tn={left:"right",right:"left",bottom:"top",top:"bottom"},en={start:"end",end:"start"}});function ve(e,t,n){let{reference:o,floating:i}=e,s=dt(t),r=Lt(t),a=kt(r),l=j(t),d=s==="y",m=o.x+o.width/2-i.width/2,c=o.y+o.height/2-i.height/2,u=o[a]/2-i[a]/2,p;switch(l){case"top":p={x:m,y:o.y-i.height};break;case"bottom":p={x:m,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:c};break;case"left":p={x:o.x-i.width,y:c};break;default:p={x:o.x,y:o.y}}switch(et(t)){case"start":p[r]-=u*(n&&d?-1:1);break;case"end":p[r]+=u*(n&&d?-1:1);break}return p}async function Dt(e,t){var n;t===void 0&&(t={});let{x:o,y:i,platform:s,rects:r,elements:a,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:c="floating",altBoundary:u=!1,padding:p=0}=tt(t,e),h=zt(p),v=a[u?c==="floating"?"reference":"floating":c],g=nt(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:d,rootBoundary:m,strategy:l})),y=c==="floating"?{...r.floating,x:o,y:i}:r.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=nt(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:b,strategy:l}):y);return{top:(g.top-w.top+h.top)/E.y,bottom:(w.bottom-g.bottom+h.bottom)/E.y,left:(g.left-w.left+h.left)/E.x,right:(w.right-g.right+h.right)/E.x}}async function sn(e,t){let{placement:n,platform:o,elements:i}=e,s=await(o.isRTL==null?void 0:o.isRTL(i.floating)),r=j(n),a=et(n),l=dt(n)==="y",d=["left","top"].includes(r)?-1:1,m=s&&l?-1:1,c=tt(t,e),{mainAxis:u,crossAxis:p,alignmentAxis:h}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...c};return a&&typeof h=="number"&&(p=a==="end"?h*-1:h),l?{x:p*m,y:u*d}:{x:u*d,y:p*m}}var ye,jt,Ft,Kt,Yt,Xt,Gt=P(()=>{Rt();Rt();ye=async(e,t,n)=>{let{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:r}=n,a=s.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t)),d=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:m,y:c}=ve(d,o,l),u=o,p={},h=0;for(let f=0;f<a.length;f++){let{name:v,fn:g}=a[f],{x:y,y:b,data:E,reset:w}=await g({x:m,y:c,initialPlacement:o,placement:u,strategy:i,middlewareData:p,rects:d,platform:r,elements:{reference:e,floating:t}});if(m=y??m,c=b??c,p={...p,[v]:{...p[v],...E}},w&&h<=50){h++,typeof w=="object"&&(w.placement&&(u=w.placement),w.rects&&(d=w.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:m,y:c}=ve(d,u,l)),f=-1;continue}}return{x:m,y:c,placement:u,strategy:i,middlewareData:p}};jt=e=>({name:"arrow",options:e,async fn(t){let{x:n,y:o,placement:i,rects:s,platform:r,elements:a,middlewareData:l}=t,{element:d,padding:m=0}=tt(e,t)||{};if(d==null)return{};let c=zt(m),u={x:n,y:o},p=Lt(i),h=kt(p),f=await r.getDimensions(d),v=p==="y",g=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",E=s.reference[h]+s.reference[p]-u[p]-s.floating[h],w=u[p]-s.reference[p],x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(d)),k=x?x[b]:0;(!k||!await(r.isElement==null?void 0:r.isElement(x)))&&(k=a.floating[b]||s.floating[h]);let M=E/2-w/2,Y=k/2-f[h]/2-1,gt=V(c[g],Y),vt=V(c[y],Y),N=gt,yt=k-f[h]-vt,L=k/2-f[h]/2+M,I=St(N,L,yt),H=!l.arrow&&et(i)!=null&&L!=I&&s.reference[h]/2-(L<N?gt:vt)-f[h]/2<0,_=H?L<N?L-N:L-yt:0;return{[p]:u[p]+_,data:{[p]:I,centerOffset:L-I-_,...H&&{alignmentOffset:_}},reset:H}}}),Ft=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;let{placement:i,middlewareData:s,rects:r,initialPlacement:a,platform:l,elements:d}=t,{mainAxis:m=!0,crossAxis:c=!0,fallbackPlacements:u,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:f=!0,...v}=tt(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};let g=j(i),y=j(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(d.floating)),E=u||(y||!f?[bt(a)]:fe(a));!u&&h!=="none"&&E.push(...ge(a,f,h,b));let w=[a,...E],x=await Dt(t,v),k=[],M=((o=s.flip)==null?void 0:o.overflows)||[];if(m&&k.push(x[g]),c){let N=ue(i,r,b);k.push(x[N[0]],x[N[1]])}if(M=[...M,{placement:i,overflows:k}],!k.every(N=>N<=0)){var Y,gt;let N=(((Y=s.flip)==null?void 0:Y.index)||0)+1,yt=w[N];if(yt)return{data:{index:N,overflows:M},reset:{placement:yt}};let L=(gt=M.filter(I=>I.overflows[0]<=0).sort((I,H)=>I.overflows[1]-H.overflows[1])[0])==null?void 0:gt.placement;if(!L)switch(p){case"bestFit":{var vt;let I=(vt=M.map(H=>[H.placement,H.overflows.filter(_=>_>0).reduce((_,Ve)=>_+Ve,0)]).sort((H,_)=>H[1]-_[1])[0])==null?void 0:vt[0];I&&(L=I);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};Kt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){let{x:n,y:o}=t,i=await sn(t,e);return{x:n+i.x,y:o+i.y,data:i}}}},Yt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:n,y:o,placement:i}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=tt(e,t),d={x:n,y:o},m=await Dt(t,l),c=dt(j(i)),u=_t(c),p=d[u],h=d[c];if(s){let v=u==="y"?"top":"left",g=u==="y"?"bottom":"right",y=p+m[v],b=p-m[g];p=St(y,p,b)}if(r){let v=c==="y"?"top":"left",g=c==="y"?"bottom":"right",y=h+m[v],b=h-m[g];h=St(y,h,b)}let f=a.fn({...t,[u]:p,[c]:h});return{...f,data:{x:f.x-n,y:f.y-o}}}}},Xt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){let{placement:n,rects:o,platform:i,elements:s}=t,{apply:r=()=>{},...a}=tt(e,t),l=await Dt(t,a),d=j(n),m=et(n),c=dt(n)==="y",{width:u,height:p}=o.floating,h,f;d==="top"||d==="bottom"?(h=d,f=m===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(f=d,h=m==="end"?"top":"bottom");let v=p-l[h],g=u-l[f],y=!t.middlewareData.shift,b=v,E=g;if(c){let x=u-l.left-l.right;E=m||y?V(g,x):x}else{let x=p-l.top-l.bottom;b=m||y?V(v,x):x}if(y&&!m){let x=T(l.left,0),k=T(l.right,0),M=T(l.top,0),Y=T(l.bottom,0);c?E=u-2*(x!==0||k!==0?x+k:T(l.left,l.right)):b=p-2*(M!==0||Y!==0?M+Y:T(l.top,l.bottom))}await r({...t,availableWidth:E,availableHeight:b});let w=await i.getDimensions(s.floating);return u!==w.width||p!==w.height?{reset:{rects:!0}}:{}}}}});function K(e){return we(e)?(e.nodeName||"").toLowerCase():"#document"}function A(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function U(e){var t;return(t=(we(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function we(e){return e instanceof Node||e instanceof A(e).Node}function q(e){return e instanceof Element||e instanceof A(e).Element}function $(e){return e instanceof HTMLElement||e instanceof A(e).HTMLElement}function be(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof A(e).ShadowRoot}function ht(e){let{overflow:t,overflowX:n,overflowY:o,display:i}=D(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function xe(e){return["table","td","th"].includes(K(e))}function mt(e){let t=$t(),n=D(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Nt(e){let t=ot(e);for(;$(t)&&!Et(t);){if(mt(t))return t;t=ot(t)}return null}function $t(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Et(e){return["html","body","#document"].includes(K(e))}function D(e){return A(e).getComputedStyle(e)}function Ct(e){return q(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ot(e){if(K(e)==="html")return e;let t=e.assignedSlot||e.parentNode||be(e)&&e.host||U(e);return be(t)?t.host:t}function Ee(e){let t=ot(e);return Et(t)?e.ownerDocument?e.ownerDocument.body:e.body:$(t)&&ht(t)?t:Ee(t)}function pt(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);let i=Ee(e),s=i===((o=e.ownerDocument)==null?void 0:o.body),r=A(i);return s?t.concat(r,r.visualViewport||[],ht(i)?i:[],r.frameElement&&n?pt(r.frameElement):[]):t.concat(i,pt(i,[],n))}var Jt=P(()=>{});function Pe(e){let t=D(e),n=parseFloat(t.width)||0,o=parseFloat(t.height)||0,i=$(e),s=i?e.offsetWidth:n,r=i?e.offsetHeight:o,a=wt(n)!==s||wt(o)!==r;return a&&(n=s,o=r),{width:n,height:o,$:a}}function Qt(e){return q(e)?e:e.contextElement}function ut(e){let t=Qt(e);if(!$(t))return z(1);let n=t.getBoundingClientRect(),{width:o,height:i,$:s}=Pe(t),r=(s?wt(n.width):n.width)/o,a=(s?wt(n.height):n.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}function Ae(e){let t=A(e);return!$t()||!t.visualViewport?rn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function an(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==A(e)?!1:t}function it(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);let i=e.getBoundingClientRect(),s=Qt(e),r=z(1);t&&(o?q(o)&&(r=ut(o)):r=ut(e));let a=an(s,n,o)?Ae(s):z(0),l=(i.left+a.x)/r.x,d=(i.top+a.y)/r.y,m=i.width/r.x,c=i.height/r.y;if(s){let u=A(s),p=o&&q(o)?A(o):o,h=u.frameElement;for(;h&&o&&p!==u;){let f=ut(h),v=h.getBoundingClientRect(),g=D(h),y=v.left+(h.clientLeft+parseFloat(g.paddingLeft))*f.x,b=v.top+(h.clientTop+parseFloat(g.paddingTop))*f.y;l*=f.x,d*=f.y,m*=f.x,c*=f.y,l+=y,d+=b,h=A(h).frameElement}}return nt({width:m,height:c,x:l,y:d})}function ln(e){let{rect:t,offsetParent:n,strategy:o}=e,i=$(n),s=U(n);if(n===s)return t;let r={scrollLeft:0,scrollTop:0},a=z(1),l=z(0);if((i||!i&&o!=="fixed")&&((K(n)!=="body"||ht(s))&&(r=Ct(n)),$(n))){let d=it(n);a=ut(n),l.x=d.x+n.clientLeft,l.y=d.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-r.scrollLeft*a.x+l.x,y:t.y*a.y-r.scrollTop*a.y+l.y}}function cn(e){return Array.from(e.getClientRects())}function Te(e){return it(U(e)).left+Ct(e).scrollLeft}function dn(e){let t=U(e),n=Ct(e),o=e.ownerDocument.body,i=T(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=T(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),r=-n.scrollLeft+Te(e),a=-n.scrollTop;return D(o).direction==="rtl"&&(r+=T(t.clientWidth,o.clientWidth)-i),{width:i,height:s,x:r,y:a}}function pn(e,t){let n=A(e),o=U(e),i=n.visualViewport,s=o.clientWidth,r=o.clientHeight,a=0,l=0;if(i){s=i.width,r=i.height;let d=$t();(!d||d&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:r,x:a,y:l}}function hn(e,t){let n=it(e,!0,t==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,s=$(e)?ut(e):z(1),r=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,d=o*s.y;return{width:r,height:a,x:l,y:d}}function Ce(e,t,n){let o;if(t==="viewport")o=pn(e,n);else if(t==="document")o=dn(U(e));else if(q(t))o=hn(t,n);else{let i=Ae(e);o={...t,x:t.x-i.x,y:t.y-i.y}}return nt(o)}function Se(e,t){let n=ot(e);return n===t||!q(n)||Et(n)?!1:D(n).position==="fixed"||Se(n,t)}function mn(e,t){let n=t.get(e);if(n)return n;let o=pt(e,[],!1).filter(a=>q(a)&&K(a)!=="body"),i=null,s=D(e).position==="fixed",r=s?ot(e):e;for(;q(r)&&!Et(r);){let a=D(r),l=mt(r);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ht(r)&&!l&&Se(e,r))?o=o.filter(m=>m!==r):i=a,r=ot(r)}return t.set(e,o),o}function un(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e,r=[...n==="clippingAncestors"?mn(t,this._c):[].concat(n),o],a=r[0],l=r.reduce((d,m)=>{let c=Ce(t,m,i);return d.top=T(c.top,d.top),d.right=V(c.right,d.right),d.bottom=V(c.bottom,d.bottom),d.left=T(c.left,d.left),d},Ce(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function fn(e){return Pe(e)}function gn(e,t,n){let o=$(t),i=U(t),s=n==="fixed",r=it(e,!0,s,t),a={scrollLeft:0,scrollTop:0},l=z(0);if(o||!o&&!s)if((K(t)!=="body"||ht(i))&&(a=Ct(t)),o){let d=it(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=Te(i));return{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function Oe(e,t){return!$(e)||D(e).position==="fixed"?null:t?t(e):e.offsetParent}function ke(e,t){let n=A(e);if(!$(e))return n;let o=Oe(e,t);for(;o&&xe(o)&&D(o).position==="static";)o=Oe(o,t);return o&&(K(o)==="html"||K(o)==="body"&&D(o).position==="static"&&!mt(o))?n:o||Nt(e)||n}function yn(e){return D(e).direction==="rtl"}function wn(e,t){let n=null,o,i=U(e);function s(){clearTimeout(o),n&&n.disconnect(),n=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();let{left:d,top:m,width:c,height:u}=e.getBoundingClientRect();if(a||t(),!c||!u)return;let p=xt(m),h=xt(i.clientWidth-(d+c)),f=xt(i.clientHeight-(m+u)),v=xt(d),y={rootMargin:-p+"px "+-h+"px "+-f+"px "+-v+"px",threshold:T(0,V(1,l))||1},b=!0;function E(w){let x=w[0].intersectionRatio;if(x!==l){if(!b)return r();x?r(!1,x):o=setTimeout(()=>{r(!1,1e-7)},100)}b=!1}try{n=new IntersectionObserver(E,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,y)}n.observe(e)}return r(!0),s}function Le(e,t,n,o){o===void 0&&(o={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,d=Qt(e),m=i||s?[...d?pt(d):[],...pt(t)]:[];m.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});let c=d&&a?wn(d,n):null,u=-1,p=null;r&&(p=new ResizeObserver(g=>{let[y]=g;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{p&&p.observe(t)})),n()}),d&&!l&&p.observe(d),p.observe(t));let h,f=l?it(e):null;l&&v();function v(){let g=it(e);f&&(g.x!==f.x||g.y!==f.y||g.width!==f.width||g.height!==f.height)&&n(),f=g,h=requestAnimationFrame(v)}return n(),()=>{m.forEach(g=>{i&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),c&&c(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(h)}}var rn,vn,bn,Re,De=P(()=>{Gt();Gt();Rt();Jt();rn=z(0);vn=async function(e){let{reference:t,floating:n,strategy:o}=e,i=this.getOffsetParent||ke,s=this.getDimensions;return{reference:gn(t,await i(n),o),floating:{x:0,y:0,...await s(n)}}};bn={convertOffsetParentRelativeRectToViewportRelativeRect:ln,getDocumentElement:U,getClippingRect:un,getOffsetParent:ke,getElementRects:vn,getClientRects:cn,getDimensions:fn,getScale:ut,isElement:q,isRTL:yn};Re=(e,t,n)=>{let o=new Map,i={platform:bn,...n},s={...i.platform,_c:o};return ye(e,t,{...i,platform:s})}});var Fe,Ne=P(()=>{"use strict";Jt();ct();Fe=()=>({name:"topLayer",async fn(e){let{x:t,y:n,elements:{reference:o,floating:i}}=e,s=!1,r=!1,a=!1,l={x:0,y:0};try{s=s||i.matches(":popover-open")}catch{}try{s=s||i.matches(":open")}catch{}try{s=s||i.matches(":modal")}catch{}r=s;let d=new Event("floating-ui-dialog-test",{composed:!0,bubbles:!0});i.addEventListener("floating-ui-dialog-test",c=>{c.composedPath().forEach(u=>{if(a=a||u===o,!(u===i||u.localName!=="dialog"))try{s=s||u.matches(":modal")}catch{}})},{once:!0}),i.dispatchEvent(d);let m=!1;if(!(o instanceof R)){let c=a?o:i,u=mt(c)?c:Nt(c),p={};if(u!==null&&A(u)!==u&&(p=getComputedStyle(u),m=p.transform!=="none"||p.translate!=="none"||(p.backdropFilter?p.backdropFilter!=="none":!1)||(p.filter?p.filter!=="none":!1)||p.willChange.search("transform")>-1||p.willChange.search("translate")>-1||["paint","layout","strict","content"].some(h=>(p.contain||"").includes(h))),s&&m&&u){let h=u.getBoundingClientRect(),{marginInlineStart:f="0",marginBlockStart:v="0"}=p;l.x=h.x+parseFloat(f),l.y=h.y+parseFloat(v)}}return s&&r?{x:t+l.x,y:n+l.y,data:l}:s?{x:t,y:n,data:l}:{x:t-l.x,y:n-l.y,data:l}}})});function Bt(e){if(typeof e>"u")return 0;let t=window.devicePixelRatio||1;return Math.round(e*t)/t}var Mt,xn,En,Bo,It,$e=P(()=>{"use strict";De();Ne();Mt=8,xn=100,En=e=>{var t;return(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[e])!=null?t:[e]},Bo=Symbol("placement updated"),It=class{constructor(t){this.originalPlacements=new WeakMap,this.allowPlacementUpdate=!1,this.updatePlacement=()=>{if(!this.allowPlacementUpdate&&this.options.type!=="modal"&&this.cleanup){this.target.dispatchEvent(new Event("close",{bubbles:!0}));return}this.computePlacement(),this.allowPlacementUpdate=!1},this.resetOverlayPosition=()=>{!this.target||!this.options||(this.target.style.removeProperty("max-height"),this.target.style.removeProperty("height"),this.initialHeight=void 0,this.isConstrained=!1,this.host.offsetHeight,this.computePlacement())},this.host=t,this.host.addController(this)}async placeOverlay(t=this.target,n=this.options){if(this.target=t,this.options=n,!t||!n)return;let o=Le(n.trigger,t,this.updatePlacement,{elementResize:!1,layoutShift:!1});this.cleanup=()=>{var i;(i=this.host.elements)==null||i.forEach(s=>{s.addEventListener("sp-closed",()=>{let r=this.originalPlacements.get(s);r&&s.setAttribute("placement",r),this.originalPlacements.delete(s)},{once:!0})}),o()}}async computePlacement(){var t,n;let{options:o,target:i}=this;await(document.fonts?document.fonts.ready:Promise.resolve());let s=o.trigger instanceof HTMLElement?Ft():Ft({padding:Mt,fallbackPlacements:En(o.placement)}),[r=0,a=0]=Array.isArray(o?.offset)?o.offset:[o.offset,0],l=(t=this.host.elements.find(h=>h.tipElement))==null?void 0:t.tipElement,d=[Kt({mainAxis:r,crossAxis:a}),Yt({padding:Mt}),s,Xt({padding:Mt,apply:({availableWidth:h,availableHeight:f,rects:{floating:v}})=>{let g=Math.max(xn,Math.floor(f)),y=v.height;this.initialHeight=this.isConstrained&&this.initialHeight||y,this.isConstrained=y<this.initialHeight||g<=y;let b=this.isConstrained?`${g}px`:"";Object.assign(i.style,{maxWidth:`${Math.floor(h)}px`,maxHeight:b,height:b})}}),...l?[jt({element:l,padding:o.tipPadding||Mt})]:[],Fe()],{x:m,y:c,placement:u,middlewareData:p}=await Re(o.trigger,i,{placement:o.placement,middleware:d,strategy:"fixed"});if(Object.assign(i.style,{top:"0px",left:"0px",translate:`${Bt(m)}px ${Bt(c)}px`}),i.setAttribute("actual-placement",u),(n=this.host.elements)==null||n.forEach(h=>{this.originalPlacements.set(h,h.getAttribute("placement")),h.setAttribute("placement",u)}),l&&p.arrow){let{x:h,y:f}=p.arrow;Object.assign(l.style,{top:u.startsWith("right")||u.startsWith("left")?"0px":"",left:u.startsWith("bottom")||u.startsWith("top")?"0px":"",translate:`${Bt(h)}px ${Bt(f)}px`})}}hostConnected(){document.addEventListener("sp-update-overlays",this.resetOverlayPosition)}hostUpdated(){var t;this.host.open||((t=this.cleanup)==null||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0,document.removeEventListener("sp-update-overlays",this.resetOverlayPosition)}}});import{css as Cn}from"/libs/features/spectrum-web-components/dist/base.js";var On,Be,Me=P(()=>{"use strict";On=Cn`
:host{--swc-overlay-animation-distance:var(
--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)
);display:contents;pointer-events:none}.dialog{--sp-overlay-open:true;background:none;border:0;box-sizing:border-box;display:flex;height:auto;inset:auto;left:0;margin:0;max-height:calc(100vh - 16px);max-height:calc(100dvh - 16px);max-width:calc(100vw - 16px);opacity:1!important;overflow:visible;padding:0;position:fixed;top:0}.dialog:not([is-visible]){translate:-999em -999em!important}.dialog:focus{outline:none}dialog:modal{--mod-popover-filter:var(--spectrum-popover-filter)}:host(:not([open])) .dialog{--sp-overlay-open:false}.dialog::backdrop{display:none}.dialog:before{content:"";inset:-999em;pointer-events:auto!important;position:absolute}.dialog:not(.not-immediately-closable):before{display:none}.dialog>div{width:100%}::slotted(*){pointer-events:auto}::slotted(sp-popover){position:static}::slotted(sp-tooltip){--swc-tooltip-margin:0}.dialog:not([actual-placement])[placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}slot[name=longpress-describedby-descriptor]{display:none}@supports selector(:open){.dialog{opacity:0}.dialog:open{--mod-popover-filter:var(--spectrum-popover-filter);opacity:1}}@supports selector(:popover-open){.dialog{opacity:0}.dialog:popover-open{--mod-popover-filter:var(--spectrum-popover-filter);opacity:1}}@supports (not selector(:open)) and (not selector(:popover-open)){:host:not([open]) .dialog{pointer-events:none}.dialog[actual-placement]{z-index:calc(var(--swc-overlay-z-index-base, 1000) + var(--swc-overlay-open-count))}}
`,Be=On});import{html as Ht}from"/libs/features/spectrum-web-components/dist/base.js";import{property as B,query as Ie,queryAssignedElements as Tn,state as Sn}from"/libs/features/spectrum-web-components/dist/base.js";import{isAndroid as kn,isIOS as Ln}from"/libs/features/spectrum-web-components/dist/shared.js";import{ElementResolutionController as Rn,elementResolverUpdatedSymbol as Dn}from"/libs/features/spectrum-web-components/dist/reactive-controllers.js";import{conditionAttributeWithId as Zt}from"/libs/features/spectrum-web-components/dist/base.js";import{ifDefined as te,styleMap as He}from"/libs/features/spectrum-web-components/dist/base.js";var Pn,An,S,Fn,Nn,$n,Bn,Ot,C,Wt,ne=P(()=>{"use strict";Z();ae();de();he();me();Z();ct();$e();Me();Pn=Object.defineProperty,An=Object.getOwnPropertyDescriptor,S=(e,t,n,o)=>{for(var i=o>1?void 0:o?An(t,n):t,s=e.length-1,r;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Pn(t,n,i),i},Fn=300,Nn=300,$n={touch:"Double tap and long press for additional options",keyboard:"Press Space or Alt+Down Arrow for additional options",mouse:"Click and hold for additional options"},Bn="showPopover"in document.createElement("div"),Ot=re(st);Bn?Ot=ce(Ot):Ot=pe(Ot);C=class ee extends Ot{constructor(){super(...arguments),this._delayed=!1,this._disabled=!1,this.longpressState="null",this.offset=6,this.placementController=new It(this),this._open=!1,this.receivesFocus="auto",this.releaseAriaDescribedby=W,this.releaseLongpressDescribedby=W,this._state="closed",this.triggerElement=null,this.type="auto",this.wasOpen=!1,this.elementResolver=new Rn(this),this.closeOnFocusOut=t=>{if(!t.relatedTarget)return;let n=new Event("overlay-relation-query",{bubbles:!0,composed:!0});t.relatedTarget.addEventListener(n.type,o=>{o.composedPath().includes(this)||(this.open=!1)}),t.relatedTarget.dispatchEvent(n)},this.elementIds=[],this.handlePointerdown=t=>{if(!this.triggerElement||t.button!==0)return;let n=this.triggerElement;this.longpressState="potential",document.addEventListener("pointerup",this.handlePointerup),document.addEventListener("pointercancel",this.handlePointerup),!n.holdAffordance&&(this.longressTimeout=setTimeout(()=>{n&&n.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"pointer"}}))},Fn))},this.handlePointerup=()=>{clearTimeout(this.longressTimeout),this.triggerElement&&(this.longpressState=this.state==="opening"?"pressed":"null",document.removeEventListener("pointerup",this.handlePointerup),document.removeEventListener("pointercancel",this.handlePointerup))},this.handleKeydown=t=>{let{code:n,altKey:o}=t;(n==="Space"||o&&n==="ArrowDown")&&n==="ArrowDown"&&(t.stopPropagation(),t.stopImmediatePropagation())},this.handleKeyup=t=>{let{code:n,altKey:o}=t;if(n==="Space"||o&&n==="ArrowDown"){if(!this.triggerElement||!this.hasNonVirtualTrigger)return;t.stopPropagation(),this.triggerElement.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"keyboard"}})),setTimeout(()=>{this.longpressState="null"})}},this.preventNextToggle=!1,this.handlePointerdownForClick=()=>{this.preventNextToggle=this.open},this.handleClick=()=>{this.longpressState==="opening"||this.longpressState==="pressed"||(this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1)},this.focusedin=!1,this.handleFocusin=()=>{this.open=!0,this.focusedin=!0},this.handleFocusout=()=>{this.focusedin=!1,!this.pointerentered&&(this.open=!1)},this.pointerentered=!1,this.handlePointerenter=()=>{this.hoverTimeout&&(clearTimeout(this.hoverTimeout),delete this.hoverTimeout),!this.disabled&&(this.open=!0,this.pointerentered=!0)},this.handleOverlayPointerenter=()=>{this.hoverTimeout&&(clearTimeout(this.hoverTimeout),delete this.hoverTimeout)},this.handlePointerleave=()=>{this.doPointerleave()},this.handleOverlayPointerleave=()=>{this.doPointerleave()},this.handleLongpress=()=>{this.open=!0,this.longpressState=this.longpressState==="potential"?"opening":"pressed"}}get delayed(){var t;return((t=this.elements.at(-1))==null?void 0:t.hasAttribute("delayed"))||this._delayed}set delayed(t){this._delayed=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t,t?(this.hasNonVirtualTrigger&&this.unbindEvents(),this.wasOpen=this.open,this.open=!1):(this.bindEvents(),this.open=this.open||this.wasOpen,this.wasOpen=!1)}get hasNonVirtualTrigger(){return!!this.triggerElement&&!(this.triggerElement instanceof R)}get open(){return this._open}set open(t){t&&this.disabled||t!==this.open&&((this.longpressState==="opening"||this.longpressState==="pressed")&&!t||(this._open=t,this.open&&(ee.openCount+=1),this.requestUpdate("open",!this.open)))}get state(){return this._state}set state(t){if(t===this.state)return;let n=this.state;this._state=t,(this.state==="opened"||this.state==="closed")&&(this.longpressState=this.longpressState==="pressed"?"null":this.longpressState),this.requestUpdate("state",n)}get usesDialog(){return this.type==="modal"||this.type==="page"}get popoverValue(){if("popover"in this)switch(this.type){case"modal":case"page":return;case"hint":return"manual";default:return this.type}}get requiresPosition(){return!(this.type==="page"||!this.open||!this.triggerElement||!this.placement&&this.type!=="hint")}managePosition(){if(!this.requiresPosition||!this.open)return;let t=this.offset||0,n=this.triggerElement,o=this.placement||"right",i=this.tipPadding;this.placementController.placeOverlay(this.dialogEl,{offset:t,placement:o,tipPadding:i,trigger:n,type:this.type})}async managePopoverOpen(){super.managePopoverOpen();let t=this.open;if(this.open!==t||(await this.manageDelay(t),this.open!==t)||(await this.ensureOnDOM(t),this.open!==t))return;let n=await this.makeTransition(t);this.open===t&&await this.applyFocus(t,n)}async applyFocus(t,n){if(!(this.receivesFocus==="false"||this.type==="hint")){if(await Q(),await Q(),t===this.open&&!this.open){this.hasNonVirtualTrigger&&this.contains(this.getRootNode().activeElement)&&this.triggerElement.focus();return}n?.focus()}}async manageOpen(t){var n;if(!(!this.isConnected&&this.open)){if(this.hasUpdated||await this.updateComplete,this.open?(qt.add(this),this.willPreventClose&&(document.addEventListener("pointerup",()=>{this.dialogEl.classList.toggle("not-immediately-closable",!1),this.willPreventClose=!1},{once:!0}),this.dialogEl.classList.toggle("not-immediately-closable",!0))):(t&&this.dispose(),qt.remove(this)),this.open&&this.state!=="opened"?this.state="opening":!this.open&&this.state!=="closed"&&(this.state="closing"),this.usesDialog?this.manageDialogOpen():this.managePopoverOpen(),this.type==="auto"){let o=this.getRootNode();this.open?o.addEventListener("focusout",this.closeOnFocusOut,{capture:!0}):o.removeEventListener("focusout",this.closeOnFocusOut,{capture:!0})}if(!this.open&&this.type!=="hint"){let o=()=>{var i;let s=[],r=document.activeElement;for(;r!=null&&r.shadowRoot&&r.shadowRoot.activeElement;)r=r.shadowRoot.activeElement;for(;r;){let a=r.assignedSlot||r.parentElement||((i=r.getRootNode())==null?void 0:i.host);a&&s.push(a),r=a}return s};(n=this.triggerElement)!=null&&n.focus&&(this.contains(this.getRootNode().activeElement)||o().includes(this))&&this.triggerElement.focus()}}}unbindEvents(){var t;(t=this.abortController)==null||t.abort()}bindEvents(){if(!this.hasNonVirtualTrigger)return;this.abortController=new AbortController;let t=this.triggerElement;switch(this.triggerInteraction){case"click":this.bindClickEvents(t);return;case"longpress":this.bindLongpressEvents(t);return;case"hover":this.bindHoverEvents(t);return}}bindClickEvents(t){let n={signal:this.abortController.signal};t.addEventListener("click",this.handleClick,n),t.addEventListener("pointerdown",this.handlePointerdownForClick,n)}bindLongpressEvents(t){let n={signal:this.abortController.signal};t.addEventListener("longpress",this.handleLongpress,n),t.addEventListener("pointerdown",this.handlePointerdown,n),this.prepareLongpressDescription(t),!t.holdAffordance&&(t.addEventListener("keydown",this.handleKeydown,n),t.addEventListener("keyup",this.handleKeyup,n))}bindHoverEvents(t){let n={signal:this.abortController.signal};t.addEventListener("focusin",this.handleFocusin,n),t.addEventListener("focusout",this.handleFocusout,n),t.addEventListener("pointerenter",this.handlePointerenter,n),t.addEventListener("pointerleave",this.handlePointerleave,n),this.addEventListener("pointerenter",this.handleOverlayPointerenter,n),this.addEventListener("pointerleave",this.handleOverlayPointerleave,n)}manageTriggerElement(t){t&&(this.unbindEvents(),this.releaseAriaDescribedby()),!(!this.triggerElement||this.triggerElement instanceof R)&&(this.bindEvents(),this.receivesFocus!=="true"&&this.prepareAriaDescribedby())}prepareLongpressDescription(t){if(this.triggerInteraction!=="longpress"||this.releaseLongpressDescribedby!==W||!this.elements.length)return;let n=document.createElement("div");n.id=`longpress-describedby-descriptor-${crypto.randomUUID().slice(0,8)}`;let o=Ln()||kn()?"touch":"keyboard";n.textContent=$n[o],n.slot="longpress-describedby-descriptor";let i=t.getRootNode(),s=this.getRootNode();i===s?this.append(n):(n.hidden=!("host"in i),t.insertAdjacentElement("afterend",n));let r=Zt(t,"aria-describedby",[n.id]);this.releaseLongpressDescribedby=()=>{r(),n.remove(),this.releaseLongpressDescribedby=W}}prepareAriaDescribedby(){if(this.triggerInteraction!=="hover"||this.releaseAriaDescribedby!==W||!this.elements.length||!this.hasNonVirtualTrigger)return;let t=this.triggerElement,n=t.getRootNode(),o=this.elements[0].getRootNode(),i=this.getRootNode();if(n==i){let s=Zt(t,"aria-describedby",[this.id]);this.releaseAriaDescribedby=()=>{s(),this.releaseAriaDescribedby=W}}else if(n===o){this.elementIds=this.elements.map(a=>a.id);let s=this.elements.map(a=>(a.id||(a.id=`${this.tagName.toLowerCase()}-helper-${crypto.randomUUID().slice(0,8)}`),a.id)),r=Zt(t,"aria-describedby",s);this.releaseAriaDescribedby=()=>{r(),this.elements.map((a,l)=>{a.id=this.elementIds[l]}),this.releaseAriaDescribedby=W}}}doPointerleave(){this.pointerentered=!1;let t=this.triggerElement;this.focusedin&&t.matches(":focus-visible")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},Nn))}handleBeforetoggle(t){t.newState!=="open"&&this.handleBrowserClose()}handleBrowserClose(){if(this.longpressState!=="opening"&&this.longpressState!=="pressed"){this.open=!1;return}this.manuallyKeepOpen()}manuallyKeepOpen(){super.manuallyKeepOpen(),this.open=!0,this.placementController.allowPlacementUpdate=!0,this.manageOpen(!1)}handleSlotchange(){this.triggerElement&&this.prepareAriaDescribedby(),this.elements.length?this.hasNonVirtualTrigger&&this.prepareLongpressDescription(this.triggerElement):this.releaseLongpressDescribedby()}shouldPreventClose(){let t=this.willPreventClose;return this.willPreventClose=!1,t}willUpdate(t){var n;if(this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${crypto.randomUUID().slice(0,8)}`),t.has("open")&&(typeof t.get("open")<"u"||this.open)&&this.manageOpen(t.get("open")),t.has("trigger")){let[i,s]=((n=this.trigger)==null?void 0:n.split("@"))||[];this.elementResolver.selector=i?`#${i}`:"",this.triggerInteraction=s}let o=this.triggerElement;t.has(Dn)&&(this.triggerElement=this.elementResolver.element,this.manageTriggerElement(o)),t.has("triggerElement")&&this.manageTriggerElement(t.get("triggerElement"))}updated(t){super.updated(t),t.has("placement")&&(this.placement?this.dialogEl.setAttribute("actual-placement",this.placement):this.dialogEl.removeAttribute("actual-placement"),this.open&&typeof t.get("placement")<"u"&&this.placementController.resetOverlayPosition())}renderContent(){return Ht`
            <slot @slotchange=${this.handleSlotchange}></slot>
        `}get dialogStyleMap(){return{"--swc-overlay-open-count":ee.openCount.toString()}}renderDialog(){return Ht`
            <dialog
                class="dialog"
                part="dialog"
                placement=${te(this.requiresPosition?this.placement||"right":void 0)}
                style=${He(this.dialogStyleMap)}
                @close=${this.handleBrowserClose}
                @cancel=${this.handleBrowserClose}
                @beforetoggle=${this.handleBeforetoggle}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </dialog>
        `}renderPopover(){return Ht`
            <div
                class="dialog"
                part="dialog"
                placement=${te(this.requiresPosition?this.placement||"right":void 0)}
                popover=${te(this.popoverValue)}
                style=${He(this.dialogStyleMap)}
                @beforetoggle=${this.handleBeforetoggle}
                @close=${this.handleBrowserClose}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </div>
        `}render(){let t=this.type==="modal"||this.type==="page";return Ht`
            ${t?this.renderDialog():this.renderPopover()}
            <slot name="longpress-describedby-descriptor"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("close",()=>{this.open=!1}),this.hasNonVirtualTrigger&&this.bindEvents()}disconnectedCallback(){this.hasNonVirtualTrigger&&this.unbindEvents(),this.releaseAriaDescribedby(),this.releaseLongpressDescribedby(),this.open=!1,super.disconnectedCallback()}};C.styles=[Be],C.openCount=1,S([B({type:Boolean})],C.prototype,"delayed",1),S([Ie(".dialog")],C.prototype,"dialogEl",2),S([B({type:Boolean})],C.prototype,"disabled",1),S([Tn({flatten:!0,selector:':not([slot="longpress-describedby-descriptor"], slot)'})],C.prototype,"elements",2),S([B({type:Number})],C.prototype,"offset",2),S([B({type:Boolean,reflect:!0})],C.prototype,"open",1),S([B()],C.prototype,"placement",2),S([B({attribute:"receives-focus"})],C.prototype,"receivesFocus",2),S([Ie("slot")],C.prototype,"slotEl",2),S([Sn()],C.prototype,"state",1),S([B({type:Number,attribute:"tip-padding"})],C.prototype,"tipPadding",2),S([B()],C.prototype,"trigger",2),S([B({attribute:!1})],C.prototype,"triggerElement",2),S([B({attribute:!1})],C.prototype,"triggerInteraction",2),S([B()],C.prototype,"type",2);Wt=C});var At={};import{defineElement as Mn}from"/libs/features/spectrum-web-components/dist/base.js";var lt=P(()=>{"use strict";ne();Mn("sp-overlay",Wt)});lt();import{defineElement as qn}from"/libs/features/spectrum-web-components/dist/base.js";import{html as J,SpectrumElement as Un}from"/libs/features/spectrum-web-components/dist/base.js";import{property as ft,query as oe,state as Vt}from"/libs/features/spectrum-web-components/dist/base.js";import{css as In}from"/libs/features/spectrum-web-components/dist/base.js";var Hn=In`
:host([disabled]) ::slotted([slot=trigger]){pointer-events:none}slot[name=longpress-describedby-descriptor]{display:none}
`,We=Hn;var Wn=Object.defineProperty,Vn=Object.getOwnPropertyDescriptor,F=(e,t,n,o)=>{for(var i=o>1?void 0:o?Vn(t,n):t,s=e.length-1,r;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Wn(t,n,i),i},O=class extends Un{constructor(){super(...arguments),this.content="click hover longpress",this.offset=6,this.disabled=!1,this.clickContent=[],this.longpressContent=[],this.hoverContent=[],this.targetContent=[]}static get styles(){return[We]}getAssignedElementsFromSlot(t){return t.assignedElements({flatten:!0})}handleTriggerContent(t){this.targetContent=this.getAssignedElementsFromSlot(t.target)}handleSlotContent(t){switch(t.target.name){case"click-content":this.clickContent=this.getAssignedElementsFromSlot(t.target);break;case"longpress-content":this.longpressContent=this.getAssignedElementsFromSlot(t.target);break;case"hover-content":this.hoverContent=this.getAssignedElementsFromSlot(t.target);break}}handleBeforetoggle(t){let{target:n}=t,o;if(n===this.clickOverlayElement)o="click";else if(n===this.longpressOverlayElement)o="longpress";else if(n===this.hoverOverlayElement)o="hover";else return;t.newState==="open"?this.open=o:this.open===o&&(this.open=void 0)}update(t){var n,o,i,s,r,a;t.has("clickContent")&&(this.clickPlacement=((n=this.clickContent[0])==null?void 0:n.getAttribute("placement"))||((o=this.clickContent[0])==null?void 0:o.getAttribute("direction"))||void 0),t.has("hoverContent")&&(this.hoverPlacement=((i=this.hoverContent[0])==null?void 0:i.getAttribute("placement"))||((s=this.hoverContent[0])==null?void 0:s.getAttribute("direction"))||void 0),t.has("longpressContent")&&(this.longpressPlacement=((r=this.longpressContent[0])==null?void 0:r.getAttribute("placement"))||((a=this.longpressContent[0])==null?void 0:a.getAttribute("direction"))||void 0),super.update(t)}renderSlot(t){return J`
            <slot name=${t} @slotchange=${this.handleSlotContent}></slot>
        `}renderClickOverlay(){Promise.resolve().then(()=>lt());let t=this.renderSlot("click-content");return this.clickContent.length?J`
            <sp-overlay
                id="click-overlay"
                ?disabled=${this.disabled||!this.clickContent.length}
                ?open=${this.open==="click"&&!!this.clickContent.length}
                .offset=${this.offset}
                .placement=${this.clickPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"click"}
                .type=${this.type!=="modal"?"auto":"modal"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${t}
            </sp-overlay>
        `:t}renderHoverOverlay(){Promise.resolve().then(()=>lt());let t=this.renderSlot("hover-content");return this.hoverContent.length?J`
            <sp-overlay
                id="hover-overlay"
                ?disabled=${this.disabled||!this.hoverContent.length||!!this.open&&this.open!=="hover"}
                ?open=${this.open==="hover"&&!!this.hoverContent.length}
                .offset=${this.offset}
                .placement=${this.hoverPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"hover"}
                .type=${"hint"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${t}
            </sp-overlay>
        `:t}renderLongpressOverlay(){Promise.resolve().then(()=>lt());let t=this.renderSlot("longpress-content");return this.longpressContent.length?J`
            <sp-overlay
                id="longpress-overlay"
                ?disabled=${this.disabled||!this.longpressContent.length}
                ?open=${this.open==="longpress"&&!!this.longpressContent.length}
                .offset=${this.offset}
                .placement=${this.longpressPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"longpress"}
                .type=${"auto"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${t}
            </sp-overlay>
            <slot name="longpress-describedby-descriptor"></slot>
        `:t}render(){let t=this.content.split(" ");return J`
            <slot
                id="trigger"
                name="trigger"
                @slotchange=${this.handleTriggerContent}
            ></slot>
            ${[t.includes("click")?this.renderClickOverlay():J``,t.includes("hover")?this.renderHoverOverlay():J``,t.includes("longpress")?this.renderLongpressOverlay():J``]}
        `}updated(t){if(super.updated(t),this.disabled&&t.has("disabled")){this.open=void 0;return}}async getUpdateComplete(){return await super.getUpdateComplete()}};F([ft()],O.prototype,"content",2),F([ft({reflect:!0})],O.prototype,"placement",2),F([ft()],O.prototype,"type",2),F([ft({type:Number})],O.prototype,"offset",2),F([ft({reflect:!0})],O.prototype,"open",2),F([ft({type:Boolean,reflect:!0})],O.prototype,"disabled",2),F([Vt()],O.prototype,"clickContent",2),F([Vt()],O.prototype,"longpressContent",2),F([Vt()],O.prototype,"hoverContent",2),F([Vt()],O.prototype,"targetContent",2),F([oe("#click-overlay",!0)],O.prototype,"clickOverlayElement",2),F([oe("#longpress-overlay",!0)],O.prototype,"longpressOverlayElement",2),F([oe("#hover-overlay",!0)],O.prototype,"hoverOverlayElement",2);qn("overlay-trigger",O);ne();window.__merch__spectrum_Overlay=Wt;
