{
  "version": 3,
  "sources": ["../../features/footer-promo.js"],
  "sourcesContent": ["import { createTag, getConfig } from '../utils/utils.js';\nimport { decorateSectionAnalytics } from '../martech/attributes.js';\n\nasync function getPromoFromTaxonomy(contentRoot, doc) {\n  const NAME_KEY = 'Name';\n  const FOOTER_PROMO_LINK_KEY = 'Footer Promo Link';\n  const taxonomyUrl = `${contentRoot}/taxonomy.json`;\n  const tags = [...doc.head.querySelectorAll('meta[property=\"article:tag\"]')].map((el) => el.content);\n\n  if (!tags.length) return undefined;\n\n  try {\n    const resp = await fetch(taxonomyUrl);\n    if (!resp.ok) return undefined;\n    const { data } = await resp.json();\n    const primaryTag = data.find((tag) => {\n      const name = tag[NAME_KEY].split('|').pop().trim();\n      return tags.includes(name) && tag[FOOTER_PROMO_LINK_KEY];\n    });\n    if (primaryTag) return primaryTag[FOOTER_PROMO_LINK_KEY];\n  } catch (error) {\n    /* c8 ignore next 2 */\n    window.lana.log(`Footer Promo - Taxonomy error: ${error}`, { tags: 'footer-promo', errorType: 'i' });\n  }\n  return undefined;\n}\n\nexport default async function initFooterPromo(footerPromoTag, footerPromoType, doc = document) {\n  const config = getConfig();\n  const { locale: { contentRoot } } = config;\n  let href = footerPromoTag && `${contentRoot}/fragments/footer-promos/${footerPromoTag}`;\n\n  if (footerPromoType === 'taxonomy') {\n    const promo = await getPromoFromTaxonomy(contentRoot, doc);\n    if (promo) href = promo;\n  }\n\n  if (!href) return;\n\n  const { default: loadFragment } = await import('../blocks/fragment/fragment.js');\n  const a = createTag('a', { href }, href);\n  const div = createTag('div', null, a);\n  const section = createTag('div', null, div);\n  doc.querySelector('main > div:last-of-type').insertAdjacentElement('afterend', section);\n  await loadFragment(a);\n  section.classList.add('section');\n  const sections = document.querySelectorAll('main > div');\n  decorateSectionAnalytics(section, sections.length - 1, config);\n}\n"],
  "mappings": ";;;;;;;;;;AAGA,eAAe,qBAAqB,aAAa,KAAK;AACpD,QAAM,WAAW;AACjB,QAAM,wBAAwB;AAC9B,QAAM,cAAc,GAAG,WAAW;AAClC,QAAM,OAAO,CAAC,GAAG,IAAI,KAAK,iBAAiB,8BAA8B,CAAC,EAAE,IAAI,CAAC,OAAO,GAAG,OAAO;AAElG,MAAI,CAAC,KAAK,OAAQ,QAAO;AAEzB,MAAI;AACF,UAAM,OAAO,MAAM,MAAM,WAAW;AACpC,QAAI,CAAC,KAAK,GAAI,QAAO;AACrB,UAAM,EAAE,KAAK,IAAI,MAAM,KAAK,KAAK;AACjC,UAAM,aAAa,KAAK,KAAK,CAAC,QAAQ;AACpC,YAAM,OAAO,IAAI,QAAQ,EAAE,MAAM,GAAG,EAAE,IAAI,EAAE,KAAK;AACjD,aAAO,KAAK,SAAS,IAAI,KAAK,IAAI,qBAAqB;AAAA,IACzD,CAAC;AACD,QAAI,WAAY,QAAO,WAAW,qBAAqB;AAAA,EACzD,SAAS,OAAO;AAEd,WAAO,KAAK,IAAI,kCAAkC,KAAK,IAAI,EAAE,MAAM,gBAAgB,WAAW,IAAI,CAAC;AAAA,EACrG;AACA,SAAO;AACT;AAEA,eAAO,gBAAuC,gBAAgB,iBAAiB,MAAM,UAAU;AAC7F,QAAM,SAAS,UAAU;AACzB,QAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,IAAI;AACpC,MAAI,OAAO,kBAAkB,GAAG,WAAW,4BAA4B,cAAc;AAErF,MAAI,oBAAoB,YAAY;AAClC,UAAM,QAAQ,MAAM,qBAAqB,aAAa,GAAG;AACzD,QAAI,MAAO,QAAO;AAAA,EACpB;AAEA,MAAI,CAAC,KAAM;AAEX,QAAM,EAAE,SAAS,aAAa,IAAI,MAAM,OAAO,wBAAgC;AAC/E,QAAM,IAAI,UAAU,KAAK,EAAE,KAAK,GAAG,IAAI;AACvC,QAAM,MAAM,UAAU,OAAO,MAAM,CAAC;AACpC,QAAM,UAAU,UAAU,OAAO,MAAM,GAAG;AAC1C,MAAI,cAAc,yBAAyB,EAAE,sBAAsB,YAAY,OAAO;AACtF,QAAM,aAAa,CAAC;AACpB,UAAQ,UAAU,IAAI,SAAS;AAC/B,QAAM,WAAW,SAAS,iBAAiB,YAAY;AACvD,2BAAyB,SAAS,SAAS,SAAS,GAAG,MAAM;AAC/D;",
  "names": []
}
