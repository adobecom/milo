{
  "version": 3,
  "sources": ["../navigation.js"],
  "sourcesContent": ["import { loadStyle } from '../utils/utils.js';\n\nconst blockConfig = [\n  {\n    key: 'header',\n    name: 'global-navigation',\n    targetEl: 'header',\n    appendType: 'prepend',\n    params: ['imsClientId', 'searchEnabled', 'unav', 'customLinks', 'jarvis'],\n  },\n  {\n    key: 'footer',\n    name: 'global-footer',\n    targetEl: 'footer',\n    appendType: 'appendChild',\n    params: ['privacyId', 'privacyLoadDelay'],\n  },\n];\n\nconst envMap = {\n  prod: 'https://www.adobe.com',\n  stage: 'https://www.stage.adobe.com',\n  qa: 'https://gnav--milo--adobecom.aem.page',\n};\n\nconst getStageDomainsMap = (stageDomainsMap) => (\n  {\n    'www.stage.adobe.com': {\n      'www.adobe.com': 'origin',\n      'helpx.adobe.com': 'helpx.stage.adobe.com',\n      'creativecloud.adobe.com': 'stage.creativecloud.adobe.com',\n      ...stageDomainsMap,\n    },\n    // Test app\n    'adobecom.github.io': {\n      'www.adobe.com': 'www.stage.adobe.com',\n      'helpx.adobe.com': 'helpx.stage.adobe.com',\n      'creativecloud.adobe.com': 'stage.creativecloud.adobe.com',\n      ...stageDomainsMap,\n    },\n  }\n);\n\nfunction getParamsConfigs(configs) {\n  return blockConfig.reduce((acc, block) => {\n    block.params.forEach((param) => {\n      const value = configs[block.key]?.[param];\n      if (value !== undefined) {\n        acc[param] = value;\n      }\n    });\n    return acc;\n  }, {});\n}\n\n/* eslint import/no-relative-packages: 0 */\nexport default async function loadBlock(configs, customLib) {\n  const {\n    header,\n    footer,\n    authoringPath,\n    env = 'prod',\n    locale = '',\n    theme,\n    stageDomainsMap = {},\n  } = configs || {};\n  if (!header && !footer) {\n    // eslint-disable-next-line no-console\n    console.error('Global navigation Error: header and footer configurations are missing.');\n    return;\n  }\n  const branch = new URLSearchParams(window.location.search).get('navbranch');\n  const miloLibs = branch ? `https://${branch}--milo--adobecom.aem.page` : customLib || envMap[env];\n\n  if (theme === 'dark') {\n    loadStyle(`${miloLibs}/libs/navigation/dist/base.css`, () => loadStyle(`${miloLibs}/libs/navigation/dist/dark-nav.css`));\n  } else {\n    loadStyle(`${miloLibs}/libs/navigation/dist/base.css`);\n  }\n\n  // Relative paths work just fine since they exist in the context of this file's origin\n  const [{ default: bootstrapBlock }, { default: locales }, { setConfig }] = await Promise.all([\n    import('./bootstrapper.js'),\n    import('../utils/locales.js'),\n    import('../utils/utils.js'),\n  ]);\n  loadStyle(`${miloLibs}/libs/navigation/dist/navigation.css`);\n\n  const paramConfigs = getParamsConfigs(configs);\n  const clientConfig = {\n    clientEnv: env,\n    origin: `https://main--federal--adobecom.aem.${env === 'prod' ? 'live' : 'page'}`,\n    miloLibs: `${miloLibs}/libs`,\n    pathname: `/${locale}`,\n    locales: configs.locales || locales,\n    contentRoot: authoringPath || footer.authoringPath,\n    theme,\n    ...paramConfigs,\n    standaloneGnav: true,\n    stageDomainsMap: getStageDomainsMap(stageDomainsMap),\n  };\n  setConfig(clientConfig);\n  for await (const block of blockConfig) {\n    const configBlock = configs[block.key];\n    try {\n      if (configBlock) {\n        if (block.key === 'header') {\n          const { default: init } = await import('../blocks/global-navigation/global-navigation.js');\n          await bootstrapBlock(init, {\n            ...block,\n            unavComponents: configBlock.unav?.unavComponents,\n            redirect: configBlock.redirect,\n            layout: configBlock.layout,\n            noBorder: configBlock.noBorder,\n            jarvis: configBlock.jarvis,\n          });\n        } else if (block.key === 'footer') {\n          loadStyle(`${miloLibs}/libs/navigation/dist/footer.css`);\n          const { default: init } = await import('../blocks/global-footer/global-footer.js');\n          await bootstrapBlock(init, { ...block });\n        }\n        configBlock.onReady?.();\n      }\n    } catch (e) {\n      configBlock.onError?.(e);\n    }\n  }\n}\n\nwindow.loadNavigation = loadBlock;\n"],
  "mappings": "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",
  "names": []
}
