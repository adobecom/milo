{
  "version": 3,
  "sources": ["../../utils/federated.js"],
  "sourcesContent": ["import { getConfig } from './utils.js';\n\nlet federatedContentRoot;\n/* eslint-disable import/prefer-default-export */\nexport const getFederatedContentRoot = () => {\n  const cdnWhitelistedOrigins = [\n    'https://www.adobe.com',\n    'https://business.adobe.com',\n    'https://blog.adobe.com',\n    'https://milo.adobe.com',\n    'https://news.adobe.com',\n  ];\n  const { allowedOrigins = [], origin: configOrigin } = getConfig();\n  if (federatedContentRoot) return federatedContentRoot;\n  // Non milo consumers will have its origin from congig\n  const origin = configOrigin || window.location.origin;\n\n  federatedContentRoot = [...allowedOrigins, ...cdnWhitelistedOrigins].some((o) => origin.replace('.stage', '') === o)\n    ? origin\n    : 'https://www.adobe.com';\n\n  if (origin.includes('localhost') || origin.includes('.hlx.')) {\n    federatedContentRoot = `https://main--federal--adobecom.hlx.${origin.endsWith('.live') ? 'live' : 'page'}`;\n  }\n\n  return federatedContentRoot;\n};\n\n// TODO we should match the akamai patterns /locale/federal/ at the start of the url\n// and make the check more strict.\nexport const getFederatedUrl = (url = '') => {\n  if (typeof url !== 'string' || !url.includes('/federal/')) return url;\n  if (url.startsWith('/')) return `${getFederatedContentRoot()}${url}`;\n  try {\n    const { pathname, search, hash } = new URL(url);\n    return `${getFederatedContentRoot()}${pathname}${search}${hash}`;\n  } catch (e) {\n    window.lana?.log(`getFederatedUrl errored parsing the URL: ${url}: ${e.toString()}`);\n  }\n  return url;\n};\n"],
  "mappings": ";;;;;AAEA,IAAI;AAEG,IAAM,0BAA0B,MAAM;AAC3C,QAAM,wBAAwB;AAAA,IAC5B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,QAAM,EAAE,iBAAiB,CAAC,GAAG,QAAQ,aAAa,IAAI,UAAU;AAChE,MAAI,qBAAsB,QAAO;AAEjC,QAAM,SAAS,gBAAgB,OAAO,SAAS;AAE/C,yBAAuB,CAAC,GAAG,gBAAgB,GAAG,qBAAqB,EAAE,KAAK,CAAC,MAAM,OAAO,QAAQ,UAAU,EAAE,MAAM,CAAC,IAC/G,SACA;AAEJ,MAAI,OAAO,SAAS,WAAW,KAAK,OAAO,SAAS,OAAO,GAAG;AAC5D,2BAAuB,uCAAuC,OAAO,SAAS,OAAO,IAAI,SAAS,MAAM;AAAA,EAC1G;AAEA,SAAO;AACT;AAIO,IAAM,kBAAkB,CAAC,MAAM,OAAO;AAC3C,MAAI,OAAO,QAAQ,YAAY,CAAC,IAAI,SAAS,WAAW,EAAG,QAAO;AAClE,MAAI,IAAI,WAAW,GAAG,EAAG,QAAO,GAAG,wBAAwB,CAAC,GAAG,GAAG;AAClE,MAAI;AACF,UAAM,EAAE,UAAU,QAAQ,KAAK,IAAI,IAAI,IAAI,GAAG;AAC9C,WAAO,GAAG,wBAAwB,CAAC,GAAG,QAAQ,GAAG,MAAM,GAAG,IAAI;AAAA,EAChE,SAAS,GAAG;AACV,WAAO,MAAM,IAAI,4CAA4C,GAAG,KAAK,EAAE,SAAS,CAAC,EAAE;AAAA,EACrF;AACA,SAAO;AACT;",
  "names": []
}
