{
  "version": 3,
  "sources": ["../../features/georoutingv2/georoutingv2.js"],
  "sourcesContent": ["import { getFederatedContentRoot } from '../../utils/federated.js';\n\nlet config;\nlet createTag;\nlet getMetadata;\nlet loadBlock;\nlet loadStyle;\nlet sendAnalyticsFunc;\n\nconst createTabsContainer = (tabNames) => {\n  const ol = createTag('ol');\n  tabNames.forEach((name) => {\n    const li = createTag('li', null, name);\n    ol.appendChild(li);\n  });\n  const olDiv = createTag('div', null, ol);\n  const outerDiv = createTag('div', null, olDiv);\n  const divTabs = createTag('div', { class: 'tabs quiet' }, outerDiv);\n  return createTag('div', { class: 'section tabs-background-transparent' }, divTabs);\n};\n\nconst createTab = (content, tabName) => {\n  const divTab = createTag('div', null, 'tab');\n  const divTagName = createTag('div', null, tabName);\n  const tab = createTag('div');\n  tab.appendChild(divTab);\n  tab.appendChild(divTagName);\n  const sectionMeta = createTag('div', { class: 'section-metadata' }, tab);\n  const topDiv = createTag('div', { class: 'section' });\n  topDiv.append(content);\n  topDiv.append(sectionMeta);\n  return topDiv;\n};\n\nexport const getCookie = (name) => document.cookie\n  .split('; ')\n  .find((row) => row.startsWith(`${name}=`))\n  ?.split('=')[1];\n\nconst getAkamaiCode = () => new Promise((resolve, reject) => {\n  const urlParams = new URLSearchParams(window.location.search);\n  const akamaiLocale = urlParams.get('akamaiLocale') || sessionStorage.getItem('akamai');\n  if (akamaiLocale !== null) {\n    resolve(akamaiLocale.toLowerCase());\n  } else {\n    /* c8 ignore next 5 */\n    fetch('https://geo2.adobe.com/json/', { cache: 'no-cache' }).then((resp) => {\n      if (resp.ok) {\n        resp.json().then((data) => {\n          const code = data.country.toLowerCase();\n          sessionStorage.setItem('akamai', code);\n          resolve(code);\n        });\n      } else {\n        reject(new Error(`Something went wrong getting the akamai Code. Response status text: ${resp.statusText}`));\n      }\n    }).catch((error) => {\n      reject(new Error(`Something went wrong getting the akamai Code. ${error.message}`));\n    });\n  }\n});\n\n// Determine if any of the locales can be linked to.\nasync function getAvailableLocales(locales) {\n  const fallback = getMetadata('fallbackrouting') || config.fallbackRouting;\n\n  const { prefix } = config.locale;\n  let path = window.location.href.replace(`${window.location.origin}`, '');\n  if (path.startsWith(prefix)) path = path.replace(prefix, '');\n\n  const availableLocales = [];\n  const pagesExist = [];\n  locales.forEach((locale, index) => {\n    const locPrefix = locale.prefix ? `/${locale.prefix}` : '';\n    const localePath = `${locPrefix}${path}`;\n\n    const pageExistsRequest = fetch(localePath, { method: 'HEAD' }).then((resp) => {\n      if (resp.ok) {\n        locale.url = localePath;\n        availableLocales[index] = locale;\n      } else if (fallback !== 'off') {\n        locale.url = `${locPrefix}`;\n        availableLocales[index] = locale;\n      }\n    });\n    pagesExist.push(pageExistsRequest);\n  });\n  if (pagesExist.length > 0) await Promise.all(pagesExist);\n\n  return availableLocales.filter((a) => !!a);\n}\n\nfunction getGeoroutingOverride() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const param = urlParams.get('georouting');\n  const georouting = param || getCookie('georouting');\n  if (param === 'off') {\n    const domain = window.location.host.endsWith('.adobe.com') ? 'domain=adobe.com' : '';\n    const d = new Date();\n    d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));\n    const expires = `expires=${d.toUTCString()}`;\n    document.cookie = `georouting=${georouting};${expires};path=/;${domain}`;\n  } else if (param === 'on') document.cookie = 'georouting=; expires= Thu, 01 Jan 1970 00:00:00 GMT';\n  return georouting === 'off';\n}\n\nfunction decorateForOnLinkClick(link, urlPrefix, localePrefix, eventType = 'Switch') {\n  const modCurrPrefix = localePrefix || 'us';\n  const modPrefix = urlPrefix || 'us';\n  const eventName = `${eventType}:${modPrefix.split('_')[0]}-${modCurrPrefix.split('_')[0]}|Geo_Routing_Modal`;\n  link.setAttribute('daa-ll', eventName);\n  link.addEventListener('click', () => {\n    // set cookie so legacy code on adobecom still works properly.\n    const domain = window.location.host === 'adobe.com'\n      || window.location.host.endsWith('.adobe.com') ? 'domain=adobe.com' : '';\n    document.cookie = `international=${modPrefix};path=/;${domain}`;\n    link.closest('.dialog-modal').dispatchEvent(new Event('closeModal'));\n  });\n}\n\nfunction getCodes(data) {\n  return data.akamaiCodes.split(',').map((a) => a.toLowerCase().trim());\n}\n\nfunction getMatches(data, suppliedCode) {\n  return data.reduce((rdx, locale) => {\n    const localeCodes = getCodes(locale);\n    if (localeCodes.some((code) => code === suppliedCode)) rdx.push(locale);\n    return rdx;\n  }, []);\n}\n\nfunction removeOnClickOutsideElement(element, event, button) {\n  const func = (evt) => {\n    if (event === evt) return; // ignore initial click event\n    let targetEl = evt.target;\n    while (targetEl) {\n      if (targetEl === element) {\n        // click inside\n        return;\n      }\n      // Go up the DOM\n      targetEl = targetEl.parentNode;\n    }\n    // This is a click outside.\n    element.remove();\n    button.setAttribute('aria-expanded', false);\n    document.removeEventListener('click', func);\n  };\n  document.addEventListener('click', func);\n}\n\nfunction openPicker(button, locales, country, event, dir, currentPage) {\n  if (document.querySelector('.locale-modal-v2 .picker')) {\n    return;\n  }\n  const list = createTag('ul', { class: 'picker', dir });\n  locales.forEach((l) => {\n    const lang = config.locales[l.prefix]?.ietf ?? '';\n    const a = createTag('a', { lang, href: l.url }, `${country} - ${l.language}`);\n    decorateForOnLinkClick(a, l.prefix, currentPage.prefix);\n    const li = createTag('li', {}, a);\n    list.appendChild(li);\n  });\n  button.parentNode.insertBefore(list, button.nextSibling);\n  const buttonRect = button.getBoundingClientRect();\n  const spaceBelowButton = window.innerHeight - buttonRect.bottom;\n  if (spaceBelowButton <= list.offsetHeight) {\n    list.classList.add('top');\n  }\n\n  button.setAttribute('aria-expanded', true);\n  removeOnClickOutsideElement(list, event, button);\n}\n\nfunction buildContent(currentPage, locale, geoData, locales) {\n  const fragment = new DocumentFragment();\n  const lang = config.locales[locale.prefix]?.ietf ?? '';\n  const dir = config.locales[locale.prefix]?.dir ?? 'ltr';\n  const geo = geoData.filter((c) => c.prefix === locale.prefix);\n  const titleText = geo.length ? geo[0][currentPage.geo] : '';\n  const title = createTag('h3', { lang, dir }, locale.title.replace('{{geo}}', titleText));\n  const text = createTag('p', { class: 'locale-text', lang, dir }, locale.text);\n  const flagFile = locale.globeGrid?.toLowerCase().trim() === 'on' ? 'globe-grid.png' : `flag-${locale.geo.replace('_', '-')}.svg`;\n  const img = createTag('img', {\n    class: 'icon-milo',\n    width: 15,\n    height: 15,\n    alt: locale.button,\n  });\n  img.addEventListener(\n    'error',\n    () => (img.src = `${config.miloLibs || config.codeRoot}/features/georoutingv2/img/globe-grid.png`),\n    { once: true },\n  );\n  img.src = `${config.miloLibs || config.codeRoot}/img/georouting/${flagFile}`;\n  const span = createTag('span', { class: 'icon margin-inline-end' }, img);\n  const mainAction = createTag('a', {\n    class: 'con-button blue button-l', lang, role: 'button', 'aria-haspopup': !!locales, 'aria-expanded': false, href: '#',\n  }, span);\n  mainAction.append(locale.button);\n  if (locales) {\n    const downArrow = createTag('img', {\n      class: 'icon-milo down-arrow',\n      src: `${config.miloLibs || config.codeRoot}/ui/img/chevron.svg`,\n      role: 'presentation',\n      width: 15,\n      height: 15,\n    });\n    span.appendChild(downArrow);\n    mainAction.addEventListener('click', (e) => {\n      e.preventDefault();\n      openPicker(mainAction, locales, locale.button, e, dir, currentPage);\n    });\n  } else {\n    mainAction.href = locale.url;\n    decorateForOnLinkClick(mainAction, locale.prefix, currentPage.prefix);\n  }\n\n  const altAction = createTag('a', { lang, href: currentPage.url }, currentPage.button);\n  decorateForOnLinkClick(altAction, currentPage.prefix, locale.prefix, 'Stay');\n  const linkWrapper = createTag('div', { class: 'link-wrapper' }, mainAction);\n  linkWrapper.appendChild(altAction);\n  fragment.append(title, text, linkWrapper);\n  return fragment;\n}\n\nasync function getDetails(currentPage, localeMatches, geoData) {\n  const availableLocales = await getAvailableLocales(localeMatches);\n  if (!availableLocales.length) return null;\n  const georoutingWrapper = createTag('div', { class: 'georouting-wrapper fragment' });\n  currentPage.url = window.location.hash ? document.location.href : '#';\n  if (availableLocales.length === 1) {\n    const content = buildContent(currentPage, availableLocales[0], geoData);\n    georoutingWrapper.appendChild(content);\n    return georoutingWrapper;\n  }\n  const sortedLocales = availableLocales.sort((a, b) => a.languageOrder - b.languageOrder);\n  const tabsContainer = createTabsContainer(sortedLocales.map((l) => l.language));\n  georoutingWrapper.appendChild(tabsContainer);\n\n  sortedLocales.forEach((locale) => {\n    const content = buildContent(currentPage, locale, geoData, sortedLocales);\n    const tab = createTab(content, locale.language);\n    georoutingWrapper.appendChild(tab);\n  });\n  return georoutingWrapper;\n}\n\nasync function showModal(details) {\n  const { miloLibs, codeRoot } = config;\n\n  const tabs = details.querySelector('.tabs');\n  const sectionMetaPath = `${miloLibs || codeRoot}/blocks/section-metadata/section-metadata.css`;\n  const georoutingPath = `${miloLibs || codeRoot}/features/georoutingv2/georoutingv2.css`;\n  const promises = [\n    tabs ? loadBlock(tabs) : null,\n    tabs ? new Promise((resolve) => { loadStyle(sectionMetaPath, resolve); }) : null,\n    new Promise((resolve) => { loadStyle(georoutingPath, resolve); }),\n    import('../../blocks/modal/modal.js'),\n  ];\n  const result = await Promise.all(promises);\n  const { getModal, sendAnalytics } = result[3];\n  sendAnalyticsFunc = sendAnalytics;\n  return getModal(null, { class: 'locale-modal-v2', id: 'locale-modal-v2', content: details, closeEvent: 'closeModal' });\n}\n\nexport default async function loadGeoRouting(\n  conf,\n  createTagFunc,\n  getMetadataFunc,\n  loadBlockFunc,\n  loadStyleFunc,\n) {\n  if (getGeoroutingOverride()) return;\n  config = conf;\n  createTag = createTagFunc;\n  getMetadata = getMetadataFunc;\n  loadBlock = loadBlockFunc;\n  loadStyle = loadStyleFunc;\n\n  const urls = [\n    `${config.contentRoot ?? ''}/georoutingv2.json`,\n    `${config.contentRoot ?? ''}/georouting.json`,\n    `${getFederatedContentRoot()}/federal/georouting/georoutingv2.json`,\n  ];\n  let resp;\n  for (const url of urls) {\n    resp = await fetch(url);\n    if (resp.ok) {\n      if (url.includes('georouting.json')) {\n        const json = await resp.json();\n        // eslint-disable-next-line import/no-cycle\n        const { default: loadGeoRoutingOld } = await import('../georouting/georouting.js');\n        loadGeoRoutingOld(config, createTag, getMetadata, json);\n      }\n      break;\n    }\n  }\n  const json = await resp.json();\n  const { locale } = config;\n\n  const urlLocale = locale.prefix.replace('/', '');\n  const storedInter = getCookie('international');\n  const storedLocale = storedInter === 'us' ? '' : storedInter;\n\n  const urlGeoData = json.georouting.data.find((d) => d.prefix === urlLocale);\n  if (!urlGeoData) return;\n\n  if (storedLocale || storedLocale === '') {\n    const urlLocaleGeo = urlLocale.split('_')[0];\n    const storedLocaleGeo = storedLocale.split('_')[0];\n    // Show modal when url and cookie disagree\n    if (urlLocaleGeo !== storedLocaleGeo) {\n      const localeMatches = json.georouting.data.filter(\n        (d) => d.prefix === storedLocale,\n      );\n      const details = await getDetails(urlGeoData, localeMatches, json.geos.data);\n      if (details) {\n        await showModal(details);\n        sendAnalyticsFunc(\n          new Event(`Load:${storedLocaleGeo || 'us'}-${urlLocaleGeo || 'us'}|Geo_Routing_Modal`),\n        );\n      }\n    }\n    return;\n  }\n\n  // Show modal when derived countries from url locale and akamai disagree\n  try {\n    let akamaiCode = await getAkamaiCode();\n    if (akamaiCode && !getCodes(urlGeoData).includes(akamaiCode)) {\n      const localeMatches = getMatches(json.georouting.data, akamaiCode);\n      const details = await getDetails(urlGeoData, localeMatches, json.geos.data);\n      if (details) {\n        await showModal(details);\n        if (akamaiCode === 'gb') akamaiCode = 'uk';\n        sendAnalyticsFunc(\n          new Event(`Load:${urlLocale || 'us'}-${akamaiCode || 'us'}|Geo_Routing_Modal`),\n        );\n      }\n    }\n  } catch (e) {\n    window.lana?.log(e.message);\n  }\n}\n"],
  "mappings": "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",
  "names": ["json"]
}
