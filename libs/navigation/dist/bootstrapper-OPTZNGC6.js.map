{
  "version": 3,
  "sources": ["../bootstrapper.js"],
  "sourcesContent": ["/* eslint import/no-relative-packages: 0 */\nexport default async function bootstrapBlock(initBlock, blockConfig) {\n  const { name, targetEl, layout, noBorder, jarvis } = blockConfig;\n  const { getConfig, createTag, loadScript } = await import('../utils/utils.js');\n\n  const setNavLayout = () => {\n    const element = document.querySelector(targetEl);\n    if (layout === 'fullWidth') {\n      element.classList.add('feds--full-width');\n    }\n    if (noBorder) {\n      element.classList.add('feds--no-border');\n    }\n  };\n\n  if (!document.querySelector(targetEl)) {\n    const block = createTag(targetEl, { class: name });\n    document.body[blockConfig.appendType](block);\n  }\n  // Configure Unav components and redirect uri\n  if (blockConfig.targetEl === 'header') {\n    setNavLayout();\n    const metaTags = [\n      { key: 'unavComponents', name: 'universal-nav' },\n      { key: 'redirect', name: 'adobe-home-redirect' },\n    ];\n    metaTags.forEach((tag) => {\n      const { key } = tag;\n      if (blockConfig[key]) {\n        const metaTag = createTag('meta', {\n          name: tag.name,\n          content: blockConfig[key],\n        });\n        document.head.append(metaTag);\n      }\n    });\n  }\n\n  await initBlock(document.querySelector(targetEl));\n  if (blockConfig.targetEl === 'footer') {\n    const { loadPrivacy } = await import('../scripts/delayed.js');\n    setTimeout(() => {\n      loadPrivacy(getConfig, loadScript);\n    }, blockConfig.delay);\n  }\n\n  /** Jarvis Chat */\n  if (jarvis?.id) {\n    const isChatInitialized = (client) => !!client?.isAdobeMessagingClientInitialized();\n\n    const isChatOpen = (client) => isChatInitialized(client) && client?.getMessagingExperienceState()?.windowState !== 'hidden';\n\n    const openChat = (event) => {\n      const client = window.AdobeMessagingExperienceClient;\n\n      /* c8 ignore next 4 */\n      if (!isChatInitialized(client)) {\n        window.location.assign('https://helpx.adobe.com');\n        return;\n      }\n\n      const open = client?.openMessagingWindow;\n      if (typeof open !== 'function' || isChatOpen(client)) {\n        return;\n      }\n\n      const sourceType = event?.target.tagName?.toLowerCase();\n      const sourceText = sourceType === 'img' ? event.target.alt?.trim() : event.target.innerText?.trim();\n\n      open(event ? { sourceType, sourceText } : {});\n    };\n\n    const addDomEvents = () => {\n      document.addEventListener('click', (event) => {\n        if (!event.target.closest('[href*=\"#open-jarvis-chat\"]')) return;\n        event.preventDefault();\n        openChat(event);\n      });\n    };\n\n    // Attach DOM events\n    addDomEvents();\n  }\n}\n"],
  "mappings": ";;;AACA,eAAO,eAAsC,WAAW,aAAa;AACnE,QAAM,EAAE,MAAM,UAAU,QAAQ,UAAU,OAAO,IAAI;AACrD,QAAM,EAAE,WAAW,WAAW,WAAW,IAAI,MAAM,OAAO,qBAAmB;AAE7E,QAAM,eAAe,MAAM;AACzB,UAAM,UAAU,SAAS,cAAc,QAAQ;AAC/C,QAAI,WAAW,aAAa;AAC1B,cAAQ,UAAU,IAAI,kBAAkB;AAAA,IAC1C;AACA,QAAI,UAAU;AACZ,cAAQ,UAAU,IAAI,iBAAiB;AAAA,IACzC;AAAA,EACF;AAEA,MAAI,CAAC,SAAS,cAAc,QAAQ,GAAG;AACrC,UAAM,QAAQ,UAAU,UAAU,EAAE,OAAO,KAAK,CAAC;AACjD,aAAS,KAAK,YAAY,UAAU,EAAE,KAAK;AAAA,EAC7C;AAEA,MAAI,YAAY,aAAa,UAAU;AACrC,iBAAa;AACb,UAAM,WAAW;AAAA,MACf,EAAE,KAAK,kBAAkB,MAAM,gBAAgB;AAAA,MAC/C,EAAE,KAAK,YAAY,MAAM,sBAAsB;AAAA,IACjD;AACA,aAAS,QAAQ,CAAC,QAAQ;AACxB,YAAM,EAAE,IAAI,IAAI;AAChB,UAAI,YAAY,GAAG,GAAG;AACpB,cAAM,UAAU,UAAU,QAAQ;AAAA,UAChC,MAAM,IAAI;AAAA,UACV,SAAS,YAAY,GAAG;AAAA,QAC1B,CAAC;AACD,iBAAS,KAAK,OAAO,OAAO;AAAA,MAC9B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,QAAM,UAAU,SAAS,cAAc,QAAQ,CAAC;AAChD,MAAI,YAAY,aAAa,UAAU;AACrC,UAAM,EAAE,YAAY,IAAI,MAAM,OAAO,uBAAuB;AAC5D,eAAW,MAAM;AACf,kBAAY,WAAW,UAAU;AAAA,IACnC,GAAG,YAAY,KAAK;AAAA,EACtB;AAGA,MAAI,QAAQ,IAAI;AACd,UAAM,oBAAoB,CAAC,WAAW,CAAC,CAAC,QAAQ,kCAAkC;AAElF,UAAM,aAAa,CAAC,WAAW,kBAAkB,MAAM,KAAK,QAAQ,4BAA4B,GAAG,gBAAgB;AAEnH,UAAM,WAAW,CAAC,UAAU;AAC1B,YAAM,SAAS,OAAO;AAGtB,UAAI,CAAC,kBAAkB,MAAM,GAAG;AAC9B,eAAO,SAAS,OAAO,yBAAyB;AAChD;AAAA,MACF;AAEA,YAAM,OAAO,QAAQ;AACrB,UAAI,OAAO,SAAS,cAAc,WAAW,MAAM,GAAG;AACpD;AAAA,MACF;AAEA,YAAM,aAAa,OAAO,OAAO,SAAS,YAAY;AACtD,YAAM,aAAa,eAAe,QAAQ,MAAM,OAAO,KAAK,KAAK,IAAI,MAAM,OAAO,WAAW,KAAK;AAElG,WAAK,QAAQ,EAAE,YAAY,WAAW,IAAI,CAAC,CAAC;AAAA,IAC9C;AAEA,UAAM,eAAe,MAAM;AACzB,eAAS,iBAAiB,SAAS,CAAC,UAAU;AAC5C,YAAI,CAAC,MAAM,OAAO,QAAQ,6BAA6B,EAAG;AAC1D,cAAM,eAAe;AACrB,iBAAS,KAAK;AAAA,MAChB,CAAC;AAAA,IACH;AAGA,iBAAa;AAAA,EACf;AACF;",
  "names": []
}
