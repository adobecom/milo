{
  "version": 3,
  "sources": ["../../utils/getUuid.js", "../../blocks/caas/utils.js", "../../../tools/send-to-caas/send-utils.js", "../../../tools/send-to-caas/send-to-caas.js"],
  "sourcesContent": ["/* eslint-disable */\nconst HEX_DIGITS = '0123456789abcdef'.split('');\n\nconst sha1 = async (message) => {\n  const data = new TextEncoder().encode(message);\n  const hashBuf = await crypto.subtle.digest('SHA-1', data);\n  return hashBuf;\n}\n\nconst uint8ToHex = (int) => {\n  const first = int >> 4;\n  const second = int - (first << 4);\n  return HEX_DIGITS[first] + HEX_DIGITS[second];\n};\n\nconst uint8ArrayToHex = (buf) => [...buf]\n  .map((int) => uint8ToHex(int))\n  .join('');\n\n// generates uuid v5\nconst hashToUuid = (buf) =>\n  [\n    uint8ArrayToHex(buf.slice(0, 4)),\n    '-',\n    uint8ArrayToHex(buf.slice(4, 6)),\n    '-',\n    uint8ToHex((buf[6] & 0x0f) | parseInt(5 * 10, 16)),\n    uint8ToHex(buf[7]),\n    '-',\n    uint8ToHex((buf[8] & 0x3f) | 0x80),\n    uint8ToHex(buf[9]),\n    '-',\n    uint8ArrayToHex(buf.slice(10, 16)),\n  ].join('');\n\nconst getUuid = async (str) => {\n  const buf = await sha1(str);\n  return hashToUuid(new Uint8Array(buf));\n}\n\nexport default getUuid;\n", "/* eslint-disable compat/compat */\n/* eslint-disable no-underscore-dangle */\nimport {\n  getConfig as pageConfigHelper,\n  getMetadata,\n  loadScript,\n  loadStyle,\n  localizeLink,\n} from '../../utils/utils.js';\nimport { fetchWithTimeout } from '../utils/utils.js';\nimport getUuid from '../../utils/getUuid.js';\n\nexport const LOCALES = {\n  // Americas\n  ar: { ietf: 'es-AR' },\n  br: { ietf: 'pt-BR' },\n  ca: { ietf: 'en-CA' },\n  ca_fr: { ietf: 'fr-CA' },\n  cl: { ietf: 'es-CL' },\n  co: { ietf: 'es-CO' },\n  cr: { ietf: 'es-CR' },\n  ec: { ietf: 'es-EC' },\n  el: { ietf: 'es-EL' },\n  gt: { ietf: 'es-GT' },\n  la: { ietf: 'es-LA' },\n  mx: { ietf: 'es-MX' },\n  pe: { ietf: 'es-PE' },\n  pr: { ietf: 'es-PR' },\n  '': { ietf: 'en-US' },\n  langstore: { ietf: 'en-US' },\n  // EMEA\n  africa: { ietf: 'en-africa' },\n  be_fr: { ietf: 'fr-BE' },\n  be_en: { ietf: 'en-BE' },\n  be_nl: { ietf: 'nl-BE' },\n  cy_en: { ietf: 'en-CY' },\n  dk: { ietf: 'da-DK' },\n  de: { ietf: 'de-DE' },\n  ee: { ietf: 'et-EE' },\n  eg_ar: { ietf: 'ar-EG' },\n  eg_en: { ietf: 'en-GB' },\n  es: { ietf: 'es-ES' },\n  fr: { ietf: 'fr-FR' },\n  gr_en: { ietf: 'en-GR' },\n  gr_el: { ietf: 'el-GR' },\n  ie: { ietf: 'en-IE' },\n  il_en: { ietf: 'en-IL' },\n  il_he: { ietf: 'he-il' },\n  it: { ietf: 'it-IT' },\n  kw_ar: { ietf: 'ar-KW' },\n  kw_en: { ietf: 'en-GB' },\n  lv: { ietf: 'lv-LV' },\n  lt: { ietf: 'lt-LT' },\n  lu_de: { ietf: 'de-LU' },\n  lu_en: { ietf: 'en-LU' },\n  lu_fr: { ietf: 'fr-LU' },\n  hu: { ietf: 'hu-HU' },\n  mt: { ietf: 'en-MT' },\n  mena_en: { ietf: 'en-mena' },\n  mena_ar: { ietf: 'ar-mena' },\n  ng: { ietf: 'en-NG' },\n  nl: { ietf: 'nl-NL' },\n  no: { ietf: 'no-NO' },\n  pl: { ietf: 'pl-PL' },\n  pt: { ietf: 'pt-PT' },\n  qa_ar: { ietf: 'ar-QA' },\n  qa_en: { ietf: 'en-GB' },\n  ro: { ietf: 'ro-RO' },\n  sa_en: { ietf: 'en-sa' },\n  ch_fr: { ietf: 'fr-CH' },\n  ch_de: { ietf: 'de-CH' },\n  ch_it: { ietf: 'it-CH' },\n  si: { ietf: 'sl-SI' },\n  sk: { ietf: 'sk-SK' },\n  fi: { ietf: 'fi-FI' },\n  se: { ietf: 'sv-SE' },\n  tr: { ietf: 'tr-TR' },\n  ae_en: { ietf: 'en-ae' },\n  uk: { ietf: 'en-GB' },\n  at: { ietf: 'de-AT' },\n  cz: { ietf: 'cs-CZ' },\n  bg: { ietf: 'bg-BG' },\n  ru: { ietf: 'ru-RU' },\n  ua: { ietf: 'uk-UA' },\n  ae_ar: { ietf: 'ar-ae' },\n  sa_ar: { ietf: 'ar-sa' },\n  za: { ietf: 'en-ZA' },\n  // Asia Pacific\n  au: { ietf: 'en-AU' },\n  hk_en: { ietf: 'en-HK' },\n  in: { ietf: 'en-in' },\n  id_id: { ietf: 'id-id' },\n  id_en: { ietf: 'en-id' },\n  my_ms: { ietf: 'ms-my' },\n  my_en: { ietf: 'en-my' },\n  nz: { ietf: 'en-nz' },\n  ph_en: { ietf: 'en-ph' },\n  ph_fil: { ietf: 'fil-PH' },\n  sg: { ietf: 'en-SG' },\n  th_en: { ietf: 'en-th' },\n  in_hi: { ietf: 'hi-in' },\n  th_th: { ietf: 'th-th' },\n  cn: { ietf: 'zh-CN' },\n  hk_zh: { ietf: 'zh-HK' },\n  tw: { ietf: 'zh-TW' },\n  jp: { ietf: 'ja-JP' },\n  kr: { ietf: 'ko-KR' },\n  vn_en: { ietf: 'en-vn' },\n  vn_vi: { ietf: 'vi-VN' },\n};\n\nconst URL_ENCODED_COMMA = '%2C';\nexport const fgHeaderName = 'X-Adobe-Floodgate';\nexport const fgHeaderValue = 'pink';\n\nconst pageConfig = pageConfigHelper();\nconst pageLocales = Object.keys(pageConfig.locales || {});\nconst requestHeaders = [];\n\nexport function getPageLocale(currentPath, locales = pageLocales) {\n  const possibleLocale = currentPath.split('/')[1];\n  if (locales.includes(possibleLocale)) {\n    return possibleLocale;\n  }\n  // defaults to en_US\n  return '';\n}\n\nexport const isValidHtmlUrl = (url) => {\n  const regex = /^https:\\/\\/[^\\s]+$/;\n  return regex.test(url);\n};\nexport const isValidUuid = (id) => /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(id);\n\nexport const loadStrings = async (\n  url,\n  pathname = window.location.pathname,\n  locales = pageLocales,\n) => {\n  if (!url) return {};\n  try {\n    const locale = getPageLocale(pathname, locales);\n    const localizedURL = new URL(url);\n    if (locale) {\n      localizedURL.pathname = `${locale}${localizedURL.pathname}`;\n    }\n    let resp = await fetch(`${localizedURL}.plain.html`);\n    if (!resp.ok) {\n      resp = await fetch(`${url}.plain.html`);\n    }\n    if (!resp.ok) {\n      return {};\n    }\n    const html = await resp.text();\n    const parser = new DOMParser();\n    const document = parser.parseFromString(html, 'text/html');\n    const nodes = document.querySelectorAll('.string-mappings > div');\n    return [...nodes].reduce((ans, parent) => {\n      const children = parent.querySelectorAll('div');\n      const key = children[0]?.innerText;\n      const val = children[1]?.innerHTML;\n      if (key) {\n        ans[key] = val || '';\n      }\n      return ans;\n    }, {});\n  } catch (err) {\n    return {};\n  }\n};\n\nexport const decodeCompressedString = async (txt) => {\n  if (!window.DecompressionStream) {\n    await import('../../deps/compression-streams-pollyfill.js');\n  }\n  const b64decode = (str) => {\n    const binaryStr = window.atob(str);\n    const bytes = new Uint8Array(new ArrayBuffer(binaryStr.length));\n    binaryStr?.split('')\n      .forEach((c, i) => (bytes[i] = c.charCodeAt(0)));\n    return bytes;\n  };\n\n  const b64toStream = (b64) => new Blob([b64decode(b64)], { type: 'text/plain' }).stream();\n\n  const decompressStream = async (stream) => new Response(\n    // eslint-disable-next-line no-undef\n    stream.pipeThrough(new DecompressionStream('gzip')),\n  );\n\n  const responseToJSON = async (response) => {\n    const blob = await response.blob();\n    return JSON.parse(await blob.text());\n  };\n\n  const stream = b64toStream(txt);\n  const resp = await decompressStream(stream);\n  return responseToJSON(resp);\n};\n\nexport const loadCaasFiles = async () => {\n  const searchParams = new URLSearchParams(document.location.search);\n  const version = searchParams?.get('caasver') || 'stable';\n  let cssFile = `https://www.adobe.com/special/chimera/caas-libs/${version}/app.css`;\n  let jsFile = `https://www.adobe.com/special/chimera/caas-libs/${version}/main.min.js`;\n\n  // for caas local development\n  const host = searchParams?.get('caashost');\n  if (host) {\n    cssFile = `http://${host}.corp.adobe.com:5000/dist/app.css`;\n    jsFile = `http://${host}.corp.adobe.com:5000/dist/main.js`;\n  }\n\n  loadStyle(cssFile);\n  await loadScript(`https://www.adobe.com/special/chimera/caas-libs/${version}/react.umd.js`);\n  await loadScript(`https://www.adobe.com/special/chimera/caas-libs/${version}/react.dom.umd.js`);\n  await loadScript(jsFile);\n};\n\nexport const loadCaasTags = async (tagsUrl) => {\n  let errorMsg = '';\n  if (tagsUrl) {\n    const url = tagsUrl.startsWith('https://') || tagsUrl.startsWith('http://') ? tagsUrl : `https://${tagsUrl}`;\n    try {\n      const resp = await fetchWithTimeout(url);\n      if (resp.ok) {\n        const json = await resp.json();\n        return {\n          tags: json.namespaces.caas.tags,\n          error: '',\n        };\n      }\n    } catch (e) {\n      errorMsg = 'Unable to fetch tags, loading backup tags.  Please check tags url in the Advanced Panel';\n    }\n  } else {\n    errorMsg = 'Tags url is not defined in the Advanced Panel';\n  }\n\n  const { default: caasTags } = await import('../caas-config/caas-tags.js');\n  return {\n    tags: caasTags.namespaces.caas.tags,\n    errorMsg,\n  };\n};\n\nconst getTags = (() => {\n  let tags;\n  return (async (tagsUrl) => {\n    if (tags) return tags;\n\n    tags = await loadCaasTags(tagsUrl);\n    return tags;\n  });\n})();\n\nconst getContentIdStr = (cardStr, card) => {\n  if (card.contentId) {\n    return cardStr.length ? `${cardStr}%2C${card.contentId}` : card.contentId;\n  }\n  return cardStr;\n};\n\nconst wrapInParens = (s) => `(${s})`;\n\nconst buildComplexQuery = (andLogicTags, orLogicTags, notLogicTags) => {\n  let andQuery = andLogicTags\n    .filter((tag) => tag.intraTagLogic !== '' && tag.andTags.length)\n    .map((tag) => wrapInParens(tag.andTags.map((val) => `\"${val}\"`).join(`+${tag.intraTagLogic}+`)))\n    .join('+AND+');\n\n  let orQuery = orLogicTags\n    .filter((tag) => tag.orTags.length)\n    .map((tag) => wrapInParens(tag.orTags.map((val) => `\"${val}\"`).join('+AND+')))\n    .join('+OR+');\n\n  let notQuery = notLogicTags\n    .filter((tag) => tag.intraTagLogicExclude !== '' && tag.notTags.length)\n    .map((tag) => wrapInParens(tag.notTags.map((val) => `\"${val}\"`).join(`+${tag.intraTagLogicExclude}+`)))\n    .join('+AND+');\n\n  andQuery = andQuery.length ? wrapInParens(andQuery) : '';\n  orQuery = orQuery.length ? wrapInParens(orQuery) : '';\n  notQuery = notQuery.length ? wrapInParens(notQuery) : '';\n\n  return (andQuery || orQuery)\n    ? encodeURIComponent(`${andQuery}${\n      andQuery && orQuery ? '+AND+' : ''}${orQuery}${\n      (andQuery || orQuery) && notQuery ? '+AND+NOT+' : ''}${notQuery}`)\n    : '';\n};\n\nconst getSortOptions = (state, strs) => {\n  const sortVals = {\n    featured: 'Featured',\n    dateDesc: 'Date: (Newest to Oldest)',\n    dateAsc: 'Date: (Oldest to Newest)',\n    modifiedDesc: 'Modified Date: (Newest to Oldest)',\n    modifiedAsc: 'Modified Date: (Oldest to Newest)',\n    eventSort: 'Events: (Live, Upcoming, OnDemand)',\n    titleAsc: 'Title A-Z',\n    titleDesc: 'Title Z-A',\n    random: 'Random',\n  };\n\n  return Object.entries(sortVals).reduce((options, [key, defaultValue]) => {\n    const fullKey = `sort${key.charAt(0).toUpperCase() + key.slice(1)}`;\n    if (state[fullKey]) {\n      options.push({\n        label: strs[fullKey] || defaultValue,\n        sort: key,\n      });\n    }\n    return options;\n  }, []);\n};\n\nconst findTagById = (id, tags) => {\n  let tagObj = Object.values(tags).find((tag) => tag.tagID === id);\n  if (tagObj) return tagObj;\n\n  Object.values(tags).some((tag) => {\n    tagObj = findTagById(id, tag.tags);\n    return tagObj;\n  });\n\n  return tagObj;\n};\n\nconst alphaSort = (a, b) => {\n  const itemA = a.label.toUpperCase();\n  const itemB = b.label.toUpperCase();\n  if (itemA < itemB) return -1;\n  if (itemA > itemB) return 1;\n  /* c8 ignore next */\n  return 0;\n};\n\nconst getLocalTitle = (tag, country, lang) => tag[`title.${lang}_${country}`]\n  || tag[`title.${lang}`]\n  || tag.title;\n\nconst getFilterObj = (\n  { excludeTags, filterTag, icon, openedOnLoad },\n  tags,\n  state,\n  country,\n  lang,\n) => {\n  if (!filterTag?.[0]) return null;\n  const tagId = filterTag[0];\n  const tag = findTagById(tagId, tags);\n  if (!tag) return null;\n  const items = Object.values(tag.tags)\n    .map((itemTag) => {\n      if (excludeTags?.includes(itemTag.tagID)) return null;\n      const titleLabel = getLocalTitle(itemTag, country, lang);\n      return {\n        id: itemTag.tagID,\n        label: titleLabel.replace('&amp;', '&'),\n      };\n    })\n    .filter((i) => i !== null)\n    .sort(alphaSort);\n\n  const filterObj = {\n    id: tagId,\n    openedOnLoad: !!openedOnLoad,\n    items,\n    group: getLocalTitle(tag, country, lang),\n  };\n\n  if (icon) {\n    filterObj.icon = icon;\n  }\n\n  return filterObj;\n};\n\nconst getCustomFilterObj = ({ group, filtersCustomItems, openedOnLoad }, strs = {}) => {\n  if (!group) return null;\n\n  const IN_BRACKETS_RE = /^{.*}$/;\n\n  const items = filtersCustomItems.map((item) => ({\n    id: item.customFilterTag[0],\n    label: item.filtersCustomLabel?.match(IN_BRACKETS_RE)\n      ? strs[item.filtersCustomLabel.replace(/{|}/g, '')]\n      : item.filtersCustomLabel || '',\n  }));\n\n  const filterObj = {\n    id: group,\n    openedOnLoad: !!openedOnLoad,\n    items,\n    group: group?.match(IN_BRACKETS_RE)\n      ? strs[group.replace(/{|}/g, '')]\n      : group || '',\n  };\n\n  return filterObj;\n};\n\nconst getCategoryArray = async (state, country, lang) => {\n  const { tags } = await getTags(state.tagsUrl);\n  const categories = Object.values(tags)\n    .filter((tag) => tag.tagID === 'caas:product-categories')\n    .map((tag) => tag.tags);\n\n  const categoryItems = Object.entries(categories[0])\n    .map(([key, value]) => ({\n      group: key,\n      id: value.tagID,\n      title: value.title,\n      icon: value.icon || '',\n      items: Object.entries(value.tags)\n        .map((tag) => getFilterObj({ excludeTags: [], filterTag: [tag[1].tagID], icon: '', openedOnLoad: false }, tags, state, country, lang))\n        .filter((tag) => tag !== null),\n    }));\n\n  return [{ group: 'All Topics', title: 'All Topics', id: '', items: [] }, ...categoryItems];\n};\n\nconst getFilterArray = async (state, country, lang, strs) => {\n  if ((!state.showFilters || state.filters.length === 0) && state.filtersCustom?.length === 0) {\n    return [];\n  }\n\n  const { tags } = await getTags(state.tagsUrl);\n  const useCustomFilters = state.filterBuildPanel === 'custom';\n\n  let filters = [];\n  if (!useCustomFilters) {\n    filters = state.filters\n      .map((filter) => getFilterObj(filter, tags, state, country, lang))\n      .filter((filter) => filter !== null);\n  } else {\n    filters = state.filtersCustom.length > 0\n      ? state.filtersCustom.map((filter) => getCustomFilterObj(filter, strs))\n      : [];\n  }\n\n  return filters;\n};\n\nexport function getCountryAndLang({ autoCountryLang, country, language }) {\n  const locales = getMetadata('caas-locales') || '';\n  if (autoCountryLang) {\n    const prefix = pageConfigHelper()?.locale?.prefix?.replace('/', '') || '';\n    const locale = LOCALES[prefix]?.ietf || 'en-US';\n    /* eslint-disable-next-line prefer-const */\n    let [currLang, currCountry] = locale.split('-');\n\n    return {\n      country: currCountry,\n      language: currLang,\n      locales,\n    };\n  }\n  return {\n    country: country ? country.split('/').pop() : 'US',\n    language: language ? language.split('/').pop() : 'en',\n    locales,\n  };\n}\n\n/**\n * Finds the matching tuple and returns its index.\n * Looks for 'X-Adobe-Floodgate' in [['X-Adobe-Floodgate', 'pink'], ['a','b']]\n * @param {*} fgHeader fgHeader\n * @returns tupleIndex\n */\nconst findTupleIndex = (fgHeader) => {\n  const matchingTupleIndex = requestHeaders.findIndex((element) => element[0] === fgHeader);\n  return matchingTupleIndex;\n};\n\n/**\n * Adds the floodgate header to the Config of ConsonantCardCollection\n * headers: [['X-Adobe-Floodgate', 'pink'], ['OtherHeader', 'Value']]\n * @param {*} state state\n * @returns requestHeaders\n */\nconst addFloodgateHeader = (state) => {\n  // Delete FG header if already exists, before adding pink to avoid duplicates in requestHeaders\n  requestHeaders.splice(findTupleIndex(fgHeaderName, 1));\n  if (state.fetchCardsFromFloodgateTree) {\n    requestHeaders.push([fgHeaderName, fgHeaderValue]);\n  }\n  return requestHeaders;\n};\n\nexport function arrayToObj(input = []) {\n  const obj = {};\n  if (!Array.isArray(input)) {\n    // eslint-disable-next-line no-param-reassign\n    input = [];\n  }\n  input.forEach((item) => {\n    if (item.key && item.value) {\n      obj[item.key] = item.value;\n    }\n  });\n  return obj;\n}\n\nconst addMissingStateProps = (state) => {\n  // eslint-disable-next-line no-use-before-define\n  Object.entries(defaultState).forEach(([key, val]) => {\n    if (state[key] === undefined) {\n      state[key] = val;\n    }\n  });\n  return state;\n};\n\nconst fetchUuidForCard = async (card) => {\n  if (!card.contentId) {\n    return null;\n  }\n  if (isValidUuid(card.contentId)) {\n    return card.contentId;\n  }\n  try {\n    const url = new URL(card.contentId);\n    const localizedLink = localizeLink(url, null, true);\n    const substr = String(localizedLink).split('https://').pop();\n    return await getUuid(substr);\n  } catch (error) {\n    return null;\n  }\n};\n\nconst getCardsString = async (cards = []) => {\n  const uuids = await Promise.all(cards.map(async (card) => {\n    const uuid = await fetchUuidForCard(card);\n    return uuid !== null ? uuid : undefined;\n  }));\n  return uuids.filter(Boolean).join('%2C');\n};\n\nexport const getConfig = async (originalState, strs = {}) => {\n  const state = addMissingStateProps(originalState);\n  const originSelection = Array.isArray(state.source) ? state.source.join(',') : state.source;\n  const { country, language, locales } = getCountryAndLang(state);\n  const featuredCards = state.featuredCards ? await getCardsString(state.featuredCards) : '';\n  const excludedCards = state.excludedCards && state.excludedCards.reduce(getContentIdStr, '');\n  const hideCtaIds = state.hideCtaIds ? state.hideCtaIds.reduce(getContentIdStr, '') : '';\n  const hideCtaTags = state.hideCtaTags ? state.hideCtaTags : [];\n  const targetActivity = state.targetEnabled\n  && state.targetActivity ? `/${encodeURIComponent(state.targetActivity)}.json` : '';\n  const flatFile = targetActivity ? '&flatFile=false' : '';\n  const localesQueryParam = locales ? `&locales=${locales}` : '';\n  const debug = (state.showIds && document.location.pathname.includes('/tools/caas'))\n    || state.container === 'categories'\n    ? '&debug=true' : '';\n  const collectionTags = state.includeTags ? state.includeTags.join(',') : '';\n  const excludeContentWithTags = state.excludeTags ? state.excludeTags.join(',') : '';\n\n  const complexQuery = buildComplexQuery(state.andLogicTags, state.orLogicTags, state.notLogicTags);\n\n  const caasRequestHeaders = addFloodgateHeader(state);\n\n  const config = {\n    collection: {\n      mode: state.theme,\n      layout: {\n        type: state.layoutType,\n        gutter: state.gutter,\n        container: state.container,\n      },\n      button: { style: state.collectionBtnStyle },\n      resultsPerPage: state.resultsPerPage,\n      endpoint: `https://${\n        state.endpoint\n      }${targetActivity}?originSelection=${originSelection}&contentTypeTags=${state.contentTypeTags.join(\n        ',',\n      )}&secondSource=${state.showSecondarySource ? state.secondarySource.join(',') : []}&secondaryTags=${state.showSecondarySource ? state.secondaryTags.join(\n        ',',\n      ) : []}&collectionTags=${collectionTags}&excludeContentWithTags=${excludeContentWithTags}&language=${language}&country=${country}&complexQuery=${complexQuery}&excludeIds=${excludedCards}&currentEntityId=&featuredCards=${featuredCards}&environment=&draft=${\n        state.draftDb\n      }&size=${state.collectionSize || state.totalCardsToShow}${localesQueryParam}${debug}${flatFile}`,\n      fallbackEndpoint: state.fallbackEndpoint,\n      totalCardsToShow: state.totalCardsToShow,\n      showCardBadges: state.showCardBadges,\n      cardStyle: state.cardStyle,\n      showTotalResults: state.showTotalResults,\n      i18n: {\n        prettyDateIntervalFormat:\n          strs.prettyDateIntervalFormat || '{ddd}, {LLL} {dd} | {timeRange} {timeZone}',\n        totalResultsText: strs.totalResults || '{total} results',\n        title: state.collectionTitle?.match(/^{.*}$/) ? strs[state.collectionTitle.replace(/{|}/g, '')] : state.collectionTitle || '',\n        titleHeadingLevel: state.titleHeadingLevel,\n        cardTitleAccessibilityLevel: state.cardTitleAccessibilityLevel,\n        onErrorTitle: strs.onErrorTitle || 'Sorry there was a system error.',\n        onErrorDescription: strs.onErrorDesc\n          || 'Please try reloading the page or try coming back to the page another time.',\n        lastModified: strs.lastModified || 'Last modified {date}',\n      },\n      detailsTextOption: state.detailsTextOption,\n      hideDateInterval: state.hideDateInterval,\n      dynamicCTAForLiveEvents: state.dynamicCTAForLiveEvents,\n      setCardBorders: state.setCardBorders,\n      showFooterDivider: state.showFooterDivider,\n      useOverlayLinks: state.useOverlayLinks,\n      partialLoadWithBackgroundFetch: {\n        enabled: state.partialLoadEnabled,\n        partialLoadCount: state.partialLoadCount,\n      },\n      collectionButtonStyle: state.collectionBtnStyle,\n      banner: {\n        register: {\n          description: strs.registrationText || 'Sign Up',\n          url: strs.registrationUrl || '#registration',\n        },\n        upcoming: { description: strs.upComingText || 'Upcoming' },\n        live: { description: strs.liveText || 'Live' },\n        onDemand: { description: strs.onDemandText || 'On Demand' },\n      },\n      useLightText: state.useLightText,\n      disableBanners: state.disableBanners,\n      reservoir: {\n        sample: state.sortReservoirSample,\n        pool: state.sortReservoirPool,\n      },\n      ctaAction: state.ctaAction,\n      cardHoverEffect: state.cardHoverEffect || 'default',\n      additionalRequestParams: arrayToObj(state.additionalRequestParams),\n    },\n    hideCtaIds: hideCtaIds.split(URL_ENCODED_COMMA),\n    hideCtaTags,\n    featuredCards: featuredCards.split(URL_ENCODED_COMMA),\n    filterPanel: {\n      enabled: state.showFilters,\n      eventFilter: state.filterEvent,\n      type: state.showFilters ? state.filterLocation : 'left',\n      showEmptyFilters: state.filtersShowEmpty,\n      filters: await getFilterArray(state, country, language, strs),\n      categories: await getCategoryArray(state, country, language),\n      filterLogic: state.filterLogic,\n      i18n: {\n        leftPanel: {\n          header: strs.filterLeftPanel || 'Refine Your Results',\n          clearAllFiltersText: strs.filterClearAll || 'Clear All',\n          mobile: {\n            filtersBtnLabel: strs.filterMobileButton || 'Filters',\n            panel: {\n              header: strs.filterMobilePanel || 'Filter by',\n              totalResultsText: strs.totalResults || '{total} results',\n              applyBtnText: strs.filterApply || 'Apply',\n              clearFilterText: strs.filterClear || 'Clear',\n              doneBtnText: strs.filterDone || 'Done',\n            },\n            group: {\n              totalResultsText: strs.totalResults || '{total} results',\n              applyBtnText: strs.filterApply || 'Apply',\n              clearFilterText: strs.filterClear || 'Clear',\n              doneBtnText: strs.filterDone || 'Done',\n            },\n          },\n        },\n        topPanel: {\n          groupLabel: strs.filterGroupLabel || 'Filters:',\n          clearAllFiltersText: strs.filterClearAll || 'Clear All',\n          moreFiltersBtnText: strs.filtermore || 'More Filters +',\n          mobile: {\n            group: {\n              totalResultsText: strs.totalResults || '{total} results',\n              applyBtnText: strs.filterApply || 'Apply',\n              clearFilterText: strs.filterClear || 'Clear',\n              doneBtnText: strs.filterDone || 'Done',\n            },\n          },\n        },\n      },\n    },\n    sort: {\n      enabled: state.sortEnablePopup,\n      defaultSort: state.sortDefault,\n      options: getSortOptions(state, strs),\n    },\n    pagination: {\n      animationStyle: state.paginationAnimationStyle,\n      enabled: state.paginationEnabled,\n      resultsQuantityShown: state.paginationQuantityShown,\n      loadMoreButton: {\n        style: state.loadMoreBtnStyle,\n        useThemeThree: state.paginationUseTheme3,\n      },\n      type: state.paginationType,\n      i18n: {\n        loadMore: {\n          btnText: strs.pgLoadMore || 'Load More',\n          resultsQuantityText: strs.pgLoadMoreResultsQty || '{start} of {end} displayed',\n        },\n        paginator: {\n          resultsQuantityText: strs.pgResultsQuantity || '{start} - {end} of {total} results',\n          prevLabel: strs.pgPrevious || 'Prev',\n          nextLabel: strs.pgNext || 'Next',\n        },\n      },\n    },\n    bookmarks: {\n      showOnCards: state.showBookmarksOnCards,\n      leftFilterPanel: {\n        bookmarkOnlyCollection: state.onlyShowBookmarkedCards,\n        showBookmarksFilter: state.showBookmarksFilter,\n        selectBookmarksIcon: state.bookmarkIconSelect,\n        unselectBookmarksIcon: state.bookmarkIconUnselect,\n      },\n      i18n: {\n        leftFilterPanel: { filterTitle: strs.bmFilterTitle || 'My favorites' },\n        card: {\n          saveText: strs.bmSaveCard || 'Save Card',\n          unsaveText: strs.bmUnsaveCard || 'Unsave Card',\n        },\n      },\n    },\n    search: {\n      enabled: state.showSearch,\n      searchFields: state.searchFields,\n      i18n: {\n        noResultsTitle: strs.searchNoResults || 'No Results Found',\n        noResultsDescription:\n          strs.searchNoResultsDesc || 'Try checking your spelling or broadening your search.',\n        leftFilterPanel: {\n          searchTitle: strs.searchTitle || 'Search',\n          searchPlaceholderText: strs.searchPlaceholder || 'Search Here',\n        },\n        topFilterPanel: { searchPlaceholderText: strs.searchPlaceholder || 'Search Here' },\n        filterInfo: { searchPlaceholderText: strs.searchPlaceholder || 'Search Here' },\n      },\n    },\n    language,\n    country,\n    analytics: {\n      trackImpressions: state.analyticsTrackImpression || '',\n      collectionIdentifier: state.analyticsCollectionName,\n    },\n    target: {\n      enabled: state.targetEnabled || '',\n      lastViewedSession: state.lastViewedSession || '',\n    },\n    customCard: ['card', `return \\`${state.customCard}\\``],\n    linkTransformer: pageConfig.caasLinkTransformer || {},\n    headers: caasRequestHeaders,\n  };\n\n  return config;\n};\n\nexport const initCaas = async (state, caasStrs, el) => {\n  window.dexter = window.dexter || {}; // required for caas modals\n\n  const caasEl = el || document.getElementById('caas');\n  if (!caasEl) return;\n\n  const appEl = caasEl.parentElement;\n  caasEl.remove();\n\n  const newEl = document.createElement('div');\n  newEl.id = 'caas';\n  newEl.className = 'caas-preview';\n  appEl.append(newEl);\n\n  const config = await getConfig(state, caasStrs);\n\n  // eslint-disable-next-line no-new, no-undef\n  new ConsonantCardCollection(config, newEl);\n};\n\nexport const defaultState = {\n  additionalRequestParams: [],\n  dynamicCTAForLiveEvents: false,\n  analyticsCollectionName: '',\n  analyticsTrackImpression: false,\n  andLogicTags: [],\n  autoCountryLang: false,\n  fetchCardsFromFloodgateTree: false,\n  bookmarkIconSelect: '',\n  bookmarkIconUnselect: '',\n  cardStyle: 'half-height',\n  cardTitleAccessibilityLevel: 6,\n  collectionBtnStyle: 'primary',\n  collectionName: '',\n  collectionTitle: '',\n  collectionSize: '',\n  container: '1200MaxWidth',\n  contentTypeTags: [],\n  country: 'caas:country/us',\n  customCard: '',\n  ctaAction: '_self',\n  doNotLazyLoad: false,\n  disableBanners: false,\n  draftDb: false,\n  endpoint: 'www.adobe.com/chimera-api/collection',\n  environment: '',\n  excludedCards: [],\n  excludeTags: [],\n  fallbackEndpoint: '',\n  featuredCards: [],\n  filterEvent: '',\n  filterBuildPanel: 'automatic',\n  filterLocation: 'left',\n  filterLogic: 'or',\n  filters: [],\n  filtersCustom: [],\n  filtersShowEmpty: false,\n  gutter: '4x',\n  headers: [],\n  hideCtaIds: [],\n  hideCtaTags: [],\n  hideDateInterval: false,\n  includeTags: [],\n  language: 'caas:language/en',\n  layoutType: '4up',\n  loadMoreBtnStyle: 'primary',\n  notLogicTags: [],\n  onlyShowBookmarkedCards: false,\n  orLogicTags: [],\n  paginationAnimationStyle: 'paged',\n  paginationEnabled: false,\n  paginationQuantityShown: false,\n  paginationType: 'paginator',\n  paginationUseTheme3: false,\n  partialLoadEnabled: false,\n  partialLoadCount: 100,\n  placeholderUrl: '',\n  resultsPerPage: 5,\n  searchFields: [],\n  secondaryTags: [],\n  secondarySource: [],\n  setCardBorders: false,\n  showCardBadges: false,\n  showFooterDivider: false,\n  showBookmarksFilter: false,\n  showBookmarksOnCards: false,\n  showFilters: false,\n  showIds: false,\n  showSearch: false,\n  showTotalResults: false,\n  sortDateAsc: false,\n  sortDateDesc: false,\n  sortDateModified: false,\n  sortDefault: 'dateDesc',\n  sortEnablePopup: false,\n  sortEnableRandomSampling: false,\n  sortEventSort: false,\n  sortFeatured: false,\n  sortModifiedAsc: false,\n  sortModifiedDesc: false,\n  sortRandom: false,\n  sortReservoirPool: 1000,\n  sortReservoirSample: 3,\n  sortTitleAsc: false,\n  sortTitleDesc: false,\n  source: ['hawks'],\n  tagsUrl: 'www.adobe.com/chimera-api/tags',\n  targetActivity: '',\n  targetEnabled: false,\n  theme: 'lightest',\n  detailsTextOption: 'default',\n  titleHeadingLevel: 'h3',\n  totalCardsToShow: 10,\n  useLightText: false,\n  useOverlayLinks: false,\n  collectionButtonStyle: 'primary',\n  userInfo: [],\n};\n", "import getUuid from '../../libs/utils/getUuid.js';\nimport { getMetadata } from '../../libs/utils/utils.js';\nimport { LOCALES } from '../../libs/blocks/caas/utils.js';\n\nconst CAAS_TAG_URL = 'https://www.adobe.com/chimera-api/tags';\nconst HLX_ADMIN_STATUS = 'https://admin.hlx.page/status';\nconst URL_POSTXDM = 'https://14257-milocaasproxy.adobeio-static.net/api/v1/web/milocaas/postXDM';\nconst VALID_URL_RE = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;\nconst VALID_MODAL_RE = /fragments(.*)#[a-zA-Z0-9_-]+$/;\n\nconst isKeyValPair = /(\\s*\\S+\\s*:\\s*\\S+\\s*)/;\nconst isValidUrl = (u) => VALID_URL_RE.test(u);\nconst isValidModal = (u) => VALID_MODAL_RE.test(u);\n\nconst [setConfig, getConfig] = (() => {\n  let config = {\n    isInjectedDoc: () => this.doc !== document,\n    doc: document,\n  };\n  return [\n    (c) => {\n      config = { ...config, ...c };\n      return config;\n    },\n    () => config,\n  ];\n})();\n\nconst getKeyValPairs = (s) => {\n  if (!s) return [];\n  return s\n    .split(',')\n    .filter((v) => v.length)\n    .filter((v) => isKeyValPair.test(v))\n    .map((v) => {\n      const [key, ...value] = v.split(':');\n      return { [key.trim()]: value.join(':').trim() };\n    });\n};\n\nconst addHost = (url) => {\n  if (url.startsWith('http')) return url;\n  const { host } = getConfig();\n  return `https://${host}${url.startsWith('/') ? '' : '/'}${url}`;\n};\n\nconst getMetaContent = (propType, propName) => {\n  const metaEl = getConfig().doc.querySelector(`meta[${propType}='${propName}']`);\n  if (!metaEl) return undefined;\n  return metaEl.content;\n};\n\nconst prefixHttps = (url) => {\n  if (!(url?.startsWith('https://') || url?.startsWith('http://'))) {\n    return `https://${url}`;\n  }\n  return url;\n};\n\nconst flattenLink = (link) => {\n  const htmlElement = document.createElement('div');\n  htmlElement.innerHTML = link;\n  return htmlElement.querySelector('a').getAttribute('href');\n};\n\nconst checkUrl = (url, errorMsg) => {\n  if (url === undefined || isValidModal(url)) return url;\n  const flatUrl = url.includes('href=') ? flattenLink(url) : url;\n  if (isValidModal(flatUrl)) {\n    return flatUrl;\n  }\n  return isValidUrl(flatUrl) ? prefixHttps(flatUrl) : { error: errorMsg };\n};\n\n// Case-insensitive search through tag name, path, id and title for the searchStr\nconst findTag = (tags, searchStr, ignore = []) => {\n  const childTags = [];\n  let matchingTag = Object.values(tags).find((tag) => {\n    if (\n      ignore.includes(tag.title)\n      || ignore.includes(tag.name)\n      || ignore.includes(tag.path)\n      || ignore.includes(tag.tagID)\n    ) return false;\n\n    if (tag.tags && Object.keys(tag.tags).length) {\n      childTags.push(tag.tags);\n    }\n\n    const tagMatches = [\n      tag.title.toLowerCase(),\n      tag.name,\n      tag.path,\n      tag.path.replace('/content/cq:tags/', ''),\n      /* c8 ignore next */\n      tag.tagID.toLowerCase(),\n    ];\n\n    if (tagMatches.includes(searchStr.toLowerCase())) return true;\n\n    return false;\n  });\n\n  if (!matchingTag) {\n    childTags.some((childTag) => {\n      matchingTag = findTag(childTag, searchStr, ignore);\n      return matchingTag;\n    });\n  }\n\n  return matchingTag;\n};\n\nconst [getCaasTags, loadCaasTags] = (() => {\n  let tags;\n  return [\n    () => tags,\n    async () => {\n      try {\n        const resp = await fetch(CAAS_TAG_URL);\n        if (resp.ok) {\n          const json = await resp.json();\n          tags = json.namespaces.caas.tags;\n          return;\n        }\n      } catch (e) {\n        // ignore\n      }\n      const { default: caasTags } = await import('../../libs/blocks/caas-config/caas-tags.js');\n      tags = caasTags.namespaces.caas.tags;\n    }];\n})();\n\nconst getTag = (tagName, errors) => {\n  if (!tagName) return undefined;\n  const caasTags = getCaasTags();\n  // search all except Events first\n  const tag = findTag(caasTags, tagName, ['Events']) || findTag(caasTags.events.tags, tagName, []);\n\n  if (!tag) {\n    errors.push(tagName);\n  }\n\n  return tag;\n};\n\nconst getTags = (s) => {\n  let rawTags = [];\n  if (s) {\n    rawTags = s.toLowerCase().split(/,|(\\s+)|(\\\\n)|;/g).filter((t) => t && t.trim() && t !== '\\n');\n  }\n\n  const errors = [];\n\n  const tagIds = rawTags.map((tag) => getTag(tag, errors))\n    .filter((tag) => tag !== undefined)\n    .map((tag) => tag.tagID);\n\n  const tags = [...new Set(tagIds)]\n    .map((tagID) => ({ id: tagID }));\n\n  return {\n    tagErrors: errors,\n    tags,\n  };\n};\n\nconst getDateProp = (dateStr, errorMsg) => {\n  if (!dateStr) return undefined;\n  try {\n    const date = new Date(dateStr);\n    if (date.getFullYear() < 2000) return { error: `${errorMsg} - Date is before the year 2000` };\n    return date.toISOString();\n  } catch (e) {\n    return { error: errorMsg };\n  }\n};\n\nconst processRepoForFloodgate = (repo, fgColor) => {\n  if (repo && fgColor && fgColor !== 'default') {\n    return repo.slice(0, repo.lastIndexOf(`-${fgColor}`));\n  }\n  return repo;\n};\n\nexport const getOrigin = (fgColor) => {\n  const { project, repo } = getConfig();\n  const origin = project || processRepoForFloodgate(repo, fgColor);\n\n  const mappings = {\n    cc: 'hawks',\n    dc: 'doccloud',\n  };\n  const originLC = mappings[origin.toLowerCase()] || origin;\n  if (originLC) {\n    return originLC;\n  }\n\n  if (window.location.hostname.endsWith('.hlx.page')) {\n    const [, singlePageRepo] = window.location.hostname.split('.')[0].split('--');\n    return processRepoForFloodgate(singlePageRepo, fgColor);\n  }\n\n  throw new Error('No Project or Repo defined in config');\n};\n\nconst getUrlWithoutFile = (url) => `${url.split('/').slice(0, -1).join('/')}/`;\n\nconst getImagePathMd = (keyName) => {\n  const mdEl = getConfig().doc.querySelector('.card-metadata');\n  if (!mdEl) return null;\n\n  let url = '';\n  [...mdEl.children].some((n) => {\n    const key = n.firstElementChild.textContent?.trim().toLowerCase();\n    if (key !== keyName) return false;\n\n    const img = n.lastElementChild.querySelector('img');\n\n    if (img) {\n      let imgSrc = img.src;\n      if (getConfig().bulkPublish) {\n        const rawImgSrc = img.attributes.src.value;\n        if (rawImgSrc.startsWith('./')) {\n          const urlWithoutFile = getUrlWithoutFile(getConfig().pageUrl);\n          imgSrc = `${urlWithoutFile}${rawImgSrc}`;\n        } else if (rawImgSrc.startsWith('/')) {\n          imgSrc = `${new URL(getConfig.pageUrl.origin)}${rawImgSrc}`;\n        } else {\n          imgSrc = rawImgSrc;\n        }\n      }\n      url = new URL(imgSrc)?.pathname;\n    } else { // url string to img\n      url = n.lastElementChild.textContent?.trim();\n    }\n    return true;\n  });\n  return url;\n};\n\nconst getCardImageUrl = () => {\n  const { doc } = getConfig();\n  const imageUrl = getImagePathMd('image')\n    || getImagePathMd('cardimage')\n    || getImagePathMd('cardimagepath')\n    || doc.querySelector('main')?.querySelector('img')?.src.replace(/\\?.*/, '')\n    || doc.querySelector('meta[property=\"og:image\"]')?.content;\n\n  if (!imageUrl) return null;\n  return addHost(imageUrl);\n};\n\nconst getCardImageAltText = () => {\n  // eslint-disable-next-line no-use-before-define\n  const pageMd = parseCardMetadata();\n  if (pageMd.cardimage) return '';\n  const cardImageUrl = getCardImageUrl();\n  const cardImagePath = new URL(cardImageUrl).pathname.split('/').pop();\n  const imgTagForCardImage = getConfig().doc.querySelector(`img[src*=\"${cardImagePath}\"]`);\n  return imgTagForCardImage?.alt;\n};\n\nconst getBadges = (p) => {\n  const badges = [];\n  if (p.badgeimage) {\n    badges.push({ type: 'image', value: addHost(p.badgeimage) });\n  }\n  if (p.badgetext) {\n    badges.push({ type: 'text', value: p.badgetext });\n  }\n  return badges;\n};\n\nconst isPagePublished = async () => {\n  let { branch, repo, owner } = getConfig();\n  if (!(branch || repo || owner)\n    && window.location.hostname.endsWith('.hlx.page')) {\n    [branch, repo, owner] = window.location.hostname.split('.')[0].split('--');\n  }\n\n  if (!(branch || repo || owner)) {\n    throw new Error(`Branch, Repo or Owner is not set - branch: ${branch}, repo: ${repo}, owner: ${owner}`);\n  }\n\n  const res = await fetch(\n    `${HLX_ADMIN_STATUS}/${owner}/${repo}/${branch}${window.location.pathname}`,\n  );\n  if (res.ok) {\n    const json = await res.json();\n    return json.live.status === 200;\n  }\n  return false;\n};\n\nconst getBulkPublishLangAttr = async (options) => {\n  let { getLocale } = getConfig();\n  if (!getLocale) {\n    // This is only imported from the bulk publisher so there is no dependency cycle\n    // eslint-disable-next-line import/no-cycle\n    const { getLocale: utilsGetLocale } = await import('../../libs/utils/utils.js');\n    getLocale = utilsGetLocale;\n    setConfig({ getLocale });\n  }\n  return getLocale(LOCALES, options.prodUrl).ietf;\n};\n\nconst getCountryAndLang = async (options) => {\n  const langStr = window.location.pathname === '/tools/send-to-caas/bulkpublisher.html'\n    ? await getBulkPublishLangAttr(options)\n    : (LOCALES[window.location.pathname.split('/')[1]] || LOCALES['']).ietf;\n  const langAttr = langStr?.toLowerCase().split('-') || [];\n\n  const [lang = 'en', country = 'us'] = langAttr;\n  return {\n    country,\n    lang,\n  };\n};\n\nconst parseCardMetadata = () => {\n  const pageMd = {};\n  const marqueeMetadata = getConfig().doc.querySelector('.caas-marquee-metadata');\n  const cardMetadata = getConfig().doc.querySelector('.card-metadata');\n  const mdEl = cardMetadata || marqueeMetadata;\n  const allowHtml = ['description'];\n  if (mdEl) {\n    mdEl.childNodes.forEach((n) => {\n      const key = n.children?.[0]?.textContent?.toLowerCase();\n      let val = n.children?.[1]?.textContent;\n      if (marqueeMetadata && allowHtml.includes(key)) {\n        val = n.children?.[1]?.innerHTML;\n      }\n      if (!key) return;\n\n      pageMd[key] = val;\n    });\n  }\n  return pageMd;\n};\n\nfunction checkCtaUrl(s, options, i) {\n  if (s?.trim() === '') return '';\n  const url = s || options.prodUrl || window.location.origin + window.location.pathname;\n  return checkUrl(url, `Invalid Cta${i}Url: ${url}`);\n}\n\n/** card metadata props - either a func that computes the value or\n * 0 to use the string as is\n * funcs that return an object with { error: string } will report the error\n */\nconst props = {\n  arbitrary: (s) => getKeyValPairs(s).map((pair) => (pair)),\n  badgeimage: () => getImagePathMd('badgeimage'),\n  badgetext: 0,\n  bookmarkaction: 0,\n  bookmarkenabled: (s = '') => {\n    if (s) {\n      const lcs = s.toLowerCase();\n      if (lcs === 'true' || lcs === 'on' || lcs === 'yes') {\n        return true;\n      }\n    }\n    return undefined;\n  },\n  bookmarkicon: 0,\n  carddescription: 0,\n  cardtitle: 0,\n  cardimage: () => getCardImageUrl(),\n  cardimagealttext: (s) => s || getCardImageAltText(),\n  contentid: (_, options) => getUuid(options.prodUrl),\n  contenttype: (s) => s || getMetaContent('property', 'og:type') || getConfig().contentType,\n  country: async (s, options) => {\n    if (s) return s;\n    const { country } = await getCountryAndLang(options);\n    return country;\n  },\n  created: (s) => {\n    if (s) {\n      return getDateProp(s, `Invalid Created Date: ${s}`);\n    }\n    const cardDate = parseCardMetadata()?.carddate;\n    if (cardDate) {\n      return getDateProp(cardDate, `Invalid Date: ${cardDate}`);\n    }\n\n    const pubDate = getMetaContent('name', 'publishdate') || getMetaContent('name', 'publication-date');\n    const { doc, lastModified } = getConfig();\n    return pubDate\n      ? getDateProp(pubDate, `publication-date metadata is not a valid date: ${pubDate}`)\n      : getDateProp(lastModified || doc.lastModified, `document.lastModified is not a valid date: ${doc.lastModified}`);\n  },\n  cta1icon: (s) => checkUrl(s, `Invalid Cta1Icon url: ${s}`),\n  cta1style: 0,\n  cta1target: 0,\n  cta1text: 0,\n  cta1url: (s, options) => checkCtaUrl(s, options, 1),\n  cta2icon: (s) => checkUrl(s, `Invalid Cta2Icon url: ${s}`),\n  cta2style: 0,\n  cta2target: 0,\n  cta2text: 0,\n  cta2url: (s) => checkCtaUrl(s, {}, 2),\n  description: (s) => s || getMetaContent('name', 'description') || '',\n  details: 0,\n  entityid: (_, options) => {\n    const floodGateColor = options.floodgatecolor || getMetadata('floodgatecolor') || '';\n    const salt = floodGateColor === 'default' || floodGateColor === '' ? '' : floodGateColor;\n    return getUuid(`${options.prodUrl}${salt}`);\n  },\n  env: (s) => s || '',\n  eventduration: 0,\n  eventend: (s) => getDateProp(s, `Invalid Event End Date: ${s}`),\n  eventstart: (s) => getDateProp(s, `Invalid Event Start Date: ${s}`),\n  floodgatecolor: (s, options) => s || options.floodgatecolor || getMetadata('floodgatecolor') || 'default',\n  lang: async (s, options) => {\n    if (s) return s;\n    const { lang } = await getCountryAndLang(options);\n    return lang;\n  },\n  modified: (s) => {\n    const { doc, lastModified } = getConfig();\n    return s\n      ? getDateProp(s, `Invalid Modified Date: ${s}`)\n      : getDateProp(lastModified || doc.lastModified, `document.lastModified is not a valid date: ${doc.lastModified}`);\n  },\n  origin: (s, options) => {\n    if (s) return s;\n    const fgColor = options.floodgatecolor || getMetadata('floodgatecolor');\n    return getOrigin(fgColor);\n  },\n\n  playurl: (s) => checkUrl(s, `Invalid PlayURL: ${s}`),\n  primarytag: (s) => {\n    const tag = getTag(s);\n    return tag ? { id: tag.tagID } : {};\n  },\n  style: (s) => s || 'default',\n  tags: (s) => getTags(s),\n  title: (s) => s || getMetaContent('property', 'og:title') || '',\n  uci: (s, options) => s || options.prodUrl || window.location.pathname,\n  url: (s, options) => {\n    const url = s || options.prodUrl || window.location.origin + window.location.pathname;\n    return checkUrl(url, `Invalid URL: ${url}`);\n  },\n};\n\n// Map the flat props into the structure needed by CaaS\nconst getCaasProps = (p) => {\n  const caasProps = {\n    entityId: p.entityid,\n    contentId: p.contentid,\n    contentType: p.contenttype,\n    environment: p.env,\n    url: p.url,\n    floodGateColor: p.floodgatecolor,\n    universalContentIdentifier: p.uci,\n    title: p.cardtitle || p.title,\n    description: p.carddescription || p.description,\n    createdDate: p.created,\n    modifiedDate: p.modified,\n    tags: p.tags,\n    primaryTag: p.primarytag,\n    ...(p.cardimage && {\n      thumbnail: {\n        altText: p.cardimagealttext,\n        url: p.cardimage,\n      },\n    }),\n    country: p.country,\n    language: p.lang,\n    cardData: {\n      style: p.style,\n      headline: p.cardtitle || p.title,\n      ...(p.details && { details: p.details }),\n      ...((p.bookmarkenabled || p.bookmarkicon || p.bookmarkaction) && {\n        bookmark: {\n          enabled: p.bookmarkenabled,\n          bookmarkIcon: p.bookmarkicon,\n          action: p.bookmarkaction,\n        },\n      }),\n      badges: getBadges(p),\n      ...(p.playurl && { playUrl: p.playurl }),\n      ...((p.cta1url || p.cta2url) && {\n        cta: {\n          ...(p.cta1url && {\n            primaryCta: {\n              text: p.cta1text,\n              url: p.cta1url,\n              style: p.cta1style,\n              icon: p.cta1icon,\n              target: p.cta1target,\n            },\n          }),\n          ...(p.cta2url && {\n            secondaryCta: {\n              text: p.cta2text,\n              url: p.cta2url,\n              style: p.cta2style,\n              icon: p.cta2icon,\n              target: p.cta2target,\n            },\n          }),\n        },\n      }),\n      ...((p.eventduration || p.eventstart || p.eventend) && {\n        event: {\n          duration: p.eventduration,\n          startDate: p.eventstart,\n          endDate: p.eventend,\n        },\n      }),\n    },\n    origin: p.origin,\n    ...(p.arbitrary?.length && { arbitrary: p.arbitrary }),\n  };\n  return caasProps;\n};\n\nconst getCaaSMetadata = async (pageMd, options) => {\n  const md = {};\n  const errors = [];\n  let tagErrors = [];\n  let tags = [];\n  // for-of required to await any async computeVal's\n  for (const [key, computeFn] of Object.entries(props)) {\n    const val = computeFn ? await computeFn(pageMd[key], options) : pageMd[key];\n    if (val?.error) {\n      errors.push(val.error);\n    } else if (val?.tagErrors !== undefined) {\n      tagErrors = val.tagErrors;\n      md[key] = val.tags;\n      tags = val.tags.map((t) => t.id);\n    } else if (val !== undefined) {\n      md[key] = val;\n    }\n  }\n  if (!md.contenttype && tags.length) {\n    md.contenttype = tags.find((tag) => tag.startsWith('caas:content-type'));\n  }\n\n  return { caasMetadata: md, errors, tags, tagErrors };\n};\n\nconst getCardMetadata = async (options) => {\n  const pageMd = parseCardMetadata();\n  return getCaaSMetadata(pageMd, options);\n};\n\nconst postDataToCaaS = async ({ accessToken, caasEnv, caasProps, draftOnly }) => {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(caasProps),\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n      draft: !!draftOnly,\n      'caas-env': caasEnv,\n    },\n  };\n\n  let response;\n  const res = await fetch(URL_POSTXDM, options);\n  if (res !== undefined) {\n    const text = await res.text();\n\n    try {\n      response = JSON.parse(text);\n    } catch {\n      response = text;\n    }\n  }\n  return response;\n};\n\nexport {\n  checkUrl,\n  getCardMetadata,\n  getCaasProps,\n  getConfig,\n  getKeyValPairs,\n  isPagePublished,\n  loadCaasTags,\n  postDataToCaaS,\n  setConfig,\n};\n", "/* eslint-disable new-cap */\n/* global tingle */\n/* eslint-disable no-alert */\nimport { getImsToken } from '../utils/utils.js';\n\nimport {\n  getCardMetadata,\n  getCaasProps,\n  isPagePublished,\n  loadCaasTags,\n  postDataToCaaS,\n  setConfig,\n  getConfig,\n} from './send-utils.js';\n\nconst [setPublishingTrue, setPublishingFalse, isPublishing] = (() => {\n  let publishing = false;\n  return [\n    () => { publishing = true; },\n    () => { publishing = false; },\n    () => publishing,\n  ];\n})();\n\n// Tingle is the js library for displaying modals\nconst loadTingleModalFiles = async (loadScript, loadStyle) => {\n  if (!window.tingle?.modal) {\n    await Promise.all([\n      loadScript('https://milo.adobe.com/libs/deps/tingle.js'),\n      loadStyle('https://milo.adobe.com/libs/deps/tingle.css'),\n    ]);\n  }\n};\n\nconst showAlert = (msg, { error = false, onClose, showBtn = true, btnText = 'OK' } = {}) => {\n  const modal = new tingle.modal({\n    footer: true,\n    closeMethods: ['overlay', 'escape'],\n    onClose() {\n      if (onClose) { onClose(); }\n      this.destroy();\n    },\n  });\n  let msgContent = msg;\n  if (error) { // show alert icon\n    msgContent = `<div class=\"modal-error\"><div class=\"modal-alert\"></div><div>${msg}</div></div>`;\n  }\n  modal.setContent(msgContent);\n  if (showBtn) {\n    modal.addFooterBtn(btnText, 'tingle-btn tingle-btn--primary tingle-btn--pull-right', () => modal.close());\n  }\n  modal.open();\n  return modal;\n};\n\nconst showConfirm = (msg, {\n  onClose,\n  cssClass = [],\n  ctaBtnType = 'primary',\n  ctaText = 'OK',\n  cancelBtnType = 'default',\n  cancelText = 'Cancel',\n  footerContent = '',\n  initCode,\n  leftButton,\n} = {}) => new Promise((resolve) => {\n  let ok = false;\n  const modal = new tingle.modal({\n    cssClass,\n    footer: true,\n    closeMethods: ['escape'],\n    onClose() {\n      if (onClose) onClose(this);\n      this.destroy();\n      resolve(ok);\n    },\n  });\n  modal.setContent(msg);\n  if (footerContent) {\n    modal.setFooterContent(footerContent);\n  }\n\n  if (ctaText) {\n    modal.addFooterBtn(ctaText, `tingle-btn tingle-btn--${ctaBtnType} tingle-btn--pull-right`, () => {\n      ok = true;\n      modal.close();\n    });\n  }\n\n  modal.addFooterBtn(cancelText, `tingle-btn tingle-btn--${cancelBtnType} tingle-btn--pull-right`, () => {\n    ok = false;\n    modal.close();\n  });\n  if (leftButton) {\n    modal.addFooterBtn(leftButton.text, 'tingle-btn tingle-btn--default tingle-btn--pull-left', () => {\n      leftButton.callback?.();\n    });\n  }\n\n  if (initCode) initCode(modal.modal);\n\n  modal.open();\n});\n\nconst displayPublishingModal = () => {\n  const publishingModal = new tingle.modal({\n    closeMethods: [],\n    cssClass: ['modal-text-align-center'],\n    onClose() {\n      this.destroy();\n    },\n  });\n  publishingModal.setContent('Publishing to CaaS...');\n  publishingModal.open();\n  return publishingModal;\n};\n\nconst verifyInfoModal = async (tags, tagErrors, showAllPropertiesAlert) => {\n  let okToContinue = false;\n  let draftOnly = false;\n  let useHtml = false;\n  let caasEnv;\n\n  const seeAllPropsBtn = {\n    text: 'See all properties',\n    callback: showAllPropertiesAlert,\n  };\n\n  const footerOptions = `\n    <div class=\"verify-info-footer\">\n      <div class=\"caas-env\">\n        <label for=\"caas-env-select\">CaaS Env</label>\n        <select name=\"1A\" id=\"caas-env-select\">\n          <option>Prod</option>\n          <option>Stage</option>\n          <option>Dev</option>\n        </select>\n      </div>\n      <div id=\"caas-draft-cb\">\n        <input type=\"checkbox\" id=\"draftcb\" name=\"draftcb\">\n        <label for=\"draftcb\">Publish to Draft only</label>\n      </div>\n      <div id=\"caas-use-html-cb\" class=\"field checkbox\">\n        <input type=\"checkbox\" id=\"usehtml\" name=\"usehtml\">\n        <label for=\"usehtml\">Use .html extension</label>\n      </div>\n    </div>`;\n\n  const onClose = () => {\n    caasEnv = document.getElementById('caas-env-select')?.value?.toLowerCase();\n    draftOnly = document.getElementById('draftcb')?.checked;\n    useHtml = document.getElementById('usehtml')?.checked;\n  };\n\n  const modalInit = (modal) => {\n    const caasEnvSelect = modal.querySelector('#caas-env-select');\n    const caasEnvVal = caasEnvSelect.value?.toLowerCase();\n    const useHtmlCb = modal.querySelector('#usehtml');\n    if (caasEnvVal === 'prod') {\n      useHtmlCb.checked = true;\n    }\n    caasEnvSelect.addEventListener('change', (e) => {\n      useHtmlCb.checked = e.target.value?.toLowerCase() === 'prod';\n    });\n  };\n\n  if (!tags.length) {\n    const msg = '<div><p><b>No Tags found on page</b></p><p>Please add at least one tag to the Card Metadata</p></div>';\n    okToContinue = await showConfirm(msg, {\n      cssClass: ['verify-info-modal'],\n      ctaText: '',\n      cancelBtnType: 'danger',\n      cancelText: 'Cancel Registration',\n      footerContent: footerOptions,\n      leftButton: seeAllPropsBtn,\n      onClose,\n    });\n  } else if (tagErrors.length) {\n    const msg = [\n      '<div class=\"\">',\n      '<p><b>The following tags were not found:</b></p>',\n      tagErrors.join('<br>'),\n      '<p><b>Ok to publish without those tags defined?</b></p>',\n      '<p>The following tags will be used:</p>',\n      tags.join('<br>'),\n      '</div>',\n    ].join('');\n    okToContinue = await showConfirm(msg, {\n      cssClass: ['verify-info-modal'],\n      ctaText: 'Publish with missing tags',\n      cancelBtnType: 'grey',\n      cancelText: 'Cancel Registration',\n      ctaBtnType: 'danger',\n      footerContent: footerOptions,\n      initCode: modalInit,\n      leftButton: seeAllPropsBtn,\n      onClose,\n    });\n  } else {\n    const msg = [\n      '<div><p><b>The following tags will be used:</b></p>',\n      tags.join('<br>'),\n      '<p><b>Please verify that these are correct.</b></p></div>',\n    ].join('');\n    okToContinue = await showConfirm(msg, {\n      cssClass: ['verify-info-modal'],\n      cancelBtnType: 'grey',\n      cancelText: 'Cancel Registration',\n      ctaText: 'Continue with these tags',\n      footerContent: footerOptions,\n      initCode: modalInit,\n      leftButton: seeAllPropsBtn,\n      onClose,\n    });\n  }\n  return {\n    caasEnv,\n    draftOnly,\n    okToContinue,\n    useHtml,\n  };\n};\n\nconst isUseHtmlChecked = () => document.getElementById('usehtml')?.checked;\n\nconst sortObjByPropName = (obj) => Object.keys(obj)\n  // eslint-disable-next-line no-return-assign, no-sequences\n  .sort().reduce((c, d) => (c[d] = obj[d], c), {});\n\nconst validateProps = async (prodHost, publishingModal) => {\n  const { caasMetadata, errors, tags, tagErrors } = await getCardMetadata(\n    { prodUrl: `${prodHost}${window.location.pathname}` },\n  );\n\n  const showAllPropertiesAlert = async () => {\n    const { caasMetadata: cMetaData } = await getCardMetadata(\n      { prodUrl: `${prodHost}${window.location.pathname}${isUseHtmlChecked() ? '.html' : ''}` },\n    );\n    const mdStr = JSON.stringify(sortObjByPropName(cMetaData), undefined, 4);\n    showAlert(`<h3>All CaaS Properties</h3><pre id=\"json\" style=\"white-space:pre-wrap;font-size:14px;\">${mdStr}</pre>`);\n  };\n\n  const { draftOnly, caasEnv, okToContinue, useHtml } = await verifyInfoModal(\n    tags,\n    tagErrors,\n    showAllPropertiesAlert,\n  );\n\n  if (!okToContinue) {\n    setPublishingFalse();\n    publishingModal.close();\n    return false;\n  }\n\n  if (errors.length) {\n    publishingModal.close();\n    const msg = [\n      '<p>There were problems with the following:</p>',\n      errors.join('<br>'),\n      '<p>Publishing to CaaS aborted, please fix errors and try again.</p>',\n    ].join('');\n    showAlert(msg, { error: true, onClose: setPublishingFalse });\n    return false;\n  }\n\n  let metaWithUseHtml;\n  if (useHtml) {\n    ({ caasMetadata: metaWithUseHtml } = await getCardMetadata(\n      { prodUrl: `${prodHost}${window.location.pathname}.html` },\n    ));\n  }\n\n  return {\n    caasEnv,\n    caasMetadata: metaWithUseHtml || caasMetadata,\n    draftOnly,\n  };\n};\n\nconst checkPublishStatus = async (publishingModal) => {\n  if (!(await isPagePublished())) {\n    publishingModal.close();\n    showAlert(\n      'Page must be published before it can be registered with CaaS.<br>Please publish the page and try again.',\n      { error: true },\n    );\n    setPublishingFalse();\n    return false;\n  }\n  return true;\n};\n\nconst checkIms = async (publishingModal, loadScript) => {\n  const accessToken = await getImsToken(loadScript);\n  if (!accessToken) {\n    publishingModal.close();\n    const shouldLogIn = await showConfirm(\n      'You must be logged in with an Adobe ID in order to publish to CaaS.\\nDo you want to log in?',\n    );\n    if (shouldLogIn) {\n      const { signInContext } = getConfig();\n      window.adobeIMS.signIn(signInContext);\n    }\n    setPublishingFalse();\n    return false;\n  }\n  return accessToken;\n};\n\nconst postToCaaS = async ({ accessToken, caasEnv, caasProps, draftOnly, publishingModal }) => {\n  try {\n    const response = await postDataToCaaS({ accessToken, caasEnv, caasProps, draftOnly });\n\n    publishingModal.close();\n\n    if (response.success) {\n      showAlert(\n        `<p>Successfully published page to CaaS!<p><p>Card ID: ${caasProps.entityId}</p>`,\n        { onClose: setPublishingFalse },\n      );\n    } else if (response.error?.startsWith('Invalid User: Not an Adobe employee')) {\n      const msg = 'Please login with your Adobe company account.  Do you want to try logging in again?';\n      const shouldLogIn = await showConfirm(msg, {\n        cancelBtnType: 'grey',\n        cancelText: 'Cancel',\n        ctaText: 'Login',\n      });\n      setPublishingFalse();\n      if (shouldLogIn) {\n        const { signInContext } = getConfig();\n        window.adobeIMS.signIn(signInContext);\n      }\n    } else {\n      showAlert(\n        response.message || response.error || JSON.stringify(response),\n        { error: true, onClose: setPublishingFalse },\n      );\n    }\n  } catch (e) {\n    publishingModal.close();\n    setPublishingFalse();\n    showAlert(`Error posting to CaaS:<br>${e.message}`, { error: true });\n  }\n};\n\nconst noop = () => {};\n\nconst sendToCaaS = async ({ host = '', project = '', branch = '', repo = '', owner = '' } = {}, loadScript = noop, loadStyle = noop) => {\n  if (isPublishing()) return;\n\n  await loadTingleModalFiles(loadScript, loadStyle);\n  if (window.adobeid?.environment !== 'prod') {\n    showAlert(\n      'Send to CaaS needs to reload the page with prod IMS setup.  Please try again after reload.',\n      {\n        onClose: () => {\n          const url = new URL(window.location);\n          url.searchParams.append('env', 'prod');\n          window.location.assign(url);\n        },\n      },\n    );\n    return;\n  }\n\n  setConfig({\n    host: host || window.location.host, project, branch, repo, owner, doc: document,\n  });\n\n  loadStyle('https://milo.adobe.com/tools/send-to-caas/send-to-caas.css');\n\n  setPublishingTrue();\n  const publishingModal = displayPublishingModal();\n\n  try {\n    if (!host) throw new Error('host must be specified');\n\n    await loadCaasTags();\n    const { caasEnv, caasMetadata, draftOnly } = await validateProps(host, publishingModal);\n    if (!caasMetadata) return;\n\n    const isPublished = await checkPublishStatus(publishingModal);\n    if (!isPublished) return;\n\n    const accessToken = await checkIms(publishingModal, loadScript);\n    if (!accessToken) return;\n\n    const caasProps = getCaasProps(caasMetadata);\n\n    postToCaaS({ accessToken, caasEnv, caasProps, draftOnly, publishingModal });\n  } catch (e) {\n    setPublishingFalse();\n    publishingModal.close();\n    showAlert(`ERROR: ${e.message}`, { error: true });\n  }\n};\n\nexport {\n  loadTingleModalFiles,\n  sendToCaaS,\n  showAlert,\n  showConfirm,\n};\n"],
  "mappings": ";;;;;;;;;;AACA,IAAM,aAAa,mBAAmB,MAAM,EAAE;AAE9C,IAAM,OAAO,OAAO,YAAY;AAC9B,QAAM,OAAO,IAAI,YAAY,EAAE,OAAO,OAAO;AAC7C,QAAM,UAAU,MAAM,OAAO,OAAO,OAAO,SAAS,IAAI;AACxD,SAAO;AACT;AAEA,IAAM,aAAa,CAAC,QAAQ;AAC1B,QAAM,QAAQ,OAAO;AACrB,QAAM,SAAS,OAAO,SAAS;AAC/B,SAAO,WAAW,KAAK,IAAI,WAAW,MAAM;AAC9C;AAEA,IAAM,kBAAkB,CAAC,QAAQ,CAAC,GAAG,GAAG,EACrC,IAAI,CAAC,QAAQ,WAAW,GAAG,CAAC,EAC5B,KAAK,EAAE;AAGV,IAAM,aAAa,CAAC,QAClB;AAAA,EACE,gBAAgB,IAAI,MAAM,GAAG,CAAC,CAAC;AAAA,EAC/B;AAAA,EACA,gBAAgB,IAAI,MAAM,GAAG,CAAC,CAAC;AAAA,EAC/B;AAAA,EACA,WAAY,IAAI,CAAC,IAAI,KAAQ,SAAS,IAAI,IAAI,EAAE,CAAC;AAAA,EACjD,WAAW,IAAI,CAAC,CAAC;AAAA,EACjB;AAAA,EACA,WAAY,IAAI,CAAC,IAAI,KAAQ,GAAI;AAAA,EACjC,WAAW,IAAI,CAAC,CAAC;AAAA,EACjB;AAAA,EACA,gBAAgB,IAAI,MAAM,IAAI,EAAE,CAAC;AACnC,EAAE,KAAK,EAAE;AAEX,IAAM,UAAU,OAAO,QAAQ;AAC7B,QAAM,MAAM,MAAM,KAAK,GAAG;AAC1B,SAAO,WAAW,IAAI,WAAW,GAAG,CAAC;AACvC;AAEA,IAAO,kBAAQ;;;AC5BR,IAAM,UAAU;AAAA;AAAA,EAErB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,WAAW,EAAE,MAAM,QAAQ;AAAA;AAAA,EAE3B,QAAQ,EAAE,MAAM,YAAY;AAAA,EAC5B,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,SAAS,EAAE,MAAM,UAAU;AAAA,EAC3B,SAAS,EAAE,MAAM,UAAU;AAAA,EAC3B,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA;AAAA,EAEpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,QAAQ,EAAE,MAAM,SAAS;AAAA,EACzB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,IAAI,EAAE,MAAM,QAAQ;AAAA,EACpB,OAAO,EAAE,MAAM,QAAQ;AAAA,EACvB,OAAO,EAAE,MAAM,QAAQ;AACzB;AAMA,IAAM,aAAa,UAAiB;AACpC,IAAM,cAAc,OAAO,KAAK,WAAW,WAAW,CAAC,CAAC;;;AChHxD,IAAM,eAAe;AACrB,IAAM,mBAAmB;AACzB,IAAM,cAAc;AACpB,IAAM,eAAe;AACrB,IAAM,iBAAiB;AAEvB,IAAM,eAAe;AACrB,IAAM,aAAa,CAAC,MAAM,aAAa,KAAK,CAAC;AAC7C,IAAM,eAAe,CAAC,MAAM,eAAe,KAAK,CAAC;AAEjD,IAAM,CAAC,WAAWA,UAAS,IAAK,uBAAM;AACpC,MAAI,SAAS;AAAA,IACX,eAAe,MAAM,SAAK,QAAQ;AAAA,IAClC,KAAK;AAAA,EACP;AACA,SAAO;AAAA,IACL,CAAC,MAAM;AACL,eAAS,EAAE,GAAG,QAAQ,GAAG,EAAE;AAC3B,aAAO;AAAA,IACT;AAAA,IACA,MAAM;AAAA,EACR;AACF,GAAG;AAEH,IAAM,iBAAiB,CAAC,MAAM;AAC5B,MAAI,CAAC,EAAG,QAAO,CAAC;AAChB,SAAO,EACJ,MAAM,GAAG,EACT,OAAO,CAAC,MAAM,EAAE,MAAM,EACtB,OAAO,CAAC,MAAM,aAAa,KAAK,CAAC,CAAC,EAClC,IAAI,CAAC,MAAM;AACV,UAAM,CAAC,KAAK,GAAG,KAAK,IAAI,EAAE,MAAM,GAAG;AACnC,WAAO,EAAE,CAAC,IAAI,KAAK,CAAC,GAAG,MAAM,KAAK,GAAG,EAAE,KAAK,EAAE;AAAA,EAChD,CAAC;AACL;AAEA,IAAM,UAAU,CAAC,QAAQ;AACvB,MAAI,IAAI,WAAW,MAAM,EAAG,QAAO;AACnC,QAAM,EAAE,KAAK,IAAIA,WAAU;AAC3B,SAAO,WAAW,IAAI,GAAG,IAAI,WAAW,GAAG,IAAI,KAAK,GAAG,GAAG,GAAG;AAC/D;AAEA,IAAM,iBAAiB,CAAC,UAAU,aAAa;AAC7C,QAAM,SAASA,WAAU,EAAE,IAAI,cAAc,QAAQ,QAAQ,KAAK,QAAQ,IAAI;AAC9E,MAAI,CAAC,OAAQ,QAAO;AACpB,SAAO,OAAO;AAChB;AAEA,IAAM,cAAc,CAAC,QAAQ;AAC3B,MAAI,EAAE,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,SAAS,IAAI;AAChE,WAAO,WAAW,GAAG;AAAA,EACvB;AACA,SAAO;AACT;AAEA,IAAM,cAAc,CAAC,SAAS;AAC5B,QAAM,cAAc,SAAS,cAAc,KAAK;AAChD,cAAY,YAAY;AACxB,SAAO,YAAY,cAAc,GAAG,EAAE,aAAa,MAAM;AAC3D;AAEA,IAAM,WAAW,CAAC,KAAK,aAAa;AAClC,MAAI,QAAQ,UAAa,aAAa,GAAG,EAAG,QAAO;AACnD,QAAM,UAAU,IAAI,SAAS,OAAO,IAAI,YAAY,GAAG,IAAI;AAC3D,MAAI,aAAa,OAAO,GAAG;AACzB,WAAO;AAAA,EACT;AACA,SAAO,WAAW,OAAO,IAAI,YAAY,OAAO,IAAI,EAAE,OAAO,SAAS;AACxE;AAGA,IAAM,UAAU,CAAC,MAAM,WAAW,SAAS,CAAC,MAAM;AAChD,QAAM,YAAY,CAAC;AACnB,MAAI,cAAc,OAAO,OAAO,IAAI,EAAE,KAAK,CAAC,QAAQ;AAClD,QACE,OAAO,SAAS,IAAI,KAAK,KACtB,OAAO,SAAS,IAAI,IAAI,KACxB,OAAO,SAAS,IAAI,IAAI,KACxB,OAAO,SAAS,IAAI,KAAK,EAC5B,QAAO;AAET,QAAI,IAAI,QAAQ,OAAO,KAAK,IAAI,IAAI,EAAE,QAAQ;AAC5C,gBAAU,KAAK,IAAI,IAAI;AAAA,IACzB;AAEA,UAAM,aAAa;AAAA,MACjB,IAAI,MAAM,YAAY;AAAA,MACtB,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI,KAAK,QAAQ,qBAAqB,EAAE;AAAA;AAAA,MAExC,IAAI,MAAM,YAAY;AAAA,IACxB;AAEA,QAAI,WAAW,SAAS,UAAU,YAAY,CAAC,EAAG,QAAO;AAEzD,WAAO;AAAA,EACT,CAAC;AAED,MAAI,CAAC,aAAa;AAChB,cAAU,KAAK,CAAC,aAAa;AAC3B,oBAAc,QAAQ,UAAU,WAAW,MAAM;AACjD,aAAO;AAAA,IACT,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAEA,IAAM,CAAC,aAAa,YAAY,IAAK,uBAAM;AACzC,MAAI;AACJ,SAAO;AAAA,IACL,MAAM;AAAA,IACN,YAAY;AACV,UAAI;AACF,cAAM,OAAO,MAAM,MAAM,YAAY;AACrC,YAAI,KAAK,IAAI;AACX,gBAAM,OAAO,MAAM,KAAK,KAAK;AAC7B,iBAAO,KAAK,WAAW,KAAK;AAC5B;AAAA,QACF;AAAA,MACF,SAAS,GAAG;AAAA,MAEZ;AACA,YAAM,EAAE,SAAS,SAAS,IAAI,MAAM,OAAO,yBAA4C;AACvF,aAAO,SAAS,WAAW,KAAK;AAAA,IAClC;AAAA,EAAC;AACL,GAAG;AAEH,IAAM,SAAS,CAAC,SAAS,WAAW;AAClC,MAAI,CAAC,QAAS,QAAO;AACrB,QAAM,WAAW,YAAY;AAE7B,QAAM,MAAM,QAAQ,UAAU,SAAS,CAAC,QAAQ,CAAC,KAAK,QAAQ,SAAS,OAAO,MAAM,SAAS,CAAC,CAAC;AAE/F,MAAI,CAAC,KAAK;AACR,WAAO,KAAK,OAAO;AAAA,EACrB;AAEA,SAAO;AACT;AAEA,IAAM,UAAU,CAAC,MAAM;AACrB,MAAI,UAAU,CAAC;AACf,MAAI,GAAG;AACL,cAAU,EAAE,YAAY,EAAE,MAAM,kBAAkB,EAAE,OAAO,CAAC,MAAM,KAAK,EAAE,KAAK,KAAK,MAAM,IAAI;AAAA,EAC/F;AAEA,QAAM,SAAS,CAAC;AAEhB,QAAM,SAAS,QAAQ,IAAI,CAAC,QAAQ,OAAO,KAAK,MAAM,CAAC,EACpD,OAAO,CAAC,QAAQ,QAAQ,MAAS,EACjC,IAAI,CAAC,QAAQ,IAAI,KAAK;AAEzB,QAAM,OAAO,CAAC,GAAG,IAAI,IAAI,MAAM,CAAC,EAC7B,IAAI,CAAC,WAAW,EAAE,IAAI,MAAM,EAAE;AAEjC,SAAO;AAAA,IACL,WAAW;AAAA,IACX;AAAA,EACF;AACF;AAEA,IAAM,cAAc,CAAC,SAAS,aAAa;AACzC,MAAI,CAAC,QAAS,QAAO;AACrB,MAAI;AACF,UAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,QAAI,KAAK,YAAY,IAAI,IAAM,QAAO,EAAE,OAAO,GAAG,QAAQ,kCAAkC;AAC5F,WAAO,KAAK,YAAY;AAAA,EAC1B,SAAS,GAAG;AACV,WAAO,EAAE,OAAO,SAAS;AAAA,EAC3B;AACF;AAEA,IAAM,0BAA0B,CAAC,MAAM,YAAY;AACjD,MAAI,QAAQ,WAAW,YAAY,WAAW;AAC5C,WAAO,KAAK,MAAM,GAAG,KAAK,YAAY,IAAI,OAAO,EAAE,CAAC;AAAA,EACtD;AACA,SAAO;AACT;AAEO,IAAM,YAAY,CAAC,YAAY;AACpC,QAAM,EAAE,SAAS,KAAK,IAAIA,WAAU;AACpC,QAAM,SAAS,WAAW,wBAAwB,MAAM,OAAO;AAE/D,QAAM,WAAW;AAAA,IACf,IAAI;AAAA,IACJ,IAAI;AAAA,EACN;AACA,QAAM,WAAW,SAAS,OAAO,YAAY,CAAC,KAAK;AACnD,MAAI,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,SAAS,SAAS,SAAS,WAAW,GAAG;AAClD,UAAM,CAAC,EAAE,cAAc,IAAI,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,IAAI;AAC5E,WAAO,wBAAwB,gBAAgB,OAAO;AAAA,EACxD;AAEA,QAAM,IAAI,MAAM,sCAAsC;AACxD;AAEA,IAAM,oBAAoB,CAAC,QAAQ,GAAG,IAAI,MAAM,GAAG,EAAE,MAAM,GAAG,EAAE,EAAE,KAAK,GAAG,CAAC;AAE3E,IAAM,iBAAiB,CAAC,YAAY;AAClC,QAAM,OAAOA,WAAU,EAAE,IAAI,cAAc,gBAAgB;AAC3D,MAAI,CAAC,KAAM,QAAO;AAElB,MAAI,MAAM;AACV,GAAC,GAAG,KAAK,QAAQ,EAAE,KAAK,CAAC,MAAM;AAC7B,UAAM,MAAM,EAAE,kBAAkB,aAAa,KAAK,EAAE,YAAY;AAChE,QAAI,QAAQ,QAAS,QAAO;AAE5B,UAAM,MAAM,EAAE,iBAAiB,cAAc,KAAK;AAElD,QAAI,KAAK;AACP,UAAI,SAAS,IAAI;AACjB,UAAIA,WAAU,EAAE,aAAa;AAC3B,cAAM,YAAY,IAAI,WAAW,IAAI;AACrC,YAAI,UAAU,WAAW,IAAI,GAAG;AAC9B,gBAAM,iBAAiB,kBAAkBA,WAAU,EAAE,OAAO;AAC5D,mBAAS,GAAG,cAAc,GAAG,SAAS;AAAA,QACxC,WAAW,UAAU,WAAW,GAAG,GAAG;AACpC,mBAAS,GAAG,IAAI,IAAIA,WAAU,QAAQ,MAAM,CAAC,GAAG,SAAS;AAAA,QAC3D,OAAO;AACL,mBAAS;AAAA,QACX;AAAA,MACF;AACA,YAAM,IAAI,IAAI,MAAM,GAAG;AAAA,IACzB,OAAO;AACL,YAAM,EAAE,iBAAiB,aAAa,KAAK;AAAA,IAC7C;AACA,WAAO;AAAA,EACT,CAAC;AACD,SAAO;AACT;AAEA,IAAM,kBAAkB,MAAM;AAC5B,QAAM,EAAE,IAAI,IAAIA,WAAU;AAC1B,QAAM,WAAW,eAAe,OAAO,KAClC,eAAe,WAAW,KAC1B,eAAe,eAAe,KAC9B,IAAI,cAAc,MAAM,GAAG,cAAc,KAAK,GAAG,IAAI,QAAQ,QAAQ,EAAE,KACvE,IAAI,cAAc,2BAA2B,GAAG;AAErD,MAAI,CAAC,SAAU,QAAO;AACtB,SAAO,QAAQ,QAAQ;AACzB;AAEA,IAAM,sBAAsB,MAAM;AAEhC,QAAM,SAAS,kBAAkB;AACjC,MAAI,OAAO,UAAW,QAAO;AAC7B,QAAM,eAAe,gBAAgB;AACrC,QAAM,gBAAgB,IAAI,IAAI,YAAY,EAAE,SAAS,MAAM,GAAG,EAAE,IAAI;AACpE,QAAM,qBAAqBA,WAAU,EAAE,IAAI,cAAc,aAAa,aAAa,IAAI;AACvF,SAAO,oBAAoB;AAC7B;AAEA,IAAM,YAAY,CAAC,MAAM;AACvB,QAAM,SAAS,CAAC;AAChB,MAAI,EAAE,YAAY;AAChB,WAAO,KAAK,EAAE,MAAM,SAAS,OAAO,QAAQ,EAAE,UAAU,EAAE,CAAC;AAAA,EAC7D;AACA,MAAI,EAAE,WAAW;AACf,WAAO,KAAK,EAAE,MAAM,QAAQ,OAAO,EAAE,UAAU,CAAC;AAAA,EAClD;AACA,SAAO;AACT;AAEA,IAAM,kBAAkB,YAAY;AAClC,MAAI,EAAE,QAAQ,MAAM,MAAM,IAAIA,WAAU;AACxC,MAAI,EAAE,UAAU,QAAQ,UACnB,OAAO,SAAS,SAAS,SAAS,WAAW,GAAG;AACnD,KAAC,QAAQ,MAAM,KAAK,IAAI,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,IAAI;AAAA,EAC3E;AAEA,MAAI,EAAE,UAAU,QAAQ,QAAQ;AAC9B,UAAM,IAAI,MAAM,8CAA8C,MAAM,WAAW,IAAI,YAAY,KAAK,EAAE;AAAA,EACxG;AAEA,QAAM,MAAM,MAAM;AAAA,IAChB,GAAG,gBAAgB,IAAI,KAAK,IAAI,IAAI,IAAI,MAAM,GAAG,OAAO,SAAS,QAAQ;AAAA,EAC3E;AACA,MAAI,IAAI,IAAI;AACV,UAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,WAAO,KAAK,KAAK,WAAW;AAAA,EAC9B;AACA,SAAO;AACT;AAEA,IAAM,yBAAyB,OAAO,YAAY;AAChD,MAAI,EAAE,UAAU,IAAIA,WAAU;AAC9B,MAAI,CAAC,WAAW;AAGd,UAAM,EAAE,WAAW,eAAe,IAAI,MAAM,OAAO,qBAA2B;AAC9E,gBAAY;AACZ,cAAU,EAAE,UAAU,CAAC;AAAA,EACzB;AACA,SAAO,UAAU,SAAS,QAAQ,OAAO,EAAE;AAC7C;AAEA,IAAM,oBAAoB,OAAO,YAAY;AAC3C,QAAM,UAAU,OAAO,SAAS,aAAa,2CACzC,MAAM,uBAAuB,OAAO,KACnC,QAAQ,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,CAAC,KAAK,QAAQ,EAAE,GAAG;AACrE,QAAM,WAAW,SAAS,YAAY,EAAE,MAAM,GAAG,KAAK,CAAC;AAEvD,QAAM,CAAC,OAAO,MAAM,UAAU,IAAI,IAAI;AACtC,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;AAEA,IAAM,oBAAoB,MAAM;AAC9B,QAAM,SAAS,CAAC;AAChB,QAAM,kBAAkBA,WAAU,EAAE,IAAI,cAAc,wBAAwB;AAC9E,QAAM,eAAeA,WAAU,EAAE,IAAI,cAAc,gBAAgB;AACnE,QAAM,OAAO,gBAAgB;AAC7B,QAAM,YAAY,CAAC,aAAa;AAChC,MAAI,MAAM;AACR,SAAK,WAAW,QAAQ,CAAC,MAAM;AAC7B,YAAM,MAAM,EAAE,WAAW,CAAC,GAAG,aAAa,YAAY;AACtD,UAAI,MAAM,EAAE,WAAW,CAAC,GAAG;AAC3B,UAAI,mBAAmB,UAAU,SAAS,GAAG,GAAG;AAC9C,cAAM,EAAE,WAAW,CAAC,GAAG;AAAA,MACzB;AACA,UAAI,CAAC,IAAK;AAEV,aAAO,GAAG,IAAI;AAAA,IAChB,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,YAAY,GAAG,SAAS,GAAG;AAClC,MAAI,GAAG,KAAK,MAAM,GAAI,QAAO;AAC7B,QAAM,MAAM,KAAK,QAAQ,WAAW,OAAO,SAAS,SAAS,OAAO,SAAS;AAC7E,SAAO,SAAS,KAAK,cAAc,CAAC,QAAQ,GAAG,EAAE;AACnD;AAMA,IAAM,QAAQ;AAAA,EACZ,WAAW,CAAC,MAAM,eAAe,CAAC,EAAE,IAAI,CAAC,SAAU,IAAK;AAAA,EACxD,YAAY,MAAM,eAAe,YAAY;AAAA,EAC7C,WAAW;AAAA,EACX,gBAAgB;AAAA,EAChB,iBAAiB,CAAC,IAAI,OAAO;AAC3B,QAAI,GAAG;AACL,YAAM,MAAM,EAAE,YAAY;AAC1B,UAAI,QAAQ,UAAU,QAAQ,QAAQ,QAAQ,OAAO;AACnD,eAAO;AAAA,MACT;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EACA,cAAc;AAAA,EACd,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,WAAW,MAAM,gBAAgB;AAAA,EACjC,kBAAkB,CAAC,MAAM,KAAK,oBAAoB;AAAA,EAClD,WAAW,CAAC,GAAG,YAAY,gBAAQ,QAAQ,OAAO;AAAA,EAClD,aAAa,CAAC,MAAM,KAAK,eAAe,YAAY,SAAS,KAAKA,WAAU,EAAE;AAAA,EAC9E,SAAS,OAAO,GAAG,YAAY;AAC7B,QAAI,EAAG,QAAO;AACd,UAAM,EAAE,QAAQ,IAAI,MAAM,kBAAkB,OAAO;AACnD,WAAO;AAAA,EACT;AAAA,EACA,SAAS,CAAC,MAAM;AACd,QAAI,GAAG;AACL,aAAO,YAAY,GAAG,yBAAyB,CAAC,EAAE;AAAA,IACpD;AACA,UAAM,WAAW,kBAAkB,GAAG;AACtC,QAAI,UAAU;AACZ,aAAO,YAAY,UAAU,iBAAiB,QAAQ,EAAE;AAAA,IAC1D;AAEA,UAAM,UAAU,eAAe,QAAQ,aAAa,KAAK,eAAe,QAAQ,kBAAkB;AAClG,UAAM,EAAE,KAAK,aAAa,IAAIA,WAAU;AACxC,WAAO,UACH,YAAY,SAAS,kDAAkD,OAAO,EAAE,IAChF,YAAY,gBAAgB,IAAI,cAAc,8CAA8C,IAAI,YAAY,EAAE;AAAA,EACpH;AAAA,EACA,UAAU,CAAC,MAAM,SAAS,GAAG,yBAAyB,CAAC,EAAE;AAAA,EACzD,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,SAAS,CAAC,GAAG,YAAY,YAAY,GAAG,SAAS,CAAC;AAAA,EAClD,UAAU,CAAC,MAAM,SAAS,GAAG,yBAAyB,CAAC,EAAE;AAAA,EACzD,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,SAAS,CAAC,MAAM,YAAY,GAAG,CAAC,GAAG,CAAC;AAAA,EACpC,aAAa,CAAC,MAAM,KAAK,eAAe,QAAQ,aAAa,KAAK;AAAA,EAClE,SAAS;AAAA,EACT,UAAU,CAAC,GAAG,YAAY;AACxB,UAAM,iBAAiB,QAAQ,kBAAkB,YAAY,gBAAgB,KAAK;AAClF,UAAM,OAAO,mBAAmB,aAAa,mBAAmB,KAAK,KAAK;AAC1E,WAAO,gBAAQ,GAAG,QAAQ,OAAO,GAAG,IAAI,EAAE;AAAA,EAC5C;AAAA,EACA,KAAK,CAAC,MAAM,KAAK;AAAA,EACjB,eAAe;AAAA,EACf,UAAU,CAAC,MAAM,YAAY,GAAG,2BAA2B,CAAC,EAAE;AAAA,EAC9D,YAAY,CAAC,MAAM,YAAY,GAAG,6BAA6B,CAAC,EAAE;AAAA,EAClE,gBAAgB,CAAC,GAAG,YAAY,KAAK,QAAQ,kBAAkB,YAAY,gBAAgB,KAAK;AAAA,EAChG,MAAM,OAAO,GAAG,YAAY;AAC1B,QAAI,EAAG,QAAO;AACd,UAAM,EAAE,KAAK,IAAI,MAAM,kBAAkB,OAAO;AAChD,WAAO;AAAA,EACT;AAAA,EACA,UAAU,CAAC,MAAM;AACf,UAAM,EAAE,KAAK,aAAa,IAAIA,WAAU;AACxC,WAAO,IACH,YAAY,GAAG,0BAA0B,CAAC,EAAE,IAC5C,YAAY,gBAAgB,IAAI,cAAc,8CAA8C,IAAI,YAAY,EAAE;AAAA,EACpH;AAAA,EACA,QAAQ,CAAC,GAAG,YAAY;AACtB,QAAI,EAAG,QAAO;AACd,UAAM,UAAU,QAAQ,kBAAkB,YAAY,gBAAgB;AACtE,WAAO,UAAU,OAAO;AAAA,EAC1B;AAAA,EAEA,SAAS,CAAC,MAAM,SAAS,GAAG,oBAAoB,CAAC,EAAE;AAAA,EACnD,YAAY,CAAC,MAAM;AACjB,UAAM,MAAM,OAAO,CAAC;AACpB,WAAO,MAAM,EAAE,IAAI,IAAI,MAAM,IAAI,CAAC;AAAA,EACpC;AAAA,EACA,OAAO,CAAC,MAAM,KAAK;AAAA,EACnB,MAAM,CAAC,MAAM,QAAQ,CAAC;AAAA,EACtB,OAAO,CAAC,MAAM,KAAK,eAAe,YAAY,UAAU,KAAK;AAAA,EAC7D,KAAK,CAAC,GAAG,YAAY,KAAK,QAAQ,WAAW,OAAO,SAAS;AAAA,EAC7D,KAAK,CAAC,GAAG,YAAY;AACnB,UAAM,MAAM,KAAK,QAAQ,WAAW,OAAO,SAAS,SAAS,OAAO,SAAS;AAC7E,WAAO,SAAS,KAAK,gBAAgB,GAAG,EAAE;AAAA,EAC5C;AACF;AAGA,IAAM,eAAe,CAAC,MAAM;AAC1B,QAAM,YAAY;AAAA,IAChB,UAAU,EAAE;AAAA,IACZ,WAAW,EAAE;AAAA,IACb,aAAa,EAAE;AAAA,IACf,aAAa,EAAE;AAAA,IACf,KAAK,EAAE;AAAA,IACP,gBAAgB,EAAE;AAAA,IAClB,4BAA4B,EAAE;AAAA,IAC9B,OAAO,EAAE,aAAa,EAAE;AAAA,IACxB,aAAa,EAAE,mBAAmB,EAAE;AAAA,IACpC,aAAa,EAAE;AAAA,IACf,cAAc,EAAE;AAAA,IAChB,MAAM,EAAE;AAAA,IACR,YAAY,EAAE;AAAA,IACd,GAAI,EAAE,aAAa;AAAA,MACjB,WAAW;AAAA,QACT,SAAS,EAAE;AAAA,QACX,KAAK,EAAE;AAAA,MACT;AAAA,IACF;AAAA,IACA,SAAS,EAAE;AAAA,IACX,UAAU,EAAE;AAAA,IACZ,UAAU;AAAA,MACR,OAAO,EAAE;AAAA,MACT,UAAU,EAAE,aAAa,EAAE;AAAA,MAC3B,GAAI,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ;AAAA,MACtC,IAAK,EAAE,mBAAmB,EAAE,gBAAgB,EAAE,mBAAmB;AAAA,QAC/D,UAAU;AAAA,UACR,SAAS,EAAE;AAAA,UACX,cAAc,EAAE;AAAA,UAChB,QAAQ,EAAE;AAAA,QACZ;AAAA,MACF;AAAA,MACA,QAAQ,UAAU,CAAC;AAAA,MACnB,GAAI,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ;AAAA,MACtC,IAAK,EAAE,WAAW,EAAE,YAAY;AAAA,QAC9B,KAAK;AAAA,UACH,GAAI,EAAE,WAAW;AAAA,YACf,YAAY;AAAA,cACV,MAAM,EAAE;AAAA,cACR,KAAK,EAAE;AAAA,cACP,OAAO,EAAE;AAAA,cACT,MAAM,EAAE;AAAA,cACR,QAAQ,EAAE;AAAA,YACZ;AAAA,UACF;AAAA,UACA,GAAI,EAAE,WAAW;AAAA,YACf,cAAc;AAAA,cACZ,MAAM,EAAE;AAAA,cACR,KAAK,EAAE;AAAA,cACP,OAAO,EAAE;AAAA,cACT,MAAM,EAAE;AAAA,cACR,QAAQ,EAAE;AAAA,YACZ;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,MACA,IAAK,EAAE,iBAAiB,EAAE,cAAc,EAAE,aAAa;AAAA,QACrD,OAAO;AAAA,UACL,UAAU,EAAE;AAAA,UACZ,WAAW,EAAE;AAAA,UACb,SAAS,EAAE;AAAA,QACb;AAAA,MACF;AAAA,IACF;AAAA,IACA,QAAQ,EAAE;AAAA,IACV,GAAI,EAAE,WAAW,UAAU,EAAE,WAAW,EAAE,UAAU;AAAA,EACtD;AACA,SAAO;AACT;AAEA,IAAM,kBAAkB,OAAO,QAAQ,YAAY;AACjD,QAAM,KAAK,CAAC;AACZ,QAAM,SAAS,CAAC;AAChB,MAAI,YAAY,CAAC;AACjB,MAAI,OAAO,CAAC;AAEZ,aAAW,CAAC,KAAK,SAAS,KAAK,OAAO,QAAQ,KAAK,GAAG;AACpD,UAAM,MAAM,YAAY,MAAM,UAAU,OAAO,GAAG,GAAG,OAAO,IAAI,OAAO,GAAG;AAC1E,QAAI,KAAK,OAAO;AACd,aAAO,KAAK,IAAI,KAAK;AAAA,IACvB,WAAW,KAAK,cAAc,QAAW;AACvC,kBAAY,IAAI;AAChB,SAAG,GAAG,IAAI,IAAI;AACd,aAAO,IAAI,KAAK,IAAI,CAAC,MAAM,EAAE,EAAE;AAAA,IACjC,WAAW,QAAQ,QAAW;AAC5B,SAAG,GAAG,IAAI;AAAA,IACZ;AAAA,EACF;AACA,MAAI,CAAC,GAAG,eAAe,KAAK,QAAQ;AAClC,OAAG,cAAc,KAAK,KAAK,CAAC,QAAQ,IAAI,WAAW,mBAAmB,CAAC;AAAA,EACzE;AAEA,SAAO,EAAE,cAAc,IAAI,QAAQ,MAAM,UAAU;AACrD;AAEA,IAAM,kBAAkB,OAAO,YAAY;AACzC,QAAM,SAAS,kBAAkB;AACjC,SAAO,gBAAgB,QAAQ,OAAO;AACxC;AAEA,IAAM,iBAAiB,OAAO,EAAE,aAAa,SAAS,WAAW,UAAU,MAAM;AAC/E,QAAM,UAAU;AAAA,IACd,QAAQ;AAAA,IACR,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9B,SAAS;AAAA,MACP,eAAe,UAAU,WAAW;AAAA,MACpC,OAAO,CAAC,CAAC;AAAA,MACT,YAAY;AAAA,IACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,MAAM,MAAM,MAAM,aAAa,OAAO;AAC5C,MAAI,QAAQ,QAAW;AACrB,UAAM,OAAO,MAAM,IAAI,KAAK;AAE5B,QAAI;AACF,iBAAW,KAAK,MAAM,IAAI;AAAA,IAC5B,QAAQ;AACN,iBAAW;AAAA,IACb;AAAA,EACF;AACA,SAAO;AACT;;;AC7iBA,IAAM,CAAC,mBAAmB,oBAAoB,YAAY,IAAK,uBAAM;AACnE,MAAI,aAAa;AACjB,SAAO;AAAA,IACL,MAAM;AAAE,mBAAa;AAAA,IAAM;AAAA,IAC3B,MAAM;AAAE,mBAAa;AAAA,IAAO;AAAA,IAC5B,MAAM;AAAA,EACR;AACF,GAAG;AAGH,IAAM,uBAAuB,OAAOC,aAAYC,eAAc;AAC5D,MAAI,CAAC,OAAO,QAAQ,OAAO;AACzB,UAAM,QAAQ,IAAI;AAAA,MAChBD,YAAW,4CAA4C;AAAA,MACvDC,WAAU,6CAA6C;AAAA,IACzD,CAAC;AAAA,EACH;AACF;AAEA,IAAM,YAAY,CAAC,KAAK,EAAE,QAAQ,OAAO,SAAS,UAAU,MAAM,UAAU,KAAK,IAAI,CAAC,MAAM;AAC1F,QAAM,QAAQ,IAAI,OAAO,MAAM;AAAA,IAC7B,QAAQ;AAAA,IACR,cAAc,CAAC,WAAW,QAAQ;AAAA,IAClC,UAAU;AACR,UAAI,SAAS;AAAE,gBAAQ;AAAA,MAAG;AAC1B,WAAK,QAAQ;AAAA,IACf;AAAA,EACF,CAAC;AACD,MAAI,aAAa;AACjB,MAAI,OAAO;AACT,iBAAa,gEAAgE,GAAG;AAAA,EAClF;AACA,QAAM,WAAW,UAAU;AAC3B,MAAI,SAAS;AACX,UAAM,aAAa,SAAS,yDAAyD,MAAM,MAAM,MAAM,CAAC;AAAA,EAC1G;AACA,QAAM,KAAK;AACX,SAAO;AACT;AAEA,IAAM,cAAc,CAAC,KAAK;AAAA,EACxB;AAAA,EACA,WAAW,CAAC;AAAA,EACZ,aAAa;AAAA,EACb,UAAU;AAAA,EACV,gBAAgB;AAAA,EAChB,aAAa;AAAA,EACb,gBAAgB;AAAA,EAChB;AAAA,EACA;AACF,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,YAAY;AAClC,MAAI,KAAK;AACT,QAAM,QAAQ,IAAI,OAAO,MAAM;AAAA,IAC7B;AAAA,IACA,QAAQ;AAAA,IACR,cAAc,CAAC,QAAQ;AAAA,IACvB,UAAU;AACR,UAAI,QAAS,SAAQ,IAAI;AACzB,WAAK,QAAQ;AACb,cAAQ,EAAE;AAAA,IACZ;AAAA,EACF,CAAC;AACD,QAAM,WAAW,GAAG;AACpB,MAAI,eAAe;AACjB,UAAM,iBAAiB,aAAa;AAAA,EACtC;AAEA,MAAI,SAAS;AACX,UAAM,aAAa,SAAS,0BAA0B,UAAU,2BAA2B,MAAM;AAC/F,WAAK;AACL,YAAM,MAAM;AAAA,IACd,CAAC;AAAA,EACH;AAEA,QAAM,aAAa,YAAY,0BAA0B,aAAa,2BAA2B,MAAM;AACrG,SAAK;AACL,UAAM,MAAM;AAAA,EACd,CAAC;AACD,MAAI,YAAY;AACd,UAAM,aAAa,WAAW,MAAM,wDAAwD,MAAM;AAChG,iBAAW,WAAW;AAAA,IACxB,CAAC;AAAA,EACH;AAEA,MAAI,SAAU,UAAS,MAAM,KAAK;AAElC,QAAM,KAAK;AACb,CAAC;AAED,IAAM,yBAAyB,MAAM;AACnC,QAAM,kBAAkB,IAAI,OAAO,MAAM;AAAA,IACvC,cAAc,CAAC;AAAA,IACf,UAAU,CAAC,yBAAyB;AAAA,IACpC,UAAU;AACR,WAAK,QAAQ;AAAA,IACf;AAAA,EACF,CAAC;AACD,kBAAgB,WAAW,uBAAuB;AAClD,kBAAgB,KAAK;AACrB,SAAO;AACT;AAEA,IAAM,kBAAkB,OAAO,MAAM,WAAW,2BAA2B;AACzE,MAAI,eAAe;AACnB,MAAI,YAAY;AAChB,MAAI,UAAU;AACd,MAAI;AAEJ,QAAM,iBAAiB;AAAA,IACrB,MAAM;AAAA,IACN,UAAU;AAAA,EACZ;AAEA,QAAM,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBtB,QAAM,UAAU,MAAM;AACpB,cAAU,SAAS,eAAe,iBAAiB,GAAG,OAAO,YAAY;AACzE,gBAAY,SAAS,eAAe,SAAS,GAAG;AAChD,cAAU,SAAS,eAAe,SAAS,GAAG;AAAA,EAChD;AAEA,QAAM,YAAY,CAAC,UAAU;AAC3B,UAAM,gBAAgB,MAAM,cAAc,kBAAkB;AAC5D,UAAM,aAAa,cAAc,OAAO,YAAY;AACpD,UAAM,YAAY,MAAM,cAAc,UAAU;AAChD,QAAI,eAAe,QAAQ;AACzB,gBAAU,UAAU;AAAA,IACtB;AACA,kBAAc,iBAAiB,UAAU,CAAC,MAAM;AAC9C,gBAAU,UAAU,EAAE,OAAO,OAAO,YAAY,MAAM;AAAA,IACxD,CAAC;AAAA,EACH;AAEA,MAAI,CAAC,KAAK,QAAQ;AAChB,UAAM,MAAM;AACZ,mBAAe,MAAM,YAAY,KAAK;AAAA,MACpC,UAAU,CAAC,mBAAmB;AAAA,MAC9B,SAAS;AAAA,MACT,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,YAAY;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH,WAAW,UAAU,QAAQ;AAC3B,UAAM,MAAM;AAAA,MACV;AAAA,MACA;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,MACrB;AAAA,MACA;AAAA,MACA,KAAK,KAAK,MAAM;AAAA,MAChB;AAAA,IACF,EAAE,KAAK,EAAE;AACT,mBAAe,MAAM,YAAY,KAAK;AAAA,MACpC,UAAU,CAAC,mBAAmB;AAAA,MAC9B,SAAS;AAAA,MACT,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,UAAU;AAAA,MACV,YAAY;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH,OAAO;AACL,UAAM,MAAM;AAAA,MACV;AAAA,MACA,KAAK,KAAK,MAAM;AAAA,MAChB;AAAA,IACF,EAAE,KAAK,EAAE;AACT,mBAAe,MAAM,YAAY,KAAK;AAAA,MACpC,UAAU,CAAC,mBAAmB;AAAA,MAC9B,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,eAAe;AAAA,MACf,UAAU;AAAA,MACV,YAAY;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEA,IAAM,mBAAmB,MAAM,SAAS,eAAe,SAAS,GAAG;AAEnE,IAAM,oBAAoB,CAAC,QAAQ,OAAO,KAAK,GAAG,EAE/C,KAAK,EAAE,OAAO,CAAC,GAAG,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;AAEjD,IAAM,gBAAgB,OAAO,UAAU,oBAAoB;AACzD,QAAM,EAAE,cAAc,QAAQ,MAAM,UAAU,IAAI,MAAM;AAAA,IACtD,EAAE,SAAS,GAAG,QAAQ,GAAG,OAAO,SAAS,QAAQ,GAAG;AAAA,EACtD;AAEA,QAAM,yBAAyB,YAAY;AACzC,UAAM,EAAE,cAAc,UAAU,IAAI,MAAM;AAAA,MACxC,EAAE,SAAS,GAAG,QAAQ,GAAG,OAAO,SAAS,QAAQ,GAAG,iBAAiB,IAAI,UAAU,EAAE,GAAG;AAAA,IAC1F;AACA,UAAM,QAAQ,KAAK,UAAU,kBAAkB,SAAS,GAAG,QAAW,CAAC;AACvE,cAAU,2FAA2F,KAAK,QAAQ;AAAA,EACpH;AAEA,QAAM,EAAE,WAAW,SAAS,cAAc,QAAQ,IAAI,MAAM;AAAA,IAC1D;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAEA,MAAI,CAAC,cAAc;AACjB,uBAAmB;AACnB,oBAAgB,MAAM;AACtB,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,QAAQ;AACjB,oBAAgB,MAAM;AACtB,UAAM,MAAM;AAAA,MACV;AAAA,MACA,OAAO,KAAK,MAAM;AAAA,MAClB;AAAA,IACF,EAAE,KAAK,EAAE;AACT,cAAU,KAAK,EAAE,OAAO,MAAM,SAAS,mBAAmB,CAAC;AAC3D,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,SAAS;AACX,KAAC,EAAE,cAAc,gBAAgB,IAAI,MAAM;AAAA,MACzC,EAAE,SAAS,GAAG,QAAQ,GAAG,OAAO,SAAS,QAAQ,QAAQ;AAAA,IAC3D;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA,cAAc,mBAAmB;AAAA,IACjC;AAAA,EACF;AACF;AAEA,IAAM,qBAAqB,OAAO,oBAAoB;AACpD,MAAI,CAAE,MAAM,gBAAgB,GAAI;AAC9B,oBAAgB,MAAM;AACtB;AAAA,MACE;AAAA,MACA,EAAE,OAAO,KAAK;AAAA,IAChB;AACA,uBAAmB;AACnB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAM,WAAW,OAAO,iBAAiBD,gBAAe;AACtD,QAAM,cAAc,MAAM,YAAYA,WAAU;AAChD,MAAI,CAAC,aAAa;AAChB,oBAAgB,MAAM;AACtB,UAAM,cAAc,MAAM;AAAA,MACxB;AAAA,IACF;AACA,QAAI,aAAa;AACf,YAAM,EAAE,cAAc,IAAIE,WAAU;AACpC,aAAO,SAAS,OAAO,aAAa;AAAA,IACtC;AACA,uBAAmB;AACnB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAM,aAAa,OAAO,EAAE,aAAa,SAAS,WAAW,WAAW,gBAAgB,MAAM;AAC5F,MAAI;AACF,UAAM,WAAW,MAAM,eAAe,EAAE,aAAa,SAAS,WAAW,UAAU,CAAC;AAEpF,oBAAgB,MAAM;AAEtB,QAAI,SAAS,SAAS;AACpB;AAAA,QACE,yDAAyD,UAAU,QAAQ;AAAA,QAC3E,EAAE,SAAS,mBAAmB;AAAA,MAChC;AAAA,IACF,WAAW,SAAS,OAAO,WAAW,qCAAqC,GAAG;AAC5E,YAAM,MAAM;AACZ,YAAM,cAAc,MAAM,YAAY,KAAK;AAAA,QACzC,eAAe;AAAA,QACf,YAAY;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AACD,yBAAmB;AACnB,UAAI,aAAa;AACf,cAAM,EAAE,cAAc,IAAIA,WAAU;AACpC,eAAO,SAAS,OAAO,aAAa;AAAA,MACtC;AAAA,IACF,OAAO;AACL;AAAA,QACE,SAAS,WAAW,SAAS,SAAS,KAAK,UAAU,QAAQ;AAAA,QAC7D,EAAE,OAAO,MAAM,SAAS,mBAAmB;AAAA,MAC7C;AAAA,IACF;AAAA,EACF,SAAS,GAAG;AACV,oBAAgB,MAAM;AACtB,uBAAmB;AACnB,cAAU,6BAA6B,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,CAAC;AAAA,EACrE;AACF;AAEA,IAAM,OAAO,MAAM;AAAC;AAEpB,IAAM,aAAa,OAAO,EAAE,OAAO,IAAI,UAAU,IAAI,SAAS,IAAI,OAAO,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAGF,cAAa,MAAMC,aAAY,SAAS;AACtI,MAAI,aAAa,EAAG;AAEpB,QAAM,qBAAqBD,aAAYC,UAAS;AAChD,MAAI,OAAO,SAAS,gBAAgB,QAAQ;AAC1C;AAAA,MACE;AAAA,MACA;AAAA,QACE,SAAS,MAAM;AACb,gBAAM,MAAM,IAAI,IAAI,OAAO,QAAQ;AACnC,cAAI,aAAa,OAAO,OAAO,MAAM;AACrC,iBAAO,SAAS,OAAO,GAAG;AAAA,QAC5B;AAAA,MACF;AAAA,IACF;AACA;AAAA,EACF;AAEA,YAAU;AAAA,IACR,MAAM,QAAQ,OAAO,SAAS;AAAA,IAAM;AAAA,IAAS;AAAA,IAAQ;AAAA,IAAM;AAAA,IAAO,KAAK;AAAA,EACzE,CAAC;AAED,EAAAA,WAAU,4DAA4D;AAEtE,oBAAkB;AAClB,QAAM,kBAAkB,uBAAuB;AAE/C,MAAI;AACF,QAAI,CAAC,KAAM,OAAM,IAAI,MAAM,wBAAwB;AAEnD,UAAM,aAAa;AACnB,UAAM,EAAE,SAAS,cAAc,UAAU,IAAI,MAAM,cAAc,MAAM,eAAe;AACtF,QAAI,CAAC,aAAc;AAEnB,UAAM,cAAc,MAAM,mBAAmB,eAAe;AAC5D,QAAI,CAAC,YAAa;AAElB,UAAM,cAAc,MAAM,SAAS,iBAAiBD,WAAU;AAC9D,QAAI,CAAC,YAAa;AAElB,UAAM,YAAY,aAAa,YAAY;AAE3C,eAAW,EAAE,aAAa,SAAS,WAAW,WAAW,gBAAgB,CAAC;AAAA,EAC5E,SAAS,GAAG;AACV,uBAAmB;AACnB,oBAAgB,MAAM;AACtB,cAAU,UAAU,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,CAAC;AAAA,EAClD;AACF;",
  "names": ["getConfig", "loadScript", "loadStyle", "getConfig"]
}
