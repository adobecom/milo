{
  "version": 3,
  "sources": ["../../utils/sidekick.js"],
  "sourcesContent": ["import stylePublish from './sidekick-decorate.js';\n\n// loadScript and loadStyle are passed in to avoid circular dependencies\nexport default function init({ createTag, loadBlock, loadScript, loadStyle }) {\n  // manifest v3\n  const sendToCaasListener = async (e) => {\n    const { host, project, ref: branch, repo, owner } = e.detail.data.config;\n    // eslint-disable-next-line import/no-unresolved\n    const { sendToCaaS } = await import('https://milo.adobe.com/tools/send-to-caas/send-to-caas.js');\n    sendToCaaS({ host, project, branch, repo, owner }, loadScript, loadStyle);\n  };\n\n  const checkSchemaListener = async () => {\n    const schema = document.querySelector('script[type=\"application/ld+json\"]');\n    if (schema === null) return;\n    const resultsUrl = 'https://search.google.com/test/rich-results?url=';\n    window.open(`${resultsUrl}${encodeURIComponent(window.location.href)}`, 'check-schema');\n  };\n\n  const preflightListener = async () => {\n    const preflight = createTag('div', { class: 'preflight' });\n    const content = await loadBlock(preflight);\n\n    const { getModal } = await import('../blocks/modal/modal.js');\n    getModal(null, { id: 'preflight', content, closeEvent: 'closeModal' });\n  };\n\n  // Support for legacy manifest v2 - Delete once everyone is migrated to v3\n  document.addEventListener('send-to-caas', async (e) => {\n    const { host, project, branch, repo, owner } = e.detail;\n    const { sendToCaaS } = await import('../../tools/send-to-caas/send-to-caas.js');\n    sendToCaaS({ host, project, branch, repo, owner }, loadScript, loadStyle);\n  });\n\n  const sk = document.querySelector('aem-sidekick, helix-sidekick');\n\n  // Add plugin listeners here\n  sk.addEventListener('custom:send-to-caas', sendToCaasListener);\n  sk.addEventListener('custom:check-schema', checkSchemaListener);\n  sk.addEventListener('custom:preflight', preflightListener);\n\n  // Color code publish button\n  stylePublish(sk);\n}\n"],
  "mappings": ";;;;;;;AAGe,SAAR,KAAsB,EAAE,WAAW,WAAW,YAAY,UAAU,GAAG;AAE5E,QAAM,qBAAqB,OAAO,MAAM;AACtC,UAAM,EAAE,MAAM,SAAS,KAAK,QAAQ,MAAM,MAAM,IAAI,EAAE,OAAO,KAAK;AAElE,UAAM,EAAE,WAAW,IAAI,MAAM,OAAO,2DAA2D;AAC/F,eAAW,EAAE,MAAM,SAAS,QAAQ,MAAM,MAAM,GAAG,YAAY,SAAS;AAAA,EAC1E;AAEA,QAAM,sBAAsB,YAAY;AACtC,UAAM,SAAS,SAAS,cAAc,oCAAoC;AAC1E,QAAI,WAAW,KAAM;AACrB,UAAM,aAAa;AACnB,WAAO,KAAK,GAAG,UAAU,GAAG,mBAAmB,OAAO,SAAS,IAAI,CAAC,IAAI,cAAc;AAAA,EACxF;AAEA,QAAM,oBAAoB,YAAY;AACpC,UAAM,YAAY,UAAU,OAAO,EAAE,OAAO,YAAY,CAAC;AACzD,UAAM,UAAU,MAAM,UAAU,SAAS;AAEzC,UAAM,EAAE,SAAS,IAAI,MAAM,OAAO,qBAA0B;AAC5D,aAAS,MAAM,EAAE,IAAI,aAAa,SAAS,YAAY,aAAa,CAAC;AAAA,EACvE;AAGA,WAAS,iBAAiB,gBAAgB,OAAO,MAAM;AACrD,UAAM,EAAE,MAAM,SAAS,QAAQ,MAAM,MAAM,IAAI,EAAE;AACjD,UAAM,EAAE,WAAW,IAAI,MAAM,OAAO,4BAA0C;AAC9E,eAAW,EAAE,MAAM,SAAS,QAAQ,MAAM,MAAM,GAAG,YAAY,SAAS;AAAA,EAC1E,CAAC;AAED,QAAM,KAAK,SAAS,cAAc,8BAA8B;AAGhE,KAAG,iBAAiB,uBAAuB,kBAAkB;AAC7D,KAAG,iBAAiB,uBAAuB,mBAAmB;AAC9D,KAAG,iBAAiB,oBAAoB,iBAAiB;AAGzD,eAAa,EAAE;AACjB;",
  "names": []
}
