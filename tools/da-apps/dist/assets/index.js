import{n as ye,m as nn,v as Zo,x as Fs,d as io,a as _,r as Xo,_ as Pi,l as ct,$ as on,b as aa,c as dt,e as Ii,f as gn,g as ia,h as Ae,i as Wn,q as Ti,j as _i,k as Ai,o as Kr,p as Hr,s as Di,t as e,T as Oi,C as ks,M as Ui,D as wi,I as Et,u as Mi,w as h,y as E,z as ee,A as na,B as xn,E as $i,F as Fi,G as Rt,H as Ps,P as Vi,J as Bi,K as Ki,L as Hi,N as co,O as zr,Q as te,R as is,S as st,U as ae,V as je,W as Rs,X as qr,Y as uo,Z as Is,a0 as Ts,a1 as _s,a2 as Gr,a3 as Ie,a4 as zi,a5 as qi,a6 as Gi,a7 as Tn,a8 as Ji,a9 as Jr,aa as Wr,ab as po,ac as oa,ad as ho,ae as fo,af as Wi,ag as Yr,ah as Yi,ai as mo,aj as qs,ak as Q,al as Zi,am as Xi,an as go,ao as at,ap as Qi,aq as ec,ar as Zr,as as tc,at as xt,au as bn,av as sc,aw as ac,ax as xo,ay as Xr,az as nc,aA as rn,aB as oc,aC as rc,aD as lc,aE as ic,aF as cc,aG as dc,aH as bo,aI as uc,aJ as pc,aK as hc,aL as fc,aM as Qr,aN as mc,aO as gc,aP as el,aQ as rs,aR as tl,aS as xc,aT as bc,aU as Me,aV as Cc,aW as ln,aX as ca,aY as jc,aZ as vc,a_ as yc,a$ as Qo,b0 as er,b1 as sl,b2 as al,b3 as Sc,b4 as Ec,b5 as kc,b6 as nl,b7 as Rc,b8 as Co,b9 as jo,ba as vo,bb as Lc,bc as yo,bd as Nc,be as Pc,bf as Ge,bg as Ic,bh as Tc,bi as ol,bj as _c,bk as Cn,bl as Ac,bm as Dc,bn as Oc,bo as Uc,bp as wc,bq as Mc,br as $c,bs as Fc,bt as Vc,bu as Bc,bv as rl,bw as Kc,bx as Hc,by as So,bz as zc,bA as qc,bB as ll,bC as il,bD as Gc,bE as Jc,bF as Wc,bG as _n,bH as cl,bI as Yn,bJ as dl,bK as Yc,bL as Zc,bM as Xc,bN as Zn,bO as Qc,bP as ed,bQ as td,bR as sd,bS as ad,bT as nd}from"./vendor.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();function od(t){return!t||typeof t!="string"?!1:!!new URL(t)}function ul(t,s,a){if(!a)return t.startsWith(s);const n=Object.keys(a),o=(s==null?void 0:s.split(".")[0])??"";return n.map(l=>`${o}.${l}`).some(l=>t.startsWith(l))}function rd(t,s){const a=s.langmasterDirectory;let n=3,o=4;return a&&t.includes(a)&&(o=a.split("/").length+n),{startIndex:n,endIndex:o}}function pl(t,s,a={}){let n,o,r,l;const{locales:i=[],defaultLocale:c}=s,{localeForMapper:d}=a,u=t.split("/");n=(c==null?void 0:c.authorUrl)||"us",(d??!0)&&(n=(c==null?void 0:c.countryCode)||"us");const{startIndex:p,endIndex:f}=rd(t,s);return r=u.slice(p,f).join("/"),l=f,i.includes(r)||(r=n,l=3),o=u.splice(l,u.length).join("/"),{locale:r,path:o}}function ld(t,s,a=!0){return pl(t,s,{localeForMapper:a}).locale}function hl(t,s,a){var c;const n=((c=new URL(t))==null?void 0:c.origin)??"",o=a.defaultLocale,r=[o==null?void 0:o.authorUrl,o==null?void 0:o.countryCode],{locale:l,path:i}=pl(t,a,{localeForMapper:!1});return(s.length?s:[l]).map(d=>{const u=n?[n]:[a.domain];return r.includes(d)&&(d=o.authorUrl),d&&u.push(d),u.push(i),u.join("/")})}function id(t){const{urls:s,locales:a,instance:n}=t;let o=[],r=s.map(l=>(l=l.replace(/,/g,""),l=l.replace(/ /g,""),l));for(r=[...new Set(r)];r.length;){const l=r.splice(0,1)[0];!od(l)||!ul(l,n.domain,n.previewByLiveDomains)||o.push(...hl(l,a,n))}return o=[...new Set(o)],o}const St={getLocale:ld,transformUrlLocales:hl,generateUrls:id,isValidOrigin:ul},fl={util:St},Xn={IS_OFFLINE_MODE:!1,DATE_FORMAT:"MMM DD YYYY hh:mm a",DATE_FORMAT_TZ:"MMM DD YYYY hh:mm a UTC(Z)",TIME_FORMAT:"hh:mm:ss",GRAPH_SCOPES:["user.read","Files.Read.All","Files.ReadWrite.All","Files.ReadWrite.AppFolder","Sites.Read.All","Sites.ReadWrite.All"],GRAPH_SCOPES_DEFAULT:["https://adobe.sharepoint.com/.default"]},de=(t,s)=>{if(ye.enqueueSnackbar){ye.enqueueSnackbar(t,s);return}(s==null?void 0:s.variant)==="error"?console.error(`bypassed notistack. relaying bypassed error:
`,t):(s==null?void 0:s.variant)==="warning"?console.warn(`bypassed notistack. relaying bypassed warning:
`,t):console.info(`bypassed notistack. relaying bypassed message:
`,t)},{VITE_MSAL_ROOT_KEY:cd}={VITE_DATA_ENGINE_URL:"https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",VITE_BATCH_PROCESSING_THRESHOLD:"25",VITE_MSAL_CLIENT_ID:"45bf0513-84c8-4764-9119-987f082543a7",VITE_MSAL_TENANT_ID:"fa7b1b5a-7b34-4387-94ae-d2c178decee1",VITE_MSAL_ROOT_KEY:"msal.token.keys.45bf0513-84c8-4764-9119-987f082543a7",VITE_NAKSHA_API_URL:"https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",VITE_NAKSHA_API_KEY:"milostudioservice",VITE_ENABLE_ANALYTICS:"true",VITE_ANALYTICS_SUITE_ID:"adbdocauthqa",VITE_ANALYTICS_URL:"https://sstats.adobe.com/",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function dd(t){document.getElementById(t).scrollLeft>0&&(document.getElementById(t).scrollLeft-=180)}function ud(t){document.getElementById(t).scrollLeft<2500&&(document.getElementById(t).scrollLeft+=180)}function pd(){window.scrollTo({top:0,behavior:"smooth"})}function hd(t=""){return(t==null?void 0:t.length)<2?t==null?void 0:t.toUpperCase():(t==null?void 0:t.charAt(0).toUpperCase())+(t==null?void 0:t.substring(1).toLowerCase())}function fd(t,s=!0){const a=nn(t);return t&&a.isValid()?s?a.format(Xn.DATE_FORMAT_TZ):a.format(Xn.DATE_FORMAT):""}function md(t){const s=nn(t);return t&&s.isValid()?s.format(Xn.TIME_FORMAT):""}function gd(t){if(!t)return null;const s=nn.duration(t);return nn.utc(s.asMilliseconds()).format("HH:mm:ss")}function xd(t,s){const a=s.siteData.defaultLocaleCode,n=s.siteData.instance.langmasterDirectory,o=s.siteData.instance.domain.franklinPreview;return St.getLocale(t,{langmasterDirectory:n,locales:s.siteData.authorUrls,domain:o,defaultLocale:a})||a.countryCode}function bd(t){return t?"Yes":"No"}function Cd(){window.history.replaceState({},document.title)}function ml(t,s="download"){const a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=s,document.body.appendChild(n),n.click(),URL.revokeObjectURL(a),document.body.removeChild(n)}const jd=t=>new Promise((s,a)=>{const n=new FileReader;n.onloadend=()=>{const o=n.result;s(o)},n.onerror=a,n.readAsArrayBuffer(t)});function vd(t,s){const a=(s==null?void 0:s.authorUrl)||(s==null?void 0:s.countryCode)||"us";return(t==null?void 0:t.replace(/[?#].*$/,"").replace(/[^a-zA-Z0-9-/_:.\n]/g,"").replace(new RegExp("(?<!:)\\/{2,}","g"),"/").replace(/(\.[^/.]+)$/,n=>n===".json"?n:"").replace(new RegExp("[/:.]+(?<!\\/)$"),"").replace(`/${a}/`,"/").trim())||""}function yd(){const t=Zo(),s=Zo()+t+"status";return{instanceId:t,uniqueId:s}}function Sd(t,s=2){if(!+t)return"0 Bytes";const a=1024,n=s<0?0:s,o=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=Math.floor(Math.log(t)/Math.log(a));return`${parseFloat((t/Math.pow(a,r)).toFixed(n))} ${o[r]}`}function Ed(t){return typeof t=="string"?t==null?void 0:t.replace("@adobe.com",""):""}const kd=(t,{headers:s,sheetName:a,fileName:n}={})=>{if(t.length===0){de("There is no data to generate excel",{variant:"error"}),console.error("Cannot generate xlsx with empty data");return}const o=Fs.utils.json_to_sheet(t),r=Fs.utils.book_new(),l=Object.keys(t[0]).map(u=>({wch:t.reduce((f,g)=>Math.max(f,g[u].length),10)}));s&&Fs.utils.sheet_add_aoa(o,[s],{origin:"A1"}),o["!cols"]=l,Fs.utils.book_append_sheet(r,o,a||"Data");const i=Fs.write(r,{bookType:"xlsx",type:"array"}),c=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheet.sheet;charset=UTF-8"}),d=new Date().getTime();n+=`-${d}`,n.indexOf(".xlsx")===-1&&(n+=".xlsx"),ml(c,n)},Rd=(t,s)=>io(t,s),Ld=()=>{const s=new URL(window.location.href).hash;return s?s.split("?")[0].substring(1).replace(/^\//,""):"home"},Nd=()=>{const t=localStorage.getItem(cd);if(t){const s=JSON.parse(t),a=JSON.parse(localStorage.getItem(s.accessToken[0])),n=JSON.parse(localStorage.getItem(s.refreshToken[0]));return{accessToken:a==null?void 0:a.secret,refreshToken:n==null?void 0:n.secret}}return{accessToken:null,refreshToken:null}},Pd=async(t=1e3)=>new Promise(s=>{setTimeout(s,t)}),Id=()=>{const t="https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",s="https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da";return t.endsWith("/da")&&s.endsWith("/da")},F={adobeMailToUserName:Ed,booleanToString:bd,scrollLeft:dd,scrollRight:ud,scrollToTop:pd,capitalize:hd,formatDate:fd,formatTime:md,getTimeStringFromMs:gd,extractLocale:xd,clearNavigationState:Cd,downloadBlob:ml,readFileAsBinary:jd,trimUrl:vd,generateUniqueIdAndInstanceId:yd,formatBytes:Sd,generateXlsx:kd,createDebouncedFunction:Rd,getPageName:Ld,getTokensFromStorage:Nd,sleep:Pd,isDASurface:Id},ms="https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",W="https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",Xe={}.VITE_LOC_ENV||"local",Qe={}.VITE_LOC_BRANCH||"milostudio-stage",Mt={DEFAULT_STRING_VALUE:"",OFFLINE_MODE_FILES_DATA:"/data/files.json",OFFLINE_MODE_SITES_DATA:"/data/sites.json",OFFLINE_MODE_INSTANCE_DATA:"/data/instance.json",OFFLINE_MODE_PREVIEW_DATA:"/data/preview.json",OFFLINE_MODE_PUBLISH_DATA:"/data/publish.json",JOBS_REFRESH_INTERVAL:10*1e3,OFFLINE_MODE_COPY_MOVE_DATA:"/data/copyMove.json",OFFLINE_MODE_EXPOSRT_LIST_DATA:"/data/exportList.json",USER_INACTIVITY_TIMEOUT:3e5,UPLOAD_MAX_FILE_SIZE:20*1024*1024,FILTER_LOGS_DATE_RANGE_MAX:7,POLLING_INTERVAL:3e4},$={CONFIGURATION:`${ms}/v1/configuration`,CONFIGURATION_SCHEMA:`${ms}/v1/configuration/schema`,CONFIGURATION_UPLOAD:`${ms}/v1/configuration/uploadUrl`,REDIRECTION:`${ms}/v1/redirects`,LOCALIZATION:`${ms}/v1/localization`,LOCALIZATION_PROJECT_PATH:`${ms}/v1/localization/projectPath`,LOGIN:`${W}/api/auth/login`,GET_USER_PERMISSIONS:`${W}/api/auth/userpermission`,GET_INSTANCE:`${W}/api/configuration/instances`,LOCALES:`${W}/api/configuration/locales`,LOCALES_BY_ID:`${W}/api/configuration/instances/getByPath`,USER_DETAILS:`${W}/api/auth/userinfo`,STATUS:`${W}/api/preview/status`,STATUS_REPORT:`${W}/api/preview/status/report`,PREVIEW:`${W}/api/preview`,PREVIEW_REPORT:`${W}/api/preview/report`,PUBLISH:`${W}/api/publish`,PUBLISH_REPORT:`${W}/api/publish/report`,CLEAR_RECORDS:`${W}/api/preview/status/clear`,FRAGMENT:`${W}/api/fragments`,FRAGMENT_REPORT:`${W}/api/fragments/all`,DELETE_STATUS_RECORD:`${W}/api/preview/status/delete`,GET_PROCESS_URLS:`${W}/api/preview/status/getProcessUrls`,VERSIONING_STATUS:`${W}/api/version/status`,VERSIONING_STATUS_REPORT:`${W}/api/version/status/report`,DELETE_VERSIONING_RECORD:`${W}/api/version/delete`,CHECKIN_CHECKOUT:`${W}/api/version/checkInCheckOut`,VERSIONING:`${W}/api/version`,VERSIONING_FETCH:`${W}/api/version/fetch`,VERSIONING_RESTORE:`${W}/api/version/restore`,VERSIONING_REPORT:`${W}/api/version/report`,RESTORE_SINGLE_VERSION:`${W}/api/version/restore/item`,GET_JOBS:`${W}/api/dashboard/jobs?instance=`,GET_JOBS_SUMMARY:`${W}/api/dashboard/jobs/summary?instance=`,UPDATE_JOB:`${W}/api/dashboard/job/`,RESTART_JOB:`${W}/api/dashboard/restart/`,COPY_MOVE_STATUS:`${W}/api/cmove/status`,COPY_MOVE_STATUS_REPORT:`${W}/api/cmove/status/report`,DELETE_COPY_MOVE_STATUS_RECORD:`${W}/api/cmove/status/delete`,COPY_MOVE:`${W}/api/cmove`,COPY_MOVE_REPORT:`${W}/api/cmove/report`,COPY_MOVE_REPORT_STATS:`${W}/api/cmove/status/report/stats`,GENERATE_EXCEL_REPORT:`${W}/api/preview/status/generateExcelUrl`,DOWNLOAD_EXCEL_REPORT:`${W}/api/dashboard/export`,GENERATE_EXCEL:`${W}/api/convert/exporttoexcel`,CONVERT_EXCEL_TO_JSON:`${W}/api/convert/exporttojson`,MONITOR_CHECKIN_CHECKOUT:`${W}/api/monitor/checkInCheckOut`,REFRESH_CHECKIN_CHECKOUT:`${W}/api/version/refresh/checkInCheckOut`,EXPORT_LIST_CREATE:`${W}/api/sharepoint-export/files`,EXPORT_LIST_REPORT:`${W}/api/sharepoint-export/files/report`,CHECKIN_CHECKOUT_FOR_MONITORING:`${W}/api/version/monitor/checkInCheckOut`,STATISTICS:`${W}/api/common/statistics`,DEACTIVATION_STATUS:`${W}/api/unpreview/status`,DEACTIVATION_STATUS_REPORT:`${W}/api/unpreview/status/report`,DEACTIVATION_UNPREVIEW:`${W}/api/unpreview`,DEACTIVATION_UNPREVIEW_REPORT:`${W}/api/unpreview/report`,DEACTIVATION_UNPUBLISH:`${W}/api/unpublish`,DEACTIVATION_UNPUBLISH_REPORT:`${W}/api/unpublish/report`,BLOCK_SEARCH:`${W}/api/block/search`,BLOCK_SEARCH_GET_URLS:`${W}/api/block/getblockreporturls`,BLOCK_SEARCH_REPORT:`${W}/api/block/search/report`,CACHE_PURGE_STATUS:`${W}/api/pagecache/status`,CACHE_PURGE_STATUS_REPORT:`${W}/api/pagecache/status/report`,CACHE_PURGE:`${W}/api/pagecache`,CACHE_PURGE_REPORT:`${W}/api/pagecache/report`,PAGE_INDEX_STATUS:`${W}/api/pageindex/status`,PAGE_INDEX_STATUS_REPORT:`${W}/api/pageindex/status/report`,PAGE_INDEX:`${W}/api/pageindex`,PAGE_INDEX_REPORT:`${W}/api/pageindex/report`,JOB_ACTION_ID:`${W}/api/dashboard/action`,OPERATION:`${W}/api/operation`,HELIX_LOGS:`${W}/api/franklin/activity/logs`,FIND_URL_REFERENCE:`${W}/api/find-url-reference`,FIND_URL_REFERENCE_REPORT:`${W}/api/find-url-reference/report`,BCU_GET_ALL:`${W}/api/content-update`,BULK_UPDATE_PRESIGNED:`${W}/api/content-update/generateUploadPresignedUrl`},gl=[{name:"Operations",children:[{name:"Status",route:"/bulkops/status"},{name:"Preview",route:"/bulkops/preview"},{name:"Publish",route:"/bulkops/publish"},{name:"Fragments",route:"/bulkops/fragments"},{name:"Versioning",route:"/bulkops/versioning"},{name:"Check-in/Check-out",route:"/bulkops/checkInCheckOut",onlyMS:!0},{name:"Copy",route:"/bulkops/copy"},{name:"Move",route:"/bulkops/move",isAdminProtected:!0},{name:"Export List",route:"/bulkops/exportlist"},{name:"Deactivate",route:"/bulkops/deactivate",isAdminProtected:!0},{name:"Fragment Reference",route:"/bulkops/fragmentRef"},{name:"Bulk Content Update",route:"/bulkops/bulkContentUpdate",isSpectrumIcon:!0,onlyDA:!0}]},{name:"Jobs",children:[{name:"Status",route:"/bulkops/jobs/status"},{name:"Preview",route:"/bulkops/jobs/preview"},{name:"Publish",route:"/bulkops/jobs/publish"},{name:"Fragments",route:"/bulkops/jobs/fragments"},{name:"Check-in/Check-out",route:"/bulkops/jobs/checkInCheckOut",onlyMS:!0},{name:"Versioning",route:"/bulkops/jobs/versioning"},{name:"Copy",route:"/bulkops/jobs/copy"},{name:"Move",route:"/bulkops/jobs/move",isAdminProtected:!0},{name:"AEM EDS Logs",route:"/bulkops/jobs/helix-audit-log"},{name:"Bulk Content Update",route:"/bulkops/jobs/bulkContentUpdate",isSpectrumIcon:!0,onlyDA:!0}]},{name:"Monitoring",children:[{name:"Check-in/Check-out",route:"/bulkops/monitoring/checkInCheckOut",onlyMS:!0},{name:"AEM EDS Logs",route:"/bulkops/monitoring/helix-audit-log"}]}],Td=[{name:"Operations",children:[{name:"Cache Purge",route:"/ops-tools/cachePurge"},{name:"Page Indexing",route:"/ops-tools/pageIndexing"}]}],Cs={LIVE:"live",PREVIEW:"preview"},_d={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Xlsx","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Docx",file:"Docx",png:"Pic","translate-manual":"Docx","translate-machine":"Docx"},Ad=[{label:"All",value:"all"},{label:"Text",value:"text"},{label:"Asset",value:"asset"},{label:"Fragment",value:"fragment"},{label:"Link",value:"link"},{label:"Placeholder",value:"placeholder"},{label:"Filename",value:"filename"},{label:"BlockName",value:"blockname"}],lt={QUERY:"query",TYPE:"type",PATH:"path",BLOCK:"block",VARIATIONS:"classes"},Be={SEARCH_APPLY:"search-apply",SEARCH_RESET:"search-reset",SEARCH_INPUT:"search-input",NAVIGATE_TO_SEARCH:"navigate-to-search-page",NAVIGATE_TO_ADVANCED_SEARCH:"navigate-to-advanced-search-page",SEARCH_SUGGESTION:"search-suggestion",SEARCH_SEE_MORE_RESULTS:"search-dropdown-see-more-results",CREATE_PAGE_CANCEL:"create-page-cancel",CREATE_PAGE_SUBMIT:"create-page-submit",SIGN_OUT:"sign-out",REQUEST_ACCESS:"request-access",SUBMIT_SITE_SELECTION:"submit-site-selection",MILO_STUDIO_HOME:"milo-studio-home",CREATE_PAGE_MENU:"create-page-menu",REQUEST_ACCESS_MENU:"request-access-menu",PROFILE_MENU:"profile-menu",REFRESH:"refresh",RECENT_FILES:"recent-files",COPY_TO_CLIPBOARD:"copy-to-clipboard",SORT_ORDER:"sort-order",PAGE_NO:"page-no",PAGE_SIZE:"page-size",SEARCH_HELP:"search-help",SELECTED_TENANT:"selected-tenant",SEARCH_ADVANCED:"search-advanced",SEARCH_EXPORT_TO_EXCEL:"export-to-excel",RE_TRY_EXPORT:"retry-export"},cn={TRACK:"studioTrack",LINK_TRACK:"studioLinkTrack"},Dd={CUSTOM_LINK:"o",DOWNLOAD_LINK:"d",EXIT_LINK:"e"},tr={searchQuery:"eVar11",searchType:"eVar12",searchPath:"eVar13",searchBlocks:"eVar14",searchVariations:"eVar15",tenant:"eVar16"},Od=30,Eo={processUrlsWarningMessage:"You can process up to 10,000 URLs at most. Please decrease the number of URLs and attempt again.",removeIndexWarningMessage:"The indexing or remove-index operation may take some time to complete. Please remember to review your query-index.xlsx file after 15 minutes."},xl=[":error-filesize: File size larger than 40MB",":error-request: Unable to process the request",":error-acmp: We apologize, the image you uploaded doesn't comply with our Terms of Use. Please try again.",":error-filetype: We are unable to process this file type. Please try again."],ko={isInitialised:!1,data:[],pagination:{pageSize:20,currentPage:1,totalPages:0,totalItems:0},sort:{key:"",order:""},filters:{},search:""},Gs={MILO:`https://${Qe}--milo--adobecom.aem.page/tools/locui-create?ref=main&repo=milo&owner=adobecom&host=milo.adobe.com&project=Milo&env=${Xe}`,BACOM:`https://main--bacom--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=bacom&owner=adobecom&host=business.adobe.com&project=BACOM&env=${Xe}`,CC:`https://main--cc--adobecom.aem.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=cc&owner=adobecom&host=www.adobe.com&project=Creative+Cloud&env=${Xe}`,DC:`https://main--dc--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=dc&owner=adobecom&host=www.adobe.com&project=DC&env=${Xe}`,FEDERAL:`https://main--federal--adobecom.aem.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=federal&owner=adobecom&env=${Xe}`,BACOM_PINK:`https://main--bacom-pink--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=bacom-pink&owner=adobecom&host=business.adobe.com&project=BACOM&env=${Xe}`,HOMEPAGE:`https://main--homepage--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=homepage&owner=adobecom&host=www.adobe.com&project=HOMEPAGE&env=${Xe}`,HELPX_INTERNAL:`https://main--helpx-internal--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=helpx-internal&owner=adobecom&host=helpx-internal.adobe.com&project=HelpX+Internal&env=${Xe}`,EXPRESS:`https://main--express-milo--adobecom.aem.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=express-milo&owner=adobecom&host=www.adobe.com&env=${Xe}`,ADOBE_NEWS:`https://main--news--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=news&owner=adobecom&host=news.adobe.com&env=${Xe}`,BACOM_BLOG:`https://main--bacom-blog--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=bacom-blog&owner=adobecom&host=business.adobe.com&project=BACOM-BLOG&env=${Xe}`,EVENTS_MILO:`https://main--events-milo--adobecom.hlx.page/tools/locui-create?milolibs=${Qe}&ref=main&repo=events-milo&owner=adobecom&host=www.adobe.com&env=${Xe}`},sr={APPLICATION:"APPLICATION",SYSTEM_CONFIGURATION:"SYSTEM"},ma={"fr-CA":{label:"French (altlang)",dependsOn:"fr",dependsOnLabel:"French",action:"Translate"}},ar={TRANSLATE:"Translate",ROLLOUT:"Rollout",ENGLISH_COPY:"English Copy"};_.createAsyncThunk("auth/login",async(t,{rejectWithValue:s})=>{const{accessToken:a,refreshToken:n}=F.getTokensFromStorage();if(!a||!n)return s("Unable to aquire Microsoft Token. Please try again.");const o={method:"POST",headers:{body:null,"Content-Type":"application/json",mode:"no-cors",redirect:"follow",Authorization:`Bearer ${a}`,"X-Refresh-Token":n}};try{const r=await fetch($.LOGIN,o),l=await r.json();return r.ok?l.data:s(l)}catch(r){return s({message:"Something went wrong while authenticating. Please try again later",error:r})}});const Se=()=>{const{accessToken:t}=F.getTokensFromStorage();return{Authorization:`Bearer ${t}`}},ue=()=>{var s;return{Authorization:`Bearer ${(s=ce.getState())==null?void 0:s.token}`}},Ud={pantherAccessToken:null,userInfo:{isAdmin:!1,name:"",email:""},savedLocales:[]},bl=_.createSlice({name:"local",initialState:Ud,reducers:{saveLocales:(t,s)=>{t.savedLocales=s.payload},clearAuthFields:t=>{t.pantherAccessToken=null,t.userInfo={isAdmin:!1,name:"",email:""}},setPantherAccessToken:(t,s)=>{t.pantherAccessToken=s.payload},setUserInfo:(t,{payload:s})=>{t.userInfo={...t.userInfo,isAdmin:s.isAdmin,name:s.name,email:s.email}}}}),wd=bl.reducer,{saveLocales:Md,clearAuthFields:$d,setPantherAccessToken:Fd,setUserInfo:nr}=bl.actions,{VITE_NAKSHA_API_URL:ut,VITE_NAKSHA_API_KEY:Vd,VITE_DATA_ENGINE_URL:Bd}={VITE_DATA_ENGINE_URL:"https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",VITE_BATCH_PROCESSING_THRESHOLD:"25",VITE_MSAL_CLIENT_ID:"45bf0513-84c8-4764-9119-987f082543a7",VITE_MSAL_TENANT_ID:"fa7b1b5a-7b34-4387-94ae-d2c178decee1",VITE_MSAL_ROOT_KEY:"msal.token.keys.45bf0513-84c8-4764-9119-987f082543a7",VITE_NAKSHA_API_URL:"https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",VITE_NAKSHA_API_KEY:"milostudioservice",VITE_ENABLE_ANALYTICS:"true",VITE_ANALYTICS_SUITE_ID:"adbdocauthqa",VITE_ANALYTICS_URL:"https://sstats.adobe.com/",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},nt=t=>({Authorization:`Bearer ${t}`,"x-api-key":Vd});async function Kd(t){try{const s=await fetch(`${ut}/v1/sites`,{headers:nt(t)});if(s.ok)return(await s.json()).supportedSites;throw new Error("Failed to fetch sites")}catch(s){throw console.error("There was a problem with the fetch operation:",s),s}}async function Hd(t){try{const s=await fetch(`${ut}/v1/profile`,{headers:nt(t)});if(s.ok&&s.status===200)return await s.json();throw s.status===404?new Error("Profile Not Available"):new Error("Failed to fetch profile")}catch(s){throw console.error("There was a problem with the fetch operation:",s),s}}async function zd(t,s){try{const a=await fetch(`${ut}/v1/profile/create`,{method:"POST",headers:{...nt(s),"Content-Type":"application/json"},body:JSON.stringify({defaultTenant:t})});if(a.ok)return await a.json();throw new Error("Failed to create profile")}catch(a){throw console.error("There was a problem with the fetch operation:",a),a}}async function qd(t,s){try{const a=await fetch(`${ut}/v1/profile/update`,{method:"POST",headers:{...nt(s),"Content-Type":"application/json"},body:JSON.stringify({defaultTenant:t})});if(a.ok)return await a.json();throw new Error("Failed to update profile")}catch(a){throw console.error("There was a problem with the fetch operation:",a),a}}async function Gd(t,s,a){try{const n=await fetch(`${ut}/v1/document/type-ahead?tenant=${t}&path=${a}`,{method:"GET",headers:{...nt(s)}});if(n.ok)return await n.json();throw new Error("Failed to get Folder path from API")}catch(n){throw console.error("There was a problem with the fetch operation:",n),n}}async function Jd(t,s,a,n){try{const o=await fetch(`${ut}/v1/document/create`,{method:"POST",headers:{...nt(s),"Content-Type":"application/json"},body:JSON.stringify({tenant:t,path:a,fileName:n})});if(o.ok){const r=await o.json();return r.type="SUCCESS",r}else if(o.status===409){const r=await o.json();return r.type="INFO",r}else if(o.status===403){const r=await o.json(),l=new Error(r.errorMessage);throw l.type="ERROR",l}else throw new Error("Failed to create page")}catch(o){throw console.error("Failed to create page:",o),o}}async function Wd(t,s,a){try{const n=new URLSearchParams({...a});if((await fetch(`${ut}/v1/search/export/${t}?${n}`,{method:"POST",headers:{...nt(s)}})).ok)return!0;throw new Error("Failed to export results")}catch(n){console.error("Failed to export results",n)}}async function Yd(t,s){try{const a=await fetch(`${ut}/v1/search/reports/${s}`,{method:"POST",headers:{...nt(t),"Content-Type":"application/json"}});if(a.ok){const{url:n}=await a.json();return n}else throw new Error("Failed to get report")}catch(a){console.error("Failed to get report",a)}}async function or(t,s,a){try{const n=new URLSearchParams({...a}),o=await fetch(`${ut}/v1/search/${t}?${n}`,{headers:nt(s)});if(o.ok){const{hits:r,total:l,more:i}=await o.json();return{hits:r,total:l,more:i}}else throw new Error("Failed to fetch results")}catch(n){console.error("Failed to fetch results",n)}}async function Zd(t,s){try{const a=await fetch(`${ut}/v1/search/${t}/blocks`,{headers:nt(s)});if(a.ok){const{blocks:n}=await a.json();return n}else throw new Error("Failed to fetch blocks")}catch(a){console.error("Failed to fetch blocks",a)}}async function Xd(t,s){try{const a=[],n=await fetch(`${Bd}/api/auth/userpermission`,{method:"POST",headers:{...nt(t)}});if(!n.ok)throw new Error("Failed to get Folder path from API");const{data:o}=await n.json(),r=o.data,l=[{name:"Read Write Permission",children:[]},{name:"Write Permission",children:[]},{name:"Read Permission",children:[]},{name:"No Permission",children:[]}],i={readwrite:l[0].children,write:l[1].children,read:l[2].children,noaccess:l[3].children};return r.forEach(d=>{const u=s[d.environment];if(!u)return;const p=d.permissions.includes("read"),f=d.permissions.includes("write");d.sitename=u,d.id=u.value,d.name=u.label,u.permission=!0,d.disabled=!1,p&&f?i.readwrite.push(d):!p&&f?i.write.push(d):p&&!f?i.read.push(d):(u.permission=!1,i.noaccess.push(d)),a.push(u)}),{permissionStatus:l.filter(d=>d.children.length>0),permittedSites:a}}catch(a){throw console.error("There was a problem with the fetch operation:",a),a}}async function Qd(t,s,a){try{const n=new URLSearchParams({blocks:a}),o=await fetch(`${ut}/v1/search/${t}/variations?${n}`,{headers:nt(s)});if(o.ok){const{variations:r}=await o.json();return r}else throw new Error("Failed to fetch blocks")}catch(n){console.error("Failed to fetch blocks",n)}}const eu=[{id:"1",project:"MAX Release",status:"inprogress",workflow:"translate-machine",author:"John Doe",timestamp:"10 mins ago",type:"team",payload:{type:"Document(s)",files:["Plan 2022.docx"],mimetype:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}},{id:"2",project:"MAX Release 2023",status:"completed",workflow:"translate-manual",author:"Ankit Sharma",timestamp:"1 day ago",type:"team",payload:{type:"Document(s)",files:["Plan 2023.docx"],mimetype:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}},{id:"3",project:"Black friday Release",status:"completed",workflow:"floodgate",author:"Nidhi Kumari",timestamp:"7 days ago",type:"team",payload:{type:"Excel(s)",files:["Photoshop New Features 2023.docx"],mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}},{id:"5",project:"Black friday Release",status:"completed",workflow:"genesis",author:"Komal",timestamp:"1 days ago",type:"me",payload:{type:"Document(s)",files:["change-language.docx"],mimetype:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}}],tu=[{language:"English",languagecode:"en",altLanguagecode:"en-GB",workflow:"N/A",livecopies:"il_en, ae_en, sa_en, vn_en, cis_en, ca, mena_en, sea, th_en, ph_en, id_en"},{language:"English (AltLang)",languagecode:"en-GB",altLanguagecode:"",workflow:"AltLangEnglish",livecopies:"uk,au,africa,be_en,cy_en,gr_en,hk_en,ie,in,lu_en,mt,nz,sg,my_en,kw_en,qa_en,eg_en,ng,za"},{language:"German",languagecode:"de",altLanguagecode:"",workflow:"Standard",livecopies:"de,lu_de,ch_de,at"},{language:"French",languagecode:"fr",altLanguagecode:"fr-CA",workflow:"Standard",livecopies:"fr,be_fr,ch_fr,lu_fr"},{language:"French (AltLang)",languagecode:"fr-CA",altLanguagecode:"",workflow:"AltLangFrench",livecopies:"ca_fr"},{language:"Japanese",languagecode:"ja",altLanguagecode:"",workflow:"Standard",livecopies:"jp"},{language:"Arabic",languagecode:"ar",altLanguagecode:"",workflow:"Standard",livecopies:"mena_ar,sa_ar,ae_ar,qa_ar,kw_ar,eg_ar"},{language:"Bulgarian",languagecode:"bg",altLanguagecode:"",workflow:"Standard",livecopies:"bg"},{language:"Czech",languagecode:"cs",altLanguagecode:"",workflow:"Standard",livecopies:"cz"},{language:"Danish",languagecode:"da",altLanguagecode:"",workflow:"Standard",livecopies:"dk"},{language:"Spanish",languagecode:"es",altLanguagecode:"",workflow:"Standard",livecopies:"es"},{language:"Latin Spanish",languagecode:"es-419",altLanguagecode:"",workflow:"Standard",livecopies:"ar,la,mx,pe,cl,co,cr,ec,gt,pr"},{language:"Estonian",languagecode:"et",altLanguagecode:"",workflow:"Standard",livecopies:"ee"},{language:"Finnish",languagecode:"fi",altLanguagecode:"",workflow:"Standard",livecopies:"fi"},{language:"Hebrew",languagecode:"he",altLanguagecode:"",workflow:"Standard",livecopies:"il_he"},{language:"Croatian",languagecode:"hr",altLanguagecode:"",workflow:"Standard",livecopies:""},{language:"Hungarian",languagecode:"hu",altLanguagecode:"",workflow:"Standard",livecopies:"hu"},{language:"Italian",languagecode:"it",altLanguagecode:"",workflow:"Standard",livecopies:"it,ch_it"},{language:"Korean",languagecode:"ko",altLanguagecode:"",workflow:"Standard",livecopies:"kr"},{language:"Lithuanian",languagecode:"lt",altLanguagecode:"",workflow:"Standard",livecopies:"lt"},{language:"Latvian",languagecode:"lv",altLanguagecode:"",workflow:"Standard",livecopies:"lv"},{language:"Dutch",languagecode:"nl",altLanguagecode:"",workflow:"Standard",livecopies:"nl,be_nl"},{language:"Norwegian",languagecode:"nb",altLanguagecode:"",workflow:"Standard",livecopies:"no"},{language:"Polish",languagecode:"pl",altLanguagecode:"",workflow:"Standard",livecopies:"pl"},{language:"Portugese",languagecode:"pt",altLanguagecode:"",workflow:"Standard",livecopies:"pt,br"},{language:"Romanian",languagecode:"ro",altLanguagecode:"",workflow:"Standard",livecopies:"ro"},{language:"Russian",languagecode:"ru",altLanguagecode:"",workflow:"Standard",livecopies:"ru,cis_ru"},{language:"Slovakian",languagecode:"sk",altLanguagecode:"",workflow:"Standard",livecopies:"sk"},{language:"Slovenian",languagecode:"sl",altLanguagecode:"",workflow:"Standard",livecopies:"si"},{language:"Serbian",languagecode:"sr",altLanguagecode:"",workflow:"Standard",livecopies:""},{language:"Swedish",languagecode:"sv",altLanguagecode:"",workflow:"Standard",livecopies:"se"},{language:"Turkish",languagecode:"tr",altLanguagecode:"",workflow:"Standard",livecopies:"tr"},{language:"Ukrainian",languagecode:"uk",altLanguagecode:"",workflow:"Standard",livecopies:"ua"},{language:"Chinese Simplified",languagecode:"zh-Hans",altLanguagecode:"",workflow:"Standard",livecopies:"cn"},{language:"Chinese Traditional",languagecode:"zh-Hant",altLanguagecode:"",workflow:"Standard",livecopies:"tw,hk_zh"},{language:"Thai",languagecode:"th",altLanguagecode:"",workflow:"Standard",livecopies:"th_th"},{language:"Filipino",languagecode:"fil",altLanguagecode:"",workflow:"Standard",livecopies:"ph_fil"},{language:"Indonesian",languagecode:"id",altLanguagecode:"",workflow:"Standard",livecopies:"id_id"},{language:"Malay",languagecode:"ms",altLanguagecode:"",workflow:"Standard",livecopies:"my_ms"},{language:"Vietnamese",languagecode:"vi",altLanguagecode:"",workflow:"Standard",livecopies:"vn_vi"},{language:"Hindi",languagecode:"hi",altLanguagecode:"",workflow:"Standard",livecopies:"in_hi"},{language:"Greek",languagecode:"el",altLanguagecode:"",workflow:"Standard",livecopies:"gr_el"}],su=["https://lingo-loom--milo--sharmrj.hlx.page/drafts/nthakur/media_17d3b488993bc9309f17badd567061fac02542305.jpeg?width=2000&format=webply&optimize=medium","https://cc-prod.scene7.com/is/image/CCProdAuthor/ps-firefly-SEO-desktop-riverflow1-2x-2?$pjpeg$&jpegSize=100&wid=540","https://main--milo--adobecom.hlx.page/drafts/mathuria/trnsltr/media_13ae4157ad2b2400bc2255ad6d493ca3f2c3312bb.png?width=2000&format=webply&optimize=medium","https://main--milo--adobecom.hlx.page/drafts/mathuria/media_10423fcfbe3b1994311f163ed96169e87deb44e7f.jpeg?width=2000&format=webply&optimize=medium"],au={1:{status:"In progress",inprogress:{files:["Plan 2022.docx"],locales:["es","et"],triggeredOn:"2 Days ago",lastAction:"Translation triggered"},pending:{files:["Plan 2022.docx"],locales:["ja","fr","de","ar"],triggeredOn:"-",lastAction:"-"},completed:{files:["Plan 2022.docx"],locales:["lv","pl","fi","hr","lt"],triggeredOn:"1 Day ago",lastAction:"Rollout triggered"},failed:{files:["Plan 2022.docx"],locales:["ru"],triggeredOn:"1 Day ago",lastAction:"Translation triggered"},total:["ja","fr","de","ar","es","et","fi","hr","lt","lv","pl","ru"]},2:{status:"Completed",inprogress:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},pending:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},completed:{files:["Plan 2023.docx"],locales:["ja","fr","de","ar"],triggeredOn:"1 Day ago",lastAction:"Rollout triggered by Ajay Singh"},failed:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},total:["ja","fr","de","ar"]},3:{status:"Completed",inprogress:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},pending:{files:[],locales:[],triggeredOn:"",lastAction:""},completed:{files:["Photoshop New Features 2023.docx"],locales:["ja","fr","de"],triggeredOn:"1 Day ago",lastAction:"Rollout triggered by Bandana"},failed:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},total:["ja","fr","de"]},4:{status:"Completed",inprogress:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},pending:{files:[],locales:[],triggeredOn:"",lastAction:""},completed:{files:["Banner2023.png"],locales:["ja","fr","de"],triggeredOn:"1 Day ago",lastAction:"Translation triggered by Bandana"},failed:{files:[],locales:[],triggeredOn:"-",lastAction:"-"},total:["ja","fr","de"]},5:{status:"Completed",template:"HelpX Tutorial",inprogress:{files:[],triggeredOn:"-",lastAction:"-"},pending:{files:[],triggeredOn:"",lastAction:""},completed:{files:["open-cc-app.docx"],triggeredOn:"1 Day ago",lastAction:"Transformation triggered by Nishant",inputFile:"https://adobe.sharepoint.com/:w:/r/sites/adobecom/_layouts/15/Doc.aspx?sourcedoc=%7B69CFE790-552B-4050-967C-315F0D2312D8%7D&file=open_cc_app.docx&action=default&mobileredirect=true",transformedFile:"https://main--helpx-internal--adobecom.hlx.page/drafts/naksha/creative-cloud/open-cc-app"},failed:{files:[],triggeredOn:"-",lastAction:"-"}}},nu="https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",Ls=Xo.createApi({reducerPath:"rtkApiSlice",baseQuery:Xo.fetchBaseQuery({baseUrl:`${nu}/v1`}),tagTypes:["Notifications","BCUProjects"],endpoints:()=>({})});let An=null;async function Cl(){return An||(An=(await Pi(()=>Promise.resolve().then(()=>Sp),void 0,import.meta.url)).store),An}async function ou(t,s){const a=await fetch(t,s);return a.status===401&&(await Cl()).dispatch($d()),a.json()}async function jl({body:t,method:s,...a}={}){const o=(await Cl()).getState().local.pantherAccessToken,r=t instanceof Blob||t instanceof ArrayBuffer,l={"Content-Type":r?"application/octet-stream":"application/json",mode:"no-cors",redirect:"follow"};o&&(l.Authorization=`Bearer ${o}`);const i={method:s,...a,headers:{...l,...a.headers}};return t&&(i.body=r?t:JSON.stringify(t)),i}async function qe(t,{body:s,method:a,...n}={}){const o=await jl({body:s,method:a,...n});return await ou(t,o)}async function ru(t,{body:s,method:a="GET",...n}={}){const o=await jl({body:s,method:a,...n});return(await fetch(t,o)).blob()}qe.get=function(t,s={}){return qe(t,{...s,method:"GET"})};qe.post=function(t,s,a={}){return qe(t,{...a,method:"POST",body:s})};qe.put=function(t,s,a={}){return qe(t,{...a,method:"PUT",body:s})};qe.delete=function(t,s={}){return qe(t,{...s,method:"DELETE"})};qe.download=function(t,s={}){return ru(t,{...s})};function lu(t,s={}){return qe.get(t,s)}function iu(t,s,a={}){return qe.post(t,s,a)}function cu(t,s,a={}){return qe.put(t,s,a)}function du(t,s={}){return qe.delete(t,s)}function uu(t,s={}){return qe.download(t,s)}const K={get:lu,post:iu,put:cu,delete:du,download:uu},Sa=_.createAsyncThunk("config/getConfigTemplates",async({tenant:t})=>K.get(`${$.CONFIGURATION_SCHEMA}?tenant=${t}`,{headers:Se()})),vt=_.createAsyncThunk("config/getConfigList",async({id:t,pageIndex:s}={},{getState:a})=>{const n=a().config.configList,o={pageIndex:s||n.pagination.currentPage,pageSize:n.pagination.pageSize,sort:n.sort.key,order:n.sort.order,search:n.search};return K.post(`${$.CONFIGURATION}/${t}/list`,o,{headers:Se()})}),Js=_.createAsyncThunk("config/getConfig",async({id:t,client:s},{rejectWithValue:a,fulfillWithValue:n})=>{const o=await K.get(`${$.CONFIGURATION}/${t}`,{headers:Se()}),r=o.presignedUrl;if(r){const l=await fetch(r);if(l.ok){const i=await l.json();return n({...o,jsonData:i},{client:s})}}return a("Configuration file not found.")}),Ea=_.createAsyncThunk("config/deleteConfig",async({id:t})=>fetch(`${$.CONFIGURATION}/${t}`,{headers:Se(),method:"DELETE"})),pu=Ls.injectEndpoints({endpoints:t=>({getConfig:t.query({query:s=>({url:`/configuration/schema/name/${s}`,headers:Se()}),keepUnusedDataFor:5*60}),getConfigLocal:t.query({queryFn:async s=>{try{const a=await fetch(`/static/json/${s}.json`);if(a.ok)return{data:await a.json()}}catch(a){return{error:a}}},keepUnusedDataFor:5*60})}),overrideExisting:!1}),{useGetConfigQuery:vl,useGetConfigLocalQuery:hu}=pu,ka=_.createAsyncThunk("config/saveConfig",async({formValues:t,client:s,schemaId:a},{rejectWithValue:n,fulfillWithValue:o})=>{try{const r=await K.get(`${$.CONFIGURATION_UPLOAD}`,{headers:{...Se()}}),l={method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},{unityConfigName:i}=t,c={schemaId:a,configName:i,s3Key:r.s3Key};if((await fetch(r.url,l)).ok){const u=await fetch($.CONFIGURATION,{method:"POST",headers:{...Se(),"Content-Type":"application/json"},body:JSON.stringify(c)});if(u.ok&&(u.status===200||u.status===201))return o({schemaId:a},{client:s});{const p=await u.json();return n(p.errorMessage)}}else return n("Something went wrong during S3 upload")}catch{return n("Something went wrong")}}),Ra=_.createAsyncThunk("config/updateConfig",async({formValues:t,client:s,configId:a,schemaId:n},{rejectWithValue:o,fulfillWithValue:r})=>{try{const l=await K.get($.CONFIGURATION_UPLOAD,{headers:{...Se()}}),i={method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},{unityConfigName:c}=t,d={configId:a,configName:c,s3Key:l.s3Key},u=await fetch($.CONFIGURATION,{method:"PUT",headers:{...Se(),"Content-Type":"application/json"},body:JSON.stringify(d)});if(u.ok&&(u.status===200||u.status===201))return(await fetch(l.url,i)).ok?r({schemaId:n},{client:s}):o("Something went wrong during S3 upload");{const p=await u.json();return o(p.errorMessage)}}catch{return o("Something went wrong")}}),Dn=_.createAsyncThunk("config/saveRedirectConfigForm",async({formValues:t,client:s},{rejectWithValue:a,fulfillWithValue:n})=>{try{const{sourceUrl:o,destinationUrl:r,locale:l,redirectUrl:i}=t;console.log("Simulated Payload:",{sourceUrl:o,destinationUrl:r,locale:l,redirectUrl:i});const d={status:"success",message:"Configuration saved successfully.",client:s};return await new Promise(u=>setTimeout(u,1e3)),n(d)}catch(o){return console.error("Local Development Error:",o),a("Something went wrong during local testing.")}}),La=_.createAsyncThunk("config/getRedirectConfig",async({id:t,client:s},{rejectWithValue:a,fulfillWithValue:n})=>{console.log("Id:",t);try{return n({},{client:s})}catch{return a("Mock configuration file not found.")}}),On=_.createAsyncThunk("config/updateRedirectConfig",async({formValues:t,client:s,id:a},{rejectWithValue:n,fulfillWithValue:o})=>{try{const{sourceUrl:r,destinationUrl:l}=t;return console.log("Payload being sent:",{id:a,source:r,destination:l}),o({client:s})}catch(r){return console.error("Error during local update:",r),n("Something went wrong during the local update.")}}),yl={isInitialised:!1,data:[],pagination:{pageSize:20,currentPage:1,totalPages:0,totalItems:0},sort:{key:"",order:""},search:""},fu={configTemplates:[],unity:{formValues:{}},redirects:{formValues:{}},configList:ct.cloneDeep(yl),isLoading:!1,error:""},ft=t=>{t.isLoading=!0},ze=t=>{t.isLoading=!1},gs=t=>{ze(t),t.error="Some error occured"},Sl=_.createSlice({name:"config",initialState:fu,reducers:{startLoader:ft,stopLoader:ze,setConfigListParams:(t,s)=>{t.configList=s.payload.reset?ct.cloneDeep(yl):{...t.configList,pagination:{...t.configList.pagination,...s.payload.pagination},sort:{...t.configList.sort,...s.payload.sort},search:s.payload.search??t.configList.search}},resetClientFormValues:(t,s)=>{const{payload:{client:a}}=s;t[a].formValues={}}},extraReducers:t=>{t.addCase(Sa.pending,ft).addCase(Sa.fulfilled,(s,a)=>{s.configTemplates=a.payload.configTemplates,ze(s)}).addCase(Sa.rejected,ze).addCase(vt.pending,ft).addCase(vt.fulfilled,(s,a)=>{s.configList={...s.configList,isInitialised:!0,data:a.payload.data||[],pagination:{...s.configList.pagination,...a.payload.pagination}},ze(s)}).addCase(vt.rejected,gs).addCase(Ea.pending,ft).addCase(Ea.fulfilled,ze).addCase(Ea.rejected,gs).addCase(ka.pending,ft).addCase(ka.fulfilled,ze).addCase(ka.rejected,gs).addCase(Js.fulfilled,(s,a)=>{const{meta:{client:n},payload:{jsonData:o={}}}=a;s[n].formValues=o,ze(s)}).addCase(Js.rejected,ze).addCase(Js.pending,ft).addCase(Ra.pending,ft).addCase(Ra.fulfilled,ze).addCase(Ra.rejected,gs).addCase(La.fulfilled,(s,a)=>{const{meta:{client:n},payload:{jsonData:o={sourceUrl:"/vn_vi/products/premiere/explore",destinationUrl:"https://www.adobe.com/products/premiere/explore.html"}}}=a;s[n].formValues=o,ze(s)}).addCase(La.rejected,ze).addCase(La.pending,ft).addCase(On.pending,ft).addCase(On.fulfilled,ze).addCase(On.rejected,gs).addCase(Dn.pending,ft).addCase(Dn.fulfilled,ze).addCase(Dn.rejected,gs)}}),mu=Sl.reducer,{startLoader:wx,stopLoader:Mx,setConfigListParams:Vs,resetClientFormValues:Ro}=Sl.actions,mt=_.createAsyncThunk("jobs/getJobs",async({jobType:t,tab:s},{getState:a})=>{const n=a().session.siteData.instance.environment;return K.get(`${$.GET_JOBS}${n}&jobType=${t}&tab=${s}`).then(o=>o.data)}),Ws=_.createAsyncThunk("jobs/getJobsSummary",async(t,{getState:s})=>{const a=s().session.siteData.instance.environment;return K.get(`${$.GET_JOBS_SUMMARY}${a}`).then(n=>n.data)}),Ss=_.createAsyncThunk("jobs/updateJob",async({jobId:t,payload:s})=>K.put(`${$.UPDATE_JOB}${t}`,s).then(a=>a.data)),Na=_.createAsyncThunk("jobs/restartJob",async t=>K.put(`${$.RESTART_JOB}${t}`).then(s=>s.data)),Ys=_.createAsyncThunk("jobs/downloadReport",async({job:t,action:s}={},{getState:a})=>{const n=a().session.siteData.instance._id,o={action:s,filter:{jobId:t._id},instanceId:t.instanceId,uniqueId:t.uniqueId,instanceConfigId:n},r=await K.post($.GENERATE_EXCEL_REPORT,o);return await(await fetch(r.data.downloadURL)).blob()}),gu={operation:null,jobList:[],jobsSummary:[],isLoading:!1,error:""},Bs=t=>{t.isLoading=!0},Vt=t=>{t.isLoading=!1},Un=t=>{Vt(t),t.error="Some error occured"},El=_.createSlice({name:"jobs",initialState:gu,reducers:{clearJobList:t=>{t.jobList=[]}},extraReducers:t=>{t.addCase(mt.pending,(s,a)=>{var o;((o=a.meta.arg)==null?void 0:o.isSilent)||Bs(s)}).addCase(mt.fulfilled,(s,a)=>{s.jobList=a.payload||[],Vt(s)}).addCase(mt.rejected,(s,a)=>{var n;a.meta.aborted||(de(`Error occurred while ${(n=a.meta.arg)!=null&&n.isSilent?"syncing":"fetching"} jobs`,{variant:"error"}),Vt(s))}).addCase(Ws.pending,Bs).addCase(Ws.fulfilled,(s,a)=>{s.jobsSummary=a.payload||[]}).addCase(Ws.rejected,Un).addCase(Ss.pending,Bs).addCase(Ss.fulfilled,Vt).addCase(Ss.rejected,Un).addCase(Na.pending,Bs).addCase(Na.fulfilled,Vt).addCase(Na.rejected,Un).addCase(Ys.pending,Bs).addCase(Ys.fulfilled,(s,a)=>{const n=a.meta.arg.action.includes("JOB_URLS"),o=new Date().getTime(),{jobName:r,_id:l}=a.meta.arg.job,i=n?`input_urls_${r}-${o}.xlsx`:`${r}-${l}.xlsx`;F.downloadBlob(a.payload,i),Vt(s)}).addCase(Ys.rejected,s=>{Vt(s),de("Unable to download report",{variant:"error"})})}}),xu=El.reducer,{clearJobList:bu}=El.actions,et=_.createAsyncThunk("localization/getProjectList",async({pageIndex:t,tenant:s}={},{getState:a})=>{const n=a().localization.projectList,o={pageIndex:t||n.pagination.currentPage,pageSize:n.pagination.pageSize,sort:n.sort.key,order:n.sort.order,search:n.search,filters:n.filters};n.dateRange&&n.dateRange.start&&n.dateRange.end&&(o.dateRange={startDate:n.dateRange.start.toString(),endDate:n.dateRange.end.toString(),fieldName:"createdDate"});const r=new URL(`${$.LOCALIZATION}/${n.type}`);return r.searchParams.append("tenant",s),K.post(r,o,{headers:Se()})}),Pa=_.createAsyncThunk("localization/projectDetails",async({projectId:t}={},{getState:s,rejectWithValue:a,fulfillWithValue:n})=>{const o=s().localization.projectDetails,r={sort:o.sort.key,order:o.sort.order},l=new URL(`${$.LOCALIZATION}/${t}/details`);try{const i=await K.post(l,r,{headers:Se()});return i.errorCode?a(i.errorMessage):n(i)}catch{return a("Something while trying to fetch project details")}}),Ia=_.createAsyncThunk("localization/createNewProject",async({tenant:t})=>K.get(`${$.LOCALIZATION_PROJECT_PATH}?tenant=${t}`,{headers:Se()})),rr=on(aa()),kl={end:rr,start:rr.subtract({months:1})},Cu={projectList:ct.cloneDeep({...ko,stats:{},dateRange:kl,type:"me"}),projectDetails:{isInitialised:!1,urls:[],projectName:"",details:[],locUiUrl:"",sort:{key:"",order:""}},isLoading:!1,error:""},ga=t=>{t.isLoading=!0},js=t=>{t.isLoading=!1},lr=t=>{js(t),t.error="Some error occured"},Rl=_.createSlice({name:"localization",initialState:Cu,reducers:{startLoader:ga,stopLoader:js,setListParams:(t,s)=>{t.projectList=s.payload.reset?ct.cloneDeep({...ko,stats:{},dateRange:kl,type:"me"}):{...t.projectList,pagination:{...t.projectList.pagination,...s.payload.pagination},sort:{...t.projectList.sort,...s.payload.sort},search:s.payload.search??t.projectList.search,filters:{...t.projectList.filters,...s.payload.filters},dateRange:{...t.projectList.dateRange,...s.payload.dateRange},type:s.payload.type??t.projectList.type}},setDetailsParams:(t,s)=>{t.projectDetails=s.payload.reset?{isInitialised:!1,urls:[],projectName:"",details:[],sort:{key:"",order:""}}:{...t.projectDetails,sort:{...t.projectDetails.sort,...s.payload.sort}}}},extraReducers:t=>{t.addCase(et.pending,ga).addCase(et.fulfilled,(s,a)=>{s.projectList={...s.projectList,isInitialised:!0,data:a.payload.projects||[],pagination:{...s.projectList.pagination,...a.payload.pagination},stats:a.payload.stats||{}},js(s)}).addCase(et.rejected,lr).addCase(Pa.pending,ga).addCase(Pa.fulfilled,(s,a)=>{s.projectDetails={...s.projectDetails,isInitialised:!0,details:a.payload.details||[],urls:a.payload.urls||[],projectName:a.payload.projectName||"",locUiUrl:a.payload.locUiUrl||""},js(s)}).addCase(Pa.rejected,s=>{lr(s),s.projectDetails.isInitialised=!0}).addCase(Ia.pending,ga).addCase(Ia.fulfilled,js).addCase(Ia.rejected,js)}}),ju=Rl.reducer,{startLoader:$x,stopLoader:Fx,setListParams:gt,setDetailsParams:Qn}=Rl.actions,Pe=()=>({isInitialised:!1,isStatsInitialised:!1,data:[],pagination:{pageSize:100,currentPage:1,totalPages:0,totalItems:0,processUrlCount:0},sort:{key:"",order:""},statistics:[]}),Ue=(t,s,a,n)=>(a=a||s.pagination.currentPage,a>1&&(a=Math.min(a,Math.ceil(s.pagination.totalItems/s.pagination.pageSize))),{uniqueId:t.uniqueId,instanceId:t.instanceId,pageIndex:a,pageSize:s.pagination.pageSize,sort:s.sort.key,order:s.sort.order,...n&&{action:n}}),Lt=(t,s,a,n,o,r)=>{const l=t.session.siteData.instance,{instanceId:i,uniqueId:c,showLockedBy:d}=t.operations;return{urls:s,operation:a,actiontype:n,nextStep:o,instance:l.environment,instanceConfigId:l._id,franklinPreviewDomain:l.domain.franklinPreview,franklinPublishDomain:l.domain.franklinPublish,siteId:l.siteId,siteName:l.siteName,driveId:l.driveId,instanceId:i,uniqueId:c,showLockedBy:d,...r&&{action:r}}},vu=(t,s,a,n,o,r)=>({...Lt(t,s,n,o,r),comment:a}),As=(t,s,a,n,o,r)=>{let l={};if(n==="PREVIEW"||n==="PUBLISH"){const i=n==="PREVIEW"?"forcePreview":"forcePublish",c=s.forceOperation;l[i]=c}return{urls:a,operation:n,actiontype:o,nextStep:r,instance:t.environment,uniqueId:s.uniqueId,instanceId:s.instanceId,requestSource:s.source,requestTeam:s.team,requestComment:s.comment,...l}},yu=(t,s,a)=>({requestSource:t.source,requestTeam:t.team,requestComment:t.comment,uniqueId:t.uniqueId,instanceId:t.instanceId,urls:s,action:a}),Su=(t,s,a)=>({urls:a,operation:s.copyMove.action,actiontype:s.copyMove.action,nextStep:"",siteId:t.siteId,instance:t.environment,uniqueId:s.uniqueId,instanceId:s.instanceId,action:s.copyMove.action,requestSource:s.source,requestTeam:s.team,requestComment:s.comment,instanceConfigId:t._id}),Eu=(t,s,a)=>{const n=t.session.siteData.instance,{instanceId:o,uniqueId:r}=t.operations;return{inputs:s,action:a,operation:a,actiontype:`STATUS-${a}`,nextStep:a,instance:n.environment,siteId:n.siteId,siteName:n.siteName,driveId:n.driveId,instanceConfigId:n._id,instanceId:o,uniqueId:r}},ku=(t,s)=>({instance:t.environment,siteId:t.siteId,siteName:t.siteName,driveId:t.driveId,...s}),Ru=(t,s,a)=>({...Ue(t,t.copyMoveStatusReport,s,t.copyMove.action),...a}),Lu=(t,s,a,n,o,r)=>As(t,s,a,n,o,r),Nu=(t,s,a,n,o,r)=>As(t,s,a,n,o,r),Pu=(t,s,a,n,o,r)=>{const l=t.session.siteData.instance,{instanceId:i,uniqueId:c}=t.operations;return{urls:a,operation:n,actiontype:o,nextStep:r,instance:l.environment,siteId:l.siteId,siteName:l.siteName,driveId:l.driveId,instanceId:i,uniqueId:c,versionType:s.versioning.subOperation,...s.versioning.comment?{comment:s.versioning.comment}:{}}},Iu=(t,s,a,n,o,r)=>({urls:a,operation:n,actiontype:o,instance:t.environment,nextStep:r,versionType:s.versioning.subOperation,requestSource:s.source,requestTeam:s.team,requestComment:s.comment,uniqueId:s.uniqueId,instanceId:s.instanceId}),Tu=(t,s,a,n,o)=>({urls:a,instance:s.environment,franklinPreviewDomain:s.domain.franklinPreview,franklinPublishDomain:s.domain.franklinPublish,siteId:s.siteId,siteName:s.siteName,driveId:s.driveId,actiontype:o,uniqueId:t.uniqueId,instanceId:t.instanceId,requestSource:t.source,requestTeam:t.team,requestComment:t.comment,nextStep:"",operation:n,...t.fragmentOptions}),cs=(t,s,a,n)=>({uniqueId:t.uniqueId,instanceId:t.instanceId,isForced:t.forceOperation,ids:[s],shouldRestore:!a,action:n}),_u=(t,s,a)=>{const n=Ll(a.operation),o=`${n}-STATUS`;return{...Lt(t,s,"CHECKIN",o,n),comment:a.comment}},Au=(t,s,a)=>{const n=Ll(s.checkInOut.operation);return{...As(t,s,a,"CHECKIN",n,""),subOperation:s.checkInOut.operation.toUpperCase()}},Ll=t=>({checkin:"CHECKIN",checkout:"CHECKOUT",discard_checkout:"DISCARD"})[t],Du=(t,s,a,n)=>{const o=t.session.siteData.instance,{instanceId:r,uniqueId:l}=t.operations,{getFranklinStatus:i,includeAllChild:c}=a.exportListOptions;return{urls:s,franklinInfo:i,includeAllChild:c,actiontype:n,instance:o.environment,siteName:o.siteName,instanceId:r,uniqueId:l}},Ou=(t,s,a,n)=>{const o=t.session.siteData.instance,{instanceId:r,uniqueId:l}=t.operations,i=a.fragmentRefOptions.scanLevel?1:"nth";return{actiontype:n,instanceConfigId:o._id,urls:s,scanLevel:i,instanceId:r,uniqueId:l}},Uu=(t,s)=>{t.navDirection=t.currentStep<s?"next":"prev",t.currentStep=s},wu=(t,s)=>{t.isLoading=!0,t.loadingMessage={header:(s==null?void 0:s.header)||"",body:(s==null?void 0:s.body)||"",...s||{}}},Mu=(t,s)=>{t.loadingMessage={...t.loadingMessage,...s}},Lo=t=>{t.isLoading=!1,t.loadingMessage={header:"",body:""}},$u=(t,s)=>({...s.pagination,...t||{}}),Fu=t=>{Lo(t),t.error="There was an error. Please try again later"},Vu=t=>{const{instanceId:s,uniqueId:a}=F.generateUniqueIdAndInstanceId();t.instanceId=s,t.uniqueId=a},Bu=()=>!1,Ku=(t,s,a="statusReport")=>{Lo(t);const{success:n,processUrlCount:o,deletedItems:r}=s.payload;if(n){const l=r.map(i=>i._id);t[a].data=t[a].data.map(i=>({...i,isDeleted:l.includes(i._id)})),t[a].pagination.processUrlCount=o}},Hu=t=>{for(let s in t.clearActions){const a=t.clearActions[s];if(t.currentStep==s&&t.clearQueue.includes(a))return t.clearQueue.splice(t.clearQueue.indexOf(a),1),console.debug(`${t.instanceId}: ${a} removed from queue - ${JSON.stringify(t.clearQueue)}`),a}return null},zu=t=>{t.configurableSteps=Nl(t.unifiedOps)},Nl=t=>{const s={status:{name:"Status",description:"Perform status operation"},report:{name:"Generate Report",description:"View and download final report"}};let a=0;switch(t.statusOperation&&(t.previewOperation||t.publishOperation||t.unPreviewOperation||t.unPublishOperation)&&(t.forcePreview?a=1:a=2),a){case 0:return[s.status];case 1:return[s.report];case 2:return[s.status,s.report];default:return[]}},R={setCurrentStep:Uu,startLoader:wu,updateLoader:Mu,stopLoader:Lo,createPagination:$u,setGenericTryAgainError:Fu,generateUniqueIdAndInstanceId:Vu,checkForEmptyData:Bu,handleStatusDeleteFulfilled:Ku,removeClearActionFromCurrentStep:Hu,configureNextSteps:zu,calculateNextSteps:Nl},Nt=_.createAsyncThunk("operations/getProcessUrls",async({action:t,isForced:s},{getState:a})=>{const{uniqueId:n,instanceId:o}=a().operations,r=ue(),l={uniqueId:n,instanceId:o,action:t,...s!==void 0&&{force:s}};return K.post($.GET_PROCESS_URLS,l,{headers:r})}),eo=async({clearQueue:t,uniqueId:s,instanceId:a,useMsalToken:n=!0})=>{if(!a)return null;t.length>0?console.debug(`${a}: Clear api invoked for: ${t}`):console.debug(`${a}: No pending operations to clear`);const o=ue(),r=t.map(l=>K.post($.CLEAR_RECORDS,{uniqueId:s,instanceId:a,action:l},{headers:o}));return Promise.all(r)},qu=_.createAsyncThunk("operations/clearDiscardedRecords",async({useMsalToken:t=!0}={},{getState:s})=>{const{currentStep:a,clearActions:n,instanceId:o,uniqueId:r}=s().operations;for(let l in n)if(a==l){const i=n[l],c=ue();return console.debug(`${o}: Clearing discarded records for ${i}`),K.post($.CLEAR_RECORDS,{uniqueId:r,instanceId:o,action:i},{headers:c})}}),Pl=async(t,s)=>K.put(`${$.UPDATE_JOB}${t}`,s).then(a=>a.data),Ta=_.createAsyncThunk("operations/discardCurrentJob",async(t,{getState:s})=>{const a=s().operations.currentJob._id;return Pl(a,{status:"STOPPED"})}),_a=_.createAsyncThunk("operations/changeJobName",async({jobId:t,jobName:s})=>Pl(t,{jobName:s})),Aa=_.createAsyncThunk("operations/completeCurrentJob",async(t,{getState:s})=>{const a=s().operations.currentJob._id,{instanceId:n,uniqueId:o}=s().operations,r={instanceId:n,uniqueId:o};return K.put(`${$.JOB_ACTION_ID}/${a}`,r).then(l=>l.data)}),Da=_.createAsyncThunk("operations/getStatistics",async({action:t},{getState:s})=>{const{instanceId:a,uniqueId:n}=s().operations,o={instanceId:a,uniqueId:n,action:t};return K.post($.STATISTICS,o).then(r=>r.data)});async function Gu(t,{getState:s}){const a=s().operations,n=s().session.siteData.instance._id,o={...t,instanceId:a.instanceId,uniqueId:a.uniqueId,instanceConfigId:n},r=ue(),l=await K.post($.GENERATE_EXCEL_REPORT,o,{headers:r});return await(await fetch(l.data.downloadURL)).blob()}const Ut=_.createAsyncThunk("operations/exportToExcel",Gu),Oa=_.createAsyncThunk("operations/downloadExcelReport",async(t,{rejectWithValue:s})=>{try{const a=await K.get(`${$.DOWNLOAD_EXCEL_REPORT}/${t}`);return console.log("response--",a),await(await fetch(a.data.downloadURL)).blob()}catch(a){return console.error("Error in downloadExcelReport:",a),s(a)}}),Ua=_.createAsyncThunk("operations/generateExcel",t=>{const s="POST",a=ue(),n={headers:t.headers,data:t.data};return K.download(`${$.GENERATE_EXCEL}`,{headers:a,body:n,method:s})}),wa=_.createAsyncThunk("operations/covertExcelToJson",async t=>{const s=t,a={"Content-Type":"application/octet-stream"};return(await K.post($.CONVERT_EXCEL_TO_JSON,s,{headers:a})).data}),wn=_.createAsyncThunk("operations/create",(t,{getState:s})=>{const a=s().operations;return K.post($.OPERATION,{instanceId:a.instanceId,uniqueId:a.uniqueId,operation:t.operation,payload:t.options})}),Mn=_.createAsyncThunk("operations/get",t=>K.get(`${$.OPERATION}/${t}`)),Ju={[Nt.pending]:(t,s)=>{var n;let a=F.capitalize((n=s.meta.arg)==null?void 0:n.action);a=a.charAt(0).toUpperCase()+a.substring(1),R.startLoader(t,{header:`Proceeding to ${a}`,body:"Please wait while we fetch the urls to process",footer:"Preparing to process the urls",progress:-1})},[Ta.pending]:R.startLoader,[Ta.fulfilled]:t=>{de(`Job ${t.currentJob.jobName} has been discarded`,{variant:"success"}),R.stopLoader(t)},[Ta.rejected]:R.stopLoader,[_a.pending]:R.startLoader,[_a.fulfilled]:R.stopLoader,[_a.rejected]:R.stopLoader,[Da.pending]:R.startLoader,[Da.fulfilled]:(t,s)=>{const{reportKey:a}=s.meta.arg;t[a].isStatsInitialised=!0,t[a].statistics=s.payload||[],R.stopLoader(t)},[Da.rejected]:R.stopLoader,[Ut.pending]:R.startLoader,[Ut.fulfilled]:(t,s)=>{R.stopLoader(t);const n=`report-${new Date().getTime()}.xlsx`;F.downloadBlob(s.payload,n)},[Ut.rejected]:t=>{de("Failed to export to excel",{variant:"error"}),R.stopLoader(t)},[Oa.pending]:R.startLoader,[Oa.fulfilled]:(t,s)=>{t.isLoading=!1;const n=`report-${new Date().getTime()}.xlsx`;F.downloadBlob(s.payload,n)},[Oa.rejected]:t=>{de("Failed to export to excel",{variant:"error"}),R.stopLoader(t)},[Ua.pending]:R.startLoader,[Ua.fulfilled]:(t,s)=>{var o;const a=new Date().getTime(),n=`${((o=s.meta.arg)==null?void 0:o.fileName)||"report"}-${a}.xlsx`;F.downloadBlob(s.payload,n),R.stopLoader(t)},[Ua.rejected]:t=>{de("Failed to export to excel",{variant:"error"}),R.stopLoader(t)},[Mn.pending]:R.startLoader,[Mn.fulfilled]:(t,s)=>{t.operation=s.payload.data},[Mn.rejected]:t=>{de("Failed to get operation",{variant:"error"}),R.stopLoader(t)},[wn.pending]:R.startLoader,[wn.fulfilled]:(t,s)=>{t.operation=s.payload.data,R.stopLoader(t)},[wn.rejected]:t=>{de("Failed to create operation",{variant:"error"}),R.stopLoader(t)},[wa.pending]:R.startLoader,[wa.fulfilled]:R.stopLoader,[wa.rejected]:R.stopLoader,[Aa.pending]:R.startLoader,[Aa.fulfilled]:R.stopLoader,[Aa.rejected]:R.stopLoader},Wu=(t,s)=>(s=s||t.pagination.currentPage,s>1&&(s=Math.min(s,Math.ceil(t.pagination.totalItems/t.pagination.pageSize))),{pageIndex:s,pageSize:t.pagination.pageSize,sort:t.sort.key,order:t.sort.order}),Yu=t=>({instanceConfigId:t._id,driveId:t.driveId,siteId:t.siteId,siteName:t.siteName}),yt=_.createAsyncThunk("monitoring/monitorCheckInOut",async({pageIndex:t}={},{getState:s})=>{const a=s().monitoring.checkInOut,n=Wu(a,t);return K.post($.MONITOR_CHECKIN_CHECKOUT,n).then(o=>o.data)}),Ma=_.createAsyncThunk("monitoring/refreshCheckInOut",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=Yu(a);return K.post($.REFRESH_CHECKIN_CHECKOUT,n).then(o=>o.data)}),$a=_.createAsyncThunk("monitoring/checkInFile",async({url:t,comment:s,operation:a},{getState:n})=>{const o=n().session.siteData.instance,{uniqueId:r,instanceId:l}=F.generateUniqueIdAndInstanceId(),i={urls:[t],instance:o.environment,uniqueId:r,instanceId:l,subOperation:a,requestComment:s,siteId:o.siteId,siteName:o.siteName,driveId:o.driveId},c={apiKey:o.apiKey,...ue()};return K.post($.CHECKIN_CHECKOUT_FOR_MONITORING,i,{headers:c})}),Zu={checkInOut:{isInitialised:!1,data:[],pagination:{pageSize:100,currentPage:1,totalPages:0,totalItems:0},sort:{key:"",order:""}},isLoading:!1,error:""},xa=t=>{t.isLoading=!0},zs=t=>{t.isLoading=!1},ba=t=>{zs(t),t.error="Some error occured",de("Some error occured",{variant:"error"})},Il=_.createSlice({name:"monitoring",initialState:Zu,reducers:{setPageSize:(t,s)=>{const{owner:a,pageSize:n}=s.payload;t[a]&&(t[a].pagination.pageSize=n)},setSort:(t,s)=>{const{owner:a,sortKey:n,sortOrder:o}=s.payload;n!==t[a].sort.key?t[a].sort={key:n,order:o||"asc"}:t[a].sort.order=o||t[a].sort.order==="asc"?"desc":"asc"}},extraReducers:{[yt.pending]:xa,[yt.fulfilled]:(t,s)=>{var a,n;t.checkInOut={...t.checkInOut,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:{...t.checkInOut.pagination,...(n=s.payload)==null?void 0:n.pagination}},zs(t)},[yt.rejected]:ba,[Ma.pending]:xa,[Ma.fulfilled]:zs,[Ma.rejected]:ba,[$a.pending]:xa,[$a.fulfilled]:(t,s)=>{var a,n;(a=s.payload.data)!=null&&a.success?de("Operation successful!",{variant:"success"}):!((n=s.payload.data)!=null&&n.success)&&s.payload.message&&de(s.payload.message,{variant:"error",autoHideDuration:1e4}),zs(t)},[$a.rejected]:ba,[Ut.pending]:xa,[Ut.fulfilled]:zs,[Ut.rejected]:ba}}),Xu=Il.reducer,{setPageSize:Qu,setSort:e1}=Il.actions,Tl=async(t,s,a=$.BLOCK_SEARCH)=>{const n=ue(),o={payload:t,instanceId:s.instanceId,uniqueId:s.uniqueId};return K.post(a,o,{headers:n})},t1=_.createAsyncThunk("operations/blockSearch",async(t,{getState:s})=>{const a=s().operations;return Tl([t],a)}),Fa=_.createAsyncThunk("operations/getBlockReportUrls",async(t,{getState:s})=>{const a=s().operations;return Tl(t,a,$.BLOCK_SEARCH_GET_URLS)}),Bt=_.createAsyncThunk("operations/blockReport",async({pageIndex:t}={},{getState:s})=>{const a=s().operations,n=ue(),o=Ue(a,a.blockReport,t);return K.post($.BLOCK_SEARCH_REPORT,o,{headers:n}).then(r=>r.data)}),s1={[Bt.pending]:t=>{t.blockReport.data.length>0&&R.startLoader(t)},[Bt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),t.blockReport={...t.blockReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.blockReport)}},[Bt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Fa.pending]:R.startLoader,[Fa.fulfilled]:R.stopLoader,[Fa.rejected]:R.stopLoader},dn={DRY_RUN:"Dry Run and Validation",SAVE:"Save"},$e={IN_PROGRESS:"IN_PROGRESS",ERROR:"ERROR",COMPLETED:"COMPLETED",CANCELLED:"CANCELLED",IN_QUEUE:"IN_QUEUE",FULFILLED:"FULFILLED"},ra={IN_PROGRESS:{label:"In Progress",color:"accent"},ERROR:{label:"Error",color:"error"},COMPLETED:{label:"Completed",color:"green"},CANCELLED:{label:"Cancelled",color:"error"},IN_QUEUE:{label:"In Queue",color:"yellow"}},a1=[{stat:"dryRun",statParams:[{status:"IN_PROGRESS",statusClass:"status-inprogress"},{status:"CANCELLED",statusClass:"status-error"}]},{stat:"successFul",statParams:[{status:"COMPLETED",statusClass:"status-completed"}]},{stat:"error",statusClass:"status-error"}],n1={dryRun:{label:"Dry Run and Validation",Icon:dt,class:"dry-run-validation"},successFul:{label:"Successful",Icon:gn,class:"successful"},error:{label:"Total Errors",Icon:ia,class:"total-errors"}},o1={DRY_RUN:{label:dn.DRY_RUN,Icon:dt,buttons:{isDownload:!0,isSave:!0}},SAVE:{label:dn.SAVE,Icon:Ii,buttons:{isDownload:!0}}},vs={DRY_RUN:{fileName:"dryrun",downloadFileSuffix:"dry-run-report.xlsx"},SAVE:{fileName:"final",downloadFileSuffix:"save-report.xlsx"},ORIGINAL:{fileName:"original",downloadFileSuffix:"original.xlsx"}},At={DRY_RUN:"DRY_RUN",SAVE:"SAVE"},Dt=_.createAsyncThunk("operations/fetchBCUProjects",async({pageIndex:t,tenant:s}={},{getState:a})=>{const n=a().operations.bulkContentUpdateReport,o={instance:s,sort:n.sort.key,order:n.sort.order,pageIndex:t||n.pagination.currentPage,pageSize:n.pagination.pageSize,search:n.search};return K.post(`${$.BCU_GET_ALL}/all`,o,{headers:ue()})}),Zs=_.createAsyncThunk("operations/downloadExcelBCU",async({instanceId:t,uniqueId:s,fileName:a},{rejectWithValue:n})=>{var o;try{const r=await K.post(`${$.BCU_GET_ALL}/download`,{instanceId:t,uniqueId:s,fileName:a},{headers:ue()});if((o=r==null?void 0:r.data)!=null&&o.signedUrl){const l=await fetch(r.data.signedUrl);return l.ok?await l.blob():n("Error occurred while downloading file")}else return n((r==null?void 0:r.message)??"Error occurred while downloading file")}catch(r){return console.error("error in download excel:",r),n("Something went worng")}}),r1=Ls.injectEndpoints({endpoints:t=>({getBCUProjectDetials:t.query({query:s=>{const{instanceId:a,uniqueId:n}=s;return{url:`${$.BCU_GET_ALL}/details`,method:"POST",headers:ue(),body:{instanceId:a,uniqueId:n}}},providesTags:(s,a,{instanceId:n})=>[{type:"BCUProjects",id:n}]}),cancelBCUProject:t.mutation({query:s=>{const{instanceId:a,uniqueId:n}=s;return{url:`${$.BCU_GET_ALL}/cancel`,method:"POST",headers:ue(),body:{instanceId:a,uniqueId:n}}},invalidatesTags:(s,a,{instanceId:n})=>[{type:"BCUProjects",id:n}]}),saveBCUProject:t.mutation({query:s=>{const{instanceId:a,uniqueId:n,instance:o}=s;return{url:`${$.BCU_GET_ALL}/save`,method:"POST",headers:ue(),body:{instanceId:a,uniqueId:n,instance:o}}},invalidatesTags:(s,a,{instanceId:n})=>[{type:"BCUProjects",id:n}]})})}),Va=_.createAsyncThunk("config/uploadFile",async({selectedFile:t},{rejectWithValue:s,fulfillWithValue:a})=>{try{const n=await K.get(`${$.BULK_UPDATE_PRESIGNED}`,{headers:ue()}),{url:o,keyRef:r}=n.data,{uniqueId:l,instanceId:i}=F.generateUniqueIdAndInstanceId(),c=await F.readFileAsBinary(t);if((await fetch(o,{method:"PUT",headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},body:c})).ok)return a({instanceId:i,uniqueId:l,s3KeyRef:r,requestStatus:$e.FULFILLED})}catch{return s("File uploading failed")}}),Ba=_.createAsyncThunk("config/createProject",async({projectName:t,tenant:s,instanceId:a,uniqueId:n,s3FileKey:o},{rejectWithValue:r,fulfillWithValue:l})=>{try{return(await fetch(`${$.BCU_GET_ALL}`,{method:"POST",headers:{authorization:ue().Authorization,"Content-Type":"application/json"},body:JSON.stringify({instanceId:a,uniqueId:n,projectName:t,instance:s,s3KeyRef:o})})).ok?l({requestStatus:$e.FULFILLED}):r("Error creating project")}catch{return r("Something went wrong")}}),l1={[Dt.pending]:R.startLoader,[Dt.rejected]:R.stopLoader,[Dt.fulfilled]:(t,s)=>{var a,n,o,r,l,i;R.stopLoader(t),t.bulkContentUpdateReport={...t.bulkContentUpdateReport,isInitialised:!0,data:((n=(a=s.payload)==null?void 0:a.data)==null?void 0:n.projects)??[],pagination:{...t.bulkContentUpdateReport.pagination,...((r=(o=s.payload)==null?void 0:o.data)==null?void 0:r.pagination)??{}},stats:((i=(l=s.payload)==null?void 0:l.data)==null?void 0:i.stats)??{}}},[Va.pending]:R.startLoader,[Va.rejected]:R.stopLoader,[Va.fulfilled]:R.stopLoader,[Ba.pending]:R.startLoader,[Ba.rejected]:R.stopLoader,[Ba.fulfilled]:R.stopLoader,[Zs.pending]:R.startLoader,[Zs.rejected]:R.stopLoader,[Zs.fulfilled]:R.stopLoader},{useGetBCUProjectDetialsQuery:i1,useCancelBCUProjectMutation:c1,useSaveBCUProjectMutation:d1}=r1,u1=_.createAsyncThunk("operations/cachePurgeStatus",async(t,{getState:s})=>{const a=Se(),n={...Lt(s(),t,"STATUS","CACHE_PURGE","")};return K.post($.CACHE_PURGE_STATUS,n,{headers:a})}),Kt=_.createAsyncThunk("operations/cachePurgeStatusReport",async(t,{getState:s})=>{const a=s().operations,n=Se(),o={...Ue(a,a.statusReport,t,"CACHE_PURGE"),instanceId:a.instanceId,uniqueId:a.uniqueId};return K.post($.CACHE_PURGE_STATUS_REPORT,o,{headers:n}).then(r=>r.data)}),p1=_.createAsyncThunk("operations/cachePurge",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o={...Se(),apiKey:a.apiKey},r=As(a,n,t,"CACHE","","");return K.post($.CACHE_PURGE,r,{headers:o})}),Ht=_.createAsyncThunk("operations/cachePurgeReport",async(t,{getState:s})=>{const a=s().operations,n=s().session.siteData.instance,o={...Se(),apiKey:n.apiKey},r=Ue(a,a.cachePurgeReport,t);return K.post($.CACHE_PURGE_REPORT,r,{headers:o}).then(l=>l.data)}),Ka=_.createAsyncThunk("operations/deleteCachePurgeStatusRecord",async({id:t,isDeleted:s},{getState:a})=>{const n=a().operations,o="CACHE_PURGE",r=Se(),l=cs(n,t,s,o);return K.post($.DELETE_STATUS_RECORD,l,{headers:r}).then(i=>i.data)}),h1={[Kt.pending]:t=>{t.statusReport.data.length>0&&R.startLoader(t)},[Kt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.statusReport={...t.statusReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.statusReport)})},[Kt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Ht.pending]:t=>{t.cachePurgeReport.data.length>0&&R.startLoader(t)},[Ht.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.cachePurgeReport={...t.cachePurgeReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.cachePurgeReport)})},[Ht.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Ka.pending]:t=>{R.startLoader(t)},[Ka.fulfilled]:R.handleStatusDeleteFulfilled,[Ka.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},f1=_.createAsyncThunk("operations/checkInOutStatus",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o={apiKey:a.apiKey,...ue()},r=_u(s(),t,n.checkInOut);return K.post($.VERSIONING_STATUS,r,{headers:o})}),zt=_.createAsyncThunk("operations/checkInOutStatusReport",async(t,{getState:s})=>{const a=s().operations,n=a.checkInOut.operation.toUpperCase(),o=Ue(a,a.statusReport,t,n);return K.post($.VERSIONING_STATUS_REPORT,o).then(r=>r.data)}),Ha=_.createAsyncThunk("operations/deleteCheckInOutStatusRecord",async({id:t,isDeleted:s},{getState:a})=>{const n=a().operations,o=n.checkInOut.operation.toUpperCase(),r=cs(n,t,s,o);return K.post($.DELETE_VERSIONING_RECORD,r).then(l=>l.data)}),m1=_.createAsyncThunk("operations/checkInOut",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o=Au(a,n,t),r={apiKey:a.apiKey,...ue()};return K.post($.CHECKIN_CHECKOUT,o,{headers:r})}),qt=_.createAsyncThunk("operations/checkInOutReport",async(t,{getState:s})=>{const a=s().operations,n=a.checkInOut.operation.toUpperCase(),o=Ue(a,a.checkInOutReport,t,n);return K.post($.VERSIONING_REPORT,o).then(r=>r.data)}),g1={[zt.pending]:t=>{t.statusReport.data.length>0&&R.startLoader(t)},[zt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.statusReport={...t.statusReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.statusReport)})},[zt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[qt.pending]:t=>{t.checkInOutReport.data.length>0&&R.startLoader(t)},[qt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.checkInOutReport={...t.checkInOutReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.checkInOutReport)})},[qt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Ha.pending]:t=>{R.startLoader(t)},[Ha.fulfilled]:R.handleStatusDeleteFulfilled,[Ha.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},x1=_.createAsyncThunk("operations/copyMoveStatus",async(t,{getState:s})=>{const a=s().session.siteData.instance,{copyMove:n}=s().operations,o={apiKey:a.apiKey,...ue()},r=Eu(s(),t,n.action);return K.post($.COPY_MOVE_STATUS,r,{headers:o})}),za=_.createAsyncThunk("operations/copyMoveStatusReport",async({pageIndex:t,filters:s={}},{getState:a})=>{const n=a().operations,o=Ru(n,t,s);return K.post($.COPY_MOVE_STATUS_REPORT,o).then(r=>r.data)}),_l=_.createAsyncThunk("operations/updateCopyMoveStatusReportRecord",async({id:t,payload:s={}},{getState:a})=>K.put(`${$.COPY_MOVE_STATUS_REPORT}/${t}`,s).then(n=>n.data)),qa=_.createAsyncThunk("operations/deleteCopyMoveStatusRecord",async({id:t,isDeleted:s,action:a},{getState:n})=>{const o=n().operations,r=cs(o,t,s,a);return K.post($.DELETE_COPY_MOVE_STATUS_RECORD,r).then(l=>l.data)}),b1=_.createAsyncThunk("operations/copyMove",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o=Su(a,n,t),r={apiKey:a.apiKey,...ue()};return K.post($.COPY_MOVE,o,{headers:r})}),Gt=_.createAsyncThunk("operations/copyMoveReport",async(t,{getState:s})=>{const a=s().operations,n=a.copyMove.action,o=Ue(a,a.copyMoveReport,t,n);return K.post($.COPY_MOVE_REPORT,o).then(r=>r.data)}),to=_.createAsyncThunk("operations/updateCopyMoveStatusReportRecords",async({ids:t,payload:s={}},{getState:a})=>{const n=a().session.siteData.instance,{instanceId:o,uniqueId:r}=a().operations,l=ku(n,{ids:t,payload:s,instanceId:o,uniqueId:r});return K.put(`${$.COPY_MOVE_STATUS_REPORT}`,l).then(i=>i.data)}),so=_.createAsyncThunk("operations/getCopyMoveStatusReportStats",async(t,{getState:s})=>{const{instanceId:a,uniqueId:n}=s().operations,o={...t,instanceId:a,uniqueId:n};return K.post(`${$.COPY_MOVE_REPORT_STATS}`,o).then(r=>r.data)}),C1={[za.pending]:t=>{t.isLoading||R.startLoader(t),t.copyMoveStatusReport.isInitialised=!1},[za.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.copyMoveStatusReport={...t.copyMoveStatusReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.copyMoveStatusReport)})},[so.pending]:(t,s)=>{R.startLoader(t)},[so.fulfilled]:(t,s)=>{R.stopLoader(t),t.copyMoveStatusReport.stats={...t.copyMoveStatusReport.stats,...s.payload}},[za.rejected]:(t,s)=>{t.error=s.error.message},[_l.pending]:function(t,{meta:s}){const{recordIndex:a,payload:n}=s.arg,o={...t.copyMoveStatusReport.data[a],...n};t.copyMoveStatusReport.data[a]=o},[qa.pending]:R.startLoader,[qa.fulfilled]:(t,s)=>{R.handleStatusDeleteFulfilled(t,s,"copyMoveStatusReport")},[qa.rejected]:R.stopLoader,[to.pending]:function(t,{meta:s}){R.stopLoader(t);const{payload:a}=s.arg;t.copyMoveStatusReport.data=t.copyMoveStatusReport.data.map(n=>({...n,...a}))},[to.fulfilled]:function(t,{meta:s}){R.stopLoader(t)},[Gt.pending]:t=>{t.copyMoveReport.data.length>0&&R.startLoader(t)},[Gt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.copyMoveReport={...t.copyMoveReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.copyMoveReport)})},[Gt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},j1=_.createAsyncThunk("operations/deactivationStatus",async(t,{getState:s})=>{const a=s().session.siteData.instance,{deactivation:n}=s().operations,o=n.operation,r={apiKey:a.apiKey,...ue()},l=Lt(s(),t,"STATUS",o,"");return K.post($.DEACTIVATION_STATUS,l,{headers:r})}),Jt=_.createAsyncThunk("operations/deactivationStatusReport",async(t,{getState:s})=>{const a=s().operations,n=a.deactivation.operation,o=Ue(a,a.statusReport,t,n);return K.post($.DEACTIVATION_STATUS_REPORT,o).then(r=>r.data)}),v1=_.createAsyncThunk("operations/deactivation",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o=n.deactivation.operation,r=As(a,n,t,n.deactivation.operation,"",""),l={apiKey:a.apiKey,...ue()},i=o==="UNPREVIEW"?$.DEACTIVATION_UNPREVIEW:$.DEACTIVATION_UNPUBLISH;return K.post(i,r,{headers:l})}),Wt=_.createAsyncThunk("operations/deactivationReport",async(t,{getState:s})=>{const a=s().operations,n=Ue(a,a.deactivationReport,t),r=a.deactivation.operation==="UNPREVIEW"?$.DEACTIVATION_UNPREVIEW_REPORT:$.DEACTIVATION_UNPUBLISH_REPORT;return K.post(r,n).then(l=>l.data)}),Ga=_.createAsyncThunk("operations/deleteDeactivationStatusRecord",async({id:t,isDeleted:s},{getState:a})=>{const n=a().operations,o=n.deactivation.operation.toUpperCase(),r=cs(n,t,s,o);return K.post($.DELETE_STATUS_RECORD,r).then(l=>l.data)}),y1={[Jt.pending]:t=>{t.statusReport.data.length>0&&R.startLoader(t)},[Jt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.statusReport={...t.statusReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.statusReport)})},[Jt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Wt.pending]:t=>{t.deactivationReport.data.length>0&&R.startLoader(t)},[Wt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.deactivationReport={...t.deactivationReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.deactivationReport)})},[Wt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Ga.pending]:t=>{R.startLoader(t)},[Ga.fulfilled]:R.handleStatusDeleteFulfilled,[Ga.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},S1=_.createAsyncThunk("operations/createExportList",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o={apiKey:a.apiKey,...ue()},r=Du(s(),t,n);return K.post($.EXPORT_LIST_CREATE,r,{headers:o})}),Yt=_.createAsyncThunk("operations/exportListReport",async(t,{getState:s})=>{const a=s().operations,n=Ue(a,a.exportListReport,t);return K.post($.EXPORT_LIST_REPORT,n).then(o=>o.data)}),E1={[Yt.pending]:t=>{t.exportListReport.data.length>0&&R.startLoader(t)},[Yt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.exportListReport={...t.exportListReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.exportListReport)})},[Yt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},k1=_.createAsyncThunk("operations/createFragmentRef",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o={apiKey:a.apiKey,...ue()},r=Ou(s(),t,n,"URL_REFERENCE");return K.post($.FIND_URL_REFERENCE,r,{headers:o})}),Zt=_.createAsyncThunk("operations/fragmentRefReport",async(t,{getState:s})=>{const a=s().operations,n=Ue(a,a.fragmentRefReport,t,"URL_REFERENCE_REPORT");return K.post($.FIND_URL_REFERENCE_REPORT,n).then(o=>o.data)}),R1={[Zt.pending]:t=>{t.fragmentRefReport.data.length>0&&R.startLoader(t)},[Zt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.fragmentRefReport={...t.fragmentRefReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.fragmentRefReport)})},[Zt.rejected]:(t,s)=>{var a;R.stopLoader(t),t.error=s.error.message,de(((a=s.error)==null?void 0:a.message)||"Somthing went wrong. Please try again.",{variant:"error"})}};_.createAsyncThunk("operations/status",async(t,{getState:s})=>{const n={apiKey:s().session.siteData.instance.apiKey,...ue()},o=Lt(s(),t,"FRAGMENTS","STATUS","FRAGMENTS");return K.post($.STATUS,o,{headers:n})});const L1=_.createAsyncThunk("operationsSlice/fragment",async(t,{getState:s})=>{const a=s().operations,n=s().session.siteData.instance,o={apiKey:n.apiKey,...ue()},r=Tu(a,n,t,"FRAGMENTS","FRAGMENTS");return K.post($.FRAGMENT,r,{headers:o})}),Ja=_.createAsyncThunk("operationsSlice/fragmentReport",async(t=1,{getState:s})=>{const a=s().operations,n=Ue(s().operations,a.fragmentReport,t);return(await K.post($.FRAGMENT_REPORT,{...n,filter:"isSourceUrl",value:!1})).data}),Xs=_.createAsyncThunk("operationsSlice/fragmentSourceReport",async(t=1,{getState:s})=>{const a=s().operations,n=Ue(s().operations,a.fragmentReport,t);return(await K.post($.FRAGMENT_REPORT,{...n,filter:"isSourceUrl",value:!0})).data}),N1={[Ja.pending]:t=>{t.fragmentReport.data.length>0&&R.startLoader(t)},[Ja.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.fragmentReport={...t.fragmentReport,isInitialised:!0,isSourceReport:!1,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.fragmentReport)})},[Ja.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Xs.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Xs.pending]:t=>{t.fragmentReport.data.length>0&&R.startLoader(t)},[Xs.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.fragmentReport={...t.fragmentReport,isInitialised:!0,isSourceReport:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.fragmentReport)})}},Wa=_.createAsyncThunk("operations/getHelixLogs",async(t,{getState:s})=>{const a=s().session.siteData.instance,{processUrls:n,uniqueId:o,instanceId:r}=s().operations,l=n.map(C=>C.inputUrl),{dateRange:i,operations:c,users:d}=s().operations.helixlogs,u=(d||[]).filter(C=>C.trim()),f=u.length>0?u:[],g={routes:c.length>0?c:[],users:f,from:new Date(i.start).toISOString(),to:new Date(i.end).toISOString(),urls:l.length>0?l:[],instanceConfigId:a._id,operation:"HELIX_AUDIT_LOG",actiontype:"HELIX_AUDIT_LOG",uniqueId:o,instanceId:r,nextStep:"",instance:a.environment};return K.post($.HELIX_LOGS,g).then(C=>C.data)}),P1={[Wa.pending]:t=>{R.startLoader(t)},[Wa.fulfilled]:(t,s)=>{R.stopLoader(t)},[Wa.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},I1=_.createAsyncThunk("operations/pageIndexingStatus",async(t,{getState:s})=>{const{pageIndexing:a}=s().operations,n=a.operation,o={...Se()},r={...Lt(s(),t,"STATUS",n,"")};return K.post($.PAGE_INDEX_STATUS,r,{headers:o})}),Xt=_.createAsyncThunk("operations/pageIndexingStatusReport",async(t,{getState:s})=>{const a=s().operations,n=a.pageIndexing.operation,o=Se(),r={...Ue(a,a.statusReport,t,n),instanceId:a.instanceId,uniqueId:a.uniqueId};return K.post($.PAGE_INDEX_STATUS_REPORT,r,{headers:o}).then(l=>l.data)}),T1=_.createAsyncThunk("operations/pageIndexing",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,{pageIndexing:o}=n,r=o.operation,l={...Se(),apiKey:a.apiKey},i=yu(n,t,r);return K.post($.PAGE_INDEX,i,{headers:l})}),Qt=_.createAsyncThunk("operations/pageIndexingReport",async(t,{getState:s})=>{const a=s().operations,n=s().session.siteData.instance,o=a.pageIndexing.operation,r={...Se(),apiKey:n.apiKey},l=Ue(a,a.pageIndexingReport,t,o);return K.post($.PAGE_INDEX_REPORT,l,{headers:r}).then(i=>i.data)}),Ya=_.createAsyncThunk("operations/deletePageIndexingStatusRecord",async({id:t,isDeleted:s},{getState:a})=>{const n=a().operations,o="INDEX_STATUS",r=Se(),l=cs(n,t,s,o);return K.post($.DELETE_STATUS_RECORD,l,{headers:r}).then(i=>i.data)}),_1={[Xt.pending]:t=>{t.statusReport.data.length>0&&R.startLoader(t)},[Xt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.statusReport={...t.statusReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.statusReport)})},[Xt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Qt.pending]:t=>{t.pageIndexingReport.data.length>0&&R.startLoader(t)},[Qt.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.pageIndexingReport={...t.pageIndexingReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.pageIndexingReport)})},[Qt.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Ya.pending]:t=>{R.startLoader(t)},[Ya.fulfilled]:R.handleStatusDeleteFulfilled,[Ya.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},A1=_.createAsyncThunk("operations/status",async(t,{getState:s})=>{const n={apiKey:s().session.siteData.instance.apiKey,...ue()},o=Lt(s(),t,"PREVIEW","STATUS","PREVIEW");return K.post($.STATUS,o,{headers:n})}),D1=_.createAsyncThunk("operations/preview",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o=As(a,n,t,"PREVIEW","PREVIEW",""),r={apiKey:a.apiKey,...ue()};return K.post($.PREVIEW,o,{headers:r})}),es=_.createAsyncThunk("operations/previewReport",async(t,{getState:s})=>{const a=s().operations,n=Ue(a,a.previewReport,t);return K.post($.PREVIEW_REPORT,n).then(o=>o.data)}),O1={[es.pending]:t=>{t.previewReport.data.length>0&&R.startLoader(t)},[es.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.previewReport={...t.previewReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.previewReport)})},[es.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},U1=_.createAsyncThunk("operations/status",async(t,{getState:s})=>{const n={apiKey:s().session.siteData.instance.apiKey,...ue()},o=Lt(s(),t,"PUBLISH","STATUS","PUBLISH");return K.post($.STATUS,o,{headers:n})}),w1=_.createAsyncThunk("operations/publish",async(t,{getState:s})=>{const a=s().session.siteData.instance,n=s().operations,o=Lu(a,n,t,"PUBLISH","PUBLISH",""),r={apiKey:a.apiKey,...ue()};return K.post($.PUBLISH,o,{headers:r})}),ts=_.createAsyncThunk("operations/publishReport",async(t=1,{getState:s})=>{const a=s().operations,n=Ue(a,a.publishReport,t);return K.post($.PUBLISH_REPORT,n).then(o=>o.data)}),M1={[ts.pending]:t=>{t.publishReport.data.length>0&&R.startLoader(t)},[ts.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.publishReport={...t.publishReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.publishReport)})},[ts.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},$1=_.createAsyncThunk("operations/status",async(t,{getState:s})=>{const n={apiKey:s().session.siteData.instance.apiKey,...ue()},o=Lt(s(),t,"STATUS","STATUS","");return K.post($.STATUS,o,{headers:n})}),Ve=_.createAsyncThunk("operations/statusReport",async({pageIndex:t,action:s},{getState:a})=>{const n=a().operations,o=Ue(n,n.statusReport,t,s);return K.post($.STATUS_REPORT,o).then(r=>r.data)}),Qs=_.createAsyncThunk("operations/deleteStatusRecord",async({id:t,isDeleted:s,action:a},{getState:n})=>{const o=n().operations,r=cs(o,t,s,a);return K.post($.DELETE_STATUS_RECORD,r).then(l=>l.data)}),ea=_.createAsyncThunk("operations/updateForceOperation",async({isForced:t,action:s},{getState:a})=>{const{uniqueId:n,instanceId:o}=a().operations,r={uniqueId:n,instanceId:o,action:s,...t!==void 0&&{force:t}};return K.post($.GET_PROCESS_URLS,r)}),F1={[Ve.pending]:t=>{t.statusReport.data.length>0&&R.startLoader(t)},[Ve.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.statusReport={...t.statusReport,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.statusReport)})},[Ve.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Qs.pending]:t=>{R.startLoader(t)},[Qs.fulfilled]:R.handleStatusDeleteFulfilled,[Qs.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[ea.pending]:R.startLoader,[ea.fulfilled]:(t,s)=>{var n,o;const a=((o=(n=s.payload)==null?void 0:n.data)==null?void 0:o.length)||0;t.statusReport.pagination.processUrlCount=a,t.forceOperation=!t.forceOperation,R.stopLoader(t)},[ea.rejected]:R.setGenericTryAgainError},V1={},B1=async(t,s,a,n,o)=>{const r=s.session.siteData.instance,l=s.operations.versioning.comment,i={apiKey:r.apiKey,...ue()},c=vu(s,t,l,a,n,o);return K.post($.VERSIONING_STATUS,c,{headers:i})},K1=async(t,s)=>{const a="CREATE_VERSION",n=s.operations,o=Ue(n,n.versioningStep4Report,t,a);return K.post($.VERSIONING_STATUS_REPORT,o).then(r=>r.data)},H1=async(t,s,a,n,o)=>{const r=s.session.siteData.instance,l=s.operations,i=Nu(r,l,t,a,n,o),c={apiKey:r.apiKey,...ue()};return K.post($.VERSIONING,i,{headers:c})},ir=async(t,s,a,n,o)=>{const r=s.session.siteData.instance,l=s.operations,i=Pu(s,l,t,a,n,o),c={apiKey:r.apiKey,...ue()};return K.post($.VERSIONING_FETCH,i,{headers:c})},z1=async(t,s,a,n,o)=>{const r=s.session.siteData.instance,l=s.operations,{instanceId:i,uniqueId:c}=s.operations,d=Iu(r,l,t,a,n,o),u={instanceId:i,uniqueId:c,apiKey:r.apiKey,...ue()};return K.post($.VERSIONING_RESTORE,d,{headers:u})},Al=async(t,s,a,n)=>{const o=s.operations,r=Ue(o,a,t,n);return K.post($.VERSIONING_REPORT,r).then(l=>l.data)},q1=_.createAsyncThunk("operations/versioningStep4Process",async(t,{getState:s})=>{const a=s().operations.versioning.operation;return a==="CREATE_VERSION"?B1(t,s(),"VERSIONING","STATUS","CREATE"):a==="RESTORE_VERSION"?ir(t,s(),"VERSIONING","STATUS","RESTORE"):ir(t,s(),"VERSIONING","FETCH","")}),ss=_.createAsyncThunk("operations/versioningStep4Report",async(t=1,{getState:s})=>s().operations.versioning.operation==="CREATE_VERSION"?K1(t,s()):Al(t,s(),s().operations.versioningStep4Report,"FETCH_VERSION")),G1=_.createAsyncThunk("operations/versioningStep5Process",async(t,{getState:s})=>s().operations.versioning.operation==="CREATE_VERSION"?H1(t,s(),"VERSIONING","CREATE",""):z1(t,s(),"VERSIONING","RESTORE","")),as=_.createAsyncThunk("operations/versioningStep5Report",async(t=1,{getState:s})=>{const a=s().operations.versioning.operation==="CREATE_VERSION"?"CREATE_VERSION":"RESTORE_VERSION";return Al(t,s(),s().operations.versioningStep5Report,a)}),Za=_.createAsyncThunk("operations/deleteVersioningStep4Record",async({id:t,isDeleted:s},{getState:a})=>{const n=a().operations,o=n.versioning.operation,r=cs(n,t,s,o);return K.post($.DELETE_VERSIONING_RECORD,r).then(l=>l.data)}),Xa=_.createAsyncThunk("operations/restoreSingleVersion",async({url:t,version:s},{getState:a})=>{const n=a(),o=n.session.siteData.instance,{instanceId:r,uniqueId:l}=n.operations,i={apiKey:o.apiKey,...ue()},c={urls:[t],versionLabel:s.versionLabel,instance:o.environment,instanceId:r,uniqueId:l};return K.post($.RESTORE_SINGLE_VERSION,c,{headers:i}).then(d=>d.data)}),J1={[ss.pending]:t=>{t.versioningStep4Report.data.length>0&&R.startLoader(t)},[ss.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.versioningStep4Report={...t.versioningStep4Report,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.versioningStep4Report)})},[ss.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[as.pending]:t=>{t.versioningStep5Report.data.length>0&&R.startLoader(t)},[as.fulfilled]:(t,s)=>{var a,n;R.stopLoader(t),R.checkForEmptyData(s.payload)||(t.versioningStep5Report={...t.versioningStep5Report,isInitialised:!0,data:((a=s.payload)==null?void 0:a.data)||[],pagination:R.createPagination((n=s.payload)==null?void 0:n.pagination,t.versioningStep5Report)})},[as.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Xa.pending]:t=>{R.startLoader(t)},[Xa.fulfilled]:(t,s)=>{const a=t.versioningStep4Report.data;for(const n in a)if(a[n].sourceDocument===s.payload.sourceDocument)for(const o in s.payload.versions){const r=s.payload.versions[o];(r.isRestored||r.error)&&(a[n].versions[o]=r)}R.stopLoader(t)},[Xa.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message},[Za.pending]:t=>{R.startLoader(t)},[Za.fulfilled]:(t,s)=>{R.stopLoader(t);const{success:a,processUrlCount:n,deletedItems:o}=s.payload;if(a){const r=o.map(l=>l._id);t.versioningStep4Report.data=t.versioningStep4Report.data.map(l=>({...l,isDeleted:r.includes(l._id)})),t.versioningStep4Report.pagination.processUrlCount=n}},[Za.rejected]:(t,s)=>{R.stopLoader(t),t.error=s.error.message}},cr={operation:null,currentStep:1,idGenerationStep:-1,navDirection:"",configurableSteps:[],clearActions:{},clearQueue:[],inputUrls:null,processUrls:[],statusReport:Pe(),previewReport:Pe(),publishReport:Pe(),fragmentSourceReport:Pe(),fragmentReport:Pe(),checkInOutReport:Pe(),cachePurgeReport:Pe(),versioningReport:Pe(),versioningStep4Report:Pe(),versioningStep5Report:Pe(),copyMoveStatusReport:{...Pe(),stats:{totalShouldAppend:0,totalShouldOverride:0,totalNeedConfirmation:0}},copyMoveReport:Pe(),exportListReport:Pe(),blockReport:Pe(),copyMove:{action:""},deactivationReport:Pe(),pageIndexingReport:Pe(),fragmentOptions:{forcePreview:!1,targetHost:Cs.PREVIEW},fragmentRefReport:Pe(),bulkContentUpdateReport:{...Pe(),filters:{},search:"",stats:{},pagination:{pageSize:20,currentPage:1,totalPages:0,totalItems:0}},bulkContentUpdateDetails:{projectStatus:"",projectState:""},fragmentRefOptions:{scanLevel:!1},versioning:{operation:"",comment:"",subOperation:""},helixlogs:{urls:"",users:"",operations:"",dateRange:{}},checkInOut:{operation:"",comment:""},exportListOptions:{getFranklinStatus:!1,includeAllChild:!1},deactivation:{operation:""},pageIndexing:{operation:""},blocks:{searchType:"global",stats:[]},showLockedBy:!1,unifiedOps:{statusOperation:!0,previewOperation:!1,publishOperation:!1,unPreviewOperation:!1,unPublishOperation:!1,includeSharepoint:!1,includeFranklin:!0,franklinHost:"hlx.page",includeChild:!1,includeNestedChild:!1,includeFragments:!1,includeNestedFragments:!1,forcePreview:!1},processingStatus:"none",uniqueId:null,instanceId:null,source:"",team:"",comment:"",currentJob:null,isLoading:!1,loadingMessage:{header:"",body:""},error:"",forceOperation:!1},Dl=_.createSlice({name:"operations",initialState:Ae(cr),reducers:{initOperation(t,s){t.currentJob===null&&(t.idGenerationStep=s.payload.idGenerationStep),"prepUnifiedOps"in s.payload&&R.configureNextSteps(t)},nextStep(t){t.currentStep+=1,t.navDirection="next",t.currentStep===t.idGenerationStep&&R.generateUniqueIdAndInstanceId(t);for(let s in t.clearActions){const a=t.clearActions[s];if(t.currentStep==s&&!t.clearQueue.includes(a)){t.clearQueue.push(a),console.debug(`${t.instanceId}: ${a} pushed to queue - ${JSON.stringify(t.clearQueue)}`);break}}},prevStep(t){const s=R.removeClearActionFromCurrentStep(t);s&&(eo({...t,clearQueue:[s]}),console.debug(`${t.instanceId}: ${s} removed from queue - ${JSON.stringify(t.clearQueue)}`)),t.currentStep>1&&(t.currentStep-=1),t.navDirection="prev"},setCurrentStep(t,s){R.setCurrentStep(t,s.payload)},setIdGenerationStep(t,s){t.idGenerationStep=s.payload},startLoader(t,s){R.startLoader(t,s.payload)},updateLoader(t,s){R.updateLoader(t,s.payload)},stopLoader(t){R.stopLoader(t)},setClearActions(t,s){t.clearActions=s.payload||{}},updateClearActionsForJob(t){const s=R.removeClearActionFromCurrentStep(t);s&&console.debug(`${t.instanceId}: Job created. ${s} removed from queue - ${JSON.stringify(t.clearQueue)}`)},setInputUrls(t,s){t.inputUrls=s.payload},setProcessUrls(t,s){t.processUrls=s.payload},setPageSize(t,s){const{pageSize:a,reportKey:n}=s.payload;t[n].pagination.pageSize=a},setSearch(t,s){const{search:a,reportKey:n}=s.payload;t[n].search=a},generateUniqueIdAndInstanceId(t){R.generateUniqueIdAndInstanceId(t)},setUniqueIdAndInstanceId(t,s){t.instanceId=s.payload.instanceId,t.uniqueId=s.payload.uniqueId},setSortKey(t,s){const{sortKey:a,sortOrder:n,reportKey:o}=s.payload;a!==t[o].sort.key?t[o].sort={key:a,order:n||"asc"}:t[o].sort.order=n||t[o].sort.order==="asc"?"desc":"asc"},setProcessingStatus(t,s){t.processingStatus=s.payload},setWriteConfirmValues(t,s){t.source=s.payload.source,t.team=s.payload.team,t.comment=s.payload.comment},setCurrentJob:(t,s)=>{const a=s.payload;if(t.currentJob=a,t.instanceId=a.instanceId,t.uniqueId=a.uniqueId,a.operation==="CHECKIN"){const n={"CHECKIN-STATUS":"checkin","CHECKOUT-STATUS":"checkout","DISCARD-STATUS":"discard_checkout"};t.checkInOut.operation=n[a.currentStep],R.setCurrentStep(t,4)}else a.operation==="VERSIONING"?(t.versioning.operation=`${a.nextStep}_VERSION`,R.setCurrentStep(t,4)):R.setCurrentStep(t,3)},clearReport(t,s){const a=s.payload;t[a]=Pe()},resetOperations(t){return eo(t),Ae(cr)},setVersioningOption(t,s){t.versioning={...t.versioning,...s.payload}},setHelixLogsOption(t,s){t.helixlogs={...t.helixlogs,...s.payload}},setFragmentOptions(t,s){t.fragmentOptions={...t.fragmentOptions,...s.payload}},setFragmentRefOptions(t,s){t.fragmentRefOptions={...t.fragmentRefOptions,...s.payload}},setCheckInOutOptions(t,s){t.checkInOut={...t.checkInOut,...s.payload}},setCopyMoveAction(t,s){t.copyMove.action=s.payload},clearCopyMoveStatusReport(t){t.copyMoveStatusReport={...Pe(),stats:{totalShouldAppend:0,totalShouldOverride:0,totalNeedConfirmation:0}}},clearBulkContentUpdateReport(t){t.bulkContentUpdateReport={...Pe(),search:"",stats:{},pagination:{pageSize:20,currentPage:1,totalPages:0,totalItems:0}}},setExportList(t,s){t.exportListOptions={...t.exportListOptions,...s.payload}},setForceOperation(t,s){t.forceOperation=s.payload},setDeactivationOptions(t,s){t.deactivation={...t.deactivation,...s.payload}},setPageIndexingOptions(t,s){t.pageIndexing={...t.pageIndexing,...s.payload}},setBlocksOptions(t,s){t.blocks={...t.blocks,...s.payload}},setUnifiedOps(t,s){t.unifiedOps={...t.unifiedOps,...s.payload},R.configureNextSteps(t)}},extraReducers:{...Ju,...F1,...O1,...M1,...N1,...g1,...J1,...C1,...E1,...y1,...h1,...s1,..._1,...V1,...P1,...R1,...l1}}),W1=Dl.reducer,{initOperation:Y1,nextStep:Ee,prevStep:he,setCurrentStep:Vx,setIdGenerationStep:Bx,startLoader:Ct,updateLoader:Ca,stopLoader:ys,setClearActions:Z1,updateClearActionsForJob:X1,setInputUrls:la,setProcessUrls:os,updateSelectedSite:Kx,generateUniqueIdAndInstanceId:Hx,setUniqueIdAndInstanceId:zx,setPageSize:Le,setSortKey:le,setProcessingStatus:Qa,setWriteConfirmValues:Q1,setCurrentJob:ep,clearReport:Je,resetOperations:Ol,setVersioningOption:ja,setCheckInOutOptions:tp,setFragmentOptions:dr,setFragmentRefOptions:sp,setCopyMoveAction:Ul,clearCopyMoveStatusReport:ap,setExportList:ur,setDeactivationOptions:np,setHelixLogsOption:Ks,setForceOperation:No,setBlocksOptions:pr,setPageIndexingOptions:op,setUnifiedOps:qx,clearBulkContentUpdateReport:Gx,setSearch:rp}=Dl.actions,en=_.createAsyncThunk("redirects/performSearch",async({source:t,destination:s})=>t&&s?Array.from({length:150}).map((a,n)=>({_num:n+1,src:`uk/customer-success-stories/tendam-case-study-${n}`,dst:`https://main--gwp-playground--adobecom.hlx.page/uk/customer-success-stories/tendam-case-study-${n}`})):[]),tn=_.createAsyncThunk("redirect/saveRredirect",async({formValues:{redirectUrl:t},tenant:s})=>await K.post(`${$.REDIRECTION}/${s}`,t,{headers:Se()})),lp=t=>{t.isLoading=!0},wl=t=>{t.isLoading=!1},ip=t=>{wl(t),t.error="Some error occured"},cp=_.createSlice({name:"redirects",initialState:{isLoading:!1,searchResults:ct.cloneDeep(ko)},reducers:{},extraReducers:t=>{t.addCase(en.pending,s=>{s.isLoading=!0}).addCase(en.fulfilled,(s,a)=>{s.searchResults={...s.searchResults,isInitialised:!0,data:a.payload||[],pagination:{...s.searchResults.pagination,totalPages:3,totalItems:50}},s.isLoading=!1}).addCase(en.rejected,s=>{s.isLoading=!1}).addCase(tn.pending,lp).addCase(tn.fulfilled,wl).addCase(tn.rejected,ip)}}),dp=cp.reducer,sn=_.createAsyncThunk("session/fetchInstance",async t=>K.get(`${$.LOCALES_BY_ID}?path=${t}`,{headers:ue()}).then(s=>s.data)),up={siteData:null,isLoading:!1,error:""},pp=t=>{t.isLoading=!0},Ml=t=>{t.isLoading=!1},hp=t=>{Ml(t),t.error="Some error occured"},$l=_.createSlice({name:"session",initialState:up,reducers:{clearInstance:t=>{t.siteData=null}},extraReducers:t=>{t.addCase(sn.pending,pp).addCase(sn.fulfilled,(s,a)=>{s.siteData=a.payload||null,Ml(s)}).addCase(sn.rejected,hp)}}),fp=$l.reducer,{clearInstance:mp}=$l.actions,$n=_.createAsyncThunk("user/getPermissions",async()=>{const t=Se();return K.post($.GET_USER_PERMISSIONS,null,{headers:t}).then(s=>s.data.data)}),gp={sites:[],status:"idle",error:null},xp=_.createSlice({name:"user",initialState:gp,reducers:{},extraReducers:t=>{t.addCase($n.pending,s=>{s.status="loading"}).addCase($n.fulfilled,(s,a)=>{s.status="succeeded",s.sites=a.payload}).addCase($n.rejected,(s,a)=>{s.status="failed",s.error=a.error.message,de("There was an error while fetching user permission.",{variant:"error"})})}}),bp=xp.reducer,Cp={key:"local",storage:_i},jp={key:"session",storage:Ai},vp=_.combineReducers({local:Wn.persistReducer(Cp,wd),session:Wn.persistReducer(jp,fp),config:mu,user:bp,operations:W1,jobs:xu,monitoring:Xu,localization:ju,redirects:dp,[Ls.reducerPath]:Ls.reducer}),ls=_.configureStore({reducer:vp,middleware:t=>t({serializableCheck:!1}).concat(Ls.middleware)});Ti.setupListeners(ls.dispatch);const Po=Wn.persistStore(ls),yp=()=>{Po.purge()},Sp=Object.freeze(Object.defineProperty({__proto__:null,default:ls,persistor:Po,resetLocalStorage:yp,store:ls},Symbol.toStringTag,{value:"Module"})),{VITE_ENABLE_ANALYTICS:Ep,VITE_ANALYTICS_SUITE_ID:kp,VITE_ANALYTICS_URL:Rp}={VITE_DATA_ENGINE_URL:"https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",VITE_BATCH_PROCESSING_THRESHOLD:"25",VITE_MSAL_CLIENT_ID:"45bf0513-84c8-4764-9119-987f082543a7",VITE_MSAL_TENANT_ID:"fa7b1b5a-7b34-4387-94ae-d2c178decee1",VITE_MSAL_ROOT_KEY:"msal.token.keys.45bf0513-84c8-4764-9119-987f082543a7",VITE_NAKSHA_API_URL:"https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",VITE_NAKSHA_API_KEY:"milostudioservice",VITE_ENABLE_ANALYTICS:"true",VITE_ANALYTICS_SUITE_ID:"adbdocauthqa",VITE_ANALYTICS_URL:"https://sstats.adobe.com/",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};class ta{constructor(){return ta.instance||(this.isAnalyticsEnabled=this.validate(),this.isAnalyticsEnabled&&this.init(),ta.instance=this),ta.instance}validate(){return Ep!=="true"?!1:typeof window.s_gi!="function"?(console.error("Analytics library not loaded"),!1):!0}init(){this.Analytics=window.s_gi(kp),this.Analytics.trackingServerSecure=Rp,this.initEvents()}initEvents(){document.addEventListener(cn.TRACK,this.track.bind(this)),document.addEventListener(cn.LINK_TRACK,this.trackLink.bind(this))}setCommonParams(){this.Analytics.eVar20=location.href,this.Analytics.pageName=F.getPageName()}track(s){try{const{param:a={}}=s.detail;this.setCommonParams(),this.Analytics.eVar1=(a==null?void 0:a.emailAddress)??"",typeof window.getNewRepeat=="function"?this.Analytics.eVar2=window.getNewRepeat(Od):this.Analytics.eVar2="",this.Analytics.t(),delete this.Analytics.eVar2}catch(a){console.error("Error in tracking",a)}}trackLink(s){try{const{param:a={}}=s.detail,{type:n=Dd.CUSTOM_LINK,name:o="",...r}=a;this._addAnalyticsEvar(r),this.setCommonParams(),this.Analytics.tl(!0,n,this._sanitize(o)),this._deleteAnalyticsEvar(r)}catch(a){console.error("Error in tracking link",a)}}_sanitize(s){return s.includes(" ")?s.replace(/\s+/g,"-").toLowerCase():s.toLowerCase()}_addAnalyticsEvar(s){Object.keys(s).length>0&&Object.entries(s).forEach(([a,n])=>{const o=tr[a];o&&this._isValidValue(n)&&(this.Analytics[o]=n)})}_deleteAnalyticsEvar(s){Object.keys(s).length>0&&Object.keys(s).forEach(a=>{const n=tr[a];n&&delete this.Analytics[n]})}_isValidValue(s){return!!(typeof s=="string"&&s.trim()!==""||Array.isArray(s)&&s.length>0)}}new ta;function Lp(t){const s=new CustomEvent(cn.TRACK,{detail:{param:t}});document.dispatchEvent(s)}function Oe(t){const s=new CustomEvent(cn.LINK_TRACK,{detail:{param:t}});document.dispatchEvent(s)}const Np=(t,s)=>({token:void 0,account:{},recentFiles:[],locales:tu,activities:eu,workflowStats:au,projectImages:su,projectDocs:[],status:{},activeWS:"home",sites:[],isLoading:!1,error:null,defaultTenant:{},profile:{},isProfileAvailable:!0,folderPath:[],showNotification:!1,notificationDetails:{},sitePermissions:[],setToken:a=>t({token:a},!1,"setToken"),setAccount:a=>t({account:a},!1,"setAccount"),setRecentFiles:a=>t({recentFiles:a},!1,"setRecentFiles"),setLocales:a=>t({locales:a},!1,"setLocales"),setActivities:a=>t({activities:a},!1,"setActivities"),setWorkflowStats:a=>t({workflowStats:a},!1,"setWorkflowStats"),setProjectImages:a=>t({projectImages:a},!1,"setProjectImages"),setProjectDocs:a=>t({projectDocs:a},!1,"setProjectDocs"),setStatus:a=>t({status:a},!1,"setStatus"),setActiveWS:a=>t({activeWS:a},!1,"setActiveWS"),setShowNotification:a=>t({showNotification:a},!1,"setShowNotification"),setNotificationDetails:a=>t({notificationDetails:a},!1,"setNotificationDetails"),getSites:async a=>{try{t({isLoading:!0});const n=await Kd(a);t({sites:n,isLoading:!1});const{getProfile:o}=s();o(a)}catch(n){console.error(n.message),t({error:n.message,isLoading:!1})}},getPermissions:async a=>{try{t({isLoading:!0});const{sites:n}=s(),o={};n.map(i=>{var d;(d=i==null?void 0:i.pathPrefix)!=null&&d.replace("/","")&&(o[i.value]=i)});const{permissionStatus:r,permittedSites:l}=await Xd(a,o);t({sites:l,sitePermissions:r,isLoading:!1})}catch(n){console.error(n.message),t({error:n.message,isLoading:!1})}},getProfile:async a=>{try{t({isLoading:!0});const n=await Hd(a),{sites:o}=s(),r=o.find(l=>l.value===n.daDefaultTenant);t({isLoading:!1,profile:n,defaultTenant:r}),F.isDASurface()&&ls.dispatch(nr({isAdmin:n==null?void 0:n.isAdmin,name:n==null?void 0:n.name,email:n==null?void 0:n.email})),Lp(n)}catch(n){n.message==="Profile Not Available"&&(t({isProfileAvailable:!1}),t({error:n.message}))}},createProfile:async(a,n)=>{try{const{sites:o}=s(),r=o.find(c=>c.label===a);t({isLoading:!0});const l=await zd(r.value,n),i=o.find(c=>c.value===l.daDefaultTenant);t({isLoading:!1,profile:l,defaultTenant:i}),t({isProfileAvailable:!0}),F.isDASurface()&&ls.dispatch(nr({isAdmin:l==null?void 0:l.isAdmin,name:l==null?void 0:l.name,email:l==null?void 0:l.email}))}catch(o){console.error("Profile Data Not Availabble",o),t({error:o.message,isProfileAvailable:!1})}},updateProfile:async(a,n)=>{try{t({isLoading:!0});const{sites:o}=s();if(!a||!n)return;const r=await qd(a,n);t({isLoading:!1,profile:r});const l=o.find(i=>i.value===r.defaultTenant);t({defaultTenant:l,isProfileAvailable:!0})}catch(o){console.error("Profile Data Not Availabble",o),t({error:o.message,isProfileAvailable:!1})}},getFolderPath:async(a,n,o="")=>{try{const{defaultTenant:r}=s();t({isLoading:!0});const l=`${r.pathPrefix}/${o}`;let i=await Gd(a.value,n,l);i&&i.length&&(i=i.map(c=>c.replace(`${r.pathPrefix}/`,""))),t({folderPath:i,isLoading:!1})}catch(r){console.error(r.message),t({error:r.message,isLoading:!1})}},createPage:async(a,n,o="",r)=>{try{t({isLoading:!0});const l=await Jd(a.value,n,o,`${r}.docx`);t({showNotification:!0,isLoading:!1,notificationDetails:{type:l.type,message:l.message,showButton:!0,btnText:"open",clickHandler:()=>{window.open(l.data.webUrl),t({showNotification:!1})}}})}catch(l){console.debug("error",l),t({isLoading:!1}),t({showNotification:!0,notificationDetails:{type:"error",message:l.message,showButton:!1}})}}}),ce=Kr(Hr(Np)),Pp=Di({palette:{accent:{main:"#3B63FB"}}});const Ke=({variant:t="indeterminate",value:s=0})=>e.jsxs("div",{className:"spinner-background",children:[e.jsx("div",{className:"spinner-track"}),e.jsx(Oi,{theme:Pp,children:e.jsx(ks,{color:"accent",size:64,variant:t,value:s})})]});const xe=({children:t,className:s="",disabled:a,variant:n="contained",color:o="accent",startIcon:r,endIcon:l,iconOnly:i,onClick:c})=>e.jsx(Ui,{className:`button variant-${n} col-${o} ${i&&"icon-only"} ${s}`,disabled:a,variant:n,startIcon:r,endIcon:l,disableElevation:!0,onClick:c,children:t});const Ds=({title:t,header:s,children:a,footer:n,maxWidth:o,open:r=!0,hasClose:l=!0,className:i="",highlightHeaderFooter:c=!1,canCloseOnEscapeKeyDown:d=!1,canCloseOnBackdropClick:u=!1,onClose:p=()=>{}})=>{const f=(g,C)=>{(d&&C==="escapeKeyDown"||u&&C==="backdropClick")&&p()};return e.jsx(wi,{open:r,maxWidth:o,onClose:f,children:e.jsxs("div",{className:`panther modal-container ${c&&"header-footer-highlights"} ${i}`,children:[t&&e.jsxs("div",{className:"modal-title-container",children:[e.jsx("h3",{children:t}),l&&e.jsx(Et,{onClick:p,children:e.jsx(Mi,{})})]}),s&&e.jsx("div",{className:"modal-header",children:s}),a&&e.jsx("div",{className:"modal-body",children:a}),n&&e.jsx("div",{className:"modal-footer",children:n})]})})};const we=({open:t,title:s,message:a,children:n,className:o="",confirmButtonLabel:r="Ok",confirmButtonIcon:l,confirmButtonColor:i="accent",confirmButtonVariant:c="contained",confirmButtonDisabled:d=!1,cancelButtonLabel:u="Cancel",cancelButtonIcon:p,cancelButtonColor:f="secondary",cancelButtonVariant:g="outlined",cancelButtonDisabled:C=!1,footerContent:b=null,maxWidth:x="xs",canCloseOnEscapeKeyDown:j,canCloseOnBackdropClick:y,onConfirm:v=()=>{},onCancel:L=()=>{},onClose:S=()=>{}})=>e.jsx(Ds,{open:t,title:s,hasClose:!1,maxWidth:x,className:`confirm-modal ${o} ${!s&&"only-body"}`,footer:e.jsxs(h.Fragment,{children:[b&&e.jsx("div",{className:"footer-content",children:b}),u&&e.jsx(xe,{className:"cancel-button",startIcon:p,color:f,variant:g,disabled:C,onClick:L,children:u}),e.jsx(xe,{className:"confirm-button",startIcon:l,color:i,variant:c,disabled:d,onClick:v,children:r})]}),canCloseOnEscapeKeyDown:j,canCloseOnBackdropClick:y,onClose:S,children:n||a}),Ip=({open:t,title:s,message:a,children:n,className:o,actionLabel:r="Ok",actionIcon:l,footerContent:i,maxWidth:c="xs",canCloseOnEscapeKeyDown:d=!0,canCloseOnBackdropClick:u=!0,onAction:p=()=>{},onClose:f=p})=>e.jsx(we,{open:t,title:s,message:a,className:o,confirmButtonLabel:r,confirmButtonIcon:l,cancelButtonLabel:null,footerContent:i,maxWidth:c,canCloseOnEscapeKeyDown:d,canCloseOnBackdropClick:u,onConfirm:p,onClose:f,children:n}),Tp=()=>{const{isLoading:t,configTemplates:s}=E.useSelector(i=>i.config),a=ce(i=>i.defaultTenant),[n,o]=h.useState(!1),r=ee.useNavigate(),l=E.useDispatch();return h.useEffect(()=>{!n&&a.value&&(console.debug(`Fetching configTemplates on ${s.length>0?"tenant change":"load"}`),l(Sa({tenant:a.value})).then(i=>{if(_.isFulfilled(i)){const c=i.payload.configTemplates;let d=(c==null?void 0:c.length)>0;d&&(d=c.every(u=>u.permission)),d||o(!0)}}))},[a.value,n,l]),e.jsxs(h.Fragment,{children:[e.jsx(ee.Outlet,{}),n&&e.jsx(Ip,{title:"Permissions not found!",message:"Uh oh... it looks like you do not have permissions to access the configurations.",actionLabel:"Back to Home",onAction:i=>r("/home")}),t&&e.jsx(Ke,{})]})},Fe=({className:t,children:s,disabled:a,tooltip:n,tooltipPlacement:o="top",onClick:r})=>e.jsx(na,{title:n,placement:o,enterDelay:640,arrow:!0,children:e.jsx(Et,{className:t,disabled:a,onClick:r,children:s})}),jn={"&.notistack-MuiContent":{borderRadius:10,"& .MuiSvgIcon-root":{color:"#fff",marginRight:8,transform:"translateY(-1px)"},"& .MuiButtonBase-root":{"& .MuiSvgIcon-root":{marginRight:"unset"}}}},_p=xn(ye.MaterialDesignContent)(()=>({...jn,"&.notistack-MuiContent-info":{backgroundColor:"#505050"}})),Ap=xn(ye.MaterialDesignContent)(()=>({...jn,"&.notistack-MuiContent-info":{backgroundColor:"#3B63FB"}})),Dp=xn(ye.MaterialDesignContent)(()=>({...jn,"&.notistack-MuiContent-success":{backgroundColor:"#05834E"}})),Op=xn(ye.MaterialDesignContent)(()=>({...jn,"&.notistack-MuiContent-error":{backgroundColor:"#D73220"}})),Up=({snackbarId:t})=>{const{closeSnackbar:s}=ye.useSnackbar();return e.jsx(Fe,{onClick:()=>s(t),children:e.jsx(Ps,{})})},wp=({children:t})=>e.jsx(ye.SnackbarProvider,{iconVariant:{info:e.jsx($i,{}),success:e.jsx(Fi,{}),error:e.jsx(Rt,{})},Components:{default:_p,info:Ap,success:Dp,error:Op},action:s=>e.jsx(Up,{snackbarId:s}),anchorOrigin:{vertical:"top",horizontal:"center"},children:t}),Mp=({children:t})=>e.jsx(E.Provider,{store:ls,children:e.jsx(Vi,{loading:null,persistor:Po,children:t})}),$p=(t,s)=>({searchResults:[],query:"",searchError:null,isSearchDropdownVisible:!1,noResult:!1,currentPage:1,size:10,totalPages:0,totalItems:0,type:"all",path:"",blocks:[],variations:[],allVariations:[],allBlocks:[],visibleModal:"",isLoading:!1,sortBy:"score",order:"desc",blockSearch:"",variationSearch:"",more:!1,setVisibleModal:a=>{t({visibleModal:a},!1,"setVisibleModal")},setVariations:a=>{t({variations:a},!1,"setVariations")},setPath:a=>{t({path:a},!1,"setPath")},setBlocks:a=>{t({blocks:a},!1,"setBlocks")},setType:a=>{t({type:a},!1,"setType")},setCurrentPage:a=>{t({currentPage:a},!1,"setCurrentPage")},setSize:a=>{t({size:a},!1,"setSize")},resetError:()=>{t({searchError:null},!1,"resetError")},setNoResult:a=>{t({noResult:a},!1,"setNoResult")},setQuery:a=>{t({query:a},!1,"setQuery")},setSearchDropdownVisible:a=>{t({isSearchDropdownVisible:a},!1,"setSearchDropdownVisible")},setSortBy:a=>{t({sortBy:a},!1,"setSortBy")},resetQuery:()=>{t({query:"",more:!1},!1,"resetQuery")},resetSearchResults:()=>{t({searchResults:[],more:!1})},searchStoreReset:()=>{t({searchResults:[],query:"",searchError:null,isSearchDropdownVisible:!1,noResult:!1,currentPage:1,size:10,totalPages:0,totalItems:0,type:"all",path:"",blocks:[],variations:[],allVariations:[],allBlocks:[],visibleModal:"",blockError:null,sortBy:"score",order:"desc",blockSearch:"",variationSearch:"",more:!1})},fetchSearchResults:async()=>{var a,n;try{t({isLoading:!0,searchResults:[],noResult:!1,searchError:null});const o=(a=ce.getState())==null?void 0:a.token,{value:r=""}=((n=ce.getState())==null?void 0:n.defaultTenant)??{};if(o&&r){const{hits:l}=await or(r,o,{query:s().query});t({searchResults:l}),l.length===0&&t({noResult:!0})}o||t({searchError:"token not present"}),r||t({searchError:"tenant not selected"}),t({isLoading:!1})}catch(o){console.error(o.message),t({searchError:o.message}),t({isLoading:!1})}},fetchSearchResultsAdvanced:async()=>{var a,n;try{t({isLoading:!0,searchResults:[],noResult:!1,searchError:null});const o=(a=ce.getState())==null?void 0:a.token,r=s().size,l=s().blocks,i=s().variations,c=s().path,{value:d=""}=((n=ce.getState())==null?void 0:n.defaultTenant)??{};if(o&&d){const{hits:u,total:p,more:f}=await or(d.toLowerCase(),o,{query:s().query,size:r,page:s().currentPage,type:s().type,order:s().order,sortBy:s().sortBy,...c&&c.length>0&&{path:c},...l&&l.length>0&&{blocks:l.join(",")},...i&&i.length>0&&{classes:i.join(",")}}),g=Math.ceil(p/r);t({searchResults:u,totalPages:g,totalItems:p,more:f}),u.length===0&&t({noResult:!0})}o||t({searchError:"token not present"}),d||t({searchError:"tenant not selected"}),t({isLoading:!1})}catch(o){console.error(o.message),t({searchError:o.message}),t({isLoading:!1})}},fetchBlocks:async()=>{var a,n;try{t({blockError:null});const o=(a=ce.getState())==null?void 0:a.token,{value:r=""}=((n=ce.getState())==null?void 0:n.defaultTenant)??{};if(o&&r){const l=await Zd(r.toLowerCase(),o);l.sort((i,c)=>i.localeCompare(c)),t({allBlocks:l})}o||t({blockError:"token not present"}),r||t({blockError:"tenant not selected"})}catch(o){console.error(o.message),t({blockError:o.message})}},fetchVariations:async()=>{var a,n;try{const o=(a=ce.getState())==null?void 0:a.token,r=s().blocks,{value:l=""}=((n=ce.getState())==null?void 0:n.defaultTenant)??{};if(o&&l&&r&&r.length>0){const i=await Qd(l.toLowerCase(),o,r.join(","));i.sort((c,d)=>c.localeCompare(d)),t({allVariations:i})}else t({allVariations:[]})}catch(o){console.error(o.message)}},resetFilters:()=>{t({blocks:[],variations:[],path:"",type:"all",allVariations:[],query:"",sortBy:"score",order:"desc",blockSearch:"",variationSearch:"",more:!1})},resetPagination:()=>{t({currentPage:1,totalPages:0,totalItems:0,more:!1})},toggleOrder:()=>{s().order==="desc"?t({order:"asc"}):t({order:"desc"})},setBlockSearch:a=>{t({blockSearch:a})},setVariationSearch:a=>{t({variationSearch:a})},setSearchKeys:(a,n)=>{t({[a]:n})}}),q=Kr(Hr($p)),hr=(t,s)=>{const[a,n]=h.useState(()=>{try{const r=window.sessionStorage.getItem(t);return r||(window.sessionStorage.setItem(t,s),s)}catch{return s}});return[a,r=>{window.sessionStorage.setItem(t,r),n(r)}]},Fp=()=>{const t=q(g=>g.searchStoreReset),[s,a]=h.useState(""),n=ee.useLocation(),o=ce(g=>g.setToken),r=Bi(Mt.USER_INACTIVITY_TIMEOUT),l=Ki(r),i=ce(g=>g.createProfile),c=ce(g=>g.getSites);ce(g=>g.sites);const d=E.useDispatch(),[u]=hr("da-token",null),[p]=hr("da-repo",null),f=async()=>{u&&p?(o(u),d(Fd(u)),await c(u),i(p,u),Oe({name:Be.SELECTED_TENANT,tenant:p})):console.log("Token or tenant not found")};return h.useEffect(()=>{f()},[u,p]),h.useEffect(()=>{l&&!r&&(u?o(u):console.error("Token expired or not found. User needs to log in again."))},[l,r]),h.useEffect(()=>{n.pathname!=="/search"&&s==="/search"&&t(),a(n.pathname)},[n.pathname]),e.jsx("div",{className:"w-full h-screen bg-gray-100 panther",children:e.jsx("main",{className:"bg-gray-100 h-full overflow-auto",children:e.jsx(ee.Outlet,{})})})};const Vp="https://da.live/#/adobecom",Bp="https://da.live/apps",Kp=["monitoring"],Hp={checkInCheckOut:"Check-in/Check-out","config-mgmt":"Configuration Management",exportlist:"Export List",cachePurge:"Cache Purge",pageIndexing:"Page Indexing",fragmentRef:"Fragment Reference",bulkContentUpdate:"Bulk Content Update"},Fl=()=>{const t=ce(r=>r.defaultTenant),s=ee.useLocation(),a=h.useMemo(()=>{const r=s.pathname.split("/");let l="";return r.filter(i=>i!=="").map(i=>(l+=`/${i}`,{label:Hp[i]||F.capitalize(i),path:Kp.includes(i)?null:l}))},[s.pathname]);if(a.length===0)return null;function n(){window.parent.location.href=Vp}function o(){window.parent.location.href=`${Bp}#${t==null?void 0:t.pathPrefix}`}return e.jsx("div",{className:"breadcrumbs-container",children:e.jsxs(Hi,{separator:e.jsx(co,{fontSize:"small"}),children:[e.jsx(ee.Link,{onClick:n,children:"Home"},"crumb_home"),(t==null?void 0:t.label)&&e.jsx(ee.Link,{onClick:o,children:t.label},"crumb_tenant"),a.map(r=>e.jsx(ee.Link,{className:`${!r.path&&"link-disabled"}`,to:r.path,children:decodeURI(r.label)},`crumb_${r.label.toLowerCase()}`))]})})};const We=({title:t,description:s,children:a,header:n,actions:o,footer:r,className:l="",showBreadcrumbs:i=!0})=>e.jsxs("div",{className:`page-container h-full overflow-y-hidden ${l}`,children:[e.jsxs("div",{className:"page-header",children:[i&&e.jsx(Fl,{}),n]}),e.jsxs("div",{id:"page-body",className:"page-body",children:[e.jsxs("div",{className:"title-panel",children:[e.jsxs("div",{className:"page-title",children:[e.jsx("h1",{children:t}),e.jsx("p",{children:s})]}),e.jsx("div",{className:"page-actions",children:o})]}),a]}),e.jsx("div",{className:"page-footer",children:r})]});const zp=({header:t,body:s,footer:a="",progress:n,canCancel:o=!1,onCancel:r=()=>{}})=>{const[l,i]=h.useState(!1),c=()=>{i(!1),r()};return h.useEffect(()=>{(n===void 0||n===-1)&&i(!1)},[n]),e.jsxs(Ds,{className:"progress-loader",hasClose:!1,title:t,footer:o&&l?e.jsxs("div",{className:"cancel-controls",children:[e.jsx("div",{children:"Are you sure you want to cancel?"}),e.jsxs("div",{children:[e.jsx(xe,{color:"secondary",onClick:d=>i(!1),children:"No"}),e.jsx(xe,{onClick:c,children:"Yes"})]})]}):e.jsx(xe,{disabled:!o,onClick:d=>i(!0),children:"Cancel"}),children:[e.jsx("div",{className:"progress-mid",children:s}),e.jsx("div",{className:"progress-bot",dangerouslySetInnerHTML:{__html:a}}),n!==void 0&&e.jsx(zr,{value:n,variant:n>-1?"determinate":"indeterminate"})]})};const Vl=({steps:t,currentStep:s})=>{const a=s-1;return e.jsx("div",{className:"progress-container",children:t.map((n,o)=>e.jsxs("div",{className:`step-container ${o<s&&"active"}`,children:[o>0&&e.jsx(co,{fontSize:"small"}),e.jsxs("div",{className:"step-indicator",children:[o<a&&e.jsx(is,{fontSize:"small"}),o===a&&e.jsx("div",{children:o+1})]}),e.jsx("div",{className:"step-name",children:n.name})]},o))})};Vl.propTypes={steps:te.arrayOf(te.shape({name:te.string,description:te.string})).isRequired,currentStep:te.number.isRequired};const He=({steps:t,idGenerationStep:s,clearActions:a,children:n,extraInitArgs:o={},className:r="",showBreadcrumbs:l=!0,onInitializationChange:i=()=>{}})=>{const{currentStep:c,instanceId:d,uniqueId:u,isLoading:p,loadingMessage:f,error:g,clearQueue:C}=E.useSelector(T=>T.operations),[b,x]=h.useState(!1),[j,y]=h.useState(null),[v,L]=h.useState(null),S=E.useDispatch(),{name:P,description:A}=t[c-1]||{},w=()=>{x(!1)},D=T=>{!v&&T&&L(T)},M=T=>{!j&&T&&y(T)};return h.useEffect(()=>{Object.keys(localStorage).filter(T=>T.startsWith("markedForClear")).forEach(T=>{const H=JSON.parse(localStorage.getItem(T));console.debug(`${H.instanceId}: Marked-for-clear found with key ${T}`),eo(H),localStorage.removeItem(T),console.debug(`${H.instanceId}: Cleared actions[${H.clearQueue}] and removed marked-for-clear from localStorage`)})},[]),h.useEffect(()=>{g&&de(g,{variant:"error"})},[g]),h.useEffect(()=>{if(!b)S(Y1({idGenerationStep:s,...o})),i(!0),x(!0);else return y(null),L(null),i(!1),()=>S(Ol())},[b,S]),h.useEffect(()=>{a&&!ct.isEmpty(a)&&S(Z1(a))},[a]),h.useEffect(()=>{if(C.length>0){const T=()=>{const H=`markedForClear-${d}`;localStorage.setItem(H,JSON.stringify({clearQueue:C,instanceId:d,uniqueId:u})),console.debug(`${d}: Added ${H} for clear actions: ${C} into localStorage`)};return window.addEventListener("unload",T),()=>window.removeEventListener("unload",T)}},[C]),h.useEffect(()=>{const T=H=>{H.preventDefault(),H.returnValue=""};for(let H in a)if(c==H)return window.addEventListener("beforeunload",T),()=>{window.removeEventListener("beforeunload",T)}},[c,a]),b?e.jsxs(We,{className:r,title:P,description:A,showBreadcrumbs:l,header:e.jsx(Vl,{currentStep:c,steps:t}),actions:e.jsx("div",{ref:M}),footer:e.jsx("div",{ref:D}),children:[n({currentStep:c,portals:{footer:v,actions:j},reInitialize:w}),p&&(f.header&&f.body?e.jsx(zp,{...f,onCancel:()=>S(Qa("stopped"))}):e.jsx(Ke,{}))]}):null},Bl=""+new URL("dropToUpload.svg",import.meta.url).href;const qp=()=>{const[t,s]=h.useState(""),[a,n]=h.useState(!1),[o,r]=h.useState(!1),[l,i]=h.useState(""),[c,d]=h.useState(""),[u,p]=h.useState(null),[f,g]=h.useState(!1),[C,b]=h.useState(!1),[x,j]=h.useState(""),[y,v]=h.useState(""),[L,S]=h.useState(""),P=ce(B=>{var ie;return(ie=B.defaultTenant)==null?void 0:ie.value}),A=E.useSelector(B=>B.operations.isLoading),w=B=>/[^a-zA-Z0-9- ]/.test(B),D=ee.useNavigate(),M=E.useDispatch(),{enqueueSnackbar:T}=ye.useSnackbar(),H=st({"file-upload-error":t}),z=async B=>{var k;const ie=B.type==="drop"?await((k=B.items[0])==null?void 0:k.getFile()):B[0];if(p(ie),ie&&ie.name.endsWith(".xlsx")){if(ie.size>Mt.UPLOAD_MAX_FILE_SIZE){s("File cannot exceed the limit of 20MB"),p(null);return}s(""),g(!1),await M(Va({selectedFile:ie})).unwrap().then(I=>{if((I==null?void 0:I.requestStatus)===$e.FULFILLED){T("File uploaded successfully",{variant:"success"});const{instanceId:Z,uniqueId:oe,s3KeyRef:Ce}=I;j(Z),v(oe),S(Ce),g(!0)}}).catch(I=>{T(I||"Unable to upload file",{variant:"error"})})}else s("Accepts only file.xlsx"),p(null)},V=(B,ie)=>{const k=(B==null?void 0:B.trim())==="",I=w(B),oe=ie==="project-name"?n:r;return k||I?(oe(!0),!1):(oe(!1),!0)},O=()=>{D("/bulkops/jobs/bulkContentUpdate")},N=async()=>{const B=V(l,"project-name"),ie=V(c,"jira-id");if(!u){s("Please select a file to upload");return}B&&ie&&u&&await M(Ba({projectName:l,tenant:P,instanceId:x,uniqueId:y,s3FileKey:L})).unwrap().then(k=>{(k==null?void 0:k.requestStatus)===$e.FULFILLED&&(b(!0),T("Project created successfully",{variant:"success"}))}).catch(k=>{T(k||"Unable to create project",{variant:"error"})})},J=()=>{var I;const B=((I=document==null?void 0:document.location)==null?void 0:I.href)??"",ie=F.isDASurface()&&!B.includes("localhost")?"/tools/da-apps/dist/static/files/reference.xlsx":"/static/files/reference.xlsx",k=document.createElement("a");k.href=ie,k.download="reference.xlsx",document.body.appendChild(k),k.click(),document.body.removeChild(k)},se=()=>{D({pathname:`/bulkops/jobs/bulkContentUpdate/${l}`,search:ee.createSearchParams({instanceId:x,uniqueId:y}).toString()})};return e.jsxs(We,{title:"Bulk Content Update",description:C?"Make site-wide content edits faster and simpler":"Find and replace specific text across the file",footer:!C&&e.jsx("div",{className:"flex justify-end px-8 py-3 shadow-sm",children:e.jsx(ae,{fillStyle:"fill",variant:"accent",onPress:N,children:e.jsx(je,{children:"Submit"})})}),children:[e.jsx("main",{id:"bulk-content-container",className:"page-content",children:e.jsx("div",{className:"h-[45vw] bg-white",children:C?e.jsxs("section",{className:"flex flex-col items-center justify-center h-full project-submitted-container",children:[e.jsx(gn,{}),e.jsx("h3",{className:"mt-4 text-2xl font-semibold",children:l}),e.jsx("h2",{className:"mt-4 text-2xl font-bold",children:"Created Successfully"}),e.jsxs("p",{children:["View the ",e.jsx("strong",{children:l})," project now in the Dashboard"]}),e.jsxs("div",{className:"flex gap-5 mt-6",children:[e.jsx(ae,{fillStyle:"outline",variant:"accent",onPress:O,children:"View Dashboard"}),e.jsx(ae,{fillStyle:"fill",variant:"accent",onPress:se,isDisabled:!x||!y,children:"Go to Project Details"})]})]}):e.jsxs("section",{id:"bulk-content-section",className:"flex p-5 md:p-8",children:[e.jsxs("div",{className:"w-1/2 px-5 md:p-8 project-details",children:[e.jsx("div",{className:"relative mb-5",children:e.jsx(Rs,{label:"Enter a Project name",value:l,onChange:B=>{i(B),n(w(B))},onBlur:()=>V(l,"project-name"),isInvalid:a,errorMessage:"Enter valid project name",maxLength:50})}),e.jsx("div",{className:"relative mb-5",children:e.jsx(Rs,{label:"Enter Jira ID",value:c,onChange:B=>{d(B),r(w(B))},onBlur:()=>V(c,"jira-id"),isInvalid:o,errorMessage:"Enter a valid Jira ID",maxLength:50})}),e.jsx(qr,{onDrop:z,UNSAFE_className:H,children:e.jsx(uo,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:Bl,alt:"Drop files here"}),e.jsx(Is,{children:"Drag and drop your file"}),e.jsx(Ts,{children:"Or, select a file from your computer"}),e.jsx(_s,{children:e.jsx(Gr,{onSelect:z,acceptedFileTypes:".xlsx",children:e.jsx(ae,{variant:"accent",children:"Browse files"})})})]})})}),e.jsx("p",{className:`mt-4 text-center text-gray-600 ${t&&"error-message"}`,children:t||(u&&f?`Selected file: ${u.name}`:"Accepts only file.xlsx")})]}),e.jsx("div",{className:"flex items-center w-1/2 p-5 md:p-8",children:e.jsxs("p",{children:[e.jsx("button",{onClick:J,className:"text-accent",children:e.jsx("strong",{children:"Download Reference .xlsx"})})," ","file for the content update"]})})]})})}),A&&e.jsx(Ke,{})]})},Kl=(t=null)=>{const s=ee.useLocation(),a=ee.useNavigate();h.useEffect(()=>{(t||[s.pathname]).includes(s.pathname)&&!F.isDASurface()&&a("/bulkops")},[t,s.pathname])};const m=({val:t,num:s,className:a="",size:n="auto",stick:o="none",color:r="default",align:l="center",emptyText:i="n/a"})=>e.jsx("td",{className:`size-${n} stick-${o}`,children:e.jsx("div",{className:`dyna-label ${a} color-${r} text-align-${l}`,children:t||(s==null?void 0:s.toString())||i})}),ge=({val:t,tz:s,...a})=>e.jsx(m,{val:F.formatDate(t,s),...a}),fr=""+new URL("sort-asc.svg",import.meta.url).href,mr=""+new URL("sort-desc.svg",import.meta.url).href,Gp=""+new URL("unsorted.svg",import.meta.url).href;const Jp={unsorted:Gp,"sort-asc":fr,"sort-1":fr,"sort-desc":mr,"sort--1":mr},_e=({label:t,component:s,sort:a,sortKey:n,size:o="auto",align:r="center",stick:l="none",className:i="",rowSpan:c=1,colSpan:d=1,onSort:u=()=>{}})=>{const p=n===(a==null?void 0:a.key)?`sort-${a==null?void 0:a.order}`:"unsorted";return e.jsx("th",{className:`${i} hcell-root size-${o} stick-${l}`,rowSpan:c,colSpan:d,children:e.jsx("div",{className:`hcell align-${r}`,children:n?e.jsxs("div",{className:"hcell-clickable",onClick:f=>u(n),children:[e.jsx("span",{children:t||s}),e.jsx("img",{src:Jp[p],alt:""})]}):t||s})})};const Wp=({toolbar:t,pagination:s})=>{var a,n;return e.jsxs("div",{className:"dyna-table-container dyna-skeleton-container",children:[((a=t==null?void 0:t.type)==null?void 0:a.name)==="DynaToolbar"&&t,e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:Array.from({length:5}).map((o,r)=>e.jsx("th",{children:e.jsx(Ie,{})},`dyna_skel_head_${r}`))})}),e.jsx("tbody",{children:Array.from({length:5}).map((o,r)=>e.jsx("tr",{children:Array.from({length:5}).map((l,i)=>e.jsx("td",{children:e.jsx(Ie,{})},`dyna_skel_brow_${r}_cell_${i}`))},`dyna_skel_brow_${r}`))})]})}),((n=s==null?void 0:s.type)==null?void 0:n.name)==="DynaPagination"&&e.jsxs("div",{className:"dyna-pagination-container",children:[e.jsx("div",{className:"dyna-pagination-left",children:e.jsx(Ie,{})}),e.jsx("div",{className:"dyna-pagination-mid",children:e.jsxs("div",{className:"dyna-pagination-mid-skeleton",children:[e.jsx(Ie,{variant:"circular",width:28,height:28}),e.jsx(Ie,{variant:"circular",width:28,height:28}),e.jsx(Ie,{variant:"circular",width:28,height:28}),e.jsx(Ie,{variant:"circular",width:28,height:28}),e.jsx(Ie,{variant:"circular",width:28,height:28})]})}),e.jsx("div",{className:"dyna-pagination-right",children:e.jsx(Ie,{})})]})]})};const ne=({header:t,children:s,sort:a,toolbar:n=null,pagination:o=null,isLoading:r=!1,isEmpty:l=!1,enableXScroll:i=!0,useAltHeaderBg:c=!1,className:d="",emptyTableMessage:u="No relevant records found!",onSort:p=()=>{}})=>{const f=h.useMemo(()=>{if(!t)return null;if(h.isValidElement(t))return t;const{columns:g,categories:C}=t,b=(a==null?void 0:a.key)||"",x=[],j=[];let y="asc";if(a!=null&&a.order&&(typeof a.order=="number"?y=a.order===-1?"asc":"desc":y=a.order),C&&C.length>0){let v=0;C.forEach(L=>{let S=0;for(;S<L.span;){const P=g[v];L.label?(S===0&&x.push({...L,className:"header-category",colSpan:L.span}),j.push({...P,className:"header-under-category"})):x.push({...P,rowSpan:2}),S+=1,v+=1}})}else g.forEach(v=>{x.push({...v})});return e.jsxs("thead",{children:[e.jsx("tr",{children:x.map((v,L)=>e.jsx(_e,{sort:{key:b,order:y},...v,onSort:p},`hcell-1-${L}-${v.label}`))}),j.length>0&&e.jsx("tr",{children:j.map((v,L)=>e.jsx(_e,{sort:{key:b,order:y},...v,onSort:p},`hcell-1-${L}-${v.label}`))})]})},[t,a]);return r?e.jsx(Wp,{toolbar:n,pagination:o}):e.jsxs("div",{className:`dyna-table-container ${d}`,children:[n,e.jsxs("div",{className:`table-container ${l&&"dyna-empty-table"} ${i&&"dyna-x-scroll"} ${c&&"alt-header"}`,children:[e.jsxs("table",{children:[f,s]}),l&&u&&e.jsx("div",{className:"dyna-empty-msg",children:u})]}),o]})};const un=({className:t,label:s,value:a="",options:n,error:o,size:r="small",variant:l="contained",unselectedOption:i="None",disabledOption:c,labelPosition:d="top",onChange:u})=>e.jsxs("div",{className:`select-root label-pos-${d} ${t}`,children:[s&&e.jsx("div",{className:"select-label",children:s}),e.jsxs(zi,{children:[e.jsxs(qi,{className:`variant-${l} size-${r} ${o&&"select-error"} `,value:a,displayEmpty:!0,inputProps:{"aria-label":"Title Label"},IconComponent:Gi,onChange:u,children:[i&&e.jsx(Tn,{value:"",disabled:!0,children:e.jsx("em",{children:i})}),c&&e.jsx(Tn,{value:"disabled",disabled:!0,children:c}),n.map(p=>e.jsx(Tn,{value:p.value||p.id,children:p.label},p.value||p.id))]}),o&&e.jsx("div",{className:"select-error-msg",children:o})]})]}),fe=({currentPage:t,pageSize:s,totalPages:a,totalItems:n,pageSizes:o=[100,250,500],onPageChange:r,onPageSizeChange:l})=>{if(n===0)return null;const i=c=>{const d=parseInt(c.target.value);l(d,Math.min(t,Math.ceil(n/d)))};return e.jsxs("div",{className:"dyna-pagination-container",children:[e.jsx("div",{className:"dyna-pagination-left",children:e.jsx(un,{label:"Records per page",value:s,options:o.map(c=>({value:c,label:c})),variant:"outlined",unselectedOption:null,labelPosition:"side",onChange:i})}),e.jsx("div",{className:"dyna-pagination-mid",children:a>1&&e.jsx(Ji,{"data-testid":"pagination",page:t,count:a,showFirstButton:!0,showLastButton:!0,siblingCount:2,boundaryCount:0,onChange:(c,d)=>r(d)})}),e.jsxs("div",{className:"dyna-pagination-right",children:[(t-1)*s+1," -"," ",Math.min(t*s,n)," of ",n," items"]})]})};const me=({title:t,count:s,countUnit:a="record",className:n="",children:o})=>{const r=h.useMemo(()=>{let l="";return t?l=t:s!==void 0&&(l=`${s} ${a}${s>1?"s":""}`),l?e.jsxs("div",{className:"title-lbl",children:[e.jsx("div",{className:"lbl-text",children:l}),e.jsx(Ie,{})]}):null},[t,s,a]);return e.jsxs("div",{className:`dyna-toolbar ${n}`,children:[r,o]})};const Es={full:" . l2",max:" . l5",min:" . l4",_64:" . lz lbA"},De={_8:" . Ac Bc yc zc",_16:" . Ae Be ye ze",x8:" . yc zc",x16:" . ye ze",y4:" . Ab Bb",y8:" . Ac Bc",y16:" . Ae Be",start8:" . yc",start16:" . ye",start24:" . yg",top8:" . Ac",top16:" . Ae",top24:" . Ag",end8:" . zc",end16:" . ze",end24:" . zg",bottom8:" . Bc",bottom16:" . Be",bottom24:" . Bg"},pn={width0:" . ua va sa ta",colorTransparent:" . ca"},kt=({children:t,tooltip:s,UNSAFE_className:a,...n})=>s?e.jsxs(Jr,{children:[e.jsx(ae,{fillStyle:"outline",UNSAFE_className:`${pn.width0} ${a}`,...n,children:t}),e.jsx(Wr,{children:s})]}):e.jsx(ae,{fillStyle:"outline",UNSAFE_className:`${pn.width0} ${a}`,...n,children:t}),Yp=({projectName:t,instanceId:s,uniqueId:a})=>{const n=ee.useNavigate(),o=()=>{n({pathname:`/bulkops/jobs/bulkContentUpdate/${t}`,search:ee.createSearchParams({instanceId:s,uniqueId:a}).toString()})};return e.jsx("td",{className:"flex justify-center actions-cell stick-right",children:e.jsx(kt,{onPress:o,tooltip:"View Project",children:e.jsx(po,{})})})},Zp=()=>{const t="bulkContentUpdateReport",{data:s=[],pagination:a,sort:n,isInitialised:o,search:r}=E.useSelector(b=>b.operations.bulkContentUpdateReport),[l,i]=h.useState(r??""),c=b=>{i(b),p(b)},d=E.useDispatch(),u=ce(b=>{var x;return(x=b.defaultTenant)==null?void 0:x.value});h.useEffect(()=>{u&&(d(le({sortKey:"createdAt",sortOrder:"desc",reportKey:t})),d(Dt({tenant:u})))},[d,u]);const p=h.useMemo(()=>ct.debounce(b=>{d(rp({search:b,reportKey:t})),d(Dt({tenant:u,pageIndex:1}))},800),[d,u]),f=h.useCallback(b=>{d(le({sortKey:b,reportKey:t})),d(Dt({tenant:u}))},[d,u]),g=b=>{d(Dt({pageIndex:b,tenant:u}))},C=b=>{d(Le({pageSize:b,reportKey:t})),d(Dt({tenant:u,pageIndex:1}))};return e.jsx(ne,{header:e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(_e,{label:"Project Name",align:"left",stick:"left"}),e.jsx(_e,{label:"Project State",align:"left"}),e.jsx(_e,{label:"Status",align:"left"}),e.jsx(_e,{label:"Created By",align:"left",sort:n,sortKey:"createdBy",onSort:f}),e.jsx(_e,{label:"Created Date",align:"left",sortKey:"createdAt",sort:n,onSort:f}),e.jsx(_e,{label:"Modified Date",align:"left",sortKey:"updatedAt",sort:n,onSort:f}),e.jsx(_e,{label:"Actions",size:"xs",stick:"right"})]})}),isLoading:!o,isEmpty:s.length===0,emptyTableMessage:"No projects found!",toolbar:e.jsxs(me,{title:"List of Projects",children:[e.jsx("div",{className:"flex-1"}),e.jsx(oa,{styles:De.start16,"aria-label":"bcu-list-search",value:l,onChange:c})]}),sort:n,pagination:e.jsx(fe,{pageSizes:[20,50,100],...a,onPageChange:g,onPageSizeChange:C}),children:e.jsx("tbody",{children:s.map(b=>{var x,j;return e.jsxs("tr",{children:[e.jsx(m,{val:b.projectName,align:"left",stick:"left"}),e.jsx(m,{val:dn[b.projectState],align:"left"}),e.jsx(m,{val:((x=ra[b.projectStatus])==null?void 0:x.label)??b.projectStatus,align:"left",color:((j=ra[b.projectStatus])==null?void 0:j.color)??"default"}),e.jsx(m,{val:b.createdBy,align:"left"}),e.jsx(ge,{val:new Date(b.createdAt),tz:!1,align:"left"}),e.jsx(ge,{val:new Date(b.updatedAt),tz:!1,align:"left"}),e.jsx(Yp,{projectName:b.projectName,instanceId:b.instanceId,uniqueId:b.uniqueId})]},b._id)})})})};const Xp=({stat:t,statuses:s})=>{const{Icon:a,label:n,class:o}=n1[t]??{};return e.jsxs("div",{className:"flex flex-col flex-1 px-4 py-300 bg-white max-w-[18.75rem] min-w-[15.875rem] gap-250 rounded-lg",children:[e.jsxs("div",{className:`flex flex-row items-center w-full  ${o??""}`,children:[a&&e.jsx(a,{}),e.jsx("span",{className:"font-base text-400 ml-125",children:n??t})]}),e.jsx("div",{className:"flex flex-row flex-wrap justify-between",children:s.map(({status:r,count:l,class:i})=>{var d;const c=l<10&&l>0?`0${l}`:l;return e.jsxs("div",{className:"flex flex-row flex-1",children:[e.jsx("span",{className:`${i} font-base font-bold text-300`,children:c}),e.jsx("span",{className:"text-gray-600 font-base text-300 ml-125",children:((d=ra[r])==null?void 0:d.label)??r})]},`${t}-${r}`)})})]})};function Qp(t){return!t||ct.isEmpty(t)?[]:a1.reduce((s,a)=>{const n={stat:a.stat};if(typeof t[a.stat]=="number")n.statuses=[{status:a.stat.toUpperCase(),count:t[a.stat],class:a.statusClass}],s.push(n);else{const o=[];a.statParams.forEach(r=>{const l={status:r.status,count:t[a.stat][r.status]||0,class:r.statusClass};o.push(l)}),n.statuses=o,s.push(n)}return s},[])}const eh=()=>{const t=E.useSelector(a=>a.operations.bulkContentUpdateReport.stats),s=h.useMemo(()=>Qp(t),[t]);return e.jsx("div",{className:"flex flex-row items-center justify-center flex-wrap w-[90%] mt-150 mb-250 mx-auto gap-325",children:(s==null?void 0:s.length)>0&&s.map(({stat:a,statuses:n})=>e.jsx(Xp,{stat:a,statuses:n},`${a}-card`))})};const th=()=>{Kl();const t=E.useSelector(o=>o.operations.isLoading),s=E.useDispatch(),a=ee.useNavigate();h.useEffect(()=>()=>{s(Ol())},[s]);const n=()=>{a("/bulkops/bulkContentUpdate")};return e.jsxs(We,{title:"Bulk Content Update",description:"Dashboard of Projects created for Bulk Content updates",actions:e.jsx(ae,{variant:"primary",onPress:n,children:e.jsx(je,{children:"Create New Project"})}),className:"bcu-container",children:[e.jsxs("div",{className:"page-content",children:[e.jsx(eh,{}),e.jsx(Zp,{})]}),t&&e.jsx(Ke,{})]})};const sh=({message:t,children:s})=>e.jsxs("div",{className:"error-msg",children:[e.jsx(ia,{}),e.jsx("span",{children:t||s})]}),gr=()=>{if(document)return document.hasFocus()},ah=()=>{const[t,s]=h.useState(gr),a=h.useCallback(()=>{s(!0)},[]),n=h.useCallback(()=>{s(!1)},[]);return h.useEffect(()=>(s(gr()),window.addEventListener("focus",a),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",a),window.removeEventListener("blur",n)}),[a,n]),t},Hl=({isOpen:t,setOpen:s,title:a,header:n,content:o,footerContent:r,btnContent:l,type:i="modal"})=>e.jsx(ho,{onDismiss:()=>s(!1),type:i,children:t&&e.jsxs(fo,{children:[e.jsx(Is,{slot:"title",children:a}),e.jsx(Wi,{children:n}),e.jsx(Ts,{children:o}),e.jsx(Yr,{children:r}),e.jsx(_s,{children:l})]})});const nh=({isOpen:t,setOpen:s,handleSave:a})=>{const n=()=>{s(!1)},o=()=>{a(),s(!1)};return e.jsx(Hl,{isOpen:t,setOpen:s,content:e.jsx(je,{className:" . _di _dbj",children:"Are you sure you want to proceed to Save? This action will save the final changes in the Excel file."}),btnContent:e.jsxs(e.Fragment,{children:[e.jsx(ae,{onPress:n,variant:"secondary",children:e.jsx(je,{className:" . _dg _dbh",children:"No"})}),e.jsx(ae,{onPress:o,variant:"accent",children:e.jsx(je,{className:" . _dg _dbh",children:"Yes"})})]})})};const oh=(t,s)=>!t||t===0?0:Math.round(s/t*100),rh=(t,s)=>s===0?"Waiting to initiate":s>0&&s<t?"Running":"Completed",lh=({step:t,error:s,done:a,total:n,index:o,projectState:r,projectStatus:l,isDownloaded:i})=>{const{projectName:c}=ee.useParams(),[d]=ee.useSearchParams(),[u]=d1(),{enqueueSnackbar:p}=ye.useSnackbar(),[f,g]=h.useState(!1),C=ce(M=>{var T;return(T=M.defaultTenant)==null?void 0:T.value}),b=st("w-[20px] h-[20px] text-gray-50 rounded-[50%] inline-block text-center mr-100",{"bg-blue-900":r===t,"bg-gray-700":r!==t}),x=st("font-base",{"text-blue-900":r===t,"text-gray-700":r!==t}),{label:j,Icon:y,buttons:v}=o1[t],L=h.useMemo(()=>oh(n,a),[n,a]),S=h.useMemo(()=>rh(n,a),[n,a]),P=E.useDispatch(),A=()=>{const M=d.get("instanceId");let T=vs.DRY_RUN.fileName,H=`${c}-${vs.DRY_RUN.downloadFileSuffix}`;t===At.SAVE&&(T=vs.SAVE.fileName,H=`${c}-${vs.SAVE.downloadFileSuffix}`),P(Zs({instanceId:M,uniqueId:d.get("uniqueId"),fileName:T})).unwrap().then(z=>{F.downloadBlob(z,H),p("File downloaded successfully",{variant:"success"}),r===At.SAVE&&l===$e.COMPLETED||[$e.CANCELLED,$e.ERROR].includes(l)||P(Ls.util.invalidateTags([{type:"BCUProjects",id:M}]))}).catch(z=>{p(z,{variant:"error"})})},w=h.useCallback(async()=>{P(Ct()),u({instanceId:d.get("instanceId"),uniqueId:d.get("uniqueId"),instance:C}).unwrap().then(()=>{P(ys()),p("Project transitioned to Save workflow",{variant:"success"})}).catch(M=>{var H;P(ys());let T="Something went wrong";(H=M.data)!=null&&H.message&&(T=M.data.message),p(T,{variant:"error"})})},[P,p,u,d]),D=()=>{g(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(nh,{isOpen:f,setOpen:g,handleSave:w}),e.jsxs("li",{className:"flex flex-col min-w-[480px] flex-1 bcu-step-card",children:[e.jsx("div",{className:"flex flex-row py-200",children:e.jsxs("p",{className:x,children:[e.jsx("span",{className:b,children:o+1}),j]})}),e.jsxs("div",{className:"flex flex-col bg-white py-200 px-200 min-h-[14.625rem] w-full max-w-[768px]",children:[e.jsxs("div",{className:"flex flex-row items-center w-full pb-200",children:[e.jsxs("div",{className:"flex flex-row flex-1 gap-4 bcu-step-label",children:[e.jsx(y,{}),e.jsx("p",{className:"font-base text-400",children:j})]}),n>0&&n===a&&s===0?e.jsx("div",{className:"flex justify-end flex-1 bcu-step-successful",children:e.jsx(gn,{})}):null]}),e.jsxs("div",{className:"flex flex-row items-baseline pb-200",children:[e.jsxs("p",{className:"text-gray-700 font-base mr-100",children:[e.jsx("span",{className:"font-bold text-green-800 font-base text-400 mr-50",children:n}),"Total URL"]}),e.jsxs("p",{className:"text-gray-700 font-base",children:[e.jsx("span",{className:"font-bold text-red-900 font-base text-400 mr-50",children:s}),"Errors"]})]}),e.jsx("div",{className:"flex w-full pt-200 pb-400",children:e.jsx(Yi,{label:S,maxValue:100,minValue:0,value:L,size:"L",styles:Es.full})}),e.jsxs("div",{className:"flex flex-row gap-4",children:[v.isDownload&&e.jsx(ae,{variant:"primary",onPress:A,isDisabled:!n||a!==n,children:e.jsx(je,{children:"Download Report"})}),v.isSave&&e.jsx(ae,{variant:"primary",isDisabled:!i||[$e.CANCELLED,$e.ERROR].includes(l)||r===At.SAVE,onPress:D,children:e.jsx(je,{children:"Proceed to save"})})]})]})]})]})},ih=()=>{var j,y,v,L,S,P,A,w,D,M,T,H,z,V;const{projectName:t}=ee.useParams(),[s]=ee.useSearchParams(),[a,n]=h.useState(!1),[o,r]=h.useState(!1);Kl();const{enqueueSnackbar:l}=ye.useSnackbar(),i=ee.useNavigate(),c=E.useSelector(O=>O.operations.isLoading),d=E.useDispatch(),u=ah(),{data:p,isLoading:f}=i1({instanceId:s.get("instanceId"),uniqueId:s.get("uniqueId")},{pollingInterval:1e4,refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0,skip:!s.get("instanceId")||!s.get("uniqueId")||!u||a}),[g,{isLoading:C}]=c1();h.useEffect(()=>{if(p){const{data:O={}}=p;(O==null?void 0:O.projectState)===At.SAVE&&(O==null?void 0:O.projectStatus)===$e.COMPLETED||[$e.CANCELLED,$e.ERROR].includes(O==null?void 0:O.projectStatus)?n(!0):n(!1)}},[p]),h.useEffect(()=>{const{projectState:O,projectStatus:N}=(p==null?void 0:p.data)??{};O&&N&&(O!==At.SAVE||O===At.SAVE&&N!==$e.COMPLETED)&&r(!0)},[p==null?void 0:p.data]),h.useEffect(()=>{const{projectState:O,projectStatus:N}=(p==null?void 0:p.data)??{};o&&O&&N&&O===At.SAVE&&N===$e.COMPLETED&&(l("Project saved successfully.",{variant:"success"}),r(!1))},[l,p==null?void 0:p.data,o]);const b=async()=>{g({instanceId:s.get("instanceId"),uniqueId:s.get("uniqueId")}).unwrap().then(()=>{l("Project cancelled successfully",{variant:"success"}),i("/bulkops/jobs/bulkContentUpdate")}).catch(O=>{var J;let N="Something went wrong";(J=O.data)!=null&&J.message&&(N=O.data.message),l(N,{variant:"error"})})},x=()=>{d(Zs({instanceId:s.get("instanceId"),uniqueId:s.get("uniqueId"),fileName:vs.ORIGINAL.fileName})).unwrap().then(O=>{F.downloadBlob(O,`${t}-${vs.ORIGINAL.downloadFileSuffix}`),l("File downloaded successfully",{variant:"success"})}).catch(O=>{l(O,{variant:"error"})})};return e.jsxs(We,{className:"panther",title:`${t}`,actions:e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(ae,{variant:"primary",onPress:x,children:e.jsx(je,{children:"Download Excel"})}),e.jsx(ae,{variant:"primary",onPress:b,isDisabled:((j=p==null?void 0:p.data)==null?void 0:j.projectStatus)===$e.CANCELLED||((y=p==null?void 0:p.data)==null?void 0:y.projectState)===At.SAVE,children:e.jsx(je,{children:"Cancel Project"})})]}),children:[e.jsxs("div",{className:"page-content",children:[((v=p==null?void 0:p.data)==null?void 0:v.projectStatus)===$e.ERROR&&e.jsx(sh,{children:"An error has occurred. Please cancel the Project and try again."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"font-base",children:["Project State:",e.jsx("span",{className:"font-base ml-100",children:dn[(L=p==null?void 0:p.data)==null?void 0:L.projectState]})]}),e.jsxs("p",{className:"font-base",children:["Status:",e.jsx("span",{className:`font-base color-${(P=ra[(S=p==null?void 0:p.data)==null?void 0:S.projectStatus])==null?void 0:P.color} ml-100`,children:(w=ra[(A=p==null?void 0:p.data)==null?void 0:A.projectStatus])==null?void 0:w.label})]})]}),e.jsx("ol",{className:"flex flex-row flex-wrap w-full gap-4 px-250 py-250",children:((T=(M=(D=p==null?void 0:p.data)==null?void 0:D.metadata)==null?void 0:M.steps)==null?void 0:T.length)>0&&((V=(z=(H=p==null?void 0:p.data)==null?void 0:H.metadata)==null?void 0:z.steps)==null?void 0:V.map((O,N)=>{var J,se,B;return e.jsx(lh,{...O,index:N,projectState:(J=p==null?void 0:p.data)==null?void 0:J.projectState,projectStatus:(se=p==null?void 0:p.data)==null?void 0:se.projectStatus,isDownloaded:(B=p==null?void 0:p.data)==null?void 0:B.isDownloaded},`${O.step}`)}))})]}),(f||c||C)&&e.jsx(Ke,{})]})},vn=({items:t,value:s,onChange:a,...n})=>{const o=h.useMemo(()=>{if(!s)return null;if(n.selectedKey)return n.selectedKey;for(let l=0;l<t.length;l++){const i=t[l];if(i.id===s||i.value===s)return`react-aria-${l+1}`}return null},[t,s,n.selectedKey]),r=l=>{if(n.onSelectionChange)return n.onSelectionChange(l);const i=parseInt(l.split("-")[2])-1;a(t[i].id||t[i].value)};return e.jsx(mo,{selectedKey:o,onSelectionChange:r,...n,children:t.map(l=>e.jsx(qs,{children:l.label},l.id))})},ch="Previous",dh="Next",uh="Operation",ph="Restart",hh="Reset",fh="Actions",mh="Options",gh="Document",xh="Franklin",bh="Domain",Ch="Locale",jh="File",vh="URL",yh="Check-out",Sh="Comment",Eh="Status",kh="Done",Rh="File Size",Lh={prev:ch,next:dh,operation:uh,"serial-number":"#",restart:ph,reset:hh,actions:fh,options:mh,sharepoint:gh,franklin:xh,domain:bh,locale:Ch,file:jh,"http-status":"HTTP Status",url:vh,"last-modified-date":"Last Modified Date","last-modified-by":"Last Modified By","created-date":"Created Date","created-by":"Created By","preview-url":"Preview URL",checkout:yh,"checkout-api-status":"Check-out API Status","checkout-date":"Check-out Date","checkout-by":"Check-out By","checkin-comment":"Check-in Comment","check-in":"Check-in","checkin-api-status":"Check-in API Status","checkin-date":"Check-in Date","discard-checkout-api-status":"Discard Check-out API Status","discard-checkout-date":"Discard Check-out Date",comment:Sh,"input-urls":"Input Urls","input-urls-desc":"Enter multiple URLs","process-urls":"Process Urls","process-urls-desc":"URLs that are ready to preview",status:Eh,"status-desc":"Status summary","status-preview":"Status Preview","status-input-urls":"Enter your Urls <i>(multiple urls should be in new line)</i>","export-list-input-urls":"Enter your Urls <i>(multiple urls should be in new line and urls must be a folder, file will be ignored.)</i>","status-locales":"Select locale(s) <i>(multiple locales can be selected)</i>","status-locales-mandatory":"Please, select atleast one locale(s) to continue.","status-mandatory":"This field is required.","status-navigation-reset":"Reset Locale(s)","input-urls-placeholder":"for example: ${franklinPreview}/uk/customer-success-stories/tendam-case-study","input-urls-header":"Input Urls","status-invalid-url":"Enter a valid URL","check-in-out-page-title":"Check-in/Check-out","check-in-out-page-desc":"Process your files for Check in/ Check out in bulk within Sharepoint","check-in-out-options-desc":"Custom checks","check-in-out-report-name":"Final Report","check-in-out-report-desc":"Download final report",done:kh,"valid-urls--empty-record-message":"There are no Valid URLs found.","invalid-urls--empty-record-message":"There are no Invalid URLs found.","need-confirmation-urls--empty-record-message":'There are no records Found for "Confirmation".',"copy-folder-override-not-allowed":"Copy folder operation does not support override action.","copy-file-override-not-allowed":"The copy file operation does not permit overriding when the destination file is locked or checked out.","move-folder-override-not-allowed":"Move folder operation does not support override action.","move-file-override-not-allowed":"The move file operation does not permit overriding when the destination file is locked or checked out.","copy-file-description":"Copy your files from one location to another within SharePoint in bulk.","dashboard-desc":"Streamline your automation processes by performing, monitoring, and managing them effectively from here.","deactivation-desc":"Deactivate your files by remove it from both the live and Franklin environments in bulk.","fragments-desc":"Retrieve a list of fragments from within files.","preview-file-desc":"Preview your files by converting sharepoint document file into an HTML file in bulk.","publish-file-desc":"Publish your files from Franklin(preview) to the live environment in bulk.","move-file-desc":"Move your files in bulk from one location to another within SharePoint.","versioning-desc":"Perform versioning operations like create, fetch and restore on your sharepoint files in bulk","export-list-desc":"Export a list of files from various nodes within SharePoint.","status-operation-desc":"Retrieve the page details and status for all your pages in bulk.","logs-desc":"Select date range to get logs","logs-input-urls":"Filter by Urls",sharepointFileSize:Rh},Fn={en:Lh},U=(t,s={})=>{var o;const a="en";let n=(o=Fn==null?void 0:Fn[a])==null?void 0:o[t];for(let r in s)n=n.replace("${"+r+"}",s[r]);return n};const xr=" . Ac Bc",pe=({nextLabel:t=U("next"),prevLabel:s="Back",nextIcon:a,prevIcon:n,nextVariant:o="accent",prevVariant:r="secondary",nextFillStyle:l="fill",prevFillStyle:i="fill",nextDisabled:c=!1,nextVisible:d=!0,prevDisabled:u=!1,prevVisible:p=!0,children:f=null,onNext:g=()=>{},onPrev:C=()=>{}})=>e.jsxs("div",{className:"progress-controls-container",children:[p&&e.jsxs(ae,{styles:xr,fillStyle:i,variant:r,isDisabled:u,onPress:C,children:[n,e.jsx(je,{children:s})]}),e.jsx("div",{className:"progress-controls-mid",children:f}),d&&e.jsxs(ae,{styles:xr,fillStyle:l,variant:o,isDisabled:c,onPress:g,children:[a,e.jsx(je,{children:t})]})]});pe.propTypes={nextDisabled:te.bool,nextVisible:te.bool,prevDisabled:te.bool,prevEnabled:te.bool,onNext:te.func,onPrev:te.func};const Ot={picker:" . lR lbS",textfieldM:" . lR lbS",textfieldL:" . lZ lb0",indentLv1:" . Ab yg"};const $t=({className:t="",title:s="Select your options below",children:a})=>e.jsx("div",{className:`wizard-container  ${t}`,children:e.jsxs("div",{className:"options-container",children:[e.jsx("div",{className:"title-lbl",children:s}),e.jsx("div",{className:"options-content",children:a})]})}),Nh=[{value:"checkout",label:"Check-out"},{value:"checkin",label:"Check-in"},{value:"discard_checkout",label:"Discard Check-out"}],Ph=({isVisible:t,portals:s})=>{const a=E.useSelector(b=>b.operations.checkInOut),n=E.useSelector(b=>b.operations.navDirection),[o,r]=h.useState(""),[l,i]=h.useState(""),c=h.useRef(null),d=E.useDispatch(),u=()=>{d(tp({operation:o,comment:l})),d(Ee())},p=()=>{d(he())},f=b=>{i(b)},g=b=>{r(b)},C=h.useMemo(()=>o?o==="checkin"&&l.length===0:!0,[o,l]);return h.useEffect(()=>{a.operation.length===0&&a.comment.length===0&&(r(""),i(""))},[a]),h.useEffect(()=>{c.current&&o==="checkin"&&c.current.focus()},[o]),h.useEffect(()=>{t&&n==="next"&&(r(""),i(""))},[t,n]),t?e.jsxs($t,{className:"checkInOut-options",title:"Select Operation",children:[e.jsx(vn,{styles:Ot.picker,value:o,items:Nh,onChange:g}),o==="checkin"&&e.jsx(Rs,{styles:`${Ot.textfieldL} ${De.top24}`,label:"Comment",value:l,ref:c,onChange:f}),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:C,onPrev:p,onNext:u}),s.footer)]}):null},ke=({action:t,args:s={},onExport:a,isDisabled:n=!1})=>{const o=E.useDispatch(),r=()=>{if(a)return a();if(!t)return console.error("action not provided!");o(Ut({action:t,...s}))};return e.jsxs(ae,{onPress:r,isDisabled:n,children:[e.jsx(Zi,{}),e.jsx(je,{children:"Export"})]})},{VITE_BATCH_PROCESSING_THRESHOLD:Ih}={VITE_DATA_ENGINE_URL:"https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",VITE_BATCH_PROCESSING_THRESHOLD:"25",VITE_MSAL_CLIENT_ID:"45bf0513-84c8-4764-9119-987f082543a7",VITE_MSAL_TENANT_ID:"fa7b1b5a-7b34-4387-94ae-d2c178decee1",VITE_MSAL_ROOT_KEY:"msal.token.keys.45bf0513-84c8-4764-9119-987f082543a7",VITE_NAKSHA_API_URL:"https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",VITE_NAKSHA_API_KEY:"milostudioservice",VITE_ENABLE_ANALYTICS:"true",VITE_ANALYTICS_SUITE_ID:"adbdocauthqa",VITE_ANALYTICS_URL:"https://sstats.adobe.com/",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Te=()=>{const{processingStatus:t,currentJob:s}=E.useSelector(d=>d.operations),a=E.useSelector(d=>d.session.siteData),{enqueueSnackbar:n}=ye.useSnackbar(),o=h.useRef(t),r=E.useDispatch(),l=h.useCallback(async({batches:d,processApi:u,destination:p,totalItems:f,batchSize:g=20,onComplete:C=()=>{},onCancel:b=()=>{}})=>{var v;if(!d||(d==null?void 0:d.length)===0){console.error("Recieved 0 batches"),await c(C);return}let x=0,j=0,y=0;for(r(Ct({header:`Proceeding to ${p}`,body:"Please wait while we process the urls",footer:`<span>Processed 0 out of ${f} urls</span><span>0%</span>`,progress:0,canCancel:!0})),r(Qa("started"));x<d.length;){const L=d[x],{meta:S,payload:P}=await r(u(L));if(S.requestStatus==="fulfilled"&&((v=P==null?void 0:P.data)!=null&&v.success))x+=1,j=Math.min(j+g,f),y=Math.round(j/f*100),r(Ca({footer:`<span>Processed ${j} out of ${f} urls</span><span>${y}%</span>`,progress:y}));else{n(`Some error occured processing batch ${x+1}`,{variant:"error"}),r(Qa("error"));break}if(o.current==="stopped"){r(ys()),await b();return}}if(j>0)r(Ca({body:j===f?"All urls have been processed. Fetching records...":"Only some urls could be processed. Fetching records...",footer:`<span>Processed ${f} out of ${f} urls</span><span>100%</span>`,progress:-1,canCancel:!1})),j===f&&r(Qa("completed")),await c(C);else{r(ys()),await b();return}r(ys())},[r]),i=h.useCallback(async({inputUrls:d,processApi:u,destination:p,batchSize:f=20,useCanProcessUrlsCheck:g=!0,onComplete:C=async()=>{},onCancel:b=async()=>{},onJobCreated:x=async({jobId:j,jobName:y})=>{}})=>{var v,L,S,P;if(!d||d.length===0){console.error("Recieved 0 urls for batching"),await c(C);return}const j=d.length;if(g){r(Ct({header:`Proceeding to ${p}`,body:"Please wait while we fetch the job engine status",footer:`<span>Processed 0 out of ${j} urls</span><span>0%</span>`,progress:-1}));const A=((v=a==null?void 0:a.configs)==null?void 0:v.BATCH_SIZE)||parseInt(Ih)||25;if(j>A){r(Ca({body:"Please wait while we create a new job",footer:void 0}));const w=await r(u(d));(S=(L=w==null?void 0:w.payload)==null?void 0:L.data)!=null&&S.success?await x({...w.payload.data}):(n(((P=w==null?void 0:w.payload)==null?void 0:P.error)||"Some error occured while creating a job",{variant:"error"}),await b()),r(ys());return}}const y=Array.from({length:Math.ceil(j/f)},(A,w)=>d.slice(w*f,(w+1)*f));l({batches:y,destination:p,totalItems:j,batchSize:f,processApi:u,onComplete:C,onCancel:b})},[r,l]),c=h.useCallback(async d=>{s&&r(Aa()),await d()},[r,s]);return h.useEffect(()=>{o.current=t,t==="stopped"&&r(Ca({body:"User cancelled the processing of Urls",footer:"Cancelling in progress...",progress:-1,canCancel:!1}))},[t,r]),{processUrlsInBatches:i,processBatches:l}},Ne=(t,s)=>{const a=h.useMemo(()=>(t.currentPage-1)*t.pageSize,[s]),n=h.useMemo(()=>s.map((o,r)=>({...o,_num:a+r+1})),[a,s]);return{startNumber:a,numberedRows:n}};const Ye=({jobId:t,jobName:s,route:a})=>{const[n,o]=h.useState(!1),[r,l]=h.useState(""),[i,c]=h.useState(s),d=E.useDispatch(),u=ee.useNavigate(),p=b=>{const x=b.target.value;/^[a-zA-Z0-9-_]*$/.test(x)&&l(x)},f=()=>{d(_a({jobId:t,jobName:r})).then(b=>{_.isFulfilled(b)&&(c(r),C())})},g=b=>{b.key==="Enter"?f():b.key==="Escape"&&C()},C=()=>{l(""),o(!1)};return h.useEffect(()=>{d(X1())},[d]),e.jsxs("div",{className:"job-created-info-container",children:[e.jsx("h3",{children:"JOB CREATED"}),e.jsxs("div",{className:"job-created-description",children:["A job with name",n?e.jsxs("span",{className:"input-container",children:[e.jsx("input",{value:r,maxLength:25,placeholder:"Enter new name",pattern:/^[a-zA-Z0-9-_]+$/,onChange:p,onKeyDown:g}),e.jsx(Fe,{className:"accept-btn",tooltip:"Confirm New Name",onClick:f,children:e.jsx(is,{})}),e.jsx(Fe,{tooltip:"Cancel Edit",onClick:C,children:e.jsx(Ps,{className:"color-red-imp"})})]}):e.jsxs("span",{className:"highlight",children:[" ",i," "]}),"and id ",e.jsx("span",{className:"highlight",children:t})," has been created. You can use the ",e.jsx("b",{children:"Edit Job Name"})," button to edit the Job Name and"," ",e.jsx("b",{children:"View Jobs"})," button below to view current Jobs."]}),e.jsx("div",{className:"hr"}),e.jsxs("div",{className:"jobs-button-container",children:[e.jsx(xe,{startIcon:e.jsx(Xi,{}),onClick:()=>u(a,{replace:!0}),children:"View Jobs"}),e.jsx(xe,{color:"secondary",startIcon:e.jsx(go,{}),disabled:n,onClick:b=>o(!0),children:"Edit Job Name"})]})]})};const yn=({className:t="",name:s,value:a,placeholder:n,label:o,disabled:r,error:l,pattern:i,autoFocus:c,inputRef:d,size:u="small",onChange:p=()=>{}})=>e.jsxs("div",{className:`textfield-root ${l&&"textfield-error"} ${t}`,children:[o&&e.jsx("div",{className:"tf-label",dangerouslySetInnerHTML:{__html:o}}),e.jsxs("div",{className:"tf-wrapper",children:[e.jsx("input",{className:`size-${u}`,name:s,value:a,placeholder:n,disabled:r,pattern:i,autoFocus:c,ref:d,onChange:p}),e.jsx(Rt,{})]}),l&&e.jsx("div",{className:"tf-error-msg",children:l})]}),Th=[{value:"jira",label:"Jira"},{value:"slack",label:"Slack"},{value:"email",label:"Email"},{value:"other",label:"Other"}],_h=["APAC Dragon","APAC Lions","APAC Lions (DC)","ASO","Asa","CME1","Consonant","Creative Cloud","DXtreme","Delta","Dobby","EMEA Olympians","EMEA Olympians (DC)","EMEA Tiger","Events","Express","Express International","Express SEO","FedCorp","Fletcher","GWP","Iconic","JPN Local","Japan Ninjas","Japan Nozomi","LATAM Jaguars","LATAM Jaguars (DC)","LATAM Locos","Lightning","Logged-In","Loki","Merch Inc.","Morpheus","None","PPBU_Elements","PZN Platform","Pastel","Pegasus","Phoenix","Pink Flamingos","Quartz","Saga","Scrummy Bears","Sonic","Tako","TopMob","Vendors"],Ah=_h.map(t=>({value:t,label:t}));const Pt=({onConfirm:t,onCancel:s})=>{const[a,n]=h.useState(!0),[o,r]=h.useState(!1),[l,i]=h.useState(""),[c,d]=h.useState(""),[u,p]=h.useState(""),f=E.useDispatch(),g=(x,j)=>{j(x),o&&r(!1)},C=()=>{o?(f(Q1({source:l,team:c,comment:u})),t({source:l,team:c,comment:u}),n(!1)):r(!0)},b=()=>{o?r(!1):(s(),n(!1))};return e.jsxs(we,{className:"write-confirm-modal",title:"Please provide source",confirmButtonLabel:o?"Yes":"Next",cancelButtonLabel:o?"No":"Cancel",confirmButtonDisabled:!l||!c||!u,maxWidth:"md",open:a,footerContent:o&&e.jsxs("div",{className:"confirm-panel",children:[e.jsx(Rt,{}),e.jsx("span",{className:"confirm-msg",children:"Are you sure you want to proceed?"})]}),onConfirm:C,onCancel:b,children:[e.jsx(un,{className:"wc-input",label:"Source",value:l,options:Th,size:"medium",onChange:x=>g(x.target.value,i)}),e.jsx(un,{className:"wc-input",label:"Team",value:c,options:Ah,size:"medium",onChange:x=>g(x.target.value,d)}),e.jsx(yn,{className:"wc-input",label:"Comment",value:u,placeholder:"Describe your request",size:"medium",onChange:x=>g(x.target.value,p)})]})};const X=({url:t,val:s=t,target:a="_blank",size:n="xl",stick:o="none",align:r="center",emptyText:l="n/a"})=>e.jsx("td",{className:`size-${n} stick-${o}`,children:e.jsx("div",{className:`dyna-anchor text-align-${r}`,children:t?e.jsx("a",{href:t,target:a,rel:"noreferrer",children:s}):e.jsx("span",{children:l})})}),Dh={CHECKIN:"Check-in",CHECKOUT:"Check-out",DISCARD_CHECKOUT:"Discard Check-out"},Io=t=>Dh[t]||t||"",Oh=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(m,{val:s.local,stick:"left"}),e.jsx(m,{val:s.file,align:"left",size:"l"}),e.jsx(m,{val:s.httpStatusCode}),e.jsx(X,{url:s.previewUrl}),e.jsx(X,{url:s.sharepointUrl}),e.jsx(m,{val:Io(s.operation)}),e.jsx(m,{val:s.versionComment}),e.jsx(m,{val:s.checkInStatus}),e.jsx(m,{val:F.formatDate(s.checkInDate)})]},s._id))}),Uh=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(m,{val:s.local,stick:"left"}),e.jsx(m,{val:s.file,align:"left",size:"l"}),e.jsx(m,{val:s.httpStatusCode}),e.jsx(X,{url:s.previewUrl}),e.jsx(X,{url:s.sharepointUrl}),e.jsx(m,{val:Io(s.operation)}),e.jsx(m,{val:s.checkOutStatus}),e.jsx(m,{val:F.formatDate(s.checkOutDate)})]},s._id))}),wh=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(m,{val:s.local,stick:"left"}),e.jsx(m,{val:s.file,align:"left",size:"l"}),e.jsx(m,{val:s.httpStatusCode}),e.jsx(X,{url:s.previewUrl}),e.jsx(X,{url:s.sharepointUrl}),e.jsx(m,{val:Io(s.operation)}),e.jsx(m,{val:s.discardStatus}),e.jsx(m,{val:F.formatDate(s.discardDate)})]},s._id))}),Mh={categories:[{label:"",span:5},{label:U("franklin"),span:1},{label:U("sharepoint"),span:5}],columns:[{label:"#"},{label:U("domain"),sortKey:"domain"},{label:U("locale"),sortKey:"local",stick:"left"},{label:U("file"),sortKey:"file",align:"left"},{label:U("http-status"),sortKey:"httpStatusCode"},{label:U("preview-url"),sortKey:"previewUrl"},{label:U("url"),sortKey:"sharepointUrl"},{label:U("operation"),sortKey:"operation"},{label:U("comment"),sortKey:"versionComment"},{label:U("checkin-api-status"),sortKey:"checkInStatus"},{label:U("checkin-date"),sortKey:"checkInDate"}]},$h={categories:[{label:"",span:5},{label:U("franklin"),span:1},{label:U("sharepoint"),span:4}],columns:[{label:"#"},{label:U("domain"),sortKey:"domain"},{label:U("locale"),sortKey:"local",stick:"left"},{label:U("file"),sortKey:"file",align:"left"},{label:U("http-status"),sortKey:"httpStatusCode"},{label:U("preview-url"),sortKey:"previewUrl"},{label:U("url"),sortKey:"sharepointUrl"},{label:U("operation"),sortKey:"operation"},{label:U("checkout-api-status"),sortKey:"checkOutStatus"},{label:U("checkout-date"),sortKey:"checkOutDate"}]},Fh={categories:[{label:"",span:5},{label:U("franklin"),span:1},{label:U("sharepoint"),span:4}],columns:[{label:"#"},{label:U("domain"),sortKey:"domain"},{label:U("locale"),sortKey:"local",stick:"left"},{label:U("file"),sortKey:"file",align:"left"},{label:U("http-status"),sortKey:"httpStatusCode"},{label:U("preview-url"),sortKey:"previewUrl"},{label:U("url"),sortKey:"sharepointUrl"},{label:U("operation"),sortKey:"operation"},{label:U("discard-checkout-api-status"),sortKey:"discardStatus"},{label:U("discard-checkout-date"),sortKey:"discardDate"}]},Vh={checkin:Mh,checkout:$h,discard_checkout:Fh},Bh=({isVisible:t,portals:s,onReset:a})=>{const{operation:n}=E.useSelector(L=>L.operations.checkInOut),{isInitialised:o,data:r,pagination:l,sort:i}=E.useSelector(L=>L.operations.checkInOutReport),[c,d]=h.useState(null),u=E.useDispatch(),{numberedRows:p}=Ne(l,r),{processUrlsInBatches:f}=Te(),g=Vh[n],C=L=>{u(le({sortKey:L,reportKey:"checkInOutReport"})),u(qt())},b=L=>{u(qt(L))},x=L=>{u(Le({pageSize:L,reportKey:"checkInOutReport"})),u(qt())},j=()=>{u(Nt({action:n.toUpperCase()})).then(({meta:L,payload:S})=>{L.requestStatus==="fulfilled"&&(S!=null&&S.data)&&f({inputUrls:S.data,processApi:m1,destination:"Check-in/Check-out",onComplete:v,onCancel:v,onJobCreated:P=>d(P)})})},y=()=>{u(he())},v=async()=>{u(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"checkInOutReport"})),(await u(qt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})};return t?c?e.jsx(Ye,{jobId:c.jobId,jobName:c.jobName,route:"/bulkops/jobs/checkInCheckOut"}):e.jsxs("div",{className:"wizard-container",children:[e.jsxs(ne,{header:g,isLoading:!o,sort:i,isEmpty:p.length===0,toolbar:e.jsx(me,{count:l.totalItems}),pagination:e.jsx(fe,{...l,onPageChange:b,onPageSizeChange:x}),onSort:C,children:[n==="checkin"&&e.jsx(Oh,{data:p}),n==="checkout"&&e.jsx(Uh,{data:p}),n==="discard_checkout"&&e.jsx(wh,{data:p})]}),s.actions&&Q.createPortal(e.jsx(ke,{action:n.toUpperCase()}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:U("reset"),prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer),e.jsx(Pt,{onConfirm:j,onCancel:y})]}):null},ds=({isVisible:t,onDiscarded:s})=>{const[a,n]=h.useState(!1),o=E.useDispatch(),r=()=>{n(!0)},l=()=>{n(!1),o(Ta()).then(i=>{_.isFulfilled(i)&&(o(qu()),s())})};return t?e.jsxs(h.Fragment,{children:[e.jsx(ae,{fillStyle:"outline",variant:"secondary",onPress:r,children:"Discard"}),a&&e.jsx(we,{title:"Are you sure you want to discard this job?",confirmButtonLabel:"Discard",confirmButtonIcon:e.jsx(at,{}),onConfirm:l,onCancel:()=>n(!1)})]}):null},Kh=({title:t,columns:s,rows:a,error:n,onClose:o})=>{const r=h.useMemo(()=>({columns:s.map(l=>({label:l}))}),[s]);return e.jsxs(Ds,{title:t,className:"tiles-modal",maxWidth:"xl",canCloseOnEscapeKeyDown:!0,canCloseOnBackdropClick:!0,onClose:o,children:[e.jsx(ne,{className:"details-table",header:r,hasGridLines:!0,children:e.jsx("tbody",{children:a.map((l,i)=>e.jsx("tr",{children:l.map((c,d)=>e.jsx(m,{val:c.toString()},`detail-row-${i}-item-${d}`))},`detail-row-${i}`))})}),n&&e.jsxs("div",{className:"error",children:[e.jsx(Rt,{}),n]})]})};const Hh=" . yb",da=({action:t,reportKey:s})=>{const{isInitialised:a,isStatsInitialised:n,statistics:o}=E.useSelector(c=>c.operations[s]),[r,l]=h.useState(null),i=E.useDispatch();return h.useEffect(()=>{a&&!n&&i(Da({action:t,reportKey:s}))},[t,s,a,n,i]),n?e.jsxs("div",{className:"tiles-container",children:[o.map(c=>{var d;return e.jsxs("div",{className:"tile-container",children:[e.jsx("h3",{children:c.body.title}),e.jsxs("table",{className:"tile-table",children:[c.body.headers&&e.jsx("thead",{children:e.jsx("tr",{children:c.body.headers.map((u,p)=>e.jsx("th",{children:u==null?void 0:u.toUpperCase()},`tiles-th-${p}`))})}),e.jsx("tbody",{children:c.body.data.map((u,p)=>e.jsx("tr",{children:u.map((f,g)=>e.jsx("td",{children:f.toString()},`tiles-tr-${p}-td-${g}`))},`tiles-tr-${p}`))})]}),c.body.error&&e.jsxs("div",{className:"tile-error",children:[e.jsx(Rt,{}),c.body.error]}),((d=c.modals)==null?void 0:d.length)>0&&e.jsx("div",{className:"tile-footer",children:c.modals.map((u,p)=>e.jsxs(ae,{styles:p>0&&Hh,fillStyle:"outline",variant:"secondary",size:"S",onPress:f=>l(u),children:[e.jsx(Qi,{}),e.jsx(je,{children:u.button})]},u.button))})]},c.body.title)}),r&&e.jsx(Kh,{title:r.title,columns:r.headers,rows:r.data,error:r.error,onClose:c=>l(null)})]}):e.jsx("div",{className:"tiles-container",children:e.jsxs("div",{className:"tile-container",children:[e.jsx("h3",{children:e.jsx(Ie,{className:"title-skeleton"})}),e.jsx("table",{className:"tile-table",children:e.jsx("tbody",{children:Array.from({length:2}).map((c,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"wide-skeleton",children:e.jsx(Ie,{})}),e.jsx("td",{children:e.jsx(Ie,{})})]},`tiles-tr-ske-${d}`))})}),e.jsx("div",{className:"tile-footer",children:e.jsx(Ie,{className:"button-skeleton"})})]})})},ot=({isDeleted:t,disabled:s,onDeleteRestore:a})=>e.jsx("td",{className:"stick-right size-xs",children:e.jsx("div",{className:"actions-cell",children:e.jsx(Et,{disabled:s,onClick:a,children:t?e.jsx(ec,{className:"color-red-imp"}):e.jsx(at,{})})})}),ve=({val:t,...s})=>e.jsx(m,{val:F.adobeMailToUserName(t),...s}),zh=({data:t,onDelete:s})=>e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:a.isDeleted?"color-red":"",children:[e.jsx(m,{val:a._num}),e.jsx(m,{val:a.domain}),e.jsx(m,{val:a.local,stick:"left"}),e.jsx(m,{val:a.file,align:"left",size:"l"}),e.jsx(m,{val:a.httpStatusCode}),e.jsx(X,{url:a.previewUrl}),e.jsx(X,{url:a.sharepointUrl}),e.jsx(m,{val:a.sharepointStatusCode}),e.jsx(m,{val:a.sharepointFileSize}),e.jsx(m,{val:F.formatDate(a.sharepointLastModified)}),e.jsx(m,{val:a.lastModifiedByUserName}),e.jsx(m,{val:a.checkOut}),e.jsx(m,{val:F.formatDate(a.checkOutDate)}),e.jsx(m,{val:a.versionComment}),e.jsx(ve,{val:a.checkOutBy}),e.jsx(ot,{isDeleted:a.isDeleted,onDeleteRestore:()=>s(a),disabled:a.sharepointStatusCode===404})]},a._id))}),qh=({data:t,onDelete:s})=>e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:a.isDeleted?"color-red":"",children:[e.jsx(m,{val:a._num}),e.jsx(m,{val:a.domain}),e.jsx(m,{val:a.local,stick:"left"}),e.jsx(m,{val:a.file,align:"left",size:"l"}),e.jsx(m,{val:a.httpStatusCode}),e.jsx(X,{url:a.previewUrl}),e.jsx(X,{url:a.sharepointUrl}),e.jsx(m,{val:a.sharepointStatusCode}),e.jsx(m,{val:a.sharepointFileSize}),e.jsx(m,{val:F.formatDate(a.sharepointLastModified)}),e.jsx(m,{val:a.lastModifiedByUserName}),e.jsx(m,{val:a.checkOut}),e.jsx(m,{val:F.formatDate(a.checkOutDate)}),e.jsx(ve,{val:a.checkOutBy}),e.jsx(ot,{isDeleted:a.isDeleted,disabled:a.sharepointStatusCode===404,onDeleteRestore:()=>s(a)})]},a._id))}),Gh=({data:t,onDelete:s})=>e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:a.isDeleted?"color-red":"",children:[e.jsx(m,{val:a._num}),e.jsx(m,{val:a.domain}),e.jsx(m,{val:a.local,stick:"left"}),e.jsx(m,{val:a.file,align:"left",size:"l"}),e.jsx(m,{val:a.httpStatusCode}),e.jsx(X,{url:a.previewUrl}),e.jsx(X,{url:a.sharepointUrl}),e.jsx(m,{val:a.sharepointStatusCode}),e.jsx(m,{val:a.sharepointFileSize}),e.jsx(m,{val:F.formatDate(a.sharepointLastModified)}),e.jsx(m,{val:a.lastModifiedByUserName}),e.jsx(ve,{val:a.checkOutBy}),e.jsx(ot,{isDeleted:a.isDeleted,disabled:a.sharepointStatusCode===404,onDeleteRestore:()=>s(a)})]},a._id))}),Jh={categories:[{label:"",span:5},{label:U("franklin"),span:1},{label:U("sharepoint"),span:9},{label:"",span:1}],columns:[{label:"#"},{label:U("domain"),sortKey:"domain"},{label:U("locale"),sortKey:"local",stick:"left"},{label:U("file"),sortKey:"file",align:"left"},{label:U("http-status"),sortKey:"httpStatusCode"},{label:U("preview-url"),sortKey:"previewUrl"},{label:U("url"),sortKey:"sharepointUrl"},{label:U("status"),sortKey:"sharepointStatusCode"},{label:U("sharepointFileSize"),sortKey:"sharepointFileSize"},{label:U("last-modified-date"),sortKey:"sharepointLastModified"},{label:U("last-modified-by"),sortKey:"lastModifiedByUserName"},{label:U("checkout"),sortKey:"checkOut"},{label:U("checkout-date"),sortKey:"checkOutDate"},{label:U("checkin-comment"),sortKey:"versionComment"},{label:"Check Out By",sortKey:"checkOutBy"},{label:U("actions"),stick:"right"}]},Wh={categories:[{label:"",span:5},{label:U("franklin"),span:1},{label:U("sharepoint"),span:8},{label:"",span:1}],columns:[{label:"#"},{label:U("domain"),sortKey:"domain"},{label:U("locale"),sortKey:"local",stick:"left"},{label:U("file"),sortKey:"file",align:"left"},{label:U("http-status"),sortKey:"httpStatusCode"},{label:U("preview-url"),sortKey:"previewUrl"},{label:U("url"),sortKey:"sharepointUrl"},{label:U("status"),sortKey:"sharepointStatusCode"},{label:U("sharepointFileSize"),sortKey:"sharepointFileSize"},{label:U("last-modified-date"),sortKey:"sharepointLastModified"},{label:U("last-modified-by"),sortKey:"lastModifiedByUserName"},{label:U("checkout"),sortKey:"checkOut"},{label:U("checkout-date"),sortKey:"checkOutDate"},{label:"Check Out By",sortKey:"checkOutBy"},{label:U("actions"),stick:"right"}]},Yh={categories:[{label:"",span:5},{label:U("franklin"),span:1},{label:U("sharepoint"),span:6},{label:"",span:1}],columns:[{label:"#"},{label:U("domain"),sortKey:"domain"},{label:U("locale"),sortKey:"local",stick:"left"},{label:U("file"),sortKey:"file",align:"left"},{label:U("http-status"),sortKey:"httpStatusCode"},{label:U("preview-url"),sortKey:"previewUrl"},{label:U("url"),sortKey:"sharepointUrl"},{label:U("status"),sortKey:"sharepointStatusCode"},{label:U("sharepointFileSize"),sortKey:"sharepointFileSize"},{label:U("last-modified-date"),sortKey:"sharepointLastModified"},{label:U("last-modified-by"),sortKey:"lastModifiedByUserName"},{label:"Check Out By",sortKey:"checkOutBy"},{label:U("actions"),stick:"right"}]},Zh={checkin:Jh,checkout:Wh,discard_checkout:Yh},Xh=({isVisible:t,portals:s,onReset:a})=>{const{navDirection:n,processUrls:o,checkInOut:r,currentJob:l}=E.useSelector(O=>O.operations),{isInitialised:i,data:c,pagination:d,sort:u}=E.useSelector(O=>O.operations.statusReport),[p,f]=h.useState(!1),[g,C]=h.useState(null),b=h.useRef(!1),x=E.useDispatch(),{processUrlsInBatches:j}=Te(),{numberedRows:y}=Ne(d,c),v=Zh[r.operation],L=l!==null,S="VERSION_STATUS",P="statusReport",A=O=>{x(le({sortKey:O,reportKey:P})),x(zt())},w=O=>{x(zt(O))},D=O=>{x(Le({pageSize:O,reportKey:P})),x(zt())},M=O=>{x(Ha({id:O._id,isDeleted:!O.isDeleted}))},T=()=>{b.current=!0,x(Ee())},H=()=>{f(!0)},z=h.useCallback(()=>{x(Je(P)),f(!1),x(he())},[x]),V=h.useCallback(async()=>{x(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:P})),(await x(zt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[x]);return h.useEffect(()=>{t&&n==="next"&&(L?(x(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching recods...",progress:-1})),V()):j({inputUrls:o.filter(({isActive:O})=>O).map(({inputUrl:O})=>O),processApi:f1,destination:"Status",onComplete:V,onCancel:z,onJobCreated:O=>C(O)}))},[t,L,n,o,j,V,z,x]),t?g?e.jsx(Ye,{jobId:g.jobId,jobName:g.jobName,route:"/bulkops/jobs/checkInCheckOut"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(da,{action:S,reportKey:P}),e.jsxs(ne,{header:v,isLoading:!i,sort:u,isEmpty:y.length===0,toolbar:e.jsx(me,{count:d.totalItems}),pagination:e.jsx(fe,{...d,onPageChange:w,onPageSizeChange:D}),onSort:A,children:[r.operation==="checkin"&&e.jsx(zh,{data:y,onDelete:M}),r.operation==="checkout"&&e.jsx(qh,{data:y,onDelete:M}),r.operation==="discard_checkout"&&e.jsx(Gh,{data:y,onDelete:M})]}),s.actions&&Q.createPortal(e.jsx(ke,{action:S}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:c.length===0||d.processUrlCount===0&&r.operation!=="discard_checkout",prevDisabled:L,onPrev:H,onNext:T,children:e.jsxs("div",{className:"wizard-steps-progress-controls right",children:[e.jsxs("span",{children:[d.processUrlCount," urls are ready to be processed"]}),e.jsx(ds,{isVisible:L,onDiscarded:a})]})}),s.footer),p&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:z,onCancel:()=>f(!1)})]}):null};const Sn=({className:t="",name:s,value:a,placeholder:n,label:o,rows:r,minRows:l=r,maxRows:i=r,error:c,onChange:d,onBlur:u})=>e.jsxs("div",{className:`textarea-root ${c&&"textarea-error"} ${t}`,children:[o&&e.jsx("div",{className:"ta-label",dangerouslySetInnerHTML:{__html:o}}),e.jsxs("div",{className:"ta-wrapper",children:[e.jsx(Zr,{name:s,value:a,placeholder:n,minRows:l,maxRows:i,onChange:d,onBlur:u}),e.jsx(Rt,{})]}),c&&e.jsx("div",{className:"ta-error-msg",children:c})]}),Qh=(t,s)=>t.map(a=>(a.locales=a.locales.map(n=>(n.isFilterChecked=s.includes(n.name),n)),a.isChecked=a.locales.every(n=>n.isManuallyChecked||n.isFilterChecked),a)),e2=(t,s,a)=>t.map(n=>(n.locales=n.locales.map(o=>(o.filters.includes(a)&&(o.isManuallyChecked=s),o)),n.isChecked=n.locales.every(o=>o.isManuallyChecked||o.isFilterChecked),n)),t2=(t,s)=>t.map(a=>({...a,isChecked:s,locales:a.locales.map(n=>({...n,isManuallyChecked:s,isFilterChecked:!1}))})),s2=(t,s,a)=>t.map(n=>(n.locales=n.locales.map(o=>(o[a]===s&&(o.isManuallyChecked=!0),o)),n.isChecked=n.locales.every(o=>o.isManuallyChecked||o.isFilterChecked),n)),va={applyTextFilters:Qh,applyFilterGroups:e2,applySelectAll:t2,applyCountryLanguageFilters:s2};const To=({isVisible:t=!0,className:s="",masterLocales:a,masterFilterGroups:n,countryOptions:o,languageOptions:r,initialSelectedLocales:l,localeNames:i,error:c,onChange:d,onSave:u})=>{const[p,f]=h.useState(Ae(a)),[g,C]=h.useState(!1),[b,x]=h.useState(Ae(n)),[j,y]=h.useState([]),v=h.useRef(null),L=h.useRef(null),S=V=>{const O=p[V],N=!O.isChecked;p[V]={...O,isChecked:N,locales:O.locales.map(J=>({...J,isManuallyChecked:N}))},H([...p])},P=(V,O)=>{const N=p[O],J=N.locales[V];J.isManuallyChecked=!J.isManuallyChecked,p[O].isChecked=N.locales.every(se=>se.isManuallyChecked||se.isFilterChecked),H([...p])},A=(V,O)=>{const{value:N}=V.target;H(va.applyCountryLanguageFilters(p,N,O))},w=V=>{const O=V.target.value,N=[...new Set(O.toLowerCase().split(",").map(J=>J.trim()))];v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{v.current=null,H(va.applyTextFilters(p,N)),y(O?N.filter(J=>!i.includes(J)):[])},320)},D=V=>{const O=!b[V].isChecked,N=b[V].code;b[V].isChecked=O,x([...b]),H(va.applyFilterGroups(p,O,N))},M=()=>{const V=!g;C(V),H(va.applySelectAll(p,V,b))},T=()=>{const V=Ae(a).map(O=>(O.locales=O.locales.map(N=>({...N,isManuallyChecked:!1,isFilterChecked:!1})),O.isChecked=!1,O));H(V),x(Ae(n)),C(!1),L.current&&(L.current.value="")},H=V=>{f(V),d(z(V))},z=(V=p)=>V.flatMap(O=>O.locales.filter(N=>N.isManuallyChecked||N.isFilterChecked).map(N=>({code:N.code,name:N.name})));return h.useEffect(()=>{const V=l==null?void 0:l.map(({code:N})=>N),O=Ae(a).map(N=>(N.locales=N.locales.map(J=>({...J,isManuallyChecked:V.includes(J.code),isFilterChecked:!1})),{...N,isChecked:N.locales.every(J=>J.isManuallyChecked||J.isFilterChecked)}));f(O),x(Ae(n))},[a,n]),t?e.jsxs("div",{className:`locales-container ${s}`,children:[e.jsx("div",{className:"clear"}),e.jsxs("div",{className:"locales-button-panel",children:[e.jsxs("div",{className:"locales-select-container",children:[e.jsx("div",{children:"Search By Country"}),e.jsxs("select",{value:"main",onChange:V=>A(V,"countryCode"),children:[e.jsx("option",{value:"main",disabled:!0,children:"Select an option..."}),o.map(V=>e.jsx("option",{value:V.value,children:V.label},V.value))]})]}),e.jsxs("div",{className:"locales-select-container",children:[e.jsx("div",{children:"Search By Language"}),e.jsxs("select",{value:"main",onChange:V=>A(V,"languageCode"),children:[e.jsx("option",{value:"main",disabled:!0,children:"Select an option..."}),r.map(V=>e.jsx("option",{value:V.value,children:V.label},V.value))]})]}),e.jsx("div",{className:"filler"}),e.jsxs(ae,{fillStyle:"outline",variant:"secondary",onPress:T,children:[e.jsx(dt,{}),e.jsx(je,{children:"Reset Locale(s)"})]}),e.jsxs(ae,{styles:De.start8,onPress:V=>u(z()),children:[e.jsx(tc,{}),e.jsx(je,{children:"Save Locale(s)"})]})]}),e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Search By Text"}),e.jsx("i",{children:"(enter locale list separated by comma)"})]}),e.jsx(Sn,{ref:L,name:"locales",placeholder:"for example: at/de, de/de, fr/fr",rows:4,onChange:w,error:j.length>0&&`Locales ${j.join(", ")} could not be found`}),e.jsxs("div",{className:"section-title select-filters-title",children:[e.jsx("span",{children:"Select Filter(s)"}),e.jsx("i",{children:"(multiple filters can be selected)"})]}),e.jsx("div",{className:"checkbox-grid-container",children:e.jsxs("div",{className:"checkbox-grid",children:[b.map((V,O)=>e.jsx(xt,{styles:De._8,isSelected:V.isChecked,onChange:()=>D(O),children:V.name},V._id)),e.jsx(xt,{isSelected:g,styles:De._8,onChange:M,children:"Select All"})]})}),e.jsxs("div",{className:"section-title",children:[e.jsx("span",{children:"Select locale(s)"}),e.jsx("i",{children:"(multiple locales can be selected)"})]}),p.map((V,O)=>e.jsxs("div",{className:"checkbox-grid-container",children:[e.jsx(xt,{styles:De._8,isSelected:V.isChecked,onChange:()=>S(O),children:V.name}),e.jsx("div",{className:"checkbox-grid sub-grid",children:V==null?void 0:V.locales.map((N,J)=>{const se=N.isManuallyChecked||N.isFilterChecked;return e.jsx(xt,{styles:De._8,isSelected:se,onChange:()=>P(J,O),children:N.name},N.id)})})]},O)),c&&e.jsx("div",{className:"section-error",children:c})]}):null},Os=()=>{const t=E.useSelector(L=>L.session.siteData),[s,a]=h.useState(!1),[n,o]=h.useState([]),[r,l]=h.useState([]),[i,c]=h.useState([]),[d,u]=h.useState([]),[p,f]=h.useState([]),[g,C]=h.useState(null),[b,x]=h.useState(0),j=E.useDispatch(),y=b>0,v=L=>{j(Md(L)),L.length>0?de(`${L.length} locale selections have been saved!`,{variant:"success"}):de("locales have been cleared!")};return h.useEffect(()=>{const L=t.instanceLocales,S={},P={},A=L.map((D,M)=>({id:M,name:D.region||D.langMaster,isChecked:!1,locales:D.locales.map(T=>(T.countryCode&&T.country&&(S[T.countryCode]=T.country),T.languageCode&&T.language&&(P[T.languageCode]=T.language),{id:T._id||T.langMasterUrl,code:T.localeCode||T.langMasterUrl,name:T.authorUrl||T.countryCode||T.langMasterUrl,isManuallyChecked:!1,isFilterChecked:!1,countryCode:T.countryCode,languageCode:T.languageCode,filters:T.groups?[...T.groups]:[]}))}));o(A),l(t.groups.filter(D=>D.locales.length>0).map(D=>({...D,isChecked:!1})).sort((D,M)=>D.order-M.order)),c(Object.keys(S).map(D=>({id:D,value:D,label:S[D]}))),u(Object.keys(P).map(D=>({id:D,value:D,label:P[D]}))),f(A.flatMap(D=>D.locales.map(M=>M.name)));const w=A.reduce((D,M)=>D+M.locales.length,0);C(w===1?A[0].locales[0]:null),x(w),a(!0)},[t]),{masterLocales:n,masterFilterGroups:r,countryOptions:i,languageOptions:d,localeNames:p,fixedLocale:g,totalLocalesCount:b,isLocalesInitialised:s,isLocalesEnabled:y,saveSelectedLocales:v}};function a2(t){let{urls:s,error:a,franklinPreview:n,onChange:o,label:r}=t;return e.jsxs("div",{className:"input-urls-container",children:[e.jsx("div",{className:"control-heading",dangerouslySetInnerHTML:{__html:r||U("status-input-urls")}}),e.jsx(Sn,{name:"urls",value:s,placeholder:U("input-urls-placeholder",{franklinPreview:n}),error:a,rows:10,onChange:o})]})}const be=(t,s=[],a={})=>{let n=0;for(;n<s.length;){const o=s[n++],r=o(t,a[o.name]);if(r)return r}return""},it={empty:(t,s="Field is required")=>t?"":s,url:(t,s="Invalid url")=>{try{return new URL(t),""}catch{return s}},franklinPreviewDomain:(t,s,a,n="Invalid url")=>{if(!s)return"<franklinPreview domainUrl missing>";try{const o=new URL(t);return fl.util.isValidOrigin(o.href,s,a)?"":n}catch{return n}}},n2=(t,s)=>{const a=s.siteData.instance.domain.franklinPreview,n=s.siteData.configs.PREVIEW_URL_DOMAINS,o=[l=>it.franklinPreviewDomain(l,a,n)],r=t.split(/,|\n/).filter(l=>l);for(;r.length>0;){if(be(r[0],o))return"Invalid url(s)";r.shift()}return""};function o2(t,s,a){const n=a.siteData.instance.domain.franklinPreview,o=a.siteData.defaultLocaleCode,r=a.siteData.configs.PREVIEW_URL_DOMAINS,l=t.split(/,|\n/).filter(u=>u).map(u=>F.trimUrl(u,o)),i=s.map(({name:u})=>u),c={langmasterDirectory:a.siteData.instance.langmasterDirectory,locales:a.siteData.authorUrls,domain:n,defaultLocale:o,previewByLiveDomains:r};return St.generateUrls({urls:l,locales:i,instance:c}).map((u,p)=>({_id:p+1,inputUrl:u,locale:F.extractLocale(u,a),isActive:!0}))}const br={validateInputUrls:n2,generateProcessUrls:o2};const pt=({isVisible:t,inputUrlFieldLabel:s,portals:a})=>{const n=E.useSelector(H=>H.session),o=E.useSelector(H=>H.local.savedLocales),[r,l]=h.useState(""),[i,c]=h.useState(""),[d,u]=h.useState(""),[p,f]=h.useState(!1),[g,C]=h.useState(o||[]),b=E.useDispatch(),{masterLocales:x,masterFilterGroups:j,countryOptions:y,languageOptions:v,localeNames:L,fixedLocale:S,totalLocalesCount:P,isLocalesEnabled:A,saveSelectedLocales:w}=Os(),D=n.siteData.instance.domain.franklinPreview,M=H=>{var V;const z=(V=H==null?void 0:H.target)==null?void 0:V.value;l(z),c(br.validateInputUrls(z,n))},T=()=>{let H=i.length>0;if(!H&&r.length===0&&(c(U("status-mandatory")),H=!0),p&&g.length===0&&(u(U("status-locales-mandatory")),H=!0),H)return;const z=br.generateProcessUrls(r,p?g:[],n);b(la(r)),b(os(z)),b(Ee())};return t?e.jsxs("div",{className:"wizard-container",children:[e.jsx(a2,{label:s,urls:r,error:i,franklinPreview:D,onChange:M}),A&&!S&&e.jsxs(h.Fragment,{children:[e.jsx(bn,{styles:De.y8,isSelected:p,onChange:H=>f(!p),children:"Use Locale(s)"}),e.jsx(To,{isVisible:p,masterLocales:x,masterFilterGroups:j,countryOptions:y,languageOptions:v,initialSelectedLocales:g,localeNames:L,error:d,onChange:C,onSave:w})]}),e.jsx("div",{className:"clear"}),a.footer&&Q.createPortal(e.jsx(pe,{prevVisible:!1,onNext:T,children:e.jsx("div",{className:"wizard-steps-progress-controls right",children:p&&g.length>0&&e.jsxs("span",{children:[g.length+" / "+P," locale(s) are selected"]})})}),a.footer)]}):null};const Ft=({message:t,children:s})=>e.jsxs("div",{className:"warning-msg",children:[e.jsx(ia,{}),e.jsx("span",{children:t||s})]}),_o=({source:t,initialPageSize:s=100,sourceSetter:a})=>{const[n,o]=h.useState(1),[r,l]=h.useState(s),[i,c]=h.useState(0),[d,u]=h.useState({key:"",order:1}),[p,f]=h.useState([]),g={currentPage:n,pageSize:r,totalPages:i,totalItems:t.length},C=j=>{o(Math.min(g.currentPage,Math.ceil(t.length/j))),l(j)},b=j=>{const y=j===d.key?d.order*-1:-1;a([...t].sort((v,L)=>v[j]!==L[j]?v[j]<L[j]?y:y*-1:v._id<L._id?y:y*-1)),u({key:j,order:y})},x=h.useCallback(()=>{o(1),l(s),c(0),u({key:"",order:1}),f([])},[]);return h.useEffect(()=>{t.length===0?x():t.length>0&&!("_id"in t[0])&&console.warn("_id field required for sort to function correctly")},[t,x]),h.useEffect(()=>{const j=Math.ceil(t.length/r);c(j),o(y=>Math.min(y,j)||1)},[t,r]),h.useEffect(()=>{f(t.slice((n-1)*r,n*r))},[t,n,r]),{slice:p,pagination:g,sort:d,setCurrentPage:o,setPageSize:C,setSort:u,sortWithKey:b,resetTableUtils:x}},ht=({isVisible:t,destination:s,maxUrlsKey:a,portals:n})=>{const{navDirection:o,processUrls:r}=E.useSelector(S=>S.operations),l=E.useSelector(S=>{var P;return(P=S.session.siteData)==null?void 0:P.configs}),i=h.useMemo(S=>r.filter(P=>P.isActive).length,[r]),c=E.useDispatch(),{slice:d,pagination:u,sort:p,setCurrentPage:f,setPageSize:g,sortWithKey:C}=_o({source:r,sourceSetter:S=>c(os(S))}),{numberedRows:b}=Ne(u,d),x=(l==null?void 0:l[a])||(l==null?void 0:l.DEFAULT_MAX_PROCESSABLE_URLS)||1e4,j=S=>{let P=r.map(A=>({...A,isActive:A._id===S?!A.isActive:A.isActive}));c(os(P))},y=()=>{const S=r.filter(({isActive:P})=>P).map(({locale:P,inputUrl:A})=>[P,A]);c(Ua({fileName:"urls-to-process",headers:["Locale","Input Url"],data:S}))},v=()=>{c(Ee())},L=()=>{c(os([])),c(he())};return h.useEffect(()=>{t&&o==="next"&&F.scrollToTop()},[t,o,c]),t?e.jsxs("div",{className:"wizard-container",children:[r.length>x&&e.jsx(Ft,{children:Eo.processUrlsWarningMessage}),e.jsx(ne,{header:e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(_e,{label:"#"}),e.jsx(_e,{label:"Locale",sortKey:"locale",sort:p,onSort:C}),e.jsx(_e,{label:"Input Urls",sortKey:"inputUrl",sort:p,onSort:C}),e.jsx(_e,{label:"Actions",stick:"right"})]})}),hasGridLines:!0,sort:p,isLoading:b.length===0,toolbar:e.jsx(me,{count:r.length}),pagination:e.jsx(fe,{currentPage:u.currentPage,pageSize:u.pageSize,totalPages:u.totalPages,totalItems:r.length,onPageChange:f,onPageSizeChange:g}),onSort:C,children:e.jsx("tbody",{children:b.map(S=>e.jsxs("tr",{className:S.isActive?"":"color-red",children:[e.jsx(m,{val:S._num,size:"xs"}),e.jsx(m,{val:S.locale,size:"locale"}),e.jsx(m,{val:S.inputUrl,align:"left"}),e.jsx(ot,{isDeleted:!S.isActive,onDeleteRestore:P=>j(S._id)})]},S._id))})}),n.actions&&Q.createPortal(e.jsx(ke,{onExport:y}),n.actions),n.footer&&Q.createPortal(e.jsx(pe,{onNext:v,onPrev:L,nextDisabled:i===0||i>x,children:e.jsx("div",{className:"wizard-steps-progress-controls right",children:e.jsxs("span",{children:[i," urls are ready to proceed for ",s]})})}),n.footer)]}):null},zl=(t=null)=>{const s=ee.useLocation(),a=ee.useNavigate();h.useEffect(()=>{(t||[s.pathname]).includes(s.pathname)&&F.isDASurface()&&a("/bulkops")},[t,s.pathname])},r2=[{name:U("input-urls"),description:U("input-urls-desc")},{name:U("process-urls"),description:U("process-urls-desc")},{name:U("options"),description:U("check-in-out-options-desc")},{name:U("status"),description:U("status-desc")},{name:U("check-in-out-report-name"),description:U("check-in-out-report-desc")}],l2=()=>{zl();const{operation:t}=E.useSelector(s=>s.operations.checkInOut);return e.jsx(He,{title:U("check-in-out-page-title"),description:U("check-in-out-page-desc"),clearActions:{4:"VERSION_STATUS",5:t.toUpperCase()},steps:r2,idGenerationStep:4,children:({currentStep:s,portals:a,reInitialize:n})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:s===1,portals:a}),e.jsx(ht,{isVisible:s===2,destination:U("options"),maxUrlsKey:"CHECKIN_OUT_MAX_PROCESSABLE_URLS",portals:a}),e.jsx(Ph,{isVisible:s===3,portals:a}),e.jsx(Xh,{isVisible:s===4,portals:a,onReset:n}),e.jsx(Bh,{isVisible:s===5,portals:a,onReset:n})]})})},En=({initialSelectedLocales:t,masterLocales:s,masterFilterGroups:a,countryOptions:n,languageOptions:o,totalLocalesCount:r,localeNames:l,onLocalesSelected:i,onLocalesSaved:c,onClose:d})=>{const[u,p]=h.useState(t),f=()=>{i(u)};return e.jsx(Ds,{maxWidth:"lg",title:"Select Locales",onClose:d,highlightHeaderFooter:!0,footer:e.jsxs(h.Fragment,{children:[e.jsxs("span",{className:"margin-right-1x",children:[u.length+" / "+r," locale(s) are selected"]}),e.jsx(xe,{onClick:f,startIcon:e.jsx(is,{}),children:"Done"})]}),children:e.jsx(To,{className:"margin-bottom-3x",masterLocales:s,masterFilterGroups:a,countryOptions:n,languageOptions:o,initialSelectedLocales:t,localeNames:l,onChange:p,onSave:c})})},ql=""+new URL("excel-icon.svg",import.meta.url).href,i2=""+new URL("reference_copy_locales.xlsx",import.meta.url).href,c2=""+new URL("reference_copy_move_nolocales.xlsx",import.meta.url).href,d2=""+new URL("reference_move_locales.xlsx",import.meta.url).href,u2=t=>{let s={errorMessage:null,transformedData:t};return t.length<=1&&(s.errorMessage="Uploaded excel either is not valid or does not have proper data"),s};const p2=({fileName:t,isLocalesEnabled:s,isMove:a,error:n,onUpload:o,onBack:r})=>{const[l,i]=h.useState(null),[c,d]=h.useState(null),u=h.useRef(null),p=E.useDispatch(),f=h.useMemo(()=>{let x=c2;return s&&(x=a?d2:i2),x},[a,s]),g=async x=>{try{const j=await x.arrayBuffer(),y=await p(wa(j)).unwrap(),v=u2(y);v.errorMessage?d(v.errorMessage):(i(x),o({fileName:x.name,bulkUploadRows:v.transformedData}))}catch{d("Failed to process the uploaded file.")}},C=x=>{const j=x.target.files[0];if(j&&j.name.endsWith(".xlsx")){if(j.size>Mt.UPLOAD_MAX_FILE_SIZE){d("File cannot exceed the limit of 20MB");return}g(j)}else d("Uploaded excel either is not valid or does not have proper data"),o({fileName:"",bulkUploadRows:[]})},b=()=>{i(null),d(null),o({fileName:"",bulkUploadRows:[]})};return h.useEffect(()=>{d(n)},[n]),e.jsxs("div",{className:"bulk-upload-root",children:[e.jsx("div",{className:"upload-header",children:e.jsxs("div",{onClick:r,children:[e.jsx(sc,{}),e.jsx("strong",{children:"Back to Manual Entry"})]})}),e.jsxs("div",{className:"bulk-upload-container",children:[e.jsx("div",{className:"left-section",children:e.jsxs("div",{className:"instructions-text",children:[e.jsx("strong",{children:"Bulk Upload Instructions"}),e.jsx("div",{children:e.jsxs("ul",{className:"instructions-list",children:[e.jsxs("li",{children:[e.jsx("a",{href:f,download:"Reference.xlsx",children:"Download Reference.xlsx"})," ","File To Copy Source Files"]}),e.jsx("li",{children:"Add Source File and Destination File Accordingly"}),e.jsx("li",{children:"Upload .xlsx File and Click on Next Button "})]})})]})}),e.jsxs("div",{className:`right-section ${c&&"upload-error"} ${t?"file-uploaded":""}`,children:[e.jsxs("div",{className:"icon-container",children:[e.jsxs("div",{className:"file-upload-container",children:[e.jsx("img",{src:ql}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:["XLSX "," ",(l==null?void 0:l.size)&&F.formatBytes(l.size)]})]}),e.jsx(Fe,{className:"icon-button",onClick:b,children:e.jsx(at,{})})]}),e.jsxs("div",{className:"attachment-icon-container",children:[e.jsx("img",{src:Bl}),e.jsx("strong",{children:"Upload your file"}),e.jsx("span",{children:"Select a file from your computer"}),e.jsx(xe,{color:"accent",onClick:()=>u.current.click(),children:"Browse Files"}),!t&&e.jsx("input",{className:"hidden-input",accept:".xlsx",type:"file",ref:u,onChange:C})]})]}),e.jsx("div",{className:"helper-text",children:c||"Note:- Accepts only file.xlsx"})]})]})]})},Gl=(t,s,a)=>{const n=[it.empty,l=>it.franklinPreviewDomain(l,s,a)],o=t.map(l=>{const i=be(l.source,n),c=be(l.destination,n);let d="";return l.mode!=="none"&&l.locales.length===0&&(d="Locales are required"),{...l,sourceError:i,destinationError:c,localesError:d}});return{hasErrors:o.some(l=>l.sourceError.length>0||l.destinationError.length>0||l.localesError.length>0),validatedRows:o}},h2=(t,s,a,n)=>{let o={errorMessage:null,validatedData:null};if(t.length<=1)return o.errorMessage="Uploaded excel either is not valid or does not have proper data",o;const r=t[0].map(u=>u.toLowerCase());if(!(a?["source_file","destination_file","mode","local"]:["source_file","destination_file"]).every(u=>r.includes(u)))return o.errorMessage="Invalid headers in the Excel file.",o;const i=t.slice(1).map(u=>{let p={};r.forEach((g,C)=>{p[g]=u[C]});let f={isFile:!0,source:p.source_file,destination:p.destination_file,locales:p.local&&a?p.local.split(",").map(g=>({name:g.trim()})):[],mode:p.mode&&a?p.mode.toLowerCase():"none"};if(a)switch(p.mode.toLowerCase()){case"none":f.mode="none";break;case"use local for both":f.mode="both";break;case"use local for destination":f.mode="dst";break;default:return o.errorMessage="Invalid mode in Excel data.",null}return!f.source||!f.destination||!f.mode?(o.errorMessage="Source, destination, or mode missing in Excel data.",null):f});if(o.errorMessage)return o;const{hasErrors:c,validatedRows:d}=Gl(i,s,n);return c?o.errorMessage="Uploaded excel either is not valid or does not have proper data":o.validatedData=d,o},Cr={validateRows:Gl,validateBulkUpload:h2};const f2={vertical:"top",horizontal:"center"},m2={vertical:"bottom",horizontal:"center"},Us=({children:t,confirmMessage:s="Are you sure?",disabled:a,tooltip:n,useSpectrumButton:o,confirmLabel:r="Yes",rejectLabel:l="No",onConfirm:i=()=>{},onCancel:c=()=>{}})=>{const[d,u]=h.useState(null),p=j=>{u(o?j.target:j.currentTarget)},f=()=>{u(null)},g=()=>{i(),f()},C=()=>{c(),f()},b=!!d,x=b?"simple-popover":void 0;return e.jsxs(e.Fragment,{children:[o?e.jsx(kt,{"aria-describedby":x,tooltip:n,isDisabled:a,onPress:p,children:t}):e.jsx(na,{title:n,placement:"top",enterDelay:500,arrow:!0,children:e.jsx(Et,{"aria-describedby":x,disabled:a,onClick:p,children:t})}),e.jsx(ac,{id:x,open:b,anchorEl:d,onClose:f,anchorOrigin:f2,transformOrigin:m2,children:e.jsxs("div",{className:"prompt-popover-content",children:[e.jsx("span",{children:s}),e.jsxs("div",{className:"prompt-controls",children:[e.jsxs(ae,{fillStyle:"outline",UNSAFE_className:`${pn.colorTransparent} ${Es._64}`,onPress:g,children:[e.jsx("div",{slot:"icon",children:e.jsx(is,{})}),e.jsx(je,{children:r})]}),e.jsxs(ae,{fillStyle:"outline",UNSAFE_className:`${pn.colorTransparent} ${Es._64}`,onPress:C,children:[e.jsx("div",{slot:"icon",children:e.jsx(Ps,{})}),e.jsx(je,{children:l})]})]})]})})]})};const kn=({selectedLocales:t=[],disabled:s=!1,isFixed:a=!1,trimDisplayValues:n=!0,error:o="",onAdd:r=()=>{}})=>{const l=h.useMemo(()=>{const c=n?5:Number.MAX_SAFE_INTEGER,d=[];let u=0;for(;u<Math.min(t.length,c);)d.push(t[u++].name);let p=d.join(", ");return t.length>c&&(p+="..."),p},[t,n]),i=()=>{s||r()};return e.jsx("td",{className:"size-s",children:e.jsxs("div",{className:`locales-table-cell ${s&&"input-disabled"} ${a&&"input-fixed"}`,children:[e.jsxs("div",{className:`input-container ${o.length&&"input-error"}`,onClick:i,children:[e.jsx("div",{className:`val-container ${!n&&"val-unbounded"}`,children:l||e.jsx("span",{className:"placeholder",children:"Add locales"})}),!a&&e.jsx(xo,{className:"add-icon"})]}),o&&e.jsx("div",{className:"error-message",children:o}),!s&&!o&&t.length>5&&e.jsxs("div",{className:"selected-locales-count",children:[e.jsx("b",{children:t.length})," locales selected"]})]})})};const ua=({val:t,options:s=[],onChange:a=()=>{}})=>e.jsx("td",{children:e.jsx("div",{className:"dyna-select",children:e.jsx("select",{value:t,onChange:n=>a(n.target.value),children:s.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))})})});const Re=({val:t,error:s,warning:a,disabled:n,name:o="input",placeholder:r="",size:l="auto",stick:i="none",sizeMin:c="xs",align:d="left",pattern:u=/.*/,autoFocus:p=!1,onChange:f=()=>{}})=>{const g=C=>{const{value:b,name:x}=C.target;u.test(b)&&f({value:b,name:x})};return e.jsx("td",{className:`size-${l} size-min-${c} stick-${i}`,children:e.jsxs("div",{className:`dyna-textfield ${s&&"edit-error"} ${a&&"edit-warning"}`,children:[e.jsxs("div",{className:"tf-wrapper",children:[e.jsx("input",{className:`text-align-${d}`,type:"text",value:t,disabled:n,name:o,placeholder:r,autoFocus:p,onChange:g}),e.jsx(Rt,{})]}),s&&e.jsx("div",{className:"tf-error",children:s})]})})},g2=[{value:"none",label:"None"},{value:"dst",label:"Use locales for destination"},{value:"both",label:"Use locales for both"}],x2=[{value:"none",label:"None"},{value:"both",label:"Use locales for both"}],b2={columns:[{label:"Source",align:"left"},{label:"Destination",align:"left"},{label:"Mode",size:"s",align:"left"},{label:"Locales",align:"left"},{label:"Actions",size:"xs",stick:"right"}]},C2={columns:[{label:"Source",align:"left"},{label:"Destination",align:"left"},{label:"Actions",size:"xs",stick:"right"}]},j2=({rows:t,isMove:s,isLocalesEnabled:a,isFixedLocale:n,onFileChange:o,onFolderChange:r,onSourceChange:l,onDestinationChange:i,onModeChange:c,onOpenLocaleModal:d,onClone:u,onDelete:p,onAddRow:f})=>{const g=a?b2:C2;return e.jsx(ne,{header:g,toolbar:e.jsx(me,{title:"Add Source And Destination Files",children:e.jsx(xe,{color:"secondary",startIcon:e.jsx(xo,{}),onClick:f,children:"Add Row"})}),children:e.jsx("tbody",{children:t.map((C,b)=>e.jsxs("tr",{children:[e.jsx(Re,{val:C.source,error:C.sourceError,name:"sourceUrl",placeholder:"Enter source path",autoFocus:b>0&&C.source.length===0,onChange:({value:x})=>l(x,b)}),e.jsx(Re,{val:C.destination,error:C.destinationError,name:"destinationUrl",placeholder:"Enter destination path",onChange:({value:x})=>i(x,b)}),a&&e.jsxs(h.Fragment,{children:[e.jsx(ua,{val:C.mode,options:s?x2:g2,onChange:x=>c(x,b)}),e.jsx(kn,{selectedLocales:C.locales,disabled:C.mode==="none",isFixed:n,error:C.localesError,onAdd:x=>d(b)})]}),e.jsx(v2,{onClone:x=>u(C),onDelete:x=>p(b)})]},b))})})},v2=({onClone:t,onDelete:s})=>e.jsx("td",{className:"stick-right",children:e.jsxs("div",{className:"actions-cell",children:[e.jsx(Et,{className:"copy-move-input-urls-action-clone",onClick:t,children:e.jsx(Xr,{})}),e.jsx(Us,{confirmMessage:"Delete this row?",onConfirm:s,children:e.jsx(at,{})})]})});const Vn=(t=null)=>({isFile:!0,isFolder:!1,source:"",destination:"",mode:"none",locales:t?[t]:[],sourceError:"",destinationError:"",localesError:""}),Jl=({isVisible:t,portals:s,isMove:a})=>{const n=E.useSelector(G=>G.local.savedLocales),o=E.useSelector(G=>G.session.siteData.instance.domain.franklinPreview),r=E.useSelector(G=>G.session.siteData.configs.PREVIEW_URL_DOMAINS),l=E.useSelector(G=>G.session.siteData.authorUrls),[i,c]=h.useState(!1),[d,u]=h.useState([]),[p,f]=h.useState([]),[g,C]=h.useState(!1),[b,x]=h.useState([]),[j,y]=h.useState(""),[v,L]=h.useState(""),S=h.useRef(-1),P=E.useDispatch(),{masterLocales:A,masterFilterGroups:w,countryOptions:D,languageOptions:M,fixedLocale:T,totalLocalesCount:H,isLocalesInitialised:z,isLocalesEnabled:V,saveSelectedLocales:O}=Os(),N=(G,Y)=>{u(re=>(re[Y].isFile=re[Y].isFolder?G:!0,[...re]))},J=(G,Y)=>{u(re=>(re[Y].isFolder=re[Y].isFile?G:!0,[...re]))},se=(G,Y)=>{u(re=>(re[Y].source=G,re[Y].sourceError="",[...re]))},B=(G,Y)=>{u(re=>(re[Y].destination=G,re[Y].destinationError="",[...re]))},ie=(G,Y)=>{u(re=>(re[Y].mode=G,re[Y].localesError="",[...re]))},k=G=>{const Y=d[G];x(Y.locales.length>0?Y.locales:n),C(!0),S.current=G},I=G=>{u(Y=>{const re=Y[S.current];return re.locales=G,re.localesError&&G.length>0&&(re.localesError=""),[...Y]}),C(!1)},Z=G=>{u(Y=>[...Y,Ae(G)])},oe=G=>{u(Y=>Y.length===1?[Vn(T)]:Y.filter((re,rt)=>G!==rt))},Ce=()=>{u(G=>[...G,Vn(T)])},fs=()=>{if(i)p.length>0&&(P(la(Ae(p))),P(Ee()));else{const{hasErrors:G,validatedRows:Y}=Cr.validateRows(d,o,r);u(Y),G||(P(la(Ae(Y))),P(Ee()))}},_t=({fileName:G,bulkUploadRows:Y})=>{if(G.length>0&&Y.length>0){const re=Cr.validateBulkUpload(Y,o,V,r);re.errorMessage||(y(G),f(re.validatedData)),L(re.errorMessage)}else y(""),f([])};return h.useEffect(()=>{z&&u([Vn(T)])},[z,T]),t?e.jsxs("div",{className:"copy-move-input-urls-container wizard-container",children:[i?e.jsx(p2,{fileName:j,isLocalesEnabled:V,isMove:a,error:v,onBack:G=>c(!1),onUpload:_t}):e.jsx(j2,{rows:d,isMove:a,isLocalesEnabled:V,isFixedLocale:T!==null,onFileChange:N,onFolderChange:J,onSourceChange:se,onDestinationChange:B,onModeChange:ie,onOpenLocaleModal:k,onClone:Z,onDelete:oe,onAddRow:Ce}),g&&e.jsx(En,{initialSelectedLocales:b,masterLocales:A,masterFilterGroups:w,countryOptions:D,languageOptions:M,totalLocalesCount:H,localeNames:l,onLocalesSelected:I,onLocalesSaved:O,onClose:G=>C(!1)}),!i&&s.actions&&Q.createPortal(e.jsx(xe,{color:"primary",startIcon:e.jsx(nc,{}),onClick:G=>c(!0),children:"Bulk Upload"}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{prevVisible:!1,nextDisabled:i&&p.length===0,onNext:fs}),s.footer)]}):null};const Ao=({checked:t=!1,isEdit:s=!0,onChange:a=()=>{}})=>e.jsx("td",{className:"dyna-checkbox-container",children:e.jsx("div",{className:"dyna-checkbox",children:s?e.jsx(rn,{checked:t,onChange:n=>a(n.target.checked)}):e.jsx("div",{className:"dyna-dummy-checkbox",children:t?e.jsx(oc,{}):e.jsx(rc,{})})})}),hn=({isEdit:t,val:s,error:a,name:n,size:o="auto",stick:r="none",sizeMin:l="xs",align:i="center",pattern:c=/.*/,emptyText:d="n/a",onChange:u=()=>{}})=>t?e.jsx(Re,{val:s,error:a,name:n,size:o,stick:r,sizeMin:l,align:i,pattern:c,onChange:u}):e.jsx(m,{val:s,size:o,stick:r,align:i,emptyText:d}),Bn={isEdit:!1,isDeleted:!1,error:"",srcUrlError:"",dstUrlError:""},an=t=>{const s=t.split("/");return s[s.length-1]},y2=(t,s,a=!1)=>{const n=s.siteData.instance.domain.franklinPreview,o=s.siteData.defaultLocaleCode,r=s.siteData.configs.PREVIEW_URL_DOMAINS,l=[];t.forEach(u=>{u.isFile&&l.push({...u,isFolder:!1,source:F.trimUrl(u.source,o),destination:F.trimUrl(u.destination,o)}),u.isFolder&&l.push({...u,source:F.trimUrl(u.source,o),destination:F.trimUrl(u.destination,o)})});let i=0;const c=[],d={langmasterDirectory:s.siteData.instance.langmasterDirectory,locales:s.siteData.authorUrls,domain:n,previewByLiveDomains:r,defaultLocale:o};return l.forEach(u=>{if(u.mode==="none")c.push({_id:(i++).toString(36),isFolder:u.isFolder,srcLocale:F.extractLocale(u.source,s),srcUrl:St.transformUrlLocales(u.source,[],d)[0],dstLocale:F.extractLocale(u.destination,s),dstUrl:St.transformUrlLocales(u.destination,[],d)[0],dstFileName:an(u.destination),...Bn});else if(u.mode==="dst"){const p=u.locales.map(({name:C})=>C),f=St.generateUrls({urls:[u.destination],locales:p,instance:d}),g=F.extractLocale(u.source,s);c.push(...f.map(C=>({_id:(i++).toString(36),isFolder:u.isFolder,srcLocale:g,srcUrl:u.source,dstLocale:F.extractLocale(C,s),dstUrl:C,dstFileName:an(u.destination),...Bn})))}else if(u.mode==="both"){const p=u.locales.map(({name:C})=>C),f=St.generateUrls({urls:[u.source],locales:p,instance:d}),g=St.generateUrls({urls:[u.destination],locales:p,instance:d});c.push(...f.map((C,b)=>{const x=g[b];return{_id:(i++).toString(36),isFolder:u.isFolder,srcLocale:F.extractLocale(C,s),srcUrl:C,dstLocale:F.extractLocale(x,s),dstUrl:x,dstFileName:an(x),...Bn}}))}}),Do(c,a).sort((u,p)=>u.error>p.error?-1:1)},S2=(t,s,a)=>Do(t.map(n=>({...n,srcLocale:F.extractLocale(n.srcUrl,s),dstLocale:F.extractLocale(n.dstUrl,s)})),a),Do=(t,s=!1)=>{let a=0;const n=[];t.forEach(r=>{for(a=0;a<n.length;a++){const l=n[a];if(r.isFolder===l.isFolder&&r.srcUrl===l.srcUrl&&r.dstUrl===l.dstUrl)return}n.push(r)}),t=n.map(r=>({...r,error:r.srcUrl===r.dstUrl?"Source and destination can't be same":""}));let o=t.map(r=>`${r.isFolder}|${r.dstUrl}`);return t=t.map((r,l)=>(r.error||(r.error=o.slice(0,l).includes(`${r.isFolder}|${r.dstUrl}`)?"Destination url must be unique for all rows":""),r)),s&&(o=t.map(r=>`${r.isFolder}|${r.srcUrl}`),t=t.map((r,l)=>(r.error||(r.error=o.slice(0,l).includes(`${r.isFolder}|${r.srcUrl}`)?"Source url must be unique for all rows":""),r))),t},E2=(t,s)=>{const a=s.siteData.instance.domain.franklinPreview,n=s.siteData.configs.PREVIEW_URL_DOMAINS,o=[it.empty,i=>it.franklinPreviewDomain(i,a,n)],r={...t,srcUrlError:be(t.srcUrl,o),dstUrlError:be(t.dstUrl,[...o,i=>t.srcUrl===t.dstUrl?"Source and destination can't be same":""])};return{hasErrors:r.srcUrlError.length>0||r.dstUrlError.length>0,validatedRow:r}},k2=({processUrls:t,pageNumber:s,pageSize:a})=>({slice:t.slice((s-1)*a,s*a),totalPages:Math.ceil(t.length/a)}),R2=({processUrls:t,sortKey:s,sortOrder:a})=>{t.sort((n,o)=>n[s]!==o[s]?n[s]<o[s]?a:a*-1:n._id<o._id?a:a*-1)},jt={extractFileName:an,generateFromInputUrls:y2,reprocessUrls:S2,validateProcessUrls:Do,validateRow:E2,createProcessUrlsSlice:k2,sortProcessUrls:R2},L2={columns:[{label:"Src Locale",sortKey:"srcLocale"},{label:"Source URL",align:"left",sortKey:"srlUrl"},{label:"Dst Locale",sortKey:"dstLocale"},{label:"Destination URL",align:"left",sortKey:"dstUrl"},{label:"Destination File Name",align:"left",sortKey:"dstFileName"},{label:"Error",sortKey:"error"},{label:"Actions",stick:"right"}]},N2=({isEdit:t,canDelete:s,isDeleted:a,onEdit:n,onAcceptEdit:o,onCancelEdit:r,onDelete:l})=>e.jsx("td",{className:"stick-right",children:t?e.jsxs("div",{className:"actions-cell size-xs",children:[e.jsx(Et,{onClick:o,children:e.jsx(is,{})}),e.jsx(Et,{onClick:r,children:e.jsx(Ps,{className:"color-red-imp"})})]}):e.jsxs("div",{className:"actions-cell size-xs",children:[e.jsx(Et,{onClick:n,children:e.jsx(go,{})}),s&&e.jsx(Et,{onClick:l,children:a?e.jsx(lc,{className:"color-red-imp"}):e.jsx(at,{})})]})}),Wl=({isVisible:t,maxUrlsKey:s,portals:a,isMove:n})=>{var O;const o=E.useSelector(N=>N.operations.inputUrls),r=E.useSelector(N=>N.session),l=(O=r.siteData)==null?void 0:O.configs,[i,c]=h.useState([]),[d,u]=h.useState({currentPage:1,pageSize:100,totalPages:0}),[p,f]=h.useState({key:"error",order:1}),[g,C]=h.useState(0),b=h.useRef([]),x=E.useDispatch(),j=(l==null?void 0:l[s])||(l==null?void 0:l.DEFAULT_MAX_PROCESSABLE_URLS)||1e4,y=({currentPage:N=d.currentPage,pageSize:J=d.pageSize}={})=>{const{slice:se,totalPages:B}=jt.createProcessUrlsSlice({processUrls:b.current,pageNumber:N,pageSize:J});c(se),u({currentPage:N,pageSize:J,totalPages:B})},v=h.useCallback(()=>{C(b.current.reduce((N,J)=>N+(J.error.length===0&&!J.isDeleted?1:0),0))},[]),L=(N,J)=>{c(se=>(se[J].srcUrl=N,[...se]))},S=(N,J)=>{c(se=>(se[J].dstUrl=N,[...se]))},P=N=>{const{slice:J}=jt.createProcessUrlsSlice({processUrls:b.current,pageNumber:d.currentPage,pageSize:d.pageSize});c(se=>J.map(B=>({...B,isEdit:N._id===B._id})))},A=(N,J)=>{const{hasErrors:se,validatedRow:B}=jt.validateRow(N,r);if(se){c(ie=>(ie[J]={...B},[...ie]));return}b.current=jt.reprocessUrls(b.current.map(ie=>ie._id===N._id?{...N,dstFileName:jt.extractFileName(N.dstUrl),isEdit:!1,srcUrlError:"",dstUrlError:""}:{...ie}),r,n),jt.sortProcessUrls({processUrls:b.current,sortKey:p.key,sortOrder:p.order}),y(),v()},w=N=>{b.current=b.current.map(J=>({...J,isDeleted:J._id===N._id?!J.isDeleted:J.isDeleted})),y(),v()},D=N=>{const J=p.key===N?p.order*-1:-1;jt.sortProcessUrls({processUrls:b.current,sortKey:N,sortOrder:J}),y(),f({key:N,order:J})},M=N=>{y({currentPage:N})},T=N=>{const J=Math.min(d.currentPage,Math.ceil(b.current.length/N));y({currentPage:J,pageSize:N})},H=()=>{F.generateXlsx(b.current.map(N=>({isFolder:N.isFolder,srcLocale:N.srcLocale,srcUrl:N.srcUrl,dstLocale:N.dstLocale,dstUrl:N.dstUrl,dstFileName:N.dstFileName,error:N.error})),{headers:["Folder","Src Locale","Source URL","Dst Locale","Destination URL","Destination File Name","Error"],sheetName:"Process Urls",fileName:"process_urls"})},z=()=>{c([]),b.current=[],x(he())},V=()=>{x(os(b.current.filter(N=>N.error.length===0&&!N.isDeleted).map(N=>({isFolder:N.isFolder,srcUrl:N.srcUrl,dstUrl:N.dstUrl})))),x(Ee())};return h.useEffect(()=>{if(t){b.current=jt.generateFromInputUrls(o,r,n);const{slice:N,totalPages:J}=jt.createProcessUrlsSlice({processUrls:b.current,pageNumber:1,pageSize:100});c(N),u({currentPage:1,pageSize:100,totalPages:J}),f({key:"error",order:1}),v()}},[t,n,o,r,v]),t?e.jsxs("div",{className:"wizard-container",children:[g>j&&e.jsx(Ft,{children:Eo.processUrlsWarningMessage}),e.jsx(ne,{header:L2,sort:p,isLoading:i.length===0,toolbar:e.jsx(me,{count:b.current.length}),pagination:e.jsx(fe,{currentPage:d.currentPage,pageSize:d.pageSize,totalPages:d.totalPages,totalItems:b.current.length,onPageChange:M,onPageSizeChange:T}),onSort:D,children:e.jsx("tbody",{children:i.map((N,J)=>e.jsxs("tr",{className:N.isDeleted?"color-red":"",children:[e.jsx(m,{val:N.srcLocale}),e.jsx(hn,{isEdit:N.isEdit,val:N.srcUrl,error:N.srcUrlError,name:"sourceUrl",sizeMin:"xl",align:"left",onChange:({value:se})=>L(se,J)}),e.jsx(m,{val:N.dstLocale}),e.jsx(hn,{isEdit:N.isEdit,val:N.dstUrl,error:N.dstUrlError,name:"destinationUrl",sizeMin:"xl",align:"left",onChange:({value:se})=>S(se,J)}),e.jsx(m,{val:N.dstFileName,size:"m",align:"left"}),e.jsx(m,{val:N.error||"n/a",size:"l",color:N.error||N.isDeleted?"red":"dark-gray"}),e.jsx(N2,{isEdit:N.isEdit,canDelete:!N.error,isDeleted:N.isDeleted,onEdit:se=>P(N),onAcceptEdit:se=>A(N,J),onCancelEdit:y,onDelete:se=>w(N)})]},`process-urls-row-${J}`))})}),a.actions&&Q.createPortal(e.jsx(ke,{onExport:H}),a.actions),a.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:g===0||g>j,onPrev:z,onNext:V,children:e.jsx("div",{className:"wizard-steps-progress-controls right",children:e.jsxs("span",{children:[g," urls are ready to proceed for status"]})})}),a.footer)]}):null},Rn=({record:t})=>{const{destination:s,action:a,shouldAppend:n}=t,o=n?`${s}_${a.toLowerCase()}`:s;return e.jsx(m,{size:"xl",align:"left",val:o})},Ln=({record:t})=>{let{fileName:s,action:a,shouldAppend:n}=t;s=s?s.replace(/\.(.*)$/g,""):"n/a";const o=n?`${s}_${a.toLowerCase()}`:s;return e.jsx(m,{size:"xl",align:"left",val:o})},P2=t=>({columns:[{label:"Source Locale",align:"left",sortKey:"sourceLocale"},{label:"Source File",align:"left",sortKey:"source"},{label:"Source Sharepoint URL",align:"left",sortKey:"sourceSPUrl"},{label:"Destination Locale",sortKey:"destinationLocale"},{label:"Destination",align:"left",sortKey:"destination"},{label:"Destination Sharepoint URL",align:"left",sortKey:"destinationSPUrl"},{label:"File Name",align:"left",sortKey:"fileName"},{label:"Override",sortKey:"isOverrode"},{label:t==="COPY"?"_copied":"_moved",sortKey:"shouldAppend"},{label:"status",align:"left",sortKey:"status"},{label:"error",align:"left",stick:"right",sortKey:"message"}]}),I2=({copyMoveReport:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{size:"s",val:s.sourceLocale}),e.jsx(m,{size:"xl",val:s.source,align:"left"}),e.jsx(X,{size:"xl",align:"left",url:s.sourceSPUrl}),e.jsx(m,{size:"s",val:s.destinationLocale}),e.jsx(Rn,{record:s}),e.jsx(X,{size:"xl",align:"left",url:s.destinationSPUrl}),e.jsx(Ln,{record:s}),e.jsx(m,{size:"xs",val:F.booleanToString(s.isOverrode)}),e.jsx(m,{size:"xs",val:F.booleanToString(s.isAppended)}),e.jsx(m,{size:"x",val:s.status}),e.jsx(m,{size:"m",val:s.message||"n/a",align:"left",stick:"right"})]},s._id))});const Yl=({isVisible:t,portals:s,onReset:a})=>{const{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(y=>y.operations.copyMoveReport),{action:i}=E.useSelector(y=>y.operations.copyMove),[c,d]=h.useState(null),u=E.useDispatch(),{processUrlsInBatches:p}=Te(),f=y=>{u(le({sortKey:y,reportKey:"copyMoveReport"})),u(Gt())},g=y=>{u(Gt(y))},C=y=>{u(Le({pageSize:y,reportKey:"copyMoveReport"})),u(Gt())},b=()=>{u(Nt({action:i})).then(({meta:y,payload:v})=>{y.requestStatus==="fulfilled"&&(v!=null&&v.data)&&p({inputUrls:v.data,processApi:b1,destination:i,onComplete:j,onCancel:j,onJobCreated:L=>d(L)})})},x=()=>{u(he())},j=async()=>{u(le({sortKey:"error",sortOrder:"desc",reportKey:"copyMoveReport"})),(await u(Gt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})};return t?c?e.jsx(Ye,{jobId:c.jobId,jobName:c.jobName,route:`/bulkops/jobs/${i.toLowerCase()}`}):e.jsxs("div",{className:"wizard-container",children:[e.jsxs("div",{className:"copy-move-step-4-table",children:[e.jsx(ne,{header:P2(i),isLoading:!n,sort:l,toolbar:e.jsx(me,{count:r.totalItems}),isEmpty:o.length===0,pagination:e.jsx(fe,{...r,onPageChange:g,onPageSizeChange:C}),onSort:f,children:e.jsx(I2,{copyMoveReport:o})}),s.actions&&Q.createPortal(e.jsx(ke,{action:i}),s.actions)]}),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Reset",prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer),e.jsx(Pt,{onConfirm:b,onCancel:x})]}):null},T2=({fill:t="#222222"})=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.374 14.0285C7.23502 13.9972 7.09782 13.9585 6.963 13.9125C6.703 14.1725 6.213 14.686 6.1065 14.7935C5.72186 15.1777 5.20039 15.3934 4.65674 15.3933C4.11309 15.3931 3.59175 15.1771 3.20733 14.7927C2.8229 14.4083 2.60687 13.8869 2.60672 13.3433C2.60656 12.7996 2.8223 12.2781 3.2065 11.8935L6.8 8.3C7.02231 8.08418 7.28607 7.91566 7.57533 7.80463C7.8646 7.6936 8.17337 7.64236 8.483 7.654C8.98378 7.66238 9.46257 7.8612 9.822 8.21C9.89951 8.29134 9.97277 8.37662 10.0415 8.4655C10.4396 8.19634 10.8681 7.97498 11.318 7.806C11.1835 7.58309 11.0239 7.37625 10.8425 7.1895C10.1556 6.51914 9.23251 6.14585 8.27268 6.15025C7.31286 6.15464 6.39327 6.53637 5.7125 7.213L2.1195 10.806C1.78633 11.1392 1.52206 11.5348 1.34177 11.9701C1.16147 12.4054 1.06869 12.872 1.06871 13.3432C1.06873 13.8144 1.16156 14.2809 1.3419 14.7163C1.52224 15.1516 1.78655 15.5471 2.11975 15.8803C2.45294 16.2134 2.8485 16.4777 3.28383 16.658C3.71916 16.8383 4.18574 16.9311 4.65692 16.931C5.12811 16.931 5.59468 16.8382 6.02999 16.6579C6.4653 16.4775 6.86083 16.2132 7.194 15.88C7.265 15.809 7.433 15.6375 7.644 15.4235C7.50018 14.9706 7.40957 14.5024 7.374 14.0285Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.861 3.23948C12.0514 3.04888 12.2774 2.89767 12.5263 2.79447C12.7751 2.69127 13.0418 2.63812 13.3112 2.63804C13.5806 2.63796 13.8474 2.69097 14.0963 2.79402C14.3452 2.89708 14.5713 3.04817 14.7618 3.23865C14.9523 3.42914 15.1034 3.65529 15.2064 3.90419C15.3095 4.15309 15.3625 4.41985 15.3624 4.68924C15.3624 4.95863 15.3092 5.22536 15.206 5.4742C15.1028 5.72304 14.9516 5.9491 14.761 6.13948L13.5 7.39998C14.138 7.40015 14.7721 7.49968 15.3795 7.69498L15.8485 7.22648C16.1825 6.8934 16.4476 6.49775 16.6285 6.06215C16.8095 5.62655 16.9029 5.15954 16.9032 4.68785C16.9036 4.21615 16.8109 3.749 16.6306 3.31313C16.4503 2.87725 16.1859 2.4812 15.8524 2.14761C15.5189 1.81402 15.1229 1.54943 14.6871 1.36899C14.2513 1.18855 13.7841 1.09579 13.3124 1.09601C12.8407 1.09623 12.3737 1.18943 11.9381 1.37028C11.5024 1.55113 11.1067 1.81608 10.7735 2.14998C10.581 2.34248 8.64149 4.26098 8.09799 4.80448C8.73672 4.75996 9.37709 4.86384 9.96899 5.10798C10.2295 4.84998 11.7535 3.34698 11.861 3.23948Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.463 10.028C8.35578 9.95914 8.25621 9.87902 8.166 9.789C7.89478 9.57402 7.6815 9.29475 7.5455 8.9765C7.46756 9.01997 7.39562 9.07342 7.3315 9.1355L6.5135 9.9915C6.67628 10.2987 6.88295 10.5805 7.127 10.828C7.32115 11.0178 7.53974 11.1809 7.777 11.313C7.95386 10.859 8.18414 10.4276 8.463 10.028Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.5 9.04999C12.6199 9.04999 11.7595 9.31098 11.0277 9.79995C10.2959 10.2889 9.72555 10.9839 9.38874 11.797C9.05193 12.6102 8.96381 13.5049 9.13551 14.3681C9.30721 15.2314 9.73104 16.0243 10.3534 16.6466C10.9757 17.269 11.7686 17.6928 12.6319 17.8645C13.4951 18.0362 14.3898 17.9481 15.2029 17.6113C16.0161 17.2744 16.7111 16.7041 17.2 15.9723C17.689 15.2405 17.95 14.3801 17.95 13.5C17.95 12.3198 17.4812 11.1879 16.6466 10.3534C15.8121 9.51883 14.6802 9.04999 13.5 9.04999ZM12.331 16.206L10.267 14.142C10.2201 14.0951 10.1938 14.0315 10.1938 13.9652C10.1938 13.8989 10.2201 13.8354 10.267 13.7885L10.785 13.2705C10.8319 13.2236 10.8955 13.1973 10.9618 13.1973C11.028 13.1973 11.0916 13.2236 11.1385 13.2705L12.504 14.636L15.557 11.583C15.6039 11.5361 15.6675 11.5098 15.7338 11.5098C15.8 11.5098 15.8636 11.5361 15.9105 11.583L16.432 12.1045C16.4789 12.1514 16.5052 12.2149 16.5052 12.2812C16.5052 12.3475 16.4789 12.4111 16.432 12.458L12.682 16.208C12.635 16.2538 12.5718 16.2793 12.5061 16.2789C12.4404 16.2786 12.3775 16.2524 12.331 16.206Z",fill:t})]}),_2=({fill:t="#222222"})=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{"clip-path":"url(#clip0_202_2451)",children:[e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.56801 4.76103L4.82001 5.48203L2.15601 2.86203L2.90401 2.14203L5.56801 4.76103Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.901 15.139L15.153 15.858L12.503 13.191L13.25 12.472L15.901 15.139Z",fill:t}),e.jsx("path",{d:"M6.6855 0.899963H5.5285V3.21446H6.6855V0.899963Z",fill:t}),e.jsx("path",{d:"M3.21449 5.52844H0.899994V6.68544H3.21449V5.52844Z",fill:t}),e.jsx("path",{d:"M17.1 11.3145H14.7855V12.4715H17.1V11.3145Z",fill:t}),e.jsx("path",{d:"M12.4715 14.7855H11.3145V17.1H12.4715V14.7855Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.0265 11.854C7.9045 12.983 6.1815 14.718 6.1065 14.793C5.72186 15.1772 5.20039 15.393 4.65674 15.3928C4.11309 15.3926 3.59175 15.1766 3.20733 14.7922C2.8229 14.4078 2.60687 13.8864 2.60672 13.3428C2.60656 12.7991 2.8223 12.2777 3.2065 11.893L6.1355 8.96401L5.05 7.87701L2.1195 10.806C1.78633 11.1392 1.52206 11.5348 1.34177 11.9701C1.16147 12.4054 1.06869 12.872 1.06871 13.3432C1.06873 13.8144 1.16156 14.2809 1.3419 14.7163C1.52224 15.1516 1.78655 15.5471 2.11975 15.8803C2.45294 16.2134 2.8485 16.4777 3.28383 16.658C3.71916 16.8383 4.18574 16.9311 4.65692 16.9311C5.12811 16.931 5.59468 16.8382 6.02999 16.6579C6.4653 16.4775 6.86083 16.2132 7.194 15.88L10.115 12.943L9.0265 11.854Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.9585 6.12898C10.0805 4.99998 11.8035 3.26498 11.8785 3.18998C12.0688 2.99942 12.2947 2.84821 12.5434 2.74497C12.7922 2.64174 13.0588 2.5885 13.3281 2.58831C13.5973 2.58811 13.864 2.64096 14.1129 2.74383C14.3618 2.8467 14.5879 2.99758 14.7785 3.18786C14.9691 3.37814 15.1203 3.60408 15.2235 3.8528C15.3267 4.10151 15.38 4.36813 15.3802 4.63742C15.3804 4.90671 15.3275 5.1734 15.2246 5.42227C15.1218 5.67113 14.9709 5.8973 14.7806 6.08786L14.7785 6.08998L11.8495 9.01898L12.935 10.106L15.8655 7.17698C16.5384 6.50406 16.9163 5.59141 16.9163 4.6398C16.9162 3.68819 16.5382 2.77558 15.8652 2.10273C15.1923 1.42987 14.2797 1.05189 13.3281 1.05194C12.3765 1.05199 11.4638 1.43006 10.791 2.10298L7.87 5.03998L8.9585 6.12898Z",fill:t})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_202_2451",children:e.jsx("rect",{width:"18",height:"18",fill:"white"})})})]}),A2=({fill:t="#222222"})=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.61549 14.206C8.05019 14.2226 7.48751 14.1227 6.96249 13.9125C6.70249 14.1725 6.21249 14.686 6.10599 14.7935C5.72135 15.1777 5.19988 15.3935 4.65623 15.3933C4.11258 15.3931 3.59124 15.1771 3.20682 14.7927C2.8224 14.4083 2.60636 13.8869 2.60621 13.3433C2.60605 12.7996 2.82179 12.2782 3.20599 11.8935L6.79999 8.30001C7.0223 8.08419 7.28606 7.91567 7.57532 7.80464C7.86459 7.69361 8.17336 7.64237 8.48299 7.65401C8.98378 7.66235 9.46259 7.86116 9.82199 8.21001C9.91555 8.30584 10.0029 8.40755 10.0835 8.51451C10.3411 8.10174 10.6862 7.75063 11.0945 7.48601C11.0172 7.38206 10.9337 7.28287 10.8445 7.18901C10.1575 6.51871 9.2344 6.14551 8.27457 6.15C7.31474 6.15449 6.3952 6.53631 5.71449 7.21301L2.11949 10.806C1.45637 11.48 1.08611 12.3884 1.08922 13.3339C1.09233 14.2794 1.46855 15.1854 2.13609 15.855C2.80362 16.5246 3.70849 16.9036 4.65395 16.9096C5.59941 16.9155 6.50901 16.5481 7.18499 15.887C7.49166 15.2017 7.98803 14.6184 8.61549 14.206Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.861 3.23949C12.0514 3.0489 12.2774 2.89768 12.5263 2.79448C12.7751 2.69129 13.0418 2.63813 13.3112 2.63805C13.5806 2.63798 13.8474 2.69098 14.0963 2.79403C14.3452 2.89709 14.5713 3.04818 14.7618 3.23866C14.9523 3.42915 15.1034 3.6553 15.2064 3.9042C15.3095 4.1531 15.3625 4.41986 15.3624 4.68925C15.3624 4.95864 15.3092 5.22537 15.206 5.47421C15.1028 5.72305 14.9516 5.94911 14.761 6.13949L13.856 7.04399C14.3877 7.16766 14.8788 7.42592 15.282 7.79399L15.85 7.22649C16.5219 6.55304 16.899 5.64041 16.8984 4.68911C16.8979 3.7378 16.5197 2.82562 15.847 2.15294C15.1744 1.48027 14.2622 1.10212 13.3109 1.10156C12.3596 1.10101 11.4469 1.4781 10.7735 2.14999C10.581 2.34249 8.64149 4.26099 8.09799 4.80449C8.73672 4.75997 9.37709 4.86385 9.96899 5.10799C10.2295 4.84999 11.7535 3.34699 11.861 3.23949Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.57849 11.761C9.50549 11.4554 9.46592 11.1427 9.46049 10.8285C9.46049 10.6595 9.48449 10.5025 9.49949 10.341C9.00111 10.3321 8.52461 10.1347 8.16599 9.78851C7.89477 9.57353 7.68149 9.29426 7.54549 8.97601C7.46751 9.01942 7.39556 9.07288 7.33149 9.13501L6.51349 9.99101C6.67632 10.2981 6.88298 10.5799 7.12699 10.8275C7.45353 11.1376 7.83836 11.3797 8.25918 11.54C8.67999 11.7002 9.12842 11.7753 9.57849 11.761Z",fill:t}),e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.334 14.1135V13.421C14.3365 13.3067 14.3798 13.1971 14.456 13.112C14.9853 12.468 15.2788 11.6626 15.288 10.829C15.288 9.10149 14.3715 8.13599 12.988 8.13599C11.6045 8.13599 10.6615 9.13949 10.6615 10.829C10.685 11.6667 10.9923 12.4716 11.533 13.112C11.6093 13.1973 11.6526 13.3071 11.655 13.4215V14.111C11.6569 14.228 11.6157 14.3417 11.5391 14.4302C11.4626 14.5188 11.3561 14.576 11.24 14.591C8.45849 14.833 8.02399 16.7355 8.02399 17.486C8.02399 17.5695 8.03399 17.8975 8.03999 17.9795H17.9615C17.9615 17.9795 17.97 17.5695 17.97 17.486C17.97 16.767 17.4785 14.871 14.7475 14.5935C14.6318 14.5777 14.526 14.5202 14.4498 14.4318C14.3736 14.3434 14.3324 14.2302 14.334 14.1135Z",fill:t})]}),Oo=({className:t,tableData:s,tableHeader:a,tableEvents:n,toolbar:o,emptyTableMessage:r,tableBody:l})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:t,children:e.jsx(ne,{header:a,isLoading:!s.isInitialised,isEmpty:s.data.length===0,sort:s.sort,toolbar:o,emptyTableMessage:r,pagination:e.jsx(fe,{currentPage:s.pagination.currentPage,pageSize:s.pagination.pageSize,totalPages:s.pagination.totalPages,totalItems:s.pagination.totalItems,onPageChange:n.onPageChange,onPageSizeChange:n.onPageSizeChange}),hasGridLines:!0,onSort:n.onSort,children:e.jsx(l,{records:s.data,onChange:n.onRecordChange,onDelete:n.onValidUrlDelete})})})}),jr={COPY:{folderOverrideNotAllowed:"copy-folder-override-not-allowed",fileOverrideNotAllowed:"copy-file-override-not-allowed"},MOVE:{folderOverrideNotAllowed:"move-folder-override-not-allowed",fileOverrideNotAllowed:"move-file-override-not-allowed"}},Zl=({shouldOverrideDisabled:t,shouldAppendDisabled:s,shouldOverride:a,shouldAppend:n,onChange:o,className:r,shouldAppendToolTip:l,shouldOverrideToolTip:i})=>{const c="bottom";return e.jsx("div",{className:r,children:e.jsxs("div",{className:"confirmation-cell",children:[e.jsx(na,{title:i,placement:c,enterDelay:640,children:e.jsx(rn,{disabled:t,checked:a,name:"shouldOverride",onChange:o})})," ","/"," ",e.jsx(na,{title:l,placement:c,enterDelay:640,children:e.jsx(rn,{disabled:s,checked:n,name:"shouldAppend",onChange:o})})]})})},D2=({record:t,onChange:s,index:a})=>{const n=t.isOverrideAllowed?null:t.isFolder?U(jr[t.action].folderOverrideNotAllowed):U(jr[t.action].fileOverrideNotAllowed),o=r=>l=>s(t,r,{[l.target.name]:l.target.checked});return e.jsx("td",{className:"stick-right",children:e.jsx(Zl,{onChange:o(a),shouldOverrideDisabled:!t.isOverrideAllowed,shouldOverrideToolTip:n,shouldAppendDisabled:!t.isAppendAllowed,shouldOverride:t.isOverrideAllowed?t.shouldOverride:!1,shouldAppend:t.isAppendAllowed?t.shouldAppend:!1,className:"dyna-label color-default text-align-left"})})},O2=({onChange:t,totalShouldAppend:s,totalShouldOverride:a,totalNeedConfirmation:n})=>{const o=r=>{t("*","*",{[r.target.name]:r.target.checked})};return e.jsxs("div",{className:"need-confirmation-bulk-action",children:[e.jsx("span",{children:"Overriding / Appending"}),n>0&&e.jsx(Zl,{shouldAppendDisabled:!1,shouldOverrideDisabled:!1,shouldOverride:a===n,shouldAppend:s===n,onChange:o,className:"color-default text-align-left"})]})},U2=({records:t,onDelete:s})=>e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:a.isDeleted?"color-red-imp":"",children:[e.jsx(m,{size:"s",val:a.sourceLocale}),e.jsx(m,{size:"xl",align:"left",val:a.source}),e.jsx(m,{size:"s",val:a.destinationLocale}),e.jsx(Rn,{record:a}),e.jsx(Ln,{record:a}),e.jsx(ot,{isDeleted:a.isDeleted,onDeleteRestore:n=>s(a)})]},a._id))}),w2=({records:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{size:"s",val:s.sourceLocale}),e.jsx(m,{size:"xl",align:"left",val:s.source}),e.jsx(m,{size:"s",val:s.destinationLocale}),e.jsx(Rn,{record:s}),e.jsx(Ln,{record:s}),e.jsx(m,{size:"xl",align:"left",val:s.message})]},s._id))}),M2=({records:t,onChange:s})=>e.jsx("tbody",{children:t.map((a,n)=>e.jsxs("tr",{children:[e.jsx(m,{size:"xs",val:a.sourceLocale}),e.jsx(m,{size:"xl",align:"left",val:a.source}),e.jsx(m,{size:"s",val:a.destinationLocale}),e.jsx(Rn,{record:a}),e.jsx(Ln,{record:a}),e.jsx(m,{size:"s",align:"left",val:F.adobeMailToUserName(a.destinationLockedBy)}),e.jsx(m,{size:"s",align:"left",val:F.adobeMailToUserName(a.destinationCheckedoutBy)}),e.jsx(D2,{size:"s",record:a,onChange:s,index:n})]},a._id))}),$2={columns:[{label:"Source Locale",sortKey:"sourceLocale"},{label:"Source File",align:"left",sortKey:"source"},{label:"Destination Locale",sortKey:"destinationLocale"},{label:"Destination Path",align:"left",sortKey:"destination"},{label:"Destination Filename",align:"left",sortKey:"fileName"},{label:"Actions",stick:"right"}]},F2={columns:[{label:"Source Locale",sortKey:"sourceLocale"},{label:"Source File",align:"left",sortKey:"source"},{label:"Destination Locale",sortKey:"destinationLocale"},{label:"Destination Path",align:"left",sortKey:"destination"},{label:"Destination Filename",align:"left",sortKey:"fileName"},{label:"Error",align:"left",sortKey:"message"}]},V2=t=>({columns:[{label:"Source Locale",sortKey:"sourceLocale"},{label:"Source File",align:"left",sortKey:"source"},{label:"Destination Locale",sortKey:"destinationLocale"},{label:"Destination Path",align:"left",sortKey:"destination"},{label:"Destination Filename",align:"left",sortKey:"fileName"},{label:"Destination Locked By",align:"left",sortKey:"destinationLockedBy"},{label:"Destination Checkout By",align:"left",sortKey:"destinationCheckedoutBy"},{component:t,align:"center",stick:"right"}]}),B2=t=>e.jsx(Oo,{className:"CMSR-common-table",tableBody:w2,tableHeader:F2,emptyTableMessage:U("invalid-urls--empty-record-message"),...t}),K2=t=>{const{tableEvents:s,tableData:a}=t,n=V2(e.jsx(O2,{onChange:s.onRecordChange,...a.stats}));return e.jsxs(e.Fragment,{children:[a.data.length!==0?e.jsxs(Ft,{children:["Choosing ",e.jsx("b",{children:'"Override"'})," action will remove version history for files associated with the selected record. Back up crucial information before proceeding."]}):null,e.jsx(Oo,{className:"CMSR-NC-table",tableBody:M2,tableHeader:n,emptyTableMessage:U("need-confirmation-urls--empty-record-message"),...t})]})},H2=t=>e.jsx(Oo,{className:"CMSR-common-table",tableBody:U2,tableHeader:$2,emptyTableMessage:U("valid-urls--empty-record-message"),...t}),z2=[{filter:"isValid",value:!0},{filter:"sourceExist",value:!1},{filter:"isNeededConfirmation",value:!0}],q2=[{isValid:!0},{sourceExist:!1},{isNeededConfirmation:!0}],Kn=[{label:"Valid Urls",Icon:T2,component:H2,count:0,countKey:"totalValid"},{label:"Invalid Urls",Icon:_2,component:B2,count:0,countKey:"totalInvalid"},{label:"Need Confirmation",Icon:A2,component:K2,count:0,countKey:"totalNeedConfirmation"}],G2=t=>(t.meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"}),t),J2=(t,s,a,n)=>{const o={};return Object.hasOwnProperty.call(a,"shouldOverride")&&(o.shouldOverride=a.shouldOverride,o.shouldAppend=a.shouldOverride?!1:o.shouldAppend||!1),Object.hasOwnProperty.call(a,"shouldAppend")&&(o.shouldAppend=a.shouldAppend,o.shouldOverride=o.shouldAppend?!1:a.shouldOverride||!1),{[s==="*"?"ids":"id"]:t._id||s,recordIndex:s,payload:o}},vr=(t,s,a)=>{t(Ut({action:a,filter:q2[s]}))},Hs=(t,s)=>t(za({filters:z2[s]})).then(G2),yr=(t,s,a)=>{const o=le({sortKey:s,sortOrder:a,reportKey:"copyMoveStatusReport"});t(o)},W2=(t,s)=>{const n=Le({pageSize:s,reportKey:"copyMoveStatusReport"});t(n)},Y2=(t,s,a,n,o)=>{const r=J2(s,a,n);return t(a==="*"?to(r):_l(r))},Sr=t=>t(so());const Z2=({steps:t,currentStep:s,onNext:a,onBack:n,onStepClick:o})=>e.jsxs("div",{className:"copy-move-wizard-nav",children:[e.jsx("div",{className:"wizard-step-tracker",children:t.map(({label:r,count:l,Icon:i},c)=>e.jsxs("div",{className:`step-container ${c<=s&&"active"}`,onClick:d=>o(c),children:[c>0&&e.jsx(co,{fontSize:"small"}),i&&e.jsx(i,{fill:c<=s?"blue":"gray"}),e.jsxs("div",{className:"step-name",children:[r," (",l,")"]})]},c))}),e.jsxs("div",{children:[e.jsx(xe,{disabled:s===0,color:"secondary",iconOnly:!0,onClick:n,children:e.jsx(ic,{})}),e.jsx(xe,{disabled:s===2,iconOnly:!0,onClick:a,children:e.jsx(cc,{})})]})]}),X2=t=>{const{steps:s,currentStep:a,wizardEvents:n}=t,{onNext:o,onBack:r,onChangeStep:l}=n,i=s[a];return i?e.jsx(i.component,{...t,toolbar:e.jsx(me,{children:e.jsx(Z2,{steps:s,currentStep:a,onNext:o,onBack:r,onStepClick:l})})}):null};const Xl=({isVisible:t,portals:s,onReset:a})=>{const[n,o]=h.useState(!1),[r,l]=h.useState(0),[i,c]=h.useState(null),[d,u]=h.useState(Kn),{processUrlsInBatches:p}=Te(),f=E.useDispatch(),{navDirection:g,processUrls:C,currentJob:b}=E.useSelector(D=>D.operations),x=E.useSelector(D=>D.operations.copyMoveStatusReport),{action:j}=E.useSelector(D=>D.operations.copyMove),y=b!==null,v=()=>{f(Ee())},L=()=>{o(!0)},S=h.useCallback(()=>{l(0),o(!1),f(ap()),f(he())},[f]),P=h.useCallback(async()=>{var M;const D=await Hs(f,0);(M=D==null?void 0:D.payload)!=null&&M.extraData&&u(Kn.map(T=>({...T,count:D.payload.extraData[T.countKey]})))},[f]);h.useEffect(()=>{if(t&&g==="next"){if(u(Kn.map(D=>({...D,count:0}))),y){f(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching recods...",progress:-1})),P();return}p({inputUrls:C,processApi:x1,destination:"Status",onComplete:P,onCancel:S,onJobCreated:D=>c(D)})}},[t,y,g,C,p,P,S,f]);const A={onChangeStep(D){yr(f,"message","desc"),Hs(f,D),l(D),D===2&&Sr(f)},onNext:()=>{A.onChangeStep(r+1)},onBack:()=>{A.onChangeStep(r-1)}},w={onSort(D){yr(f,D),Hs(f,r)},onPageChange(D){Hs(f,r)},onPageSizeChange(D){W2(f,D),Hs(f,r)},onRecordChange(D,M,T){Y2(f,D,M,T).then(()=>{r===2&&Sr(f)})},onExport(){vr(f,r,`${j}_STATUS`)},onValidUrlDelete(D){f(qa({id:D._id,isDeleted:!D.isDeleted,action:j}))}};return t?i?e.jsx(Ye,{jobId:i.jobId,jobName:i.jobName,route:`/bulkops/jobs/${j.toLowerCase()}`}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(X2,{navLoading:!0,tableEvents:w,tableData:x,wizardEvents:A,currentStep:r,steps:d}),s.actions&&x.data.length>0&&Q.createPortal(e.jsx(ke,{onExport:D=>vr(f,r,`${j}_STATUS`)}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!0,nextDisabled:r<(d==null?void 0:d.length)-1||x.pagination.processUrlCount===0,prevDisabled:y,onPrev:L,onNext:v,nextLabel:U("done"),children:e.jsx("div",{className:"wizard-steps-progress-controls right",children:e.jsx(ds,{isVisible:y,onDiscarded:a})})}),s.footer),n&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:S,onCancel:()=>o(!1)})]}):null},Q2=[{name:"Input Urls",description:"Enter multiple urls to process"},{name:"Process Urls",description:"URLs ready to be processed"},{name:"Status",description:"Status summary for the urls"},{name:"Copy",description:"Copy all the urls"}],ef=()=>{const t=E.useDispatch(),s=a=>{a&&t(Ul("COPY"))};return e.jsx(He,{title:"Copy",description:U("copy-file-description"),clearActions:{3:"CMOVE_STATUS",4:"COPY"},steps:Q2,idGenerationStep:3,onInitializationChange:s,children:({currentStep:a,portals:n,reInitialize:o})=>e.jsxs(h.Fragment,{children:[e.jsx(Jl,{isVisible:a===1,portals:n,isMove:!1}),e.jsx(Wl,{isVisible:a===2,maxUrlsKey:"CMOVE_MAX_PROCESSABLE_URLS",portals:n}),e.jsx(Xl,{isVisible:a===3,portals:n,onReset:o}),e.jsx(Yl,{isVisible:a===4,portals:n,onReset:o})]})})};const Ql=()=>{const{jobsSummary:t}=E.useSelector(r=>r.jobs),[s,a]=h.useState(t.length>0),n=E.useDispatch(),o=ee.useNavigate();return h.useEffect(()=>{let r,l;const i=(c=()=>{})=>{l=n(Ws()),l.then(d=>{_.isRejected(d)&&d.meta.aborted||(c(),r=setTimeout(i,Mt.JOBS_REFRESH_INTERVAL))})};return i(c=>a(!0)),()=>{l&&l.abort(),clearTimeout(r)}},[n]),s?e.jsx("div",{className:"jobs-summary",children:t.map(r=>{var l;return e.jsxs("div",{className:"job-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h1",{children:(l=r.jobType)==null?void 0:l.toUpperCase()}),e.jsxs("div",{className:"header-icon-container",children:[r.actionReq>0&&e.jsx(Rt,{className:"header-icon action-req"}),r.inProgressMaxUrls>0&&e.jsx(ks,{variant:"determinate",className:"header-icon",value:r.inProgressProcessedUrls/r.inProgressMaxUrls*100,size:24,thickness:6})]})]}),e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"card-section",children:[e.jsx("div",{className:"section-title",children:"QUEUE"}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Total Jobs"}),e.jsx("span",{children:r.total})]}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Positions"}),e.jsx("span",{className:r.positions.length>3?"overflowing-content":"",title:r.positions.join(", "),children:r.positions.length>0?r.positions.join(", "):"n/a"})]})]}),e.jsxs("div",{className:"card-section",children:[e.jsx("div",{className:"section-title",children:"DONE"}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Actions Req."}),e.jsx("span",{children:r.actionReq})]}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Completed"}),e.jsx("span",{children:r.completed})]})]})]}),e.jsx(xe,{endIcon:e.jsx(dc,{}),onClick:i=>o(`/bulkops/jobs/${r.jobType}`),children:"View Jobs"})]},`job-card-${r.jobType}`)})}):e.jsxs("div",{className:"jobs-summary-loading-container",children:[e.jsx(ks,{}),e.jsx("span",{className:"loading-message",children:"Fetching job summaries"})]})},tf=()=>e.jsx(We,{title:"Dashboard",description:U("dashboard-desc"),children:e.jsx("div",{className:"page-content",children:e.jsx(Ql,{})})});const sf=[{value:"UNPREVIEW",label:"Un-Preview"},{value:"UNPUBLISH",label:"Un-Publish"}],af=({isVisible:t,portals:s})=>{const a=E.useSelector(u=>u.operations.deactivation),n=E.useSelector(u=>u.operations.navDirection),[o,r]=h.useState(""),l=E.useDispatch(),i=()=>{l(np({operation:o})),l(Ee())},c=()=>{l(he())},d=u=>{r(u)};return h.useEffect(()=>{a.operation.length===0&&r("")},[a]),h.useEffect(()=>{t&&n==="next"&&r("")},[t,n]),t?e.jsxs($t,{className:"deactivate-options",title:"Select Operation",children:[e.jsx(vn,{styles:Ot.picker,value:o,items:sf,onChange:d}),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:!o,onPrev:c,onNext:i}),s.footer)]}):null},It=({val:t,...s})=>e.jsx(m,{val:t||"us",...s}),nf=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(It,{val:s.local,stick:"left"}),e.jsx(m,{val:s.file,align:"left"}),e.jsx(X,{url:s.previewUrl}),e.jsx(m,{val:s.lastPreviewStatusCode}),e.jsx(m,{val:s.currentPreviewStatusCode}),e.jsx(ge,{val:s.lastPreviewed}),e.jsx(ge,{val:s.createdAt}),e.jsx(m,{val:s.unPreviewed?"PASS":"FAIL"})]},s._id))}),of=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(It,{val:s.local,stick:"left"}),e.jsx(m,{val:s.file,align:"left"}),e.jsx(X,{url:s.previewUrl}),e.jsx(X,{url:s.liveUrl}),e.jsx(m,{val:s.lastLiveStatusCode}),e.jsx(m,{val:s.currentLiveStatusCode,align:"left"}),e.jsx(ge,{val:s.lastPublished}),e.jsx(ge,{val:s.currentPublished}),e.jsx(ge,{val:s.createdAt}),e.jsx(m,{val:s.unPublished?"PASS":"FAIL"})]},s._id))}),rf={categories:[{label:"",span:5},{label:"UN-PREVIEW",span:5}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"path"},{label:"URL",sortKey:"previewUrl"},{label:"Last Preview HTTP Status",sortKey:"lastPreviewStatusCode"},{label:"Current HTTP Status",sortKey:"currentPreviewStatusCode"},{label:"Last Previewed",sortKey:"lastPreviewed"},{label:"Un Preview Date",sortKey:"createdAt"},{label:"Operation Status",sortKey:"unPreviewed"}]},lf={categories:[{label:"",span:4},{label:"UN-PUBLISH",span:8}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left",align:"left"},{label:"File",sortKey:"path"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Last Publish HTTP Status",sortKey:"lastLiveStatusCode"},{label:"Current Publish HTTP Status",sortKey:"currentLiveStatusCode"},{label:"Last Published Date",sortKey:"lastPublished"},{label:"Current Published Date",sortKey:"currentPublished"},{label:"Un Published Date",sortKey:"createdAt"},{label:"Operation Status",sortKey:"unPublished"}]},cf={UNPREVIEW:rf,UNPUBLISH:lf},df=({isVisible:t,portals:s,onReset:a})=>{const{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(y=>y.operations.deactivationReport),i=E.useSelector(y=>y.operations.deactivation.operation),c=E.useDispatch(),{processUrlsInBatches:d}=Te(),{numberedRows:u}=Ne(r,o),p=cf[i],f=y=>{c(le({sortKey:y,reportKey:"deactivationReport"})),c(Wt())},g=y=>{c(Wt(y))},C=y=>{c(Le({pageSize:y,reportKey:"deactivationReport"})),c(Wt())},b=()=>{c(Nt({action:i.toUpperCase()})).then(({meta:y,payload:v})=>{y.requestStatus==="fulfilled"&&(v!=null&&v.data)&&d({inputUrls:v.data,processApi:v1,destination:"Deactivation",useCanProcessUrlsCheck:!1,onComplete:j,onCancel:j})})},x=()=>{c(he())},j=h.useCallback(async()=>{c(le({sortKey:"message",sortOrder:"desc",reportKey:"deactivationReport"})),(await c(Wt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[c]);return t?e.jsxs("div",{className:"wizard-container",children:[e.jsxs("div",{className:"deactivation-report-step-table",children:[e.jsxs(ne,{header:p,isLoading:!n,sort:l,toolbar:e.jsx(me,{count:r.totalItems}),isEmpty:o.length===0,pagination:e.jsx(fe,{...r,onPageChange:g,onPageSizeChange:C}),onSort:f,children:[i==="UNPREVIEW"&&e.jsx(nf,{data:u}),i==="UNPUBLISH"&&e.jsx(of,{data:u})]}),s.actions&&Q.createPortal(e.jsx(ke,{action:i.toUpperCase()}),s.actions)]}),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Reset",prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer),e.jsx(Pt,{onConfirm:b,onCancel:x})]}):null},uf=({data:t,deactivation:s,onDelete:a})=>e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{children:[e.jsx(m,{val:n._num}),e.jsx(m,{val:n.domain}),e.jsx(It,{val:n.local,stick:"left"}),e.jsx(m,{val:n.file,align:"left"}),e.jsx(X,{url:n.previewUrl}),e.jsx(m,{val:n.lastPreviewStatusCode,align:"left"}),e.jsx(ge,{val:n.lastPreviewed}),e.jsx(X,{url:n.liveUrl,align:"left"}),e.jsx(m,{val:n.liveStatusCode}),e.jsx(ge,{val:n.lastPublished}),e.jsx(m,{val:s.operation}),e.jsx(ot,{isDeleted:n.isDeleted,disabled:s.operation==="UNPREVIEW"&&!n.isUnPreviewable||s.operation==="UNPUBLISH"&&!n.isUnPublishable,onDeleteRestore:()=>a(n)})]},n._id))}),Er={categories:[{label:"",span:4},{label:"Preview",span:7},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"path",align:"left"},{label:"Url",sortKey:"previewUrl"},{label:"Preview Status",sortKey:"lastPreviewStatusCode"},{label:"Last Previewed Date",sortKey:"lastPreviewed"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Publish Status",sortKey:"liveStatusCode"},{label:"Last Published",sortKey:"lastPublished"},{label:"Operation",sortKey:""},{label:"Actions",stick:"left",size:"xs"}]},pf={UNPREVIEW:Er,UNPUBLISH:Er},hf=({isVisible:t,portals:s,onReset:a})=>{const{navDirection:n,processUrls:o,deactivation:r,currentJob:l}=E.useSelector(T=>T.operations),{isInitialised:i,data:c,pagination:d,sort:u}=E.useSelector(T=>T.operations.statusReport),[p,f]=h.useState(!1),g=E.useDispatch(),{processUrlsInBatches:C}=Te(),{numberedRows:b}=Ne(d,c),x=l!==null,j=pf[r.operation],y=`${r.operation}_STATUS`,v=T=>{g(le({sortKey:T,reportKey:"statusReport"})),g(Jt())},L=T=>{g(Jt(T))},S=T=>{g(Le({pageSize:T,reportKey:"statusReport"})),g(Jt())},P=T=>{g(Ga({id:T._id,isDeleted:!T.isDeleted}))},A=()=>{g(Ee())},w=()=>{f(!0)},D=h.useCallback(()=>{g(Je("statusReport")),f(!1),g(he())},[g]),M=h.useCallback(async()=>{g(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"statusReport"})),(await g(Jt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[g]);return h.useEffect(()=>{t&&n==="next"&&(x?(g(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching recods...",progress:-1})),M()):C({inputUrls:o.filter(({isActive:T})=>T).map(({inputUrl:T})=>T),processApi:j1,destination:"Status",useCanProcessUrlsCheck:!1,onComplete:M,onCancel:D}))},[t,x,n,o,C,M,D,g]),t?e.jsxs("div",{className:"wizard-container",children:[e.jsx(ne,{header:j,isLoading:!i,sort:u,isEmpty:b.length===0,toolbar:e.jsx(me,{count:d.totalItems}),pagination:e.jsx(fe,{...d,onPageChange:L,onPageSizeChange:S}),onSort:v,children:e.jsx(uf,{data:b,deactivation:r,onDelete:P})}),s.actions&&Q.createPortal(e.jsx(ke,{action:y}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:r.operation,nextDisabled:c.length===0||d.processUrlCount===0,prevDisabled:x,onPrev:w,onNext:A,children:r.operation&&e.jsxs("div",{className:"wizard-steps-progress-controls right",children:[e.jsxs("span",{children:[d.processUrlCount," urls are ready to be processed"]}),e.jsx(ds,{isVisible:x,onDiscarded:a})]})}),s.footer),p&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:D,onCancel:()=>f(!1)})]}):null},Uo=(t=null)=>{const s=E.useSelector(o=>o.local.userInfo),a=ee.useLocation(),n=ee.useNavigate();h.useEffect(()=>{(t||[a.pathname]).includes(a.pathname)&&!s.isAdmin&&n("/bulkops")},[t,a.pathname,s.isAdmin])},ff=[{name:"Input Urls",description:"Input Urls Desc"},{name:"Process Urls",description:"Process Urls Desc"},{name:"Options",description:"Deactivate Options"},{name:"Status",description:"Status"},{name:"Deactivation Report",description:"Deactivation Report"}],mf=()=>{const t=E.useSelector(s=>s.operations.deactivation);return Uo(),e.jsx(He,{title:"Deactivation",description:U("deactivation-desc"),clearActions:{4:t.operation,5:t.operation},steps:ff,idGenerationStep:4,children:({currentStep:s,portals:a,reInitialize:n})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:s===1,portals:a}),e.jsx(ht,{isVisible:s===2,destination:"options",maxUrlsKey:"DEACTIVATE_MAX_PROCESSABLE_URLS",portals:a}),e.jsx(af,{isVisible:s===3,portals:a}),e.jsx(hf,{isVisible:s===4,portals:a,onReset:n}),e.jsx(df,{isVisible:s===5,portals:a,onReset:n})]})})},gf=[{id:"includeAllChild",label:"Include All Child",value:!1}],xf=({isVisible:t,portals:s})=>{const a=E.useSelector(c=>c.operations.exportListOptions),n=E.useSelector(c=>c.operations.navDirection),o=E.useDispatch(),r=()=>{o(Ee())},l=()=>{o(he())},i=c=>{o(ur({...a,[c]:!a[c]}))};return h.useEffect(()=>{t&&n==="next"&&o(ur({getFranklinStatus:!1,includeAllChild:!1}))},[t,n,o]),t?e.jsxs($t,{className:"exportList-options",title:"Select Operation",children:[gf.map(c=>e.jsx(bn,{styles:De.y8,isSelected:a[c.id]||!1,onChange:()=>i(c.id),children:c.label})),s.footer&&Q.createPortal(e.jsx(pe,{onPrev:l,onNext:r}),s.footer)]}):null},bf=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(It,{val:s.locale,stick:"left"}),e.jsx(m,{align:"left",val:s.path}),e.jsx(m,{val:s.firstDirectory}),e.jsx(m,{val:s.secondDirectory}),e.jsx(m,{align:"left",val:s.fileName}),e.jsx(X,{url:s.sharepointUrl}),e.jsx(ge,{val:s.createdAt}),e.jsx(ve,{val:s.createdBy}),e.jsx(ge,{val:s.updatedAt}),e.jsx(ve,{val:s.updatedBy}),e.jsx(ve,{val:s.lockedBy}),e.jsx(ve,{val:s.checkoutBy})]},s._id))}),Cf=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(It,{val:s.locale,stick:"left"}),e.jsx(m,{align:"left",val:s.path}),e.jsx(m,{val:s.firstDirectory}),e.jsx(m,{val:s.secondDirectory}),e.jsx(m,{align:"left",val:s.fileName}),e.jsx(X,{url:s.sharepointUrl}),e.jsx(ge,{val:s.createdAt}),e.jsx(ve,{val:s.createdBy}),e.jsx(ge,{val:s.updatedAt}),e.jsx(ve,{val:s.updatedBy}),e.jsx(ve,{val:s.lockedBy}),e.jsx(ve,{val:s.checkoutBy})]},s._id))}),jf={categories:[{label:"",span:7},{label:"Document",span:7}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"locale",stick:"left"},{label:"File",sortKey:"path",align:"left"},{label:"First Directory",sortKey:"firstDirectory"},{label:"Second Directory",sortKey:"secondDirectory"},{label:"FileName",sortKey:"fileName",align:"left"},{label:"Sharepoint Url",sortKey:"sharepointUrl",align:"left"},{label:"Created Date",sortKey:"createdAt"},{label:"Created By",sortKey:"createdBy"},{label:"Last Modified Date",sortKey:"updatedAt"},{label:"Last Modified By",sortKey:"updatedBy"},{label:"Locked By",align:"left",sortKey:"lockedBy"},{label:"Checkout By",align:"left",sortKey:"checkoutBy"}]},vf={categories:[{label:"",span:7},{label:"Document",span:7}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"locale",stick:"left",align:"left"},{label:"File",sortKey:"path"},{label:"First Directory",sortKey:"firstDirectory"},{label:"Second Directory",sortKey:"secondDirectory"},{label:"FileName",sortKey:"fileName",align:"left"},{label:"Sharepoint Url",sortKey:"sharepointUrl",align:"left"},{label:"Created Date",sortKey:"createdAt"},{label:"Created By",sortKey:"createdBy"},{label:"Last Modified Date",sortKey:"updatedAt"},{label:"Last Modified By",sortKey:"updatedBy"},{label:"Locked By",align:"left",sortKey:"lockedBy"},{label:"Checkout By",align:"left",sortKey:"checkoutBy"}]},kr={getFranklinStatus:jf,includeAllChild:vf},yf=({isVisible:t,portals:s,onReset:a})=>{const{processUrls:n}=E.useSelector(y=>y.operations),{isInitialised:o,data:r,pagination:l,sort:i}=E.useSelector(y=>y.operations.exportListReport),{getFranklinStatus:c}=E.useSelector(y=>y.operations.exportListOptions),d=E.useDispatch(),{processUrlsInBatches:u}=Te(),{numberedRows:p}=Ne(l,r),f=c?kr.getFranklinStatus:kr.includeAllChild,g=y=>{d(le({sortKey:y,reportKey:"exportListReport"})),d(Yt())},C=y=>{d(Yt(y))},b=y=>{d(Le({pageSize:y,reportKey:"exportListReport"})),d(Yt())},x=h.useCallback(()=>{d(he())},[d]),j=h.useCallback(async()=>{d(le({sortKey:"message",sortOrder:"desc",reportKey:"exportListReport"})),(await d(Yt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[d]);return h.useEffect(()=>{t&&u({inputUrls:n.filter(({isActive:y})=>y).map(({inputUrl:y})=>y),processApi:S1,destination:"ExportList",useCanProcessUrlsCheck:!1,onComplete:j,onCancel:x})},[t,n,u,j,x]),t?e.jsxs("div",{className:"wizard-container",children:[e.jsxs("div",{className:"export-list-step-4-table",children:[e.jsx(ne,{header:f,isLoading:!o,sort:i,toolbar:e.jsx(me,{count:l.totalItems}),isEmpty:r.length===0,pagination:e.jsx(fe,{...l,onPageChange:C,onPageSizeChange:b}),onSort:g,children:c?e.jsx(bf,{data:p}):e.jsx(Cf,{data:p})}),s.actions&&Q.createPortal(e.jsx(ke,{action:"SHAREPOINT_EXPORT"}),s.actions)]}),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Reset",prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer)]}):null},Sf=[{name:"Input Urls",description:"Input Urls Desc"},{name:"Process Urls",description:"Process Urls Desc"},{name:"Options",description:"Export List Options Desc"},{name:"Export List Report",description:"Export List Report Desc"}],Ef=()=>e.jsx(He,{title:"Export List",description:U("export-list-desc"),clearActions:{4:"SHAREPOINT_EXPORT"},steps:Sf,idGenerationStep:4,children:({currentStep:t,portals:s,reInitialize:a})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{inputUrlFieldLabel:U("export-list-input-urls"),isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,destination:"options",maxUrlsKey:"EXPORT_LIST_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(xf,{isVisible:t===3,portals:s}),e.jsx(yf,{isVisible:t===4,portals:s,onReset:a})]})}),kf=()=>{const{isLoading:t}=E.useSelector(o=>o.operations),{id:s}=ee.useParams(),a=E.useDispatch();h.useEffect(()=>{s&&n()},[s]);function n(){a(Oa(s))}return e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("div",{children:["Your download will start shortly. If it does not start automatically,",e.jsx("a",{className:"underline cursor-pointer",onClick:()=>{Oe({name:Be.RE_TRY_EXPORT}),n()},children:"click here"})]}),t&&e.jsx(Ke,{})]})};const wo=({className:t="",label:s,checked:a,disabled:n,isEmphasized:o=!1,onChange:r})=>e.jsx(bo,{className:`checkbox-root ${o&&"cb-emphasized"} ${t}`,control:e.jsx(rn,{checked:a,disabled:n,disableRipple:!0,onChange:r}),label:s}),Rf=({isVisible:t,portals:s})=>{const{fragmentRefOptions:a}=E.useSelector(i=>i.operations),n=E.useDispatch(),o=()=>{n(Ee())},r=()=>{n(he())},l=(i,c,d)=>{n(sp({[i]:d}))};return t?e.jsxs($t,{title:"Fragment Reference Options",children:[e.jsx(wo,{label:"Only level 1 references",checked:a.scanLevel==1,onChange:l.bind(null,"scanLevel")}),s.footer&&Q.createPortal(e.jsx(pe,{onNext:o,onPrev:r}),s.footer)]}):null},Lf={columns:[{label:"domain",sortKey:"domain",align:"left"},{label:"locale",sortKey:"locale",align:"left"},{label:"path",sortKey:"path",align:"left"},{label:"input Url",sortKey:"url",align:"left"},{label:"page Url",sortKey:"pageUrl",align:"left"},{label:"ref Type",size:"s",sortKey:"refType",align:"left"},{label:"input Url Type",size:"s",sortKey:"inputUrlType",align:"left"},{label:"xf Circular Ref",size:"s",sortKey:"xfCircularRef",align:"left"},{label:"chain Count",size:"s",sortKey:"chainCount",align:"left"},{label:"chain",sortKey:"chain",align:"left"}]},Nf=({fragmentRefReport:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{size:"m",val:s.domain,align:"left"}),e.jsx(m,{size:"s",val:s.locale,align:"left"}),e.jsx(m,{size:"l",val:s.path,align:"left"}),e.jsx(X,{size:"xl",align:"left",url:s.url}),e.jsx(X,{size:"xl",align:"left",url:s.pageUrl}),e.jsx(m,{size:"s",align:"left",val:s.refType}),e.jsx(m,{size:"s",align:"left",val:s.inputUrlType}),e.jsx(m,{size:"s",align:"left",val:F.booleanToString(s.xfCircularRef)}),e.jsx(m,{size:"s",align:"left",val:s.chainCount}),e.jsx(m,{size:"xl",align:"left",val:Object.values(s.chain).join(",")})]},s._id))}),Pf=({isVisible:t,portals:s})=>{const[a,n]=h.useState(!1),{processUrls:o}=E.useSelector(j=>j.operations),{isInitialised:r,data:l,pagination:i,sort:c}=E.useSelector(j=>j.operations.fragmentRefReport),d=E.useDispatch(),{processUrlsInBatches:u}=Te(),p=j=>{d(le({sortKey:j,reportKey:"fragmentRefReport"})),d(Zt())},f=j=>{d(Zt(j))},g=j=>{d(Le({pageSize:j,reportKey:"fragmentRefReport"})),d(Zt())},C=()=>{n(!0)},b=h.useCallback(()=>{d(Je("fragmentRefReport")),n(!1),d(he())},[d]),x=h.useCallback(async()=>{d(le({sortKey:"locale",sortOrder:"desc",reportKey:"fragmentRefReport"})),(await d(Zt(1))).meta.requestStatus==="rejected"&&ye.enqueueSnackbar("Something went wrong while fetching the status report",{variant:"error"})},[d]);return h.useEffect(()=>{t&&u({inputUrls:o.filter(({isActive:j})=>j).map(({inputUrl:j})=>j),processApi:k1,destination:"Fragment Reference",useCanProcessUrlsCheck:!1,onComplete:x,onCancel:b})},[t,o,u,x,b]),t?e.jsxs("div",{className:"wizard-container",children:[s.actions&&Q.createPortal(e.jsx(ke,{action:"URL_REFERENCE",isDisabled:i.totalItems===0}),s.actions),e.jsx(ne,{header:Lf,isLoading:!r,sort:c,toolbar:e.jsx(me,{count:i.totalItems}),isEmpty:l.length===0,pagination:e.jsx(fe,{...i,onPageChange:f,onPageSizeChange:g}),onSort:p,children:e.jsx(Nf,{fragmentRefReport:l})}),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!1,onPrev:C}),s.footer),a&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:b,onCancel:()=>n(!1)})]}):null},If=[{name:"Input Urls",description:"Enter multiple urls to process"},{name:"Process Urls",description:"Urls that are ready to preview"},{name:"Options",description:"Fragment References Request Options"},{name:"Fragment References",description:"Fragment references summary for the urls"}],Tf=()=>e.jsx(He,{title:"Fragment References",discription:"Retrieve a list of files containing provided fragments.",clearActions:{4:"URL_REFERENCE"},steps:If,idGenerationStep:4,children:({currentStep:t,portals:s})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,destination:"Fragment References",maxUrlsKey:"FRAGMENT_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(Rf,{isVisible:t===3,portals:s}),e.jsx(Pf,{isVisible:t===4,portals:s})]})});const Rr=({className:t,label:s,value:a,checked:n,onChange:o})=>e.jsx(bo,{className:`radio-button-root ${t}`,label:s,value:a,checked:n,control:e.jsx(uc,{icon:e.jsx("div",{className:"icon-unchecked"}),checkedIcon:e.jsx("div",{className:"icon-checked"})}),onChange:o}),_f=pc,Af=({isVisible:t,portals:s})=>{const a=E.useSelector(c=>c.operations.fragmentOptions),n=E.useDispatch(),o=()=>{n(Ee())},r=()=>{n(he())},l=c=>{if(a.targetHost===Cs.LIVE)return;const d=c.target.checked;n(dr({forcePreview:d}))},i=c=>{const d=c.target.value;n(dr({forcePreview:a.targetHost!==Cs.PREVIEW&&a.forcePreview,targetHost:d}))};return t?e.jsxs($t,{title:"Extract fragments from",children:[e.jsxs(_f,{value:a.targetHost,onChange:i,children:[e.jsx(Rr,{label:"Published URLs",value:Cs.LIVE}),e.jsx(Rr,{label:"Previewed URLs",value:Cs.PREVIEW})]}),e.jsx("div",{className:"indent-lv1",children:e.jsx(wo,{label:"Check this box to force preview the pages and XF",disabled:a.targetHost===Cs.LIVE,checked:a.forcePreview,onChange:l})}),s.footer&&Q.createPortal(e.jsx(pe,{onPrev:r,onNext:o}),s.footer)]}):null};const Nn=({segments:t,index:s=0,variant:a="accent",onChange:n})=>e.jsx("div",{className:"seg-ctrl-root",children:t.map((o,r)=>e.jsx("div",{className:`${r===s&&"seg-active"} variant-${a}`,onClick:l=>n(r),children:e.jsx("span",{children:o})},o))}),us=({condition:t,children:s})=>t?s:null,Df=[{label:"URL",align:"left",sortKey:"xf.url"},{label:"HTTP Status",sortKey:"xf.httpStatusCode"},{label:"Parent Page URL",align:"left",sortKey:"xf.parentPageUrl"},{label:"Level",sortKey:"xf.level"},{label:"Circular XF",sortKey:"xf.circularXF"}],ei=[{label:"Domain",sortKey:"source.domain"},{label:"Locale",sortKey:"source.locale"},{label:"File",align:"left",sortKey:"source.file",sortOrder:"asc"},{label:"HTTP Status",sortKey:"source.httpStatusCode"}],ti=[{label:"URL",align:"left",sortKey:"sharepoint.url"},{label:"File Size",sortKey:"sharepoint.sharepointFileSize"},{label:"HTTP Status",sortKey:"sharepoint.httpStatusCode"},{label:"Modified At",sortKey:"sharepoint.updatedAt"},{label:"Modified By",sortKey:"sharepoint.updatedBy"}],si=[{label:"Preview URL",sortKey:"franklin.prePreview.url"},{label:"Last Preview Status",sortKey:"franklin.prePreview.httpStatusCode"},{label:"Last Preview Date",sortKey:"franklin.prePreview.previewedAt"},{label:"Message",sortKey:"franklin.prePreview.message"}],ai=[{label:"Post HTTP Status",sortKey:"franklin.postPreview.httpStatusCode"},{label:"Post Modified At",sortKey:"franklin.postPreview.previewedAt"},{label:"Message",sortKey:"franklin.postPreview.message"}],ni=[{label:"Live URL",align:"left",sortKey:"franklin.live.url"},{label:"Live HTTP Status",sortKey:"franklin.live.httpStatusCode"},{label:"Live Modified At",sortKey:"franklin.live.publishedAt"},{label:"Message",sortKey:"franklin.live.message"}],oi=t=>({categories:[{label:"",span:1},{label:"Source",span:4},{label:"Experience Fragment",span:5},{label:"Document",span:5},{label:"Franklin",span:t?11:8}],columns:[{label:"#"},...ei,...Df,...ti,...si,...t?ai:[],...ni]}),ri=t=>({categories:[{label:"",span:1},{label:"Source",span:5},{label:"Document",span:5},{label:"Franklin",span:t?11:8}],columns:[{label:"#"},...ei,{label:"Fragments Counts",align:"left",sortKey:"source.fragmentsCount"},...ti,...si,...t?ai:[],...ni]}),Of=({data:t,forcePreview:s,sort:a,toolbar:n,pagination:o,isLoading:r,onSort:l,onPageChange:i,onPageSizeChange:c})=>e.jsx(ne,{header:ri(s),sort:a,isLoading:r,isEmpty:t.length===0,toolbar:n,pagination:e.jsx(fe,{...o,onPageChange:i,onPageSizeChange:c}),onSort:l,children:e.jsx("tbody",{children:t.map(d=>e.jsxs("tr",{children:[e.jsx(m,{val:d._num}),e.jsx(m,{val:d.source.domain,align:"left"}),e.jsx(m,{val:d.source.localeText.toLowerCase()}),e.jsx(m,{val:d.source.file,align:"left",size:"l"}),e.jsx(m,{val:d.source.httpStatusCode}),e.jsx(m,{val:d.source.fragmentsCount}),e.jsx(X,{url:d.sharepoint.url,align:"left"}),e.jsx(m,{val:d.sharepoint.sharepointFileSize}),e.jsx(m,{val:d.sharepoint.httpStatusCode}),e.jsx(ge,{val:d.sharepoint.updatedAt}),e.jsx(ve,{val:d.sharepoint.updatedBy}),e.jsx(X,{url:d.franklin.prePreview.url}),e.jsx(m,{val:d.franklin.prePreview.httpStatusCode}),e.jsx(ge,{val:d.franklin.prePreview.previewedAt}),e.jsx(m,{val:d.franklin.prePreview.message}),e.jsxs(us,{condition:s,children:[e.jsx(m,{val:d.franklin.postPreview.httpStatusCode}),e.jsx(ge,{val:d.franklin.postPreview.previewedAt}),e.jsx(m,{val:d.franklin.postPreview.message})]}),e.jsx(X,{url:d.franklin.live.url}),e.jsx(m,{val:d.franklin.live.httpStatusCode}),e.jsx(ge,{val:d.franklin.live.publishedAt}),e.jsx(m,{val:d.franklin.live.message})]},d._id))})}),Uf=({data:t,forcePreview:s,sort:a,toolbar:n,pagination:o,isLoading:r,onSort:l,onPageChange:i,onPageSizeChange:c})=>e.jsx(ne,{header:oi(s),sort:a,isLoading:r,isEmpty:t.length===0,toolbar:n,pagination:e.jsx(fe,{...o,onPageChange:i,onPageSizeChange:c}),onSort:l,children:e.jsx("tbody",{children:t.map(d=>e.jsxs("tr",{children:[e.jsx(m,{val:d._num}),e.jsx(m,{val:d.source.domain,align:"left"}),e.jsx(m,{val:d.source.localeText.toLowerCase()}),e.jsx(m,{val:d.source.file,align:"left"}),e.jsx(m,{val:d.source.httpStatusCode}),e.jsx(X,{url:d.xf.url,align:"left"}),e.jsx(m,{val:d.xf.httpStatusCode}),e.jsx(X,{url:d.xf.parentPageUrl,align:"left"}),e.jsx(m,{val:d.xf.level}),e.jsx(m,{val:F.booleanToString(d.xf.circularXF)}),e.jsx(X,{url:d.sharepoint.url,align:"left"}),e.jsx(m,{val:d.sharepoint.sharepointFileSize}),e.jsx(m,{val:d.sharepoint.httpStatusCode}),e.jsx(ge,{val:d.sharepoint.updatedAt}),e.jsx(ve,{val:d.sharepoint.updatedBy}),e.jsx(X,{url:d.franklin.prePreview.url}),e.jsx(m,{val:d.franklin.prePreview.httpStatusCode}),e.jsx(ge,{val:d.franklin.prePreview.previewedAt}),e.jsx(m,{val:d.franklin.prePreview.message}),e.jsxs(us,{condition:s,children:[e.jsx(m,{val:d.franklin.postPreview.httpStatusCode}),e.jsx(ge,{val:d.franklin.postPreview.previewedAt}),e.jsx(m,{val:d.franklin.postPreview.message})]}),e.jsx(X,{url:d.franklin.live.url}),e.jsx(m,{val:d.franklin.live.httpStatusCode}),e.jsx(ge,{val:d.franklin.live.publishedAt}),e.jsx(m,{val:d.franklin.live.message})]},d._id))})}),wf=["Source Report","Fragments Report"],Mf=({isVisible:t,portals:s,hasNext:a=!1})=>{const{navDirection:n,processUrls:o}=E.useSelector(O=>O.operations),{isInitialised:r,data:l,pagination:i,sort:c}=E.useSelector(O=>O.operations.fragmentReport),{forcePreview:d}=E.useSelector(O=>O.operations.fragmentOptions),[u,p]=h.useState(0),[f,g]=h.useState(null),[C,b]=h.useState(!1),x=E.useDispatch(),{processUrlsInBatches:j}=Te(),{numberedRows:y}=Ne(i,l),v=[[Of,ri,Xs,"source.httpStatusCode"],[Uf,oi,Ja,"xf.httpStatusCode"]],[L]=v[u],S=O=>{x(le({sortKey:O,reportKey:"fragmentReport"}));const[,,N]=v[u];x(N())},P=O=>{const[,,N]=v[u];x(N(O))},A=O=>{x(Le({pageSize:O,reportKey:"fragmentReport"}));const[,,N]=v[u];x(N())},w=()=>{a&&x(Ee())},D=()=>{b(!0)},M=()=>{x(Je("fragmentReport")),b(!1),x(he())},T=O=>{p(O);const[,,N,J]=v[O];x(le({sortKey:J,reportKey:"fragmentReport"})),x(N(1))},H=()=>{V(d)},z=async()=>{p(0),x(le({sortKey:"source.httpStatusCode",sortOrder:"desc",reportKey:"fragmentReport"})),(await x(Xs(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the fragment report",{variant:"error"})},V=O=>{t&&n==="next"&&(g(null),j({inputUrls:o.filter(({isActive:N})=>N).map(({inputUrl:N})=>N),processApi:L1,destination:"Fragments",batchSize:10,onComplete:z,onCancel:O?z:M,onJobCreated:N=>g(N)}))};return h.useEffect(()=>{t&&n==="next"&&!d&&V(d)},[t,d,n]),t?f?e.jsx(Ye,{jobId:f.jobId,jobName:f.jobName,route:"/bulkops/jobs/fragments"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(L,{data:y,forcePreview:d,sort:c,toolbar:e.jsx(me,{count:i.totalItems,children:e.jsx(Nn,{segments:wf,index:u,onChange:T})}),pagination:i,isLoading:!r,onSort:S,onPageChange:P,onPageSizeChange:A}),s.actions&&Q.createPortal(e.jsx(ke,{action:`${u===0?"SOURCE_":""}FRAGMENT_REPORT`}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:a,onPrev:D,onNext:w}),s.footer),C&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:M,onCancel:()=>b(!1)}),d&&e.jsx(Pt,{onConfirm:H,onCancel:M})]}):null},$f=[{name:"Input Urls",description:"Enter multiple urls to process"},{name:"Process Urls",description:"Urls that are ready to preview"},{name:"Options",description:"Fragment Request Options"},{name:"Fragments",description:"Fragments summary for the urls"}],Ff=()=>e.jsx(He,{title:"Fragments",description:U("fragments-desc"),clearActions:{4:"FRAGMENT"},steps:$f,idGenerationStep:4,children:({currentStep:t,portals:s})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,destination:"Fragments",maxUrlsKey:"FRAGMENT_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(Af,{isVisible:t===3,portals:s}),e.jsx(Mf,{isVisible:t===4,portals:s,actionHidingKey:"sharepointStatusCode",hasNext:!1})]})});const Vf={hasOperation:!1,hasJobs:!1,canMonitor:!1,actionReq:null,completed:null,inProgressMaxUrls:null,inProgressProcessedUrls:null,positions:[],total:null},Bf=()=>{const{jobsSummary:t}=E.useSelector(c=>c.jobs),[s,a]=h.useState([]),[n,o]=h.useState(t.length>0),r=ee.useNavigate(),l=E.useDispatch(),i=h.useMemo(()=>t?s.map(c=>{const d=t.find(u=>u._id===c.op);return d&&(c={...c,...d}),c}):s,[s,t]);return h.useEffect(()=>{const c={};[{name:"Operations",idReplacer:"/bulkops/",key:"hasOperation"},{name:"Jobs",idReplacer:"/bulkops/jobs/",key:"hasJobs"},{name:"Monitoring",idReplacer:"/bulkops/monitoring/",key:"canMonitor"}].forEach(({name:u,idReplacer:p,key:f})=>{var C,b,x;const g=gl.find(j=>j.name===u);(x=(b=(C=g==null?void 0:g.children)==null?void 0:C.filter(j=>!(j.onlyDA&&!F.isDASurface())))==null?void 0:b.filter(j=>!(j.onlyMS&&F.isDASurface())))==null||x.forEach(j=>{const y=j.route.replace(p,"");c[y]?c[y][f]=!0:c[y]={...Vf,op:y,label:j.name,[f]:!0}})}),a(Object.values(c))},[]),h.useEffect(()=>{let c,d;const u=(p=()=>{})=>{d=l(Ws()),d.then(f=>{_.isRejected(f)&&f.meta.aborted||(p(),c=setTimeout(u,Mt.JOBS_REFRESH_INTERVAL))})};return u(p=>o(!0)),()=>{d&&d.abort(),clearTimeout(c)}},[l]),e.jsx(We,{title:"Bulk Operations",description:"Automation proves beneficial when implemented precisely at the right place for optimal effectiveness.",children:e.jsx("div",{className:"page-content bulkops-home",children:i.map(c=>e.jsxs("div",{className:"job-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h1",{children:c.label}),e.jsxs("div",{className:"header-icon-container",children:[c.actionReq>0&&e.jsx(Rt,{className:"header-icon action-req"}),c.inProgressMaxUrls>0&&e.jsx(ks,{variant:"determinate",className:"header-icon",value:c.inProgressProcessedUrls/c.inProgressMaxUrls*100,size:24,thickness:6})]})]}),e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"card-section",children:[e.jsx("div",{className:"section-title",children:"QUEUE"}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Total Jobs"}),e.jsx(ya,{val:c.total,isLoading:!n})]}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Positions"}),e.jsx(ya,{val:c.positions.join(", "),isLoading:!n})]})]}),e.jsxs("div",{className:"card-section",children:[e.jsx("div",{className:"section-title",children:"DONE"}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Actions Req."}),e.jsx(ya,{val:c.actionReq,isLoading:!n})]}),e.jsxs("div",{className:"section-row",children:[e.jsx("span",{children:"Completed"}),e.jsx(ya,{val:c.completed,isLoading:!n})]})]})]}),e.jsxs("div",{className:"actions-panel",children:[c.canMonitor&&e.jsx(xe,{variant:"outlined",color:"secondary",onClick:d=>r(`/bulkops/monitoring/${c.op}`),children:"Monitor"}),c.hasJobs&&e.jsx(xe,{variant:"outlined",color:"secondary",onClick:d=>r(`/bulkops/jobs/${c.op}`),children:"View Jobs"}),c.hasOperation&&e.jsx(xe,{onClick:d=>r(`/bulkops/${c.op}`),children:"GO"})]})]},c.op))})})},ya=({val:t,isLoading:s})=>s?e.jsx(Ie,{}):e.jsx("span",{"data-content":t?"val":"na",children:t||"n/a"}),Kf=""+new URL("nav-cachepurge.svg",import.meta.url).href,Hf=""+new URL("nav-checkinout.svg",import.meta.url).href,zf=""+new URL("nav-copy.svg",import.meta.url).href,qf=""+new URL("nav-deactivate.svg",import.meta.url).href,Gf=""+new URL("nav-exportlist.svg",import.meta.url).href,Lr=""+new URL("nav-fragments.svg",import.meta.url).href,Jf=""+new URL("nav-helixlogs.svg",import.meta.url).href,Wf=""+new URL("nav-move.svg",import.meta.url).href,Yf=""+new URL("nav-pageindexing.svg",import.meta.url).href,Zf=""+new URL("nav-preview.svg",import.meta.url).href,Xf=""+new URL("nav-publish.svg",import.meta.url).href,Qf=""+new URL("nav-status.svg",import.meta.url).href,e3=""+new URL("nav-versioning.svg",import.meta.url).href;const t3={status:Qf,preview:Zf,publish:Xf,fragments:Lr,versioning:e3,checkInCheckOut:Hf,copy:zf,move:Wf,exportlist:Gf,deactivate:qf,cachePurge:Kf,pageIndexing:Yf,helixAuditLog:Jf,fragmentRef:Lr,bulkContentUpdate:hc},s3=({navMenu:t,titleName:s,titleRoute:a})=>{const n=E.useSelector(l=>l.local.userInfo),o=h.useMemo(()=>t.map(l=>({...l,children:l.children.filter(i=>!(i.isAdminProtected&&!n.isAdmin)).filter(i=>!(i.onlyDA&&!F.isDASurface())).filter(i=>!(i.onlyMS&&F.isDASurface()))})),[n.isAdmin]),r=(l,i)=>{const c=l.split("/"),d=c[c.length-1],u=t3[d];return i?e.jsx("div",{className:"mr-2 svg-container w-200 h-200",children:e.jsx(u,{})}):e.jsx("img",{src:u})};return e.jsxs("div",{className:"bulkops-navbar",children:[e.jsx(ee.NavLink,{className:"main-nav-link",to:a,children:s}),o.map(l=>e.jsxs("div",{className:"nav-section",children:[e.jsx("div",{className:"section-name",children:l.name.toUpperCase()}),l.children.map(i=>e.jsxs(ee.NavLink,{className:({isActive:c})=>`${c&&"nav-active"}`,to:i.route,children:[r(i.route,i.isSpectrumIcon),i.name]},i.route))]},l.name))]})},pa=({children:t,navMenu:s,navbarTitle:a,className:n=""})=>{const o=E.useSelector(c=>c.session.siteData),r=ce(c=>c.defaultTenant),l=ee.useNavigate(),i=E.useDispatch();return h.useEffect(()=>{!o&&(r!=null&&r.value)&&i(sn(r.value)).then(c=>{_.isRejected(c)&&l("/home")})},[o,r.value,i,l]),h.useEffect(()=>{var c;((c=o==null?void 0:o.instance)==null?void 0:c.environment)!==r.value&&i(mp())},[o,r,i]),o?e.jsxs("div",{className:`flex h-full ${n}`,children:[s&&e.jsx(s3,{navMenu:s,titleName:a==null?void 0:a.name,titleRoute:a==null?void 0:a.route}),t,e.jsx(ee.Outlet,{})]}):e.jsx(Ke,{})};const Mo=({val:t,max:s,color:a="blue"})=>e.jsxs("td",{className:`dyna-progress color-${a}`,children:[e.jsx(zr,{value:t/s*100,variant:"determinate"}),e.jsxs("div",{className:"dyna-progress-label",children:[t," / ",s]})]}),a3={STATUS:"Bulk Status",PREVIEW:"Bulk Preview",PUBLISH:"Bulk Publish",CHECKIN:"Check-in/Check-out",VERSIONING:"Versioning",COPY:"Copy",MOVE:"Move",FRAGMENTS:"Fragments"},n3={STATUS:"Bulk Status",PREVIEW:"Bulk Preview",PUBLISH:"Bulk Publish","CHECKIN-STATUS":"Check-in Status","CHECKOUT-STATUS":"Check-out Status","DISCARD-STATUS":"Discard Check-out Status",CHECKIN:"Check-in",CHECKOUT:"Check-out",DISCARD:"Discard Check-out",CREATE:"Create Version",FETCH:"Fetch Version",RESTORE:"Restore Version","STATUS-COPY":"Copy Status","STATUS-MOVE":"Move Status",COPY:"Copy",MOVE:"Move",FRAGMENTS:"Fragments"},o3={INPROGRESS:"In Progress",INQUEUE:"In Queue",PAUSED:"Paused",COMPLETED:"Completed",STOPPED:"Killed"},r3={PAUSED:"Pause In Progress",STOPPED:"Stopping"},l3={STATUS:"PREVIEW_STATUS",PREVIEW:"PREVIEW",PUBLISH:"PUBLISH",FRAGMENTS:"FRAGMENTS","CHECKIN-STATUS":"VERSION_STATUS","CHECKOUT-STATUS":"VERSION_STATUS","DISCARD-STATUS":"VERSION_STATUS",CHECKIN:"CHECKIN",CHECKOUT:"CHECKOUT",DISCARD:"DISCARD_CHECKOUT",CREATE:"CREATE_VERSION",FETCH:"FETCH_VERSION",RESTORE:"RESTORE_VERSION","STATUS-COPY":"COPY","STATUS-MOVE":"MOVE",COPY:"COPY",MOVE:"MOVE"},i3=t=>a3[t]||t||"n/a",c3=t=>n3[t]||t||"n/a",d3=(t,s)=>(s?r3[s]:o3[t])||"n/a",u3=t=>t.operation==="VERSIONING"&&t.nextStep!==""?"VERSION_STATUS":l3[t.currentStep],p3=t=>{switch(t.operation){case"CHECKIN":return"/bulkops/checkInCheckOut";default:return`/bulkops/${t.operation.toLowerCase()}`}},tt={operationLabel:i3,stepLabel:c3,statusLabel:d3,getAction:u3,getNextStepRoute:p3},h3={columns:[{label:"#",size:"xxs"},{label:"JobId"},{label:"Job Name",stick:"left"},{label:"Instance"},{label:"Operation"},{label:"Processed Urls"},{label:"Current Step"},{label:"Next Step"},{label:"Created By"},{label:"Created Date"},{label:"Job Type"},{label:"Actions",stick:"right"}]},f3=({jobs:t,onView:s,onDelete:a})=>e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{children:[e.jsx(m,{val:n._num}),e.jsx(m,{val:n._id}),e.jsx(m,{val:n.jobName,stick:"left"}),e.jsx(m,{val:n.instance}),e.jsx(m,{val:tt.operationLabel(n.operation)}),e.jsx(Mo,{val:n.processedUrlsCount,max:n.urlsCount}),e.jsx(m,{val:tt.stepLabel(n.currentStep)}),e.jsx(m,{val:tt.stepLabel(n.nextStep)}),e.jsx(ve,{val:n.email}),e.jsx(m,{val:F.formatDate(n.createdAt)}),e.jsx(m,{val:n.useJobEngine}),n.actionable?e.jsx(m3,{onView:o=>s(n),onDelete:o=>a(n._id)}):e.jsx(m,{stick:"right"})]},n._id))}),m3=({onView:t,onDelete:s})=>e.jsx("td",{className:"stick-right",children:e.jsxs("div",{className:"actions-cell",children:[e.jsx(Fe,{tooltip:"View Records",onClick:t,children:e.jsx(fc,{})}),e.jsx(Us,{confirmMessage:"Discard this job?",tooltip:"Discard",onConfirm:s,children:e.jsx(at,{})})]})}),g3=t=>({columns:[{label:"#",size:"xxs"},{label:"JobId"},{label:"Job Name",stick:"left"},{label:"Instance"},{label:"Operation"},{label:"Processed Urls"},{label:"Current Step"},{label:"Status"},{label:"Created By"},{label:"Created Date"},{label:"Job Start Time"},{label:"Job End Time"},{label:"Job Execution Time"},{label:"Job Completion Time"},{label:"Job Type"},...t!=="helix_audit_log"?[{label:"Actions",stick:"right"}]:[]]}),x3=({jobs:t,jobType:s,onDownload:a})=>e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{children:[e.jsx(m,{val:n._num}),e.jsx(m,{val:n._id}),e.jsx(m,{val:n.jobName,stick:"left"}),e.jsx(m,{val:n.instance}),e.jsx(m,{val:tt.operationLabel(n.operation)}),e.jsx(Mo,{val:n.processedUrlsCount,max:n.urlsCount,color:n.status==="COMPLETED"?"blue":"red"}),e.jsx(m,{val:tt.stepLabel(n.currentStep)}),e.jsx(m,{val:tt.statusLabel(n.status)}),e.jsx(ve,{val:n.email}),e.jsx(m,{val:F.formatDate(n.createdAt)}),e.jsx(m,{val:F.formatDate(n.startTime)}),e.jsx(m,{val:F.formatDate(n.endTime)}),e.jsx(m,{val:F.getTimeStringFromMs(n.jobExecutionTime)}),e.jsx(m,{val:F.getTimeStringFromMs(n.jobEndTime)}),e.jsx(m,{val:n.useJobEngine}),s!=="helix_audit_log"&&e.jsx(e.Fragment,{children:n.actionable?e.jsx(b3,{showDownload:s!=="helix_audit_log",onDownload:o=>a(n)}):e.jsx(m,{stick:"right"})})]},n._id))}),b3=({onDownload:t})=>e.jsx("td",{className:"stick-right",children:e.jsx("div",{className:"actions-cell",children:e.jsx(Fe,{tooltip:"Export to Excel",onClick:t,children:e.jsx(Qr,{})})})}),C3=t=>({columns:[{label:"#",size:"xxs"},{label:"JobId"},{label:"Job Name",stick:"left"},{label:"Instance"},{label:"Operation"},{label:"Processed Urls"},{label:"Current Step"},{label:"Next Step"},{label:"Queue No."},{label:"Position"},{label:"Status"},{label:"Message"},{label:"Created By"},{label:"Created Date"},{label:"Job Start Time"},{label:"In Queue Since"},{label:"Job Type"},...t!=="helix_audit_log"?[{label:"Actions",stick:"right"}]:[]]}),j3=({jobs:t,jobType:s,isAdmin:a,onChange:n,onEdit:o,onAcceptEdit:r,onCancelEdit:l,onPlayPause:i,onDownload:c,onDelete:d})=>{const u=({value:f,index:g})=>{n(g,{jobName:f,jobNameError:f.length===0?"Required!":""})},p=({value:f,index:g})=>{let C="";f===""?C="Required!":f=parseInt(f),n(g,{position:f,positionError:C})};return e.jsx("tbody",{children:t.map((f,g)=>e.jsxs("tr",{children:[e.jsx(m,{val:f._num}),e.jsx(m,{val:f._id}),e.jsx(hn,{isEdit:f.isEdit,val:f.jobName,error:f.jobNameError,pattern:/^[a-zA-Z0-9-_]*$/,stick:"left",onChange:C=>u({...C,index:g})}),e.jsx(m,{val:f.instance}),e.jsx(m,{val:tt.operationLabel(f.operation)}),e.jsx(Mo,{val:f.processedUrlsCount,max:f.urlsCount,color:f.status==="PAUSED"?"yellow":"blue"}),e.jsx(m,{val:tt.stepLabel(f.currentStep)}),e.jsx(m,{val:tt.stepLabel(f.nextStep)}),e.jsx(m,{val:f.queueNumber}),e.jsx(hn,{isEdit:f.isEdit,val:f.position.toString(),error:f.positionError,size:"xs",pattern:/^\d*$/,onChange:C=>p({...C,index:g})}),e.jsx(m,{val:tt.statusLabel(f.status,f.requestedStatus)}),e.jsx(m,{val:f.error}),e.jsx(ve,{val:f.email}),e.jsx(m,{val:F.formatDate(f.createdAt)}),e.jsx(m,{val:["INPROGRESS","PAUSED"].includes(f.status)&&F.formatDate(f.startTime)}),e.jsx(m,{val:F.getTimeStringFromMs(f.inQueueSince)}),e.jsx(m,{val:f.useJobEngine}),s!=="helix_audit_log"&&e.jsx(e.Fragment,{children:f.actionable?e.jsx(v3,{canEdit:a,disabled:!!f.requestedStatus,isPausing:f.requestedStatus==="PAUSED",isDeleting:f.requestedStatus==="STOPPED",isPlayPauseVisible:f.useJobEngine==="PANTHER",editDisabled:f.status==="INPROGRESS",isEdit:f.isEdit,isRunning:f.status!=="PAUSED",onEdit:C=>o(f),onAcceptEdit:C=>r(f),onCancelEdit:C=>l(f._id),onPlayPause:C=>i(f),onDownload:C=>c(f),onDelete:C=>d(f._id)}):e.jsx(m,{stick:"right"})})]},f._id))})},v3=({canEdit:t,disabled:s,editDisabled:a,downloadDisabled:n,showDownload:o,playPauseDisabled:r,deleteDisabled:l,isEdit:i,isRunning:c,isPausing:d,isDeleting:u,isPlayPauseVisible:p,onEdit:f,onAcceptEdit:g,onCancelEdit:C,onPlayPause:b,onDownload:x,onDelete:j})=>(s&&(a=n=r=l=!0),e.jsx("td",{className:"in-queue-action-container stick-right",children:i&&t?e.jsxs("div",{className:"actions-cell",children:[e.jsx(Fe,{tooltip:"Accept Changes",onClick:g,children:e.jsx(is,{})}),e.jsx(Fe,{tooltip:"Discard Changes",onClick:C,children:e.jsx(Ps,{className:"color-red-imp"})})]}):e.jsxs("div",{className:"actions-cell",children:[t&&e.jsx(Fe,{tooltip:a?"Cannot edit running jobs":"Edit",disabled:a,onClick:f,children:e.jsx(go,{})}),e.jsx(us,{condition:p,children:e.jsx(Fe,{tooltip:`${d?"Pausing":c?"Pause":"Resume"} Job`,disabled:r,onClick:b,children:d?e.jsx(ks,{color:"inherit",size:"1em"}):c?e.jsx(mc,{className:r?"":"color-yellow-imp"}):e.jsx(gc,{})})}),e.jsx(Fe,{tooltip:"Download Input Urls",onClick:x,disabled:n,children:e.jsx(Qr,{})}),e.jsx(Us,{confirmMessage:"Kill this job?",tooltip:"Kill Job",onConfirm:j,disabled:l,children:u?e.jsx(ks,{color:"inherit",size:"1em"}):e.jsx(at,{})})]})}));const y3=["Action Required","In Queue","Completed"],S3={COPY:"COPY_JOB_URLS",MOVE:"MOVE_JOB_URLS","STATUS-MOVE":"MOVE_JOB_URLS","STATUS-COPY":"COPY_JOB_URLS"},E3=()=>{const{isLoading:t,jobList:s}=E.useSelector(k=>k.jobs),a=E.useSelector(k=>k.local.userInfo.isAdmin),[n,o]=h.useState(1),[r,l]=h.useState([]),[i,c]=h.useState([]),[d,u]=h.useState([]),p=E.useDispatch(),f=ee.useNavigate();let{jobType:g="all"}=ee.useParams();g=g.replaceAll("-","_"),Uo(["/bulkops/jobs/move"]);const C=h.useMemo(()=>[{tab:"ACTION_REQUIRED",tableHeader:h3,tableBody:r,emptyTableMessage:"No jobs that require further action",tableBodySetter:l},{tab:"INQUEUE",tableHeader:C3(g),tableBody:i,emptyTableMessage:"No jobs are currently in queue",tableBodySetter:c},{tab:"COMPLETED",tableHeader:g3(g),tableBody:d,emptyTableMessage:"No completed or stopped jobs",tableBodySetter:u}],[a,r,d,i]),{tab:b,tableHeader:x,tableBody:j,tableBodySetter:y,emptyTableMessage:v}=C[n],{slice:L,pagination:S,setCurrentPage:P,setPageSize:A}=_o({source:j,sourceSetter:y}),{numberedRows:w}=Ne(S,L),D=j.length===0,M=k=>{const{tab:I}=C[k];o(k),p(mt({jobType:g,tab:I}))},T=k=>{const I=tt.getNextStepRoute(k);I&&(p(ep(k)),f(I))},H=k=>{const I=k.status==="INPROGRESS"||k.status==="INQUEUE"?"PAUSED":"INQUEUE";p(Ss({jobId:k._id,payload:{status:I}})).then(Z=>{_.isFulfilled(Z)&&p(mt({jobType:g,tab:b}))})},z=k=>{p(Ss({jobId:k,payload:{status:"STOPPED"}})).then(I=>{_.isFulfilled(I)&&p(mt({jobType:g,tab:b}))})},V=(k,I)=>{c(Z=>(Z[k]={...Z[k],...I},[...Z]))},O=k=>{c(I=>I.map(Z=>({...Z,isEdit:k._id===Z._id})))},N=k=>{k.position&&p(Ss({jobId:k._id,payload:{jobName:k.jobName,position:k.position}})).then(I=>{_.isFulfilled(I)&&(c(Z=>Z.map(oe=>({...oe,isEdit:!1}))),p(mt({jobType:g,tab:b})))})},J=k=>{var Z;const I=(Z=s.find(oe=>k===oe._id))==null?void 0:Z.position;I&&c(oe=>oe.map(Ce=>({...Ce,isEdit:!1,position:k===Ce._id?I:Ce.position})))},se=k=>{p(Na(k._id)).then(I=>{_.isFulfilled(I)&&p(mt({jobType:g,tab:b}))})},B=k=>{p(Ys({job:k,action:S3[k.currentStep]||"JOB_URLS"}))},ie=k=>{p(Ys({job:k,action:tt.getAction(k)}))};return h.useEffect(()=>{o(1),l([]),c([]),u([]),p(bu()),p(mt({jobType:g,tab:"INQUEUE"}))},[g,p]),h.useEffect(()=>{let k,I;const Z=()=>{I=p(mt({jobType:g,tab:b,isSilent:!0})),I.then(oe=>{_.isRejected(oe)&&oe.meta.aborted||(k=setTimeout(Z,Mt.JOBS_REFRESH_INTERVAL))})};return k=setTimeout(Z,Mt.JOBS_REFRESH_INTERVAL),()=>{I&&I.abort(),clearTimeout(k)}},[b,g,p]),h.useEffect(()=>{n===0?l(s):n===1?c(k=>s.map(I=>{const Z=k.find(Ce=>Ce._id===I._id),oe=(Z==null?void 0:Z.isEdit)&&I.status!=="INPROGRESS";return{...I,isEdit:oe}})):n===2&&u(s)},[s]),e.jsxs(We,{title:"Jobs",description:"Monitor current jobs",children:[e.jsx("div",{className:"page-content",children:e.jsxs(ne,{header:x,isLoading:D&&t,isEmpty:D,emptyTableMessage:v,toolbar:e.jsx(me,{count:j.length,children:e.jsx(Nn,{segments:y3,index:n,onChange:M})}),pagination:e.jsx(fe,{...S,totalItems:j.length,onPageChange:P,onPageSizeChange:A}),children:[n===0&&e.jsx(f3,{jobs:w,onView:T,onRestart:se,onDelete:z}),n===1&&e.jsx(j3,{jobs:w,isAdmin:a,jobType:g,onChange:V,onEdit:O,onAcceptEdit:N,onCancelEdit:J,onPlayPause:H,onDownload:B,onDelete:z}),n===2&&e.jsx(x3,{jobs:w,jobType:g,onRestart:se,onDownload:ie})]})}),t&&e.jsx(Ke,{})]})},k3=()=>e.jsx(We,{title:"Jobs",description:"Get an overview of current jobs",children:e.jsx("div",{className:"page-content",children:e.jsx(Ql,{})})}),R3=({onConfirm:t,onCancel:s})=>{const[a,n]=h.useState("");return e.jsxs(we,{className:"check-in-out-monitoring-modal",title:"Check-in confirmation",confirmButtonLabel:"Check-in",confirmButtonIcon:e.jsx(el,{className:"check-in-icon"}),confirmButtonDisabled:a.length===0,onConfirm:o=>t(a),onCancel:s,children:[e.jsx("div",{className:"confirm-msg",children:"Are you sure you want to check-in this file?"}),e.jsx(yn,{name:"confirm-input",value:a,placeholder:"Please enter comment",onChange:o=>n(o.target.value)})]})},L3=({onConfirm:t,onCancel:s})=>{const[a,n]=h.useState("");return e.jsxs(we,{className:"check-in-out-monitoring-modal",title:"Discard check-out confirmation",confirmButtonLabel:"Discard check-out",confirmButtonIcon:e.jsx(at,{}),confirmButtonDisabled:a.length===0,onConfirm:o=>t(a),onCancel:s,children:[e.jsx("div",{className:"confirm-msg",children:"Are you sure you want to discard check-out for this file?"}),e.jsx(yn,{name:"confirm-input",value:a,placeholder:"Please enter comment",onChange:o=>n(o.target.value)})]})},N3=({children:t,exceptionalCondition:s})=>{const a=E.useSelector(n=>n.local.userInfo);return e.jsx(us,{condition:a.isAdmin||s,children:t})},P3={columns:[{label:"#"},{label:"Site",sortKey:"site"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"Path",sortKey:"file",align:"left"},{label:"File Name",sortKey:"fileName",align:"left"},{label:"DOCX Path",sortKey:"docxPath",align:"left"},{label:"Last Modified By",sortKey:"lastModifiedBy"},{label:"Last Modified Date",sortKey:"lastModifiedDate"},{label:"Checkout By",sortKey:"checkOutBy"},{label:"Checkout Date",sortKey:"checkOutDate"},{label:"Actions",stick:"right",sortKey:""}]},I3=({onCheckIn:t,onDiscardCheckOut:s,checkOutBy:a,user:n})=>e.jsx("td",{className:"stick-right",children:e.jsx("div",{className:"actions-cell",children:e.jsxs(N3,{exceptionalCondition:n.email===a,children:[e.jsx(Fe,{className:"check-in-button",tooltip:"Check-in",onClick:t,children:e.jsx(el,{className:"check-in-icon"})}),e.jsx(Fe,{tooltip:"Discard Check-out",onClick:s,children:e.jsx(at,{})})]})})});const T3=()=>{zl();const t=E.useSelector(v=>v.monitoring.isLoading),{isInitialised:s,data:a,pagination:n,sort:o}=E.useSelector(v=>v.monitoring.checkInOut),r=E.useSelector(v=>v.local.userInfo),[l,i]=h.useState(null),c=h.useRef(null),d=E.useDispatch(),{startNumber:u}=Ne(n,a),p=v=>{d(e1({owner:"checkInOut",sortKey:v})),d(yt())},f=v=>{d(yt({pageIndex:v}))},g=v=>{d(Qu({owner:"checkInOut",pageSize:v})),d(yt())},C=()=>{d(Ma()).then(v=>{_.isFulfilled(v)&&d(yt())})},b=v=>{i("checkin"),c.current=v},x=v=>{i("discard_checkout"),c.current=v},j=v=>{d($a({url:c.current.url,comment:v,operation:l.toUpperCase()})).then(L=>{_.isFulfilled(L)&&d(yt())}),y()},y=()=>{i(null),c.current=null};return h.useEffect(()=>{d(yt())},[d]),e.jsxs(We,{className:"check-in-out-monitoring-page",title:"Check-in/Check-out Monitoring",description:"Monitor the check-in/check-out operations",actions:e.jsxs(h.Fragment,{children:[e.jsxs(ae,{styles:De.end8,fillStyle:"outline",variant:"secondary",onClick:C,children:[e.jsx(dt,{}),e.jsx(je,{children:"Refresh"})]}),e.jsx(ke,{action:"CHECKIN_MONITOR"})]}),children:[e.jsx("div",{className:"page-content",children:e.jsx(ne,{header:P3,isLoading:!s,toolbar:e.jsx(me,{count:n.totalItems}),pagination:e.jsx(fe,{...n,onPageChange:f,onPageSizeChange:g}),sort:o,isEmpty:a.length===0,onSort:p,children:e.jsx("tbody",{children:a.map((v,L)=>e.jsxs("tr",{children:[e.jsx(m,{val:u+L+1}),e.jsx(m,{val:v.instance}),e.jsx(m,{val:v.domain,size:"l",align:"left"}),e.jsx(m,{val:v.local,stick:"left"}),e.jsx(m,{val:v.file,size:"l",align:"left"}),e.jsx(m,{val:v.fileName,size:"m",align:"left"}),e.jsx(X,{url:v.sharepointUrl,size:"xl",align:"left"}),e.jsx(m,{val:v.lastModifiedByUserName}),e.jsx(m,{val:F.formatDate(v.sharepointLastModified)}),e.jsx(m,{val:v.checkOutBy}),e.jsx(m,{val:F.formatDate(v.checkOutDate)}),e.jsx(I3,{onCheckIn:S=>b(v),onDiscardCheckOut:S=>x(v),checkOutBy:v.checkOutBy,user:r})]},v._id))})})}),l==="checkin"&&e.jsx(R3,{onConfirm:j,onCancel:v=>i(null)}),l==="discard_checkout"&&e.jsx(L3,{onConfirm:j,onCancel:y}),t&&e.jsx(Ke,{})]})},_3=({fill:t=" #464646"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 0 18 18",width:"18",children:e.jsx("path",{d:"M6,9a.994.994,0,0,0,.2925.7045l3.9915,3.99a1,1,0,1,0,1.4355-1.386l-.0245-.0245L8.4095,9l3.286-3.285A1,1,0,0,0,10.309,4.28l-.0245.0245L6.293,8.2945A.994.994,0,0,0,6,9Z",fill:t})}),A3=({fill:t=" #464646"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 0 18 18",width:"18",children:e.jsx("path",{fill:t,d:"M12,9a.994.994,0,0,1-.2925.7045l-3.9915,3.99a1,1,0,1,1-1.4355-1.386l.0245-.0245L9.5905,9,6.3045,5.715A1,1,0,0,1,7.691,4.28l.0245.0245,3.9915,3.99A.994.994,0,0,1,12,9Z"})}),ao=({value:t})=>{const s=t==null?void 0:t.toDate(aa());return e.jsx(rs,{children:t?e.jsx(tl,{format:"DD/MM/YYYY",date:s}):"dd/mm/yyyy"})};ao.propTypes={value:te.object};const $o=({label:t,description:s,errorMessage:a,value:n,minValue:o,maxValue:r,labelPosition:l="top",onDateChange:i=()=>{}})=>{const c=st("date-range-container",{"date-range-container--top":l==="top","date-range-container--side":l==="side"}),d=st("date-range-label",{"pb-100":l==="top"});return e.jsxs(xc,{className:"date-range-picker",minValue:o,maxValue:r,value:n,onChange:i,children:[e.jsxs("div",{className:c,children:[e.jsx(rs,{className:d,children:t}),e.jsx(bc,{children:e.jsxs(Me,{children:[e.jsx(ao,{slot:"start",value:n==null?void 0:n.start}),e.jsx("span",{"aria-hidden":"true",children:""}),e.jsx(ao,{slot:"end",value:n==null?void 0:n.end}),e.jsx("div",{className:"calendar-container",children:e.jsx(Cc,{})})]})}),e.jsxs("div",{className:"date-range-helptext",children:[s&&e.jsx(ln,{className:"text-gray-700 capitalize text-75 font-regular",slot:"description",children:s}),a&&e.jsx(ln,{slot:"errorMessage",className:"text-75 text-text-invalid",children:a})]})]}),e.jsx(ca,{className:"date-picker-popover",children:e.jsx(jc,{children:e.jsx(vc,{className:"date-picker-range-calendar",visibleDuration:{months:2},pageBehavior:"single",children:e.jsxs("div",{className:"py-400",children:[e.jsxs("header",{className:"flex items-center justify-between w-full mx-50 my-100",children:[e.jsx(Me,{className:"text-center text-gray-800 align-middle w-400 h-400 font-base text-500 [&[data-disabled]]:invisible",slot:"previous",children:e.jsx("div",{children:e.jsx(_3,{})})}),e.jsx(yc,{className:"font-bold text-gray-700 font-base text-300 "}),e.jsx(Me,{className:"text-center text-gray-800 align-middle rounded w-400 h-400 font-base text-500 [&[data-disabled]]:invisible",slot:"next",children:e.jsx(A3,{})})]}),e.jsxs("div",{className:"flex flex-row justify-center w-full overflow-auto gap-400",children:[e.jsx(Qo,{children:u=>e.jsx(er,{"data-content":new Date(u).getDate(),date:u})},"calender-one"),e.jsx(Qo,{offset:{months:1},children:u=>e.jsx(er,{"data-content":new Date(u).getDate(),date:u})})]})]})})})})]})};$o.propTypes={label:te.string,description:te.string,errorMessage:te.string,isInValid:te.bool,minValue:te.object,maxValue:te.object,value:te.shape({start:te.object,end:te.object}),onDateChange:te.func,labelPosition:te.oneOf(["top","side"])};function D3(t){let{urls:s,error:a,franklinPreview:n,onChange:o,label:r}=t;return e.jsxs("div",{className:"input-urls-container",children:[e.jsx("div",{className:"control-heading",dangerouslySetInnerHTML:{__html:r||U("logs-input-urls")}}),e.jsx(Sn,{name:"urls",value:s,placeholder:U("input-urls-placeholder",{franklinPreview:n}),error:a,rows:10,onChange:o})]})}const O3=(t,s)=>{const a=s.siteData.instance.domain.franklinPreview,n=s.siteData.configs.PREVIEW_URL_DOMAINS,o=[l=>it.franklinPreviewDomain(l,a,n)],r=t.split(/,|\n/).filter(l=>l);for(;r.length>0;){if(be(r[0],o))return"Invalid url(s)";r.shift()}return""};function U3(t,s,a){const n=a.siteData.instance.domain.franklinPreview,o=a.siteData.defaultLocaleCode,r=a.siteData.configs.PREVIEW_URL_DOMAINS,l=t.split(/,|\n/).filter(u=>u).map(u=>F.trimUrl(u,o)),i=s.map(({name:u})=>u),c={langmasterDirectory:a.siteData.instance.langmasterDirectory,locales:a.siteData.authorUrls,domain:n,defaultLocale:o,previewByLiveDomains:r};return St.generateUrls({urls:l,locales:i,instance:c}).map((u,p)=>({_id:p+1,inputUrl:u,locale:F.extractLocale(u,a),isActive:!0}))}const li={validateInputUrls:O3,generateProcessUrls:U3},w3=({isVisible:t,inputUrlFieldLabel:s,portals:a,onValueChange:n})=>{const o=E.useSelector(f=>f.session),[r,l]=h.useState(""),[i,c]=h.useState(""),d=E.useDispatch(),u=o.siteData.instance.domain.franklinPreview,p=f=>{var C;const g=(C=f==null?void 0:f.target)==null?void 0:C.value;l(g),c(li.validateInputUrls(g,o))};return h.useEffect(()=>{d(la(r)),n(i)},[r,i]),e.jsx("div",{className:"",children:e.jsx(D3,{label:s,urls:r,error:i,franklinPreview:u,onChange:p})})},Nr=[{id:"OPERATIONS",label:"Operations"},{id:"USERS",label:"Users"},{id:"URLS",label:"Urls"},{id:"LOCALES",label:"Locales"}],M3=[{id:"PREVIEW",label:"preview"},{id:"PUBLISH",label:"live"},{id:"UN_PREVIEW",label:"unpreview"},{id:"UN_PUBLISH",label:"unpublish"},{id:"INDEXING",label:"index"}],$3=({isVisible:t,portals:s,hasNext:a=!0})=>{const{inputUrls:n,processUrls:o}=E.useSelector(I=>I.operations),r=E.useSelector(I=>I.session),{urls:l,users:i,operations:c,dateRange:d}=E.useSelector(I=>I.operations.helixlogs),[u,p]=h.useState([]),[f,g]=h.useState(""),[C,b]=h.useState(""),[x,j]=h.useState([]),[y,v]=h.useState(Nr.reduce((I,Z)=>(I[Z]=!1,I),{})),L=h.useRef(!1),S=E.useDispatch(),P=on(aa()).subtract({years:1}),A=on(aa()),{masterLocales:w,masterFilterGroups:D,countryOptions:M,languageOptions:T,localeNames:H,saveSelectedLocales:z}=Os(),V=(I,Z)=>{const oe=I;v({...y,[Z]:oe})},O=(I,Z)=>{p(I?[...u,Z]:u.filter(oe=>oe!==Z))},N=I=>{const oe=I.target.value.split(",").map(Ce=>Ce.trim());S(Ks({operations:c,urls:l,users:oe,dateRange:d}))},J=h.useCallback(I=>{S(Ks({operations:c,urls:l,users:i,dateRange:{...I}})),se(new Date(I.start),new Date(I.end))?(S(Ks({operations:c,urls:l,users:i,dateRange:{...I}})),g("Date range should not be more than a week.")):(S(Ks({operations:c,urls:l,users:i,dateRange:{...I}})),g(""))},[S]),se=(I,Z)=>{const oe=new Date(I),Ce=new Date(Z);return Math.abs(oe-Ce)/(1e3*60*60*24)>Mt.FILTER_LOGS_DATE_RANGE_MAX},B=()=>{const I=li.generateProcessUrls(n,x,r);S(os(I)),a&&(L.current=!0,S(Ee()))},ie=I=>{b(I)},k=h.useMemo(()=>f||Object.keys(d).length===0||C,[f,d,C]);return h.useEffect(()=>{S(Ks({operations:u,urls:l,users:i,dateRange:d}))},[o,n,u,i,d,y,x]),t?e.jsx("div",{children:e.jsx($t,{title:"Filter Logs",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mt-6 text-sm text-gray-700",children:[e.jsx("div",{className:"mt-6 text-sm text-gray-700",children:e.jsxs("h2",{children:["Filter by Date",e.jsx("span",{className:"mt-6 text-md text-gray-700",style:{color:"red"},children:"*"})]})}),e.jsx("div",{style:{width:"30%"},children:e.jsx("div",{className:"checkbox-grid-container",children:e.jsx($o,{label:"",value:d||{},labelPosition:"top",onDateChange:J,minValue:P,maxValue:A,errorMessage:f})})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("hr",{})}),e.jsx("div",{className:"mt-6 text-sm text-gray-700",children:e.jsx("h2",{children:"Filter result by:-"})}),e.jsx("div",{className:"locales-container",children:e.jsx("div",{className:"checkbox-grid-container",children:e.jsx("div",{className:"checkbox-grid sub-grid",children:Nr.map(I=>e.jsxs(xt,{styles:De._8,onChange:Z=>V(Z,I.label),isSelected:y[I.label],children:[I.label,y[I]]},I.id))})})}),e.jsxs("div",{style:{display:y.Operations?"block":"none"},children:[e.jsx("div",{className:"mt-6",children:e.jsx("hr",{})}),e.jsx("div",{className:"mt-6 text-sm text-gray-700",children:e.jsx("h2",{children:"Filter by Operations"})}),e.jsx("div",{className:"locales-container",children:e.jsx("div",{className:"checkbox-grid-container",children:e.jsx("div",{className:"checkbox-grid sub-grid",children:M3.map(I=>e.jsx(xt,{styles:De._8,onChange:Z=>O(Z,I.label),isSelected:u.includes(I.label),children:F.capitalize(I.label)},I.id))})})})]}),e.jsxs("div",{style:{display:y.Users?"block":"none"},children:[e.jsx("div",{className:"mt-6",children:e.jsx("hr",{})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"mt-6 text-sm text-gray-700",style:{width:"50%"},children:[e.jsx("h2",{children:"Filter by Users"}),e.jsx("div",{children:e.jsx(Sn,{name:"user",placeholder:"for example: user@adobe.com,admin@adobe.com",rows:2,onBlur:N})})]})})]}),e.jsxs("div",{style:{display:y.Urls?"block":"none"},children:[e.jsx("div",{className:"mt-6",children:e.jsx("hr",{})}),e.jsx("div",{className:"mt-6 text-sm text-gray-700",children:e.jsx(w3,{isVisible:"true",onValueChange:ie})})]}),e.jsxs("div",{style:{display:y.Locales?"block":"none"},children:[e.jsx("div",{className:"mt-6",children:e.jsx("hr",{})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-700",children:[e.jsx("h2",{children:"Filter by Locales"}),e.jsx(To,{masterLocales:w,masterFilterGroups:D,countryOptions:M,languageOptions:T,initialSelectedLocales:x,localeNames:H,onChange:j,onSave:z})]})]}),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:k,prevVisible:!1,onNext:B}),s.footer)]})})}):null},F3=({isVisible:t})=>{const[s,a]=h.useState(!0),[n,o]=h.useState(null),r=E.useDispatch(),l=()=>{r(he())},i=async()=>{a(!1);const c=await r(Wa());_.isFulfilled(c)?o({jobId:c.payload.jobId,jobName:c.payload.jobName}):_.isRejected(c)&&o(null)};return t?e.jsxs("div",{children:[n&&e.jsx(Ye,{jobId:n.jobId,jobName:n.jobName,route:"/bulkops/jobs/helix-audit-log"}),s&&e.jsx(we,{title:"Are you sure you want to continue with this selection.",confirmButtonLabel:"Confirm",onConfirm:i,onCancel:()=>l()})]}):null},V3=[{name:"Filter logs",description:"Choose the options to filter the result"},{name:"Report",description:"Logs Summary"}],B3=()=>e.jsx(He,{steps:V3,idGenerationStep:2,children:({currentStep:t,portals:s})=>e.jsxs(h.Fragment,{children:[e.jsx($3,{isVisible:t===1,portals:s}),e.jsx(F3,{isVisible:t===2,portals:s})]})}),K3=[{name:"Input Urls",description:"Enter multiple urls to process"},{name:"Process Urls",description:"Urls that are ready to preview"},{name:"Status",description:"Status summary for the urls"},{name:"Move",description:"Move all the urls"}],H3=()=>{const t=E.useDispatch();Uo();const s=a=>{a&&t(Ul("MOVE"))};return e.jsx(He,{title:"Move",description:U("move-file-desc"),clearActions:{3:"CMOVE_STATUS",4:"MOVE"},steps:K3,idGenerationStep:3,onInitializationChange:s,children:({currentStep:a,portals:n,reInitialize:o})=>e.jsxs(h.Fragment,{children:[e.jsx(Jl,{isVisible:a===1,portals:n,isMove:!0}),e.jsx(Wl,{isVisible:a===2,maxUrlsKey:"CMOVE_MAX_PROCESSABLE_URLS",portals:n,isMove:!0}),e.jsx(Xl,{isVisible:a===3,portals:n,onReset:o}),e.jsx(Yl,{isVisible:a===4,portals:n,onReset:o})]})})},z3={categories:[{label:"",span:7},{label:"Preview",span:4}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"URL",sortKey:"previewUrl"},{label:"Sharepoint Doc file Url",sortKey:"sharepointUrl"},{label:"Last Preview Status ",sortKey:"franklinPreviewStatusCode"},{label:"Last Preview Date ",sortKey:"franklinPreviewDate"},{label:"Preview Status",sortKey:"lastPreviewStatusCode"},{label:"Current Preview Date",sortKey:"lastPreviewed"}]},q3=({isVisible:t,portals:s})=>{const a=E.useSelector(S=>S.operations.forceOperation),{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(S=>S.operations.previewReport),[i,c]=h.useState(!1),[d,u]=h.useState(null),p=E.useDispatch(),{processUrlsInBatches:f}=Te(),{numberedRows:g}=Ne(r,o),C=S=>{p(le({sortKey:S,reportKey:"previewReport"})),p(es())},b=S=>{p(es(S))},x=S=>{p(Le({pageSize:S,reportKey:"previewReport"})),p(es())},j=()=>{c(!0)},y=()=>{p(Nt({action:"PREVIEW",isForced:a})).then(({meta:S,payload:P})=>{S.requestStatus==="fulfilled"&&(P!=null&&P.data)&&f({inputUrls:P.data,processApi:D1,destination:"Preview",onComplete:L,onCancel:L,onJobCreated:A=>u(A)})})},v=()=>{p(Je("previewReport")),c(!1),p(he())},L=async()=>{p(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"previewReport"})),(await p(es(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})};return t?d?e.jsx(Ye,{jobId:d.jobId,jobName:d.jobName,route:"/bulkops/jobs/preview"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(ne,{header:z3,isLoading:!n,sort:l,isEmpty:g.length===0,toolbar:e.jsx(me,{count:r.totalItems}),pagination:e.jsx(fe,{...r,onPageChange:b,onPageSizeChange:x}),onSort:C,children:e.jsx("tbody",{children:g.map(S=>e.jsxs("tr",{children:[e.jsx(m,{val:S._num}),e.jsx(m,{val:S.domain}),e.jsx(m,{val:S.local,stick:"left"}),e.jsx(m,{val:S.file}),e.jsx(X,{url:S.previewUrl}),e.jsx(X,{url:S.sharepointUrl}),e.jsx(m,{val:S.franklinPreviewStatusCode}),e.jsx(m,{val:F.formatDate(S.franklinPreviewDate)}),e.jsx(m,{val:S.lastPreviewStatusCode}),e.jsx(m,{val:F.formatDate(S.lastPreviewed)})]},S._id))})}),s.actions&&Q.createPortal(e.jsx(ke,{action:"PREVIEW"}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!1,onPrev:j}),s.footer),i&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:v,onCancel:()=>c(!1)}),e.jsx(Pt,{onConfirm:y,onCancel:v})]}):null},G3={categories:[{label:"",span:5},{label:"Document",span:6},{label:"Franklin",span:7},{label:"",span:3}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"HTTP Status",sortKey:"httpStatusCode"},{label:"URL",sortKey:"sharepointUrl"},{label:"Status",sortKey:"sharepointStatusCode"},{label:"File Size",sortKey:"sharepointFileSize"},{label:"Last Modified Date",sortKey:"sharepointLastModified"},{label:"Last Modified By",sortKey:"lastModifiedByUserName"},{label:"Check Out By",sortKey:"checkOutBy"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Status",sortKey:"lastPreviewStatusCode"},{label:"Last Previewed",sortKey:"lastPreviewed"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Publish Status",sortKey:"liveStatusCode"},{label:"Last Published",sortKey:"lastPublished"},{label:"Is Previewable",sortKey:"isPreviewable"},{label:"Is Publishable",sortKey:"isPublishable"},{label:"Publish Restricted",sortKey:"isPublishRestricted"},{label:"Actions",stick:"right"}]},J3=({isVisible:t,processApi:s,portals:a,onReset:n,shouldHideDeleteButton:o,warningMessage:r})=>{const{navDirection:l,processUrls:i,currentJob:c,forceOperation:d}=E.useSelector(B=>B.operations),{isInitialised:u,data:p,pagination:f,sort:g}=E.useSelector(B=>B.operations.statusReport),[C,b]=h.useState(!1),[x,j]=h.useState(null),y=E.useDispatch(),{processUrlsInBatches:v}=Te(),{numberedRows:L}=Ne(f,p),S="PREVIEW",P=c!==null,A=`Force ${S==null?void 0:S.toLowerCase()}`,w=G3,D=B=>{y(le({sortKey:B,reportKey:"statusReport"})),y(Ve({action:S}))},M=B=>{y(Ve({pageIndex:B,action:S}))},T=B=>{y(Le({pageSize:B,reportKey:"statusReport"})),y(Ve({action:S}))},H=B=>{y(Qs({id:B._id,isDeleted:!B.isDeleted,isForced:d,action:S}))},z=()=>{y(Ee())},V=()=>{b(!0)},O=()=>{y(ea({isForced:!d,action:S}))},N=h.useCallback(()=>{y(Je("statusReport")),b(!1),y(he()),y(No(!1))},[y]),J=B=>typeof o=="function"?o(B):parseInt(B.sharepointStatusCode)===404,se=h.useCallback(async()=>{y(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"statusReport"}));const B=await y(Ve({pageIndex:1,action:S}));_.isRejected(B)&&de("Something went wrong while fetching the status report",{variant:"error"})},[S,y]);return h.useEffect(()=>{if(t&&l==="next")if(P)y(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching recods...",progress:-1})),se();else{const B=i.filter(({isActive:ie})=>ie).map(({inputUrl:ie})=>ie);j(null),v({inputUrls:B,processApi:s,destination:"Preview Status",onComplete:se,onCancel:N,onJobCreated:ie=>j(ie)})}},[t,P,s,l,i,v,se,N,y]),t?x?e.jsx(Ye,{jobId:x.jobId,jobName:x.jobName,route:"/bulkops/jobs/preview"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(da,{action:"PREVIEW_STATUS",reportKey:"statusReport"}),e.jsx(us,{condition:typeof r=="string",children:e.jsxs(Ft,{children:[" ",r," "]})}),e.jsx(ne,{header:w,isLoading:!u,sort:g,isEmpty:L.length===0,toolbar:e.jsx(me,{count:f.totalItems}),pagination:e.jsx(fe,{...f,onPageChange:M,onPageSizeChange:T}),onSort:D,children:e.jsx("tbody",{children:L.map(B=>e.jsxs("tr",{className:B.isDeleted?"color-red":"",children:[e.jsx(m,{val:B._num}),e.jsx(m,{val:B.domain}),e.jsx(m,{val:B.local,stick:"left"}),e.jsx(m,{val:B.file,align:"left"}),e.jsx(m,{val:B.httpStatusCode}),e.jsx(X,{url:B.sharepointUrl}),e.jsx(m,{val:B.sharepointStatusCode}),e.jsx(m,{val:B.sharepointFileSize}),e.jsx(m,{val:F.formatDate(B.sharepointLastModified)}),e.jsx(m,{val:B.lastModifiedByUserName}),e.jsx(ve,{val:B.checkOutBy}),e.jsx(X,{url:B.previewUrl}),e.jsx(m,{val:B.lastPreviewStatusCode}),e.jsx(m,{val:F.formatDate(B.lastPreviewed)}),e.jsx(X,{url:B.liveUrl}),e.jsx(m,{val:B.liveStatusCode}),e.jsx(m,{val:F.formatDate(B.lastPublished)}),e.jsx(m,{val:F.booleanToString(B.isPreviewable)}),e.jsx(m,{val:F.booleanToString(B.isPublishable)}),e.jsx(m,{val:F.booleanToString(B.isPublishRestricted)}),e.jsx(ot,{isDeleted:B.isDeleted,disabled:J(B),onDeleteRestore:ie=>H(B)})]},B._id))})}),a.actions&&Q.createPortal(e.jsx(ke,{action:"PREVIEW_STATUS"}),a.actions),a.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!0,nextDisabled:p.length===0||f.processUrlCount===0,prevDisabled:P,onPrev:V,onNext:z,children:e.jsxs("div",{className:"wizard-steps-progress-controls right",children:[e.jsxs("span",{children:[f.processUrlCount," urls are ready to be processed"]}),e.jsx(bn,{styles:De.end8,isSelected:d,onChange:O,children:A}),e.jsx(ds,{isVisible:P,onDiscarded:n})]})}),a.footer),C&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:N,onCancel:()=>b(!1)})]}):null},W3=[{name:"Input Urls",description:"Enter multiple urls to process"},{name:"Process Urls",description:"Urls that are ready to preview"},{name:"Status",description:"Status summary for the urls"},{name:"Preview",description:"Preview summary for the urls"}],Y3=()=>e.jsx(He,{title:"Preview",description:U("preview-file-desc"),clearActions:{3:"PREVIEW_STATUS",4:"PREVIEW"},steps:W3,idGenerationStep:3,children:({currentStep:t,portals:s,reInitialize:a})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,maxUrlsKey:"PREVIEW_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(J3,{isVisible:t===3,processApi:A1,portals:s,action:"PREVIEW",deleteHidingKey:"sharepointStatusCode",hasNext:!0,onReset:a,jobRoute:"/bulkops/jobs/preview"}),e.jsx(q3,{isVisible:t===4,portals:s})]})}),Z3={categories:[{label:"",span:5},{label:"Document",span:6},{label:"Franklin",span:7},{label:"",span:3}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"HTTP Status",sortKey:"httpStatusCode"},{label:"URL",sortKey:"sharepointUrl"},{label:"Status",sortKey:"sharepointStatusCode"},{label:"File Size",sortKey:"sharepointFileSize"},{label:"Last Modified Date",sortKey:"sharepointLastModified"},{label:"Last Modified By",sortKey:"lastModifiedByUserName"},{label:"Check Out By",sortKey:"checkOutBy"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Status",sortKey:"lastPreviewStatusCode"},{label:"Last Previewed",sortKey:"lastPreviewed"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Publish Status",sortKey:"liveStatusCode"},{label:"Last Published",sortKey:"lastPublished"},{label:"Is Previewable",sortKey:"isPreviewable"},{label:"Is Publishable",sortKey:"isPublishable"},{label:"Publish Restricted",sortKey:"isPublishRestricted"},{label:"Actions",stick:"right"}]},X3=({isVisible:t,processApi:s,portals:a,onReset:n,shouldHideDeleteButton:o,warningMessage:r})=>{const{navDirection:l,processUrls:i,currentJob:c,forceOperation:d}=E.useSelector(k=>k.operations),{isInitialised:u,data:p,pagination:f,sort:g}=E.useSelector(k=>k.operations.statusReport),{statistics:C}=E.useSelector(k=>k.operations.statusReport),b=()=>C.find(k=>{var I;return((I=k.body.data.find(Z=>Z[0]==="restrictedPublish"))==null?void 0:I[1])>0}),[x,j]=h.useState(!1),[y,v]=h.useState(null),L=E.useDispatch(),{processUrlsInBatches:S}=Te(),{numberedRows:P}=Ne(f,p),A="PUBLISH",w=c!==null,D=`Force ${A==null?void 0:A.toLowerCase()}`,M=Z3,T=k=>{L(le({sortKey:k,reportKey:"statusReport"})),L(Ve({action:A}))},H=k=>{L(Ve({pageIndex:k,action:A}))},z=k=>{L(Le({pageSize:k,reportKey:"statusReport"})),L(Ve({action:A}))},V=k=>{L(Qs({id:k._id,isDeleted:!k.isDeleted,isForced:d,action:A}))},O=()=>{L(Ee())},N=()=>{j(!0)},J=()=>{L(ea({isForced:!d,action:A}))},se=h.useCallback(()=>{L(Je("statusReport")),j(!1),L(he()),L(No(!1))},[L]),B=k=>typeof o=="function"?o(k):parseInt(k.sharepointStatusCode)===404,ie=h.useCallback(async()=>{L(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"statusReport"}));const k=await L(Ve({pageIndex:1,action:A}));_.isRejected(k)&&de("Something went wrong while fetching the status report",{variant:"error"})},[A,L]);return h.useEffect(()=>{if(t&&l==="next")if(w)L(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching recods...",progress:-1})),ie();else{const k=i.filter(({isActive:I})=>I).map(({inputUrl:I})=>I);v(null),S({inputUrls:k,processApi:s,destination:"Preview Status",onComplete:ie,onCancel:se,onJobCreated:I=>v(I)})}},[t,w,s,l,i,S,ie,se,L]),t?y?e.jsx(Ye,{jobId:y.jobId,jobName:y.jobName,route:"/bulkops/jobs/publish"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(da,{action:"PREVIEW_STATUS",reportKey:"statusReport"}),e.jsx(us,{condition:typeof r=="string"&&b(),children:e.jsxs(Ft,{children:[" ",r," "]})}),e.jsx(ne,{header:M,isLoading:!u,sort:g,isEmpty:P.length===0,toolbar:e.jsx(me,{count:f.totalItems}),pagination:e.jsx(fe,{...f,onPageChange:H,onPageSizeChange:z}),onSort:T,children:e.jsx("tbody",{children:P.map(k=>e.jsxs("tr",{className:k.isDeleted?"color-red":"",children:[e.jsx(m,{val:k._num}),e.jsx(m,{val:k.domain}),e.jsx(m,{val:k.local,stick:"left"}),e.jsx(m,{val:k.file,align:"left"}),e.jsx(m,{val:k.httpStatusCode}),e.jsx(X,{url:k.sharepointUrl}),e.jsx(m,{val:k.sharepointStatusCode}),e.jsx(m,{val:k.sharepointFileSize}),e.jsx(m,{val:F.formatDate(k.sharepointLastModified)}),e.jsx(m,{val:k.lastModifiedByUserName}),e.jsx(ve,{val:k.checkOutBy}),e.jsx(X,{url:k.previewUrl}),e.jsx(m,{val:k.lastPreviewStatusCode}),e.jsx(m,{val:F.formatDate(k.lastPreviewed)}),e.jsx(X,{url:k.liveUrl}),e.jsx(m,{val:k.liveStatusCode}),e.jsx(m,{val:F.formatDate(k.lastPublished)}),e.jsx(m,{val:F.booleanToString(k.isPreviewable)}),e.jsx(m,{val:F.booleanToString(k.isPublishable)}),e.jsx(m,{val:F.booleanToString(k.isPublishRestricted)}),e.jsx(ot,{isDeleted:k.isDeleted,disabled:B(k),onDeleteRestore:I=>V(k)})]},k._id))})}),a.actions&&Q.createPortal(e.jsx(ke,{action:"PREVIEW_STATUS"}),a.actions),a.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!0,nextDisabled:p.length===0||f.processUrlCount===0,prevDisabled:w,onPrev:N,onNext:O,children:e.jsxs("div",{className:"wizard-steps-progress-controls right",children:[e.jsxs("span",{children:[f.processUrlCount," urls are ready to be processed"]}),e.jsx(bn,{styles:De.end8,isSelected:d,onChange:J,children:D}),e.jsx(ds,{isVisible:w,onDiscarded:n})]})}),a.footer),x&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:se,onCancel:()=>j(!1)})]}):null},Q3={categories:[{label:"",span:6},{label:"Status",span:5},{label:"Publish",span:3}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"Sharepoint Doc File Url",sortKey:"sharepointUrl"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Last Preview Status",sortKey:"franklinPreviewStatusCode"},{label:"Last Preview Date",sortKey:"franklinPreviewDate"},{label:"Last Published Status Code",sortKey:"franklinLiveStatusCode"},{label:"Last Published",sortKey:"franklinLastPublished"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Current Publish Status Code",sortKey:"liveStatusCode"},{label:"Updated Published",sortKey:"lastPublished"}]},e9=({isVisible:t,portals:s})=>{const a=E.useSelector(S=>S.operations.forceOperation),{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(S=>S.operations.publishReport),i=E.useDispatch(),[c,d]=h.useState(!1),[u,p]=h.useState(null),{processUrlsInBatches:f}=Te(),{numberedRows:g}=Ne(r,o),C=S=>{i(le({sortKey:S,reportKey:"publishReport"})),i(ts())},b=S=>{i(ts(S))},x=S=>{i(Le({pageSize:S,reportKey:"publishReport"})),i(ts())},j=()=>{d(!0)},y=()=>{i(Nt({action:"PUBLISH",isForced:a})).then(({meta:S,payload:P})=>{S.requestStatus==="fulfilled"&&(P!=null&&P.data)&&f({inputUrls:P.data,processApi:w1,destination:"Publish",onComplete:L,onCancel:L,onJobCreated:A=>p(A)})})},v=()=>{i(Je("publishReport")),d(!1),i(he())},L=async()=>{i(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"publishReport"})),(await i(ts(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})};return t?u?e.jsx(Ye,{jobId:u.jobId,jobName:u.jobName,route:"/bulkops/jobs/publish"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(ne,{header:Q3,isLoading:!n,sort:l,isEmpty:g.length===0,toolbar:e.jsx(me,{count:r.totalItems}),pagination:e.jsx(fe,{...r,onPageChange:b,onPageSizeChange:x}),onSort:C,children:e.jsx("tbody",{children:g.map(S=>e.jsxs("tr",{children:[e.jsx(m,{val:S._num}),e.jsx(m,{val:S.domain}),e.jsx(m,{val:S.local,stick:"left"}),e.jsx(m,{val:S.file}),e.jsx(X,{url:S.sharepointUrl}),e.jsx(X,{url:S.previewUrl}),e.jsx(m,{val:S.franklinPreviewStatusCode}),e.jsx(m,{val:F.formatDate(S.franklinPreviewDate)}),e.jsx(m,{val:S.franklinLiveStatusCode}),e.jsx(m,{val:F.formatDate(S.franklinLastPublished)}),e.jsx(X,{url:S.liveUrl}),e.jsx(m,{val:S.liveStatusCode}),e.jsx(m,{val:F.formatDate(S.lastPublished)})]},S._id))})}),s.actions&&Q.createPortal(e.jsx(ke,{action:"PUBLISH"}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!1,onPrev:j}),s.footer),c&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:v,onCancel:()=>d(!1)}),e.jsx(Pt,{onConfirm:y,onCancel:v})]}):null},t9=[{name:"Input Urls",description:"Enter multiple urls to process"},{name:"Process Urls",description:"Urls that are ready to publish"},{name:"Status",description:"Status summary for the urls"},{name:"Publish",description:"Publish summary for the urls"}],s9=()=>e.jsx(He,{title:"Publish",description:U("publish-file-desc"),clearActions:{3:"PREVIEW_STATUS",4:"PUBLISH"},steps:t9,idGenerationStep:3,children:({currentStep:t,portals:s,reInitialize:a})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,destination:"Status Publish",maxUrlsKey:"PUBLISH_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(X3,{isVisible:t===3,processApi:U1,portals:s,action:"PUBLISH",deleteHidingKey:"sharepointStatusCode",hasNext:!0,onReset:a,jobRoute:"/bulkops/jobs/publish",shouldHideDeleteButton:n=>n.isPublishRestricted||n.httpStatusCode===404,warningMessage:"The delete button is disabled for records that are either Publish Restricted or have a 404 Preview Status, as they are not publishable."}),e.jsx(e9,{isVisible:t===4,portals:s})]})}),a9=()=>({categories:[{label:"",span:5},{label:"Document",span:6},{label:"Franklin",span:7},{label:"",span:2}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"HTTP Status",sortKey:"httpStatusCode"},{label:"URL",sortKey:"sharepointUrl"},{label:"Status",sortKey:"sharepointStatusCode"},{label:"File Size",sortKey:"sharepointFileSize"},{label:"Last Modified Date",sortKey:"sharepointLastModified"},{label:"Last Modified By",sortKey:"lastModifiedByUserName"},{label:"Check Out By",sortKey:"checkOutBy"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Status",sortKey:"lastPreviewStatusCode"},{label:"Last Previewed",sortKey:"lastPreviewed"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Publish Status",sortKey:"liveStatusCode"},{label:"Last Published",sortKey:"lastPublished"},{label:"Is Previewable",sortKey:"isPreviewable"},{label:"Is Publishable",sortKey:"isPublishable"},{label:"Publish Restricted",sortKey:"isPublishRestricted"}]}),n9=({isVisible:t,processApi:s,action:a,portals:n,onReset:o,warningMessage:r})=>{const{navDirection:l,processUrls:i,currentJob:c}=E.useSelector(z=>z.operations),{isInitialised:d,data:u,pagination:p,sort:f}=E.useSelector(z=>z.operations.statusReport),[g,C]=h.useState(!1),[b,x]=h.useState(null),j=E.useDispatch(),{processUrlsInBatches:y}=Te(),{numberedRows:v}=Ne(p,u),L=c!==null,S=a9(),P=z=>{j(le({sortKey:z,reportKey:"statusReport"})),j(Ve({action:a}))},A=z=>{j(Ve({pageIndex:z,action:a}))},w=z=>{j(Le({pageSize:z,reportKey:"statusReport"})),j(Ve({action:a}))},D=()=>{C(!0)},M=h.useCallback(()=>{j(Je("statusReport")),C(!1),j(he()),j(No(!1))},[j]),T=h.useCallback(async()=>{j(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"statusReport"}));const z=await j(Ve({pageIndex:1,action:a}));_.isRejected(z)&&de("Something went wrong while fetching the status report",{variant:"error"})},[a,j]),H=()=>{if(t&&l==="next")if(L)j(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching records...",progress:-1})),T();else{const z=i.filter(({isActive:V})=>V).map(({inputUrl:V})=>V);x(null),y({inputUrls:z,processApi:s,destination:"Preview Status",onComplete:T,onCancel:M,onJobCreated:V=>x(V)})}};return h.useEffect(()=>{t&&H()},[t]),t?b?e.jsx(Ye,{jobId:b.jobId,jobName:b.jobName,route:"/bulkops/jobs/status"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(da,{action:"PREVIEW_STATUS",reportKey:"statusReport"}),e.jsx(us,{condition:typeof r=="string",children:e.jsxs(Ft,{children:[" ",r," "]})}),e.jsx(ne,{header:S,isLoading:!d,sort:f,isEmpty:v.length===0,toolbar:e.jsx(me,{count:p.totalItems}),pagination:e.jsx(fe,{...p,onPageChange:A,onPageSizeChange:w}),onSort:P,children:e.jsx("tbody",{children:v.map(z=>e.jsxs("tr",{className:z.isDeleted?"color-red":"",children:[e.jsx(m,{val:z._num}),e.jsx(m,{val:z.domain}),e.jsx(m,{val:z.local,stick:"left"}),e.jsx(m,{val:z.file,align:"left"}),e.jsx(m,{val:z.httpStatusCode}),e.jsx(X,{url:z.sharepointUrl}),e.jsx(m,{val:z.sharepointStatusCode}),e.jsx(m,{val:z.sharepointFileSize}),e.jsx(m,{val:F.formatDate(z.sharepointLastModified)}),e.jsx(m,{val:z.lastModifiedByUserName}),e.jsx(ve,{val:z.checkOutBy}),e.jsx(X,{url:z.previewUrl}),e.jsx(m,{val:z.lastPreviewStatusCode}),e.jsx(m,{val:F.formatDate(z.lastPreviewed)}),e.jsx(X,{url:z.liveUrl}),e.jsx(m,{val:z.liveStatusCode}),e.jsx(m,{val:F.formatDate(z.lastPublished)}),e.jsx(m,{val:F.booleanToString(z.isPreviewable)}),e.jsx(m,{val:F.booleanToString(z.isPublishable)}),e.jsx(m,{val:F.booleanToString(z.isPublishRestricted)})]},z._id))})}),n.actions&&Q.createPortal(e.jsx(ke,{action:"PREVIEW_STATUS"}),n.actions),n.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:u.length===0||p.processUrlCount===0,prevDisabled:L,onPrev:D,children:e.jsx("div",{className:"wizard-steps-progress-controls right",children:e.jsx(ds,{isVisible:L,onDiscarded:o})})}),n.footer),g&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:M,onCancel:()=>C(!1)})]}):null},o9=[{name:"Input Urls",description:"Enter multiple URLs"},{name:"Process Urls",description:"URLs that are ready to preview"},{name:"Preview Status",description:"Status summary"}],r9=()=>e.jsx(He,{title:"Status",description:U("status-operation-desc"),clearActions:{3:"PREVIEW_STATUS"},steps:o9,idGenerationStep:3,children:({currentStep:t,portals:s})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,destination:"Status Preview",maxUrlsKey:"STATUS_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(n9,{isVisible:t===3,processApi:$1,portals:s})]})}),l9=[{id:"CREATE_VERSION",label:"Create Version"},{id:"FETCH_VERSION",label:"Fetch Version"},{id:"RESTORE_VERSION",label:"Restore Version"}],Pr={value:"LAST_VERSION",label:"Last version"},Ir={value:"SECOND_LAST_VERSION",label:"Second Last Version"},i9={value:"ALL_VERSIONS",label:"Show All Version"},Tr={value:"SPECIFIC_VERSION",label:"Specific Version"},c9={CREATE_VERSION:null,FETCH_VERSION:[Pr,Ir,i9,Tr],RESTORE_VERSION:[Pr,Ir,Tr]},d9=({isVisible:t,portals:s})=>{const{operation:a,comment:n,subOperation:o}=E.useSelector(b=>b.operations.versioning),r=E.useSelector(b=>b.operations.navDirection),l=h.useRef(null),i=E.useDispatch(),c=c9[a],d=()=>{i(Ee())},u=()=>{i(he())},p=b=>{i(ja({operation:a,comment:b,subOperation:o}))},f=b=>{i(ja({operation:b,comment:"",subOperation:""}))},g=b=>{i(ja({operation:a,comment:n,subOperation:b}))},C=h.useMemo(()=>!a||a==="CREATE_VERSION"&&n.length===0||(a==="FETCH_VERSION"||a==="RESTORE_VERSION")&&!o||o==="SPECIFIC_VERSION"&&n.length===0,[a,n,o]);return h.useEffect(()=>{l.current&&(a==="CREATE_VERSION"||o==="SPECIFIC_VERSION")&&l.current.focus()},[a,o]),h.useEffect(()=>{t&&r==="next"&&i(ja({operation:"",comment:"",subOperation:""}))},[t,r,i]),t?e.jsxs($t,{className:"versioning-options",title:"Select Operation",children:[e.jsx(vn,{styles:Ot.picker,value:a,items:l9,onChange:f}),a==="CREATE_VERSION"&&e.jsx(Rs,{styles:`${Ot.textfieldL} ${De.top24}`,label:"Label",value:n,autoFocus:!0,onChange:p}),c&&e.jsxs(h.Fragment,{children:[e.jsx(sl,{styles:De.top24,label:"Select Version",onChange:g,children:c.map(b=>e.jsx(al,{value:b.value,children:b.label},b.value))}),o==="SPECIFIC_VERSION"&&e.jsx(Rs,{styles:`${Ot.textfieldM} ${Ot.indentLv1}`,autoFocus:!0,value:n,onChange:p})]}),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:C,onPrev:u,onNext:d}),s.footer)]}):null};const u9=({title:t,children:s,...a})=>e.jsx(na,{classes:{popper:"tooltip-error-popper"},title:t,...a,children:s}),p9={categories:[{label:"",span:5},{label:"Franklin",span:1},{label:"Document",span:7},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"Http Status",sortKey:"httpStatusCode"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Url",sortKey:"sharepointUrl"},{label:"Status",sortKey:"sharepointStatusCode"},{label:"File Size",sortKey:"sharepointFileSize"},{label:"Last Modified Date",sortKey:"sharepointLastModified"},{label:"Last Modified By",sortKey:"lastModifiedByUserName",size:"s"},{label:"Checkout By",sortKey:"checkOutBy"},{label:"Versioning Label",sortKey:"versionComment"},{label:"Actions",stick:"right"}]},h9={categories:[{label:"",span:5},{label:"Franklin",span:1},{label:"Document",span:12},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"Http Status",sortKey:"httpStatusCode"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Url",sortKey:"sharepointUrl"},{label:"Status",sortKey:"sharepointStatusCode"},{label:"File Size",sortKey:"sharepointFileSize"},{label:"Last Modified Date",sortKey:"sharepointLastModified"},{label:"Last Modified By",sortKey:"lastModifiedByUserName",size:"s"},{label:"Versioning Label",sortKey:"versionComment"},{label:"Version CreatedBy",sortKey:"versionCreatedBy",size:"m"},{label:"Version Date",sortKey:"versionCreatedDate",size:"m"},{label:"Version Number",sortKey:"versionLabel",size:"m"},{label:"Checkout By",sortKey:"checkOutBy"},{label:"Locked By",sortKey:"lockedBy"},{label:"Actions",stick:"right"}]},f9={categories:[{label:"",span:5},{label:"Franklin",span:1},{label:"Document",span:7},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"Http Status",sortKey:"httpStatusCode"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Url",sortKey:"sharepointUrl"},{label:"Status",sortKey:"sharepointStatusCode"},{label:"File Size",sortKey:"sharepointFileSize"},{label:"Last Modified Date",sortKey:"sharepointLastModified"},{label:"Last Modified By",sortKey:"lastModifiedByUserName",size:"s"},{label:"Checkout By",sortKey:"checkOutBy"},{label:"Locked By",sortKey:"lockedBy"},{label:"Actions",stick:"right"}]},m9={columns:[{label:"Versioning Label",sortKey:"versioningComment"},{label:"Version CreatedBy",sortKey:"versionCreatedBy",size:"m"},{label:"Version Date",sortKey:"versionCreatedDate",size:"m"},{label:"Version Number",sortKey:"versionLabel",size:"m"},{label:"Actions",stick:"left",size:"xs"}]},g9={CREATE_VERSION:p9,FETCH_VERSION:f9,RESTORE_VERSION:h9};const x9=({data:t,onDelete:s})=>e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:a.isDeleted?"color-red":"",children:[e.jsx(m,{val:a._num}),e.jsx(m,{val:a.domain}),e.jsx(m,{val:a.local,stick:"left"}),e.jsx(m,{val:a.file,align:"left",size:"l"}),e.jsx(m,{val:a.httpStatusCode}),e.jsx(X,{url:a.previewUrl}),e.jsx(X,{url:a.sharepointUrl}),e.jsx(m,{val:a.sharepointStatusCode}),e.jsx(m,{val:a.sharepointFileSize}),e.jsx(m,{val:F.formatDate(a.sharepointLastModified)}),e.jsx(m,{val:a.lastModifiedByUserName}),e.jsx(ve,{val:a.checkOutBy}),e.jsx(m,{val:a.versionComment}),e.jsx(ot,{isDeleted:a.isDeleted,onDeleteRestore:()=>s(a),disabled:a.sharepointStatusCode===404})]},a._id))}),b9=({currentRowId:t,expandedRowId:s,setExpandedRowId:a,disabled:n})=>{const o=s===t;return e.jsx("td",{className:"stick-right",children:e.jsx("div",{className:"actions-cell",children:e.jsx(Fe,{onClick:()=>a(o?null:t),disabled:n,children:o?e.jsx(Sc,{}):e.jsx(Ec,{})})})})},C9=({versions:t,restoreDisbaled:s,onRestore:a})=>e.jsx(ne,{header:m9,children:e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{children:[e.jsx(m,{val:n.versionComment}),e.jsx(ve,{val:n.versionCreatedBy,size:"m"}),e.jsx(m,{val:F.formatDate(n.versionCreatedDate),size:"m"}),e.jsx(m,{val:n.versionLabel,size:"m"}),e.jsx(y9,{isRestored:n.isRestored,error:n.error,onRestore:()=>a(n),disabled:t.sharepointStatusCode===404||s})]},n._id))})}),j9=({data:t,onRestore:s})=>{const[a,n]=h.useState(null);return e.jsx("tbody",{children:t.map(o=>e.jsxs(h.Fragment,{children:[e.jsxs("tr",{children:[e.jsx(m,{val:o._num}),e.jsx(m,{val:o.domain}),e.jsx(m,{val:o.local,stick:"left"}),e.jsx(m,{val:o.file,align:"left",size:"l"}),e.jsx(m,{val:o.httpStatusCode}),e.jsx(X,{url:o.previewUrl}),e.jsx(X,{url:o.sharepointUrl}),e.jsx(m,{val:o.sharepointStatusCode}),e.jsx(m,{val:o.sharepointFileSize}),e.jsx(m,{val:F.formatDate(o.sharepointLastModified)}),e.jsx(m,{val:o.lastModifiedByUserName}),e.jsx(ve,{val:o.checkOutBy}),e.jsx(ve,{val:o.lockedBy}),e.jsx(b9,{currentRowId:o._id,expandedRowId:a,setExpandedRowId:n,disabled:o.sharepointStatusCode===404})]}),a===o._id?e.jsx("tr",{children:e.jsx("td",{className:"version-table",colSpan:14,children:e.jsx(C9,{restoreDisbaled:!!o.checkOutBy||!!o.lockedBy,versions:o.versions,onRestore:r=>s(r,o.previewUrl)})})}):null]},o._id))})},v9=({data:t,onDelete:s})=>e.jsx("tbody",{children:t.map(a=>{let n;return a.versions.length>0&&(n=a.versions[a.versions.length-1]),e.jsxs("tr",{className:a.isDeleted?"color-red":"",children:[e.jsx(m,{val:a._num}),e.jsx(m,{val:a.domain}),e.jsx(m,{val:a.local,stick:"left"}),e.jsx(m,{val:a.file,align:"left",size:"l"}),e.jsx(m,{val:a.httpStatusCode}),e.jsx(X,{url:a.previewUrl}),e.jsx(X,{url:a.sharepointUrl}),e.jsx(m,{val:a.sharepointStatusCode}),e.jsx(m,{val:a.sharepointFileSize}),e.jsx(m,{val:F.formatDate(a.sharepointLastModified)}),e.jsx(m,{val:a.lastModifiedByUserName}),e.jsx(m,{val:n==null?void 0:n.versionComment}),e.jsx(m,{val:n==null?void 0:n.versionCreatedBy,size:"m"}),e.jsx(m,{val:F.formatDate(n==null?void 0:n.versionCreatedDate),size:"m"}),e.jsx(m,{val:n==null?void 0:n.versionLabel}),e.jsx(ve,{val:a.checkOutBy}),e.jsx(ve,{val:a.lockedBy}),e.jsx(ot,{isDeleted:a.isDeleted,onDeleteRestore:()=>s(a),disabled:a.sharepointStatusCode===404||a.versions.length===0})]},a._id)})}),y9=({isRestored:t,error:s,disabled:a,onRestore:n})=>e.jsx("td",{className:"stick-right",children:e.jsxs("div",{className:"actions-cell",children:[t&&e.jsx(kc,{className:"color-green-imp"}),s&&e.jsx(u9,{title:s,children:e.jsx(nl,{className:"color-red-imp"})}),!t&&!s&&e.jsx(Fe,{disabled:a,tooltip:"Restore this version",onClick:n,children:e.jsx(Rc,{})})]})}),S9=({isVisible:t,portals:s,onReset:a})=>{const{navDirection:n,processUrls:o,versioning:r,currentJob:l}=E.useSelector(N=>N.operations),{isInitialised:i,data:c,pagination:d,sort:u}=E.useSelector(N=>N.operations.versioningStep4Report),[p,f]=h.useState(!1),[g,C]=h.useState(null),b=h.useRef(!1),x=E.useDispatch(),{processUrlsInBatches:j}=Te(),{numberedRows:y}=Ne(d,c),v=l!==null,L=g9[r.operation],S=r.operation==="CREATE_VERSION"?"VERSION_STATUS":"FETCH_VERSION",P="versioningStep4Report",A=N=>{x(le({sortKey:N,reportKey:P})),x(ss())},w=N=>{x(ss(N))},D=N=>{x(Le({pageSize:N,reportKey:P})),x(ss())},M=N=>{x(Za({id:N._id,isDeleted:!N.isDeleted}))},T=(N,J)=>{console.debug("version--",N),console.debug("url--",J),x(Xa({url:J,version:N}))},H=()=>{b.current=!0,x(Ee())},z=()=>{f(!0)},V=h.useCallback(()=>{x(Je("versioningStep4Report")),f(!1),x(he())},[x]),O=h.useCallback(async()=>{x(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:P})),(await x(ss(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[x]);return h.useEffect(()=>{t&&n==="next"&&(v?(x(Ct({header:"Fetching Job Details",body:"Please wait while we fetch the details for this job",footer:"Fetching recods...",progress:-1})),O()):j({inputUrls:o.filter(({isActive:N})=>N).map(({inputUrl:N})=>N),processApi:q1,destination:"Status",onComplete:O,onCancel:V,onJobCreated:N=>C(N)}))},[t,v,n,o,j,O,V,x]),t?g?e.jsx(Ye,{jobId:g.jobId,jobName:g.jobName,route:"/bulkops/jobs/versioning"}):e.jsxs("div",{className:"wizard-container",children:[e.jsx(da,{action:S,reportKey:P}),e.jsxs(ne,{header:L,isLoading:!i,sort:u,isEmpty:y.length===0,toolbar:e.jsx(me,{count:d.totalItems}),pagination:e.jsx(fe,{...d,onPageChange:w,onPageSizeChange:D}),onSort:A,children:[r.operation==="CREATE_VERSION"&&e.jsx(x9,{data:y,onDelete:M}),r.operation==="FETCH_VERSION"&&e.jsx(j9,{data:y,onRestore:T}),r.operation==="RESTORE_VERSION"&&e.jsx(v9,{data:y,onDelete:M})]}),s.actions&&Q.createPortal(e.jsx(ke,{action:S}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:r.operation!=="FETCH_VERSION",nextDisabled:c.length===0||d.processUrlCount===0,prevDisabled:v,onPrev:z,onNext:H,children:r.operation!=="FETCH_VERSION"&&e.jsxs("div",{className:"wizard-steps-progress-controls right",children:[e.jsxs("span",{children:[d.processUrlCount," urls are ready to be processed"]}),e.jsx(ds,{isVisible:v,onDiscarded:a})]})}),s.footer),p&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:V,onCancel:()=>f(!1)})]}):null},E9=({data:t})=>e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx(m,{val:s._num}),e.jsx(m,{val:s.domain}),e.jsx(m,{val:s.local,size:"xs",stick:"left"}),e.jsx(m,{val:s.file,size:"l",stick:"left",align:"left"}),e.jsx(m,{val:s.httpStatusCode}),e.jsx(X,{url:s.previewUrl}),e.jsx(X,{url:s.sharepointUrl}),e.jsx(m,{val:s.versionComment}),e.jsx(m,{val:F.formatDate(s.versionCreatedDate)}),e.jsx(m,{val:s==null?void 0:s.versionLabel}),e.jsx(m,{val:s.versionStatus}),e.jsx(m,{val:s.errorMessage,size:"xl",align:"left"})]},s._id))}),k9=({data:t})=>{const s=h.useMemo(()=>t.map(a=>{let n;return a.versions.length>0&&(n=a.versions[a.versions.length-1]),{...a,lastVersion:n}}),[t]);return e.jsx("tbody",{children:s.map(a=>{var n,o,r;return e.jsxs("tr",{children:[e.jsx(m,{val:a._num}),e.jsx(m,{val:a.domain}),e.jsx(m,{val:a.local,size:"xs",stick:"left"}),e.jsx(m,{val:a.file,size:"l",stick:"left",align:"left"}),e.jsx(m,{val:a.httpStatusCode}),e.jsx(X,{url:a.previewUrl}),e.jsx(X,{url:a.sharepointUrl}),e.jsx(m,{val:(n=a.lastVersion)==null?void 0:n.versionComment}),e.jsx(m,{val:(o=a.lastVersion)==null?void 0:o.versionCreatedDate}),e.jsx(m,{val:(r=a.lastVersion)==null?void 0:r.versionLabel}),e.jsx(m,{val:a.versionStatus}),e.jsx(m,{val:a.errorMessage,size:"xl",align:"left"})]},a._id)})})},R9={categories:[{label:"",span:5},{label:"Franklin",span:1},{label:"Document",span:6},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"Http Status",sortKey:"httpStatusCode"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Url",sortKey:"sharepointUrl"},{label:"Versioning Label",sortKey:"versionComment"},{label:"Versioning CreateDate",sortKey:"versionCreatedDate"},{label:"Version Number",sortKey:"versionLabel"},{label:"Versioning Status",sortKey:"versionStatus"},{label:"Error Message",sortKey:"errorMessage"}]},L9={categories:[{label:"",span:5},{label:"Franklin",span:1},{label:"Document",span:7},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"file",align:"left"},{label:"Http Status",sortKey:"httpStatusCode"},{label:"Preview Url",sortKey:"previewUrl"},{label:"Url",sortKey:"sharepointUrl"},{label:"Versioning Label",sortKey:"versionComment"},{label:"Versioning CreateDate",sortKey:"versionCreatedDate"},{label:"Version Number",sortKey:"versionLabel"},{label:"Versioning Status",sortKey:"versionStatus"},{label:"Error Message",sortKey:"errorMessage"}]},N9={CREATE_VERSION:R9,RESTORE_VERSION:L9},P9=({isVisible:t,portals:s,onReset:a})=>{const{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(L=>L.operations.versioningStep5Report),i=E.useSelector(L=>L.operations.versioning),[c,d]=h.useState(null),u=E.useDispatch(),{processUrlsInBatches:p}=Te(),{numberedRows:f}=Ne(r,o),g=N9[i.operation],C=L=>{u(le({sortKey:L,reportKey:"versioningStep5Report"})),u(as())},b=L=>{u(as(L))},x=L=>{u(Le({pageSize:L,reportKey:"versioningStep5Report"})),u(as())},j=()=>{const L=i.operation==="CREATE_VERSION"?"CREATE_VERSION":"FETCH_VERSION";t&&u(Nt({action:L})).then(S=>{var P;_.isFulfilled(S)&&p({inputUrls:(P=S.payload)==null?void 0:P.data,processApi:G1,destination:"Version",onComplete:v,onCancel:v,onJobCreated:A=>d(A)})})},y=()=>{u(he())},v=async()=>{u(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"versioningStep5Report"})),(await u(as(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})};return t?c?e.jsx(Ye,{jobId:c.jobId,jobName:c.jobName,route:"/bulkops/jobs/versioning"}):e.jsxs("div",{className:"wizard-container",children:[e.jsxs(ne,{header:g,isLoading:!n,sort:l,isEmpty:f.length===0,toolbar:e.jsx(me,{count:r.totalItems}),pagination:e.jsx(fe,{...r,onPageChange:b,onPageSizeChange:x}),onSort:C,children:[i.operation==="CREATE_VERSION"&&e.jsx(E9,{data:f}),i.operation==="RESTORE_VERSION"&&e.jsx(k9,{data:f})]}),s.actions&&Q.createPortal(e.jsx(ke,{action:i.operation}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Reset",prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer),e.jsx(Pt,{onConfirm:j,onCancel:y})]}):null},I9=[{name:"Input-urls",description:"input-urls"},{name:"Process-urls",description:"process-urls"},{name:"Options",description:"Versioning options"},{name:"Report",description:"Versioning report"}],no=[{name:"Input-urls",description:"input-urls"},{name:"Process-urls",description:"process-urls"},{name:"Options",description:"Versioning options"},{name:"Status",description:"Versioning status"},{name:"Report",description:"Versioning report"}],T9=[...no],_9={"":no,FETCH_VERSION:I9,CREATE_VERSION:no,RESTORE_VERSION:T9},A9={FETCH_VERSION:{4:"FETCH_VERSION"},CREATE_VERSION:{4:"VERSION_STATUS",5:"CREATE_VERSION"},RESTORE_VERSION:{4:"FETCH_VERSION",5:"RESTORE_VERSION"}},D9=()=>{const t=E.useSelector(n=>n.operations.versioning),{steps:s,clearActions:a}=h.useMemo(()=>({steps:_9[t.operation]||[],clearActions:A9[t.operation]||{}}),[t.operation]);return e.jsx(He,{title:"Versioning",description:U("versioning-desc"),clearActions:a,steps:s,idGenerationStep:4,children:({currentStep:n,portals:o,reInitialize:r})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:n===1,portals:o}),e.jsx(ht,{isVisible:n===2,destination:"options",portals:o}),e.jsx(d9,{isVisible:n===3,portals:o}),e.jsx(S9,{isVisible:n===4,portals:o,onReset:r}),e.jsx(P9,{isVisible:n===5,portals:o,onReset:r})]})})};const O9=[{path:"/bulkops",children:[{path:"/bulkops",element:e.jsx(Bf,{})},{path:"/bulkops/",element:e.jsx(pa,{navMenu:gl,navbarTitle:{name:"Bulk Operations",routes:"/bulkOps"}}),children:[{path:"/bulkops/dashboard",element:e.jsx(tf,{})},{path:"/bulkops/status",element:e.jsx(r9,{})},{path:"/bulkops/preview",element:e.jsx(Y3,{})},{path:"/bulkops/publish",element:e.jsx(s9,{})},{path:"/bulkops/fragments",element:e.jsx(Ff,{})},{path:"/bulkops/versioning",element:e.jsx(D9,{})},{path:"/bulkops/copy",element:e.jsx(ef,{})},{path:"/bulkops/move",element:e.jsx(H3,{})},{path:"/bulkops/checkInCheckOut",element:e.jsx(l2,{})},{path:"/bulkops/exportlist",element:e.jsx(Ef,{})},{path:"/bulkops/deactivate",element:e.jsx(mf,{})},{path:"/bulkops/fragmentRef",element:e.jsx(Tf,{})},{path:"/bulkops/jobs",element:e.jsx(k3,{})},{path:"/bulkops/jobs/bulkContentUpdate",element:e.jsx(th,{})},{path:"/bulkops/jobs/bulkContentUpdate/:projectName",element:e.jsx(ih,{})},{path:"/bulkops/jobs/:jobType",element:e.jsx(E3,{})},{path:"/bulkops/monitoring/checkInCheckOut",element:e.jsx(T3,{})},{path:"/bulkops/monitoring/helix-audit-log",element:e.jsx(B3,{})},{path:"/bulkops/bulkContentUpdate",element:e.jsx(qp,{})}]}]},{path:"/bulkops/report/:id",element:e.jsx(kf,{})}],U9={categories:[{label:"",span:4},{label:"CACHE-PURGE",span:3}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"path"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Last Published Date",sortKey:"lastPublished"},{label:"Cache Purged Date",sortKey:"createdAt"}]},w9=({data:t,isLoading:s,sort:a,handleSort:n,handlePageChange:o,handlePageSizeChange:r,pagination:l})=>e.jsx(ne,{header:U9,isLoading:s,sort:a,isEmpty:t.length===0,toolbar:e.jsx(me,{count:l.totalItems}),pagination:e.jsx(fe,{...l,onPageChange:o,onPageSizeChange:r}),onSort:n,children:e.jsx("tbody",{children:t.map(i=>e.jsxs("tr",{children:[e.jsx(m,{val:i._num}),e.jsx(m,{val:i.domain}),e.jsx(It,{val:i.local,stick:"left"}),e.jsx(m,{val:i.file,align:"left"}),e.jsx(X,{url:i.liveUrl}),e.jsx(ge,{val:i.lastPublished}),e.jsx(ge,{val:i.createdAt})]},i._id))})}),M9=({isVisible:t,portals:s,onReset:a})=>{const{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(x=>x.operations.cachePurgeReport),i=E.useDispatch(),{processUrlsInBatches:c}=Te(),{numberedRows:d}=Ne(r,o),u=x=>{i(le({sortKey:x,reportKey:"cachePurgeReport"})),i(Ht())},p=x=>{i(Ht(x))},f=x=>{i(Le({pageSize:x,reportKey:"cachePurgeReport"})),i(Ht())},g=()=>{i(Nt({action:"CACHE_PURGE"})).then(({meta:x,payload:j})=>{x.requestStatus==="fulfilled"&&(j!=null&&j.data)&&c({inputUrls:j.data,processApi:p1,destination:"Cache Purge",useCanProcessUrlsCheck:!1,onComplete:b,onCancel:b})})},C=()=>{i(he())},b=h.useCallback(async()=>{i(le({sortKey:"message",sortOrder:"desc",reportKey:"cachePurgeReport"})),(await i(Ht(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[i]);return t?e.jsxs("div",{className:"wizard-container",children:[e.jsxs("div",{className:"cache-purge-report-step-table",children:[e.jsx(w9,{data:d,isLoading:!n,sort:l,handleSort:u,handlePageChange:p,handlePageSizeChange:f,pagination:r}),s.actions&&Q.createPortal(e.jsx(ke,{action:"CACHE_PURGE",args:{useMsalToken:!0}}),s.actions)]}),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Reset",prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer),e.jsx(Pt,{onConfirm:g,onCancel:C})]}):null},$9={categories:[{label:"",span:4},{label:"Publish",span:3},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"path",align:"left"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Publish Status",sortKey:"liveStatusCode"},{label:"Last Published Date",sortKey:"lastPublished"},{label:"Actions",stick:"right",size:"xs"}]},F9=({data:t,isLoading:s,sort:a,handleSort:n,handlePageChange:o,handlePageSizeChange:r,pagination:l,handleDelete:i})=>e.jsx(ne,{header:$9,isLoading:s,sort:a,isEmpty:t.length===0,toolbar:e.jsx(me,{count:l.totalItems}),pagination:e.jsx(fe,{...l,onPageChange:o,onPageSizeChange:r}),onSort:n,children:e.jsx("tbody",{children:t.map(c=>e.jsxs("tr",{children:[e.jsx(m,{val:c._num}),e.jsx(m,{val:c.domain}),e.jsx(It,{val:c.local,stick:"left"}),e.jsx(m,{val:c.file,align:"left"}),e.jsx(X,{url:c.liveUrl,align:"left"}),e.jsx(m,{val:c.liveStatusCode}),e.jsx(ge,{val:c.lastPublished}),e.jsx(ot,{isDeleted:c.isDeleted,disabled:c.liveStatusCode===404,onDeleteRestore:()=>i(c)})]},c._id))})}),V9=({isVisible:t,portals:s})=>{const{navDirection:a,processUrls:n}=E.useSelector(P=>P.operations),{isInitialised:o,data:r,pagination:l,sort:i}=E.useSelector(P=>P.operations.statusReport),[c,d]=h.useState(!1),u=E.useDispatch(),{processUrlsInBatches:p}=Te(),{numberedRows:f}=Ne(l,r),g="CACHE_PURGE_STATUS",C=P=>{u(le({sortKey:P,reportKey:"statusReport"})),u(Kt())},b=P=>{u(Kt(P))},x=P=>{u(Le({pageSize:P,reportKey:"statusReport"})),u(Kt())},j=P=>{u(Ka({id:P._id,isDeleted:!P.isDeleted}))},y=()=>{u(Ee())},v=()=>{d(!0)},L=h.useCallback(()=>{u(Je("statusReport")),d(!1),u(he())},[u]),S=h.useCallback(async()=>{u(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"statusReport"})),(await u(Kt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[u]);return h.useEffect(()=>{t&&a==="next"&&p({inputUrls:n.filter(({isActive:P})=>P).map(({inputUrl:P})=>P),processApi:u1,destination:"Status",useCanProcessUrlsCheck:!1,onComplete:S,onCancel:L})},[t,a,n,p,S,L,u]),t?e.jsxs("div",{className:"wizard-container",children:[e.jsx(F9,{data:f,isLoading:!o,sort:i,handleSort:C,handlePageChange:b,handlePageSizeChange:x,pagination:l,handleDelete:j}),s.actions&&Q.createPortal(e.jsx(ke,{action:g,args:{useMsalToken:!0}}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:r.length===0||l.processUrlCount===0,onPrev:v,onNext:y,children:e.jsx("div",{className:"wizard-steps-progress-controls right",children:e.jsxs("span",{children:[l.processUrlCount," urls are ready to be processed"]})})}),s.footer),c&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:L,onCancel:()=>d(!1)})]}):null},B9=[{name:"Input Urls",description:"Input Urls Desc"},{name:"Process Urls",description:"Process Urls Desc"},{name:"Status",description:"Status"},{name:"Report",description:"Cache Purge Report"}],K9=()=>e.jsx(He,{title:"Cache Purge",description:U("Cache-Purge-Desc"),clearActions:{3:"CACHE_PURGE_STATUS",4:"CACHE_PURGE"},steps:B9,idGenerationStep:3,children:({currentStep:t,portals:s,reInitialize:a})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:t===1,portals:s}),e.jsx(ht,{isVisible:t===2,destination:"options",maxUrlsKey:"CACHEPURGE_MAX_PROCESSABLE_URLS",portals:s}),e.jsx(V9,{isVisible:t===3,portals:s,onReset:a}),e.jsx(M9,{isVisible:t===4,portals:s,onReset:a})]})});const H9=[{value:"RE_INDEX",label:"Re Index"},{value:"REMOVE_INDEX",label:"Remove Index"}],z9=({isVisible:t,portals:s})=>{const a=E.useSelector(u=>u.operations.pageIndexing),n=E.useSelector(u=>u.operations.navDirection),[o,r]=h.useState(""),l=E.useDispatch(),i=()=>{l(op({operation:o})),l(Ee())},c=()=>{l(he())},d=u=>{r(u)};return h.useEffect(()=>{a.operation.length===0&&r("")},[a]),h.useEffect(()=>{t&&n==="next"&&r("")},[t,n]),t?e.jsxs($t,{className:"pageIndex-options",title:"Select Operation",children:[e.jsx(vn,{styles:Ot.picker,value:o,items:H9,onChange:d}),s.footer&&Q.createPortal(e.jsx(pe,{nextDisabled:!o,onPrev:c,onNext:i}),s.footer)]}):null},q9=t=>({categories:[{label:"",span:4},{label:t,span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"path"},{label:`${t} Date`,sortKey:"createdAt"}]}),G9={RE_INDEX:"Re Index",REMOVE_INDEX:"Remove Index"},J9=({data:t,isLoading:s,sort:a,handleSort:n,handlePageChange:o,handlePageSizeChange:r,pagination:l,currentPageIndexingOperation:i="REMOVE_INDEX"})=>{const c=q9(G9[i]);return e.jsx(ne,{header:c,isLoading:s,sort:a,toolbar:e.jsx(me,{count:l.totalItems}),isEmpty:t.length===0,pagination:e.jsx(fe,{...l,onPageChange:o,onPageSizeChange:r}),onSort:n,children:e.jsx("tbody",{children:t.map(d=>e.jsxs("tr",{children:[e.jsx(m,{val:d._num}),e.jsx(m,{val:d.domain}),e.jsx(It,{val:d.local,stick:"left"}),e.jsx(m,{val:d.file,align:"left"}),e.jsx(ge,{val:d.createdAt})]},d._id))})})},W9=({isVisible:t,portals:s,onReset:a})=>{const{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(j=>j.operations.pageIndexingReport),i=E.useSelector(j=>j.operations.pageIndexing.operation),c=E.useDispatch(),{processUrlsInBatches:d}=Te(),{numberedRows:u}=Ne(r,o),p=j=>{c(le({sortKey:j,reportKey:"pageIndexingReport"})),c(Qt())},f=j=>{c(Qt(j))},g=j=>{c(Le({pageSize:j,reportKey:"pageIndexingReport"})),c(Qt())},C=()=>{c(Nt({action:i})).then(({meta:j,payload:y})=>{j.requestStatus==="fulfilled"&&(y!=null&&y.data)&&d({inputUrls:y.data,processApi:T1,destination:"PageIndexing",useCanProcessUrlsCheck:!1,onComplete:x,onCancel:x})})},b=()=>{c(he())},x=h.useCallback(async()=>{c(le({sortKey:"message",sortOrder:"desc",reportKey:"pageIndexingReport"})),(await c(Qt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[c]);return t?e.jsxs("div",{className:"wizard-container",children:[e.jsx(Ft,{children:Eo.removeIndexWarningMessage}),e.jsxs("div",{className:"pageIndexing-report-step-table",children:[e.jsx(J9,{data:u,isLoading:!n,sort:l,handleSort:p,handlePageChange:f,handlePageSizeChange:g,pagination:r,currentPageIndexingOperation:i}),s.actions&&Q.createPortal(e.jsx(ke,{action:i.toUpperCase(),args:{useMsalToken:!0}}),s.actions)]}),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Reset",prevIcon:e.jsx(dt,{}),prevFillStyle:"outline",nextVisible:!1,onPrev:a}),s.footer),e.jsx(Pt,{onConfirm:C,onCancel:b})]}):null},Y9={categories:[{label:"",span:4},{label:"Publish",span:4},{label:"",span:1}],columns:[{label:"#"},{label:"Domain",sortKey:"domain",align:"left"},{label:"Locale",sortKey:"local",stick:"left"},{label:"File",sortKey:"path",align:"left"},{label:"Publish Url",sortKey:"liveUrl"},{label:"Publish Status",sortKey:"liveStatusCode"},{label:"Last Published",sortKey:"lastPublished"},{label:"Operation",sortKey:""},{label:"Actions",stick:"right",size:"xs"}]},Z9=({data:t,isLoading:s,sort:a,handleSort:n,handlePageChange:o,handlePageSizeChange:r,pagination:l,pageIndexing:i,onDelete:c})=>{const d=i.operation,u=h.useCallback(p=>{const f=p.liveStatusCode===200||p.liveStatusCode===201||p.liveStatusCode===202;return d==="RE_INDEX"?f:d==="REMOVE_INDEX"},[d]);return e.jsx(ne,{header:Y9,isLoading:s,sort:a,isEmpty:t.length===0,toolbar:e.jsx(me,{count:l.totalItems}),pagination:e.jsx(fe,{...l,onPageChange:o,onPageSizeChange:r}),onSort:n,children:e.jsx("tbody",{children:t.map(p=>e.jsxs("tr",{className:p.isDeleted?"color-red":"",children:[e.jsx(m,{val:p._num}),e.jsx(m,{val:p.domain}),e.jsx(It,{val:p.local,stick:"left"}),e.jsx(m,{val:p.file,align:"left"}),e.jsx(X,{url:p.liveUrl,align:"left"}),e.jsx(m,{val:p.liveStatusCode}),e.jsx(ge,{val:p.lastPublished}),e.jsx(m,{val:d}),e.jsx(ot,{isDeleted:p.isDeleted,disabled:!u(p),onDeleteRestore:()=>c(p)})]},p._id))})})},X9=({isVisible:t,portals:s})=>{const{navDirection:a,processUrls:n,pageIndexing:o}=E.useSelector(A=>A.operations),{isInitialised:r,data:l,pagination:i,sort:c}=E.useSelector(A=>A.operations.statusReport),[d,u]=h.useState(!1),p=E.useDispatch(),{processUrlsInBatches:f}=Te(),{numberedRows:g}=Ne(i,l),C="INDEX_STATUS",b=A=>{p(le({sortKey:A,reportKey:"statusReport"})),p(Xt())},x=A=>{p(Xt(A))},j=A=>{p(Le({pageSize:A,reportKey:"statusReport"})),p(Xt())},y=A=>{p(Ya({id:A._id,isDeleted:!A.isDeleted}))},v=()=>{p(Ee())},L=()=>{u(!0)},S=h.useCallback(()=>{p(Je("statusReport")),u(!1),p(he())},[p]),P=h.useCallback(async()=>{p(le({sortKey:"httpStatusCode",sortOrder:"desc",reportKey:"statusReport"})),(await p(Xt(1))).meta.requestStatus==="rejected"&&de("Something went wrong while fetching the status report",{variant:"error"})},[p]);return h.useEffect(()=>{t&&a==="next"&&f({inputUrls:n.filter(({isActive:A})=>A).map(({inputUrl:A})=>A),processApi:I1,destination:"Status",useCanProcessUrlsCheck:!1,onComplete:P,onCancel:S})},[t,a,n,f,P,S,p]),t?e.jsxs("div",{className:"wizard-container",children:[e.jsx(Z9,{data:g,isLoading:!r,sort:c,handleSort:b,handlePageChange:x,handlePageSizeChange:j,pagination:i,pageIndexing:o,onDelete:y}),s.actions&&Q.createPortal(e.jsx(ke,{action:C,args:{useMsalToken:!0}}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:o.operation,nextDisabled:l.length===0||i.processUrlCount===0,onPrev:L,onNext:v,children:o.operation&&e.jsx("div",{className:"wizard-steps-progress-controls right",children:e.jsxs("span",{children:[i.processUrlCount," urls are ready to be processed"]})})}),s.footer),d&&e.jsx(we,{title:"Do you want to leave? All data will be lost",onConfirm:S,onCancel:()=>u(!1)})]}):null},Q9=[{name:"Input Urls",description:"Input Urls Desc"},{name:"Process Urls",description:"Process Urls Desc"},{name:"Options",description:"Page Indexing Options"},{name:"Status",description:"Status"},{name:"Report",description:"Page Index Report"}],em=()=>{const{operation:t}=E.useSelector(s=>s.operations.pageIndexing);return e.jsx(He,{title:"Page Indexing",description:U("page-indexing-desc"),clearActions:{4:"INDEX_STATUS",5:t},steps:Q9,idGenerationStep:4,children:({currentStep:s,portals:a,reInitialize:n})=>e.jsxs(h.Fragment,{children:[e.jsx(pt,{isVisible:s===1,portals:a}),e.jsx(ht,{isVisible:s===2,destination:"options",maxUrlsKey:"DEACTIVATE_MAX_PROCESSABLE_URLS",portals:a}),e.jsx(z9,{isVisible:s===3,portals:a}),e.jsx(X9,{isVisible:s===4,portals:a,onReset:n}),e.jsx(W9,{isVisible:s===5,portals:a,onReset:n})]})})},tm={columns:[{label:"#",size:"xxs"},{label:"Name",align:"left"},{label:"Created By",sortKey:"createdBy",align:"left"},{label:"Created Date",sortKey:"createdDate",align:"left"},{label:"Modified Date",sortKey:"modifiedDate",align:"left"},{label:"Actions",size:"xs",stick:"right"}]},sm=({isLoading:t,data:s,pagination:a,sort:n,onSearch:o,onSort:r,onPageChange:l,onPageSizeChange:i,onView:c,onEdit:d,onDelete:u})=>{const p=ce(g=>g.account),{numberedRows:f}=Ne(a,s);return e.jsx(ne,{header:tm,isLoading:t,sort:n,isEmpty:f.length===0,emptyTableMessage:"No configs found!",toolbar:e.jsxs(me,{title:`All configurations (${a.totalItems})`,children:[e.jsx("div",{className:"flex-1"}),e.jsx(oa,{styles:De.start16,"aria-label":"config-list-search",onChange:o})]}),pagination:e.jsx(fe,{pageSizes:[20,50,100],...a,onPageChange:l,onPageSizeChange:i}),onSort:r,children:e.jsx("tbody",{children:f.map(g=>{const C=p.username===g.createdEmail;return e.jsxs("tr",{children:[e.jsx(m,{val:g._num}),e.jsx(m,{val:g.name,align:"left"}),e.jsx(m,{val:`${g.createdBy} (${g.createdEmail.replace("@adobe.com","")})`,align:"left"}),e.jsx(ge,{val:new Date(g.createdDate),tz:!1,align:"left"}),e.jsx(ge,{val:new Date(g.modifiedDate),tz:!1,align:"left"}),e.jsx(am,{id:g.id,isOwner:C,onView:c,onEdit:d,onDelete:u})]},g.id)})})})},am=({id:t,isOwner:s,onView:a,onEdit:n,onDelete:o})=>e.jsxs("td",{className:"flex justify-center actions-cell stick-right",children:[e.jsx(kt,{tooltip:"View config details",onPress:r=>a(t),children:e.jsx(po,{})}),e.jsx(kt,{tooltip:"Edit config",isDisabled:!s,onPress:r=>n(t),children:e.jsx(Co,{})}),e.jsx(Us,{confirmMessage:"Delete this configuration?",tooltip:"Delete config",disabled:!s,useSpectrumButton:!0,onConfirm:r=>o(t),children:e.jsx(jo,{})})]}),ii=({formValues:t,title:s})=>{const a=l=>{const i={};return Object.entries(l).forEach(([c,d])=>{const[u,...p]=c.split(".");i[u]||(i[u]={}),p.length>0?i[u][p.join(".")]=d:i[u]=d}),i},n=l=>typeof l=="string"&&l.startsWith("data:image/"),o=(l,i="")=>Object.entries(l).map(([c,d])=>n(d)?e.jsxs("li",{className:"mb-2",children:[e.jsxs("strong",{children:[c,":"]}),e.jsx("img",{width:"150",height:"150",src:d,alt:c,className:"max-w-full mt-2"})]},i?`${i}.${c}`:c):typeof d=="object"&&d!==null?e.jsxs("li",{className:"mb-2",children:[e.jsxs("strong",{children:[c,":"]}),e.jsx("ul",{className:"ml-4",children:o(d,c)})]},i?`${i}.${c}`:c):Array.isArray(d)?e.jsxs("li",{className:"mb-2",children:[e.jsxs("strong",{children:[c,":"]}),e.jsx("ul",{className:"ml-4 list-disc",children:d.map((u,p)=>e.jsx("li",{children:u},p))})]},i?`${i}.${c}`:c):e.jsxs("li",{className:"mb-2",children:[!/\d/.test(c)&&e.jsxs("strong",{children:[c,":"]})," ",(d==null?void 0:d.toString())||"N/A"]},i?`${i}.${c}`:c)),r=a(t);return e.jsxs("div",{className:"p-4 border rounded shadow",children:[e.jsx("h2",{className:"mb-4 text-lg font-bold",children:s}),e.jsx("ul",{children:o(r)})]})},Fo=/\$<(.)*?>/g,Hn="FORWARD",_r="BACKWARD",ha=(t,s=!1)=>{if(!t||t.length<1)return"";let a=t.match(Fo)||[];return s?a:a[0]||""},Pn=(t,s)=>!t||t.length<1?"":t.replace(Fo,a=>s[a]||""),nm=(t,s)=>{const a=(t==null?void 0:t.find(n=>n.name===s))??{};return a.values?a.values:[]},om=t=>new Promise((s,a)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>{s(n.result)},n.onerror=o=>{a(o)}}),Vo=t=>t.reduce((s,a)=>{const{id:n,children:o}=a;if(!n)return s;if(!o&&n)return s.push(n),s;let r=[];return o&&o.length>0&&(r=Vo(o)),s.push(n),s.push(...r),s},[]),ci=(...t)=>(s,a,n)=>t.reduce((o,r)=>r(o,a,n),s),oo=(t,s)=>{const o=ha(t,!0).map(r=>r.replace(/\$|<|>/g,"")).reduce((r,l)=>(s[l]&&(r[`$<${l}>`]=s[l]),r),{});return Pn(t,o)},rm=(t,s,a,n)=>{a.forEach(o=>{const r=document.createElement("li");t.forEach(l=>{if(n==="img"){const i=document.createElement("img");i.style.height="100px",i.style.width="100px";const c=oo(l,o);c&&(i.src=c,i.alt=t,r.appendChild(i),s.appendChild(r))}else{const i=oo(l,o);r.appendChild(i),s.appendChild(r)}})})},ps=(t,s,a)=>{t.forEach(({content:n="",children:o=[],iterable:r=!1,contentType:l="img",parentId:i})=>{if(n&&a){const c=document.createElement("li");if(r){const d=a[i];rm(n,s,d,l)}else{const d=oo(n,a);c.textContent=d,s.appendChild(c)}if(o.length>0){const d=document.createElement("ul");c.appendChild(d),ps(o,d,a)}}})},lm=({configurationMetadataCollection:t,product:s})=>{const a=t.find(r=>r.name==="product")||{},{values:n=[]}=a;return n.find(r=>r.value.toLowerCase()===s.toLowerCase())},im=(t,s,a)=>{const{linkedSchema:n}=a;if(!n)return t;const o=n.find(l=>l.name==="fillAndSign")||{},{templates:{template:r}}=o;return r&&ps(r,t,{}),t},cm=t=>(xl.forEach(s=>{const a=document.createElement("li");a.textContent=s,t.appendChild(a)}),t),dm=(t,s,a)=>{const n=s.featureValues.removeBackground,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="removeBackground")||{},{templates:{template:l}}=r;return l&&ps(l,t,n),t},um=(t,s,a)=>{const n=s.featureValues.upload,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="upload")||{},{templates:{template:l}}=r;return l&&ps(l,t,n),t},pm=(t,s,a)=>{const{configurationMetadataCollection:n}=a,o=s.product,r=lm({configurationMetadataCollection:n,product:o}),l=s.featureValues.redirectionToApp,{linkedSchema:i}=a;if(!i||!l)return t;const c=i.find(u=>u.name==="redirectionToApp")||{},{templates:{template:d}}=c;return d&&ps(d,t,{...l,redirectionSvg:r.icon}),t},hm=(t,s,a)=>{const n=s.featureValues.hueSat,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="hueSat")||{},{templates:{template:l}}=r;return l&&ps(l,t,n),t},fm=(t,s,a)=>{const n=s.featureValues.changeBackground,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="changeBackground")||{},{templates:{template:l}}=r;return l&&ps(l,t,n),t},mm=(t,s,a)=>{const n=s.product,{configurationMetadataCollection:o}=a,r=o.find(d=>d.name==="product")||{},{values:l=[]}=r,i=l.find(d=>d.value.toLowerCase()===n.toLowerCase()),c=document.createElement("li");return c.textContent=`:product-icon: ${i.icon||""}  https://main--unity--adobecom.hlx.page/unity/assets/icon-picker/startover.svg`,t.appendChild(c),t},gm={Photoshop:[mm,dm,fm,hm,um,pm,cm],Acrobat:[im]},xm=(t,s)=>{try{const a=document.createElement("div");document.querySelector("#table-container")&&document.querySelector("#table-container").remove(),a.id="table-container",a.insertAdjacentHTML("beforeend",`<style>
        #data-table table, #data-table th, #data-table td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 5px;
        }
        #data-table {
          width: 100vw;
        }
        #table-container {
          position: absolute;
          top: -9999px;
          left: -9999px;;
        }
        #table-container a {
          color: #7DB0FF;
          text-decoration: underline;
        }
    </style>`);const n=document.createElement("table");n.id="data-table";const o=document.createElement("thead"),r=document.createElement("tr"),l=document.createElement("th");l.textContent=`Unity(workflow-${t.product.toLowerCase()}${t.colorMode?",":""}${(t==null?void 0:t.colorMode)??""})`,r.appendChild(l),o.appendChild(r),n.appendChild(o),a.appendChild(n);const i=document.createElement("tbody"),c=document.createElement("tr"),d=document.createElement("td"),u=document.createElement("ul"),p=gm[t.product],f=ci(...p)(u,t,s);return d.appendChild(f),c.appendChild(d),i.appendChild(c),n.appendChild(i),a}catch(a){return console.error(a),null}},bm=async t=>{if(!(navigator!=null&&navigator.clipboard)||!t)return console.error("Copy to Clipboard not supported."),!1;try{const s=new Blob([t.outerHTML],{type:"text/html"}),a=[new ClipboardItem({[s.type]:s})];return await navigator.clipboard.write(a),!0}catch(s){return console.error(s),!1}},di=t=>{const{data:s,isSuccess:a,isLoading:n}=vl("unity"),{enqueueSnackbar:o}=ye.useSnackbar();return{copyUnityBlock:h.useCallback(async()=>{if(a){const l=xm(t,s);await bm(l)?o("Unity Block copied to clipboard",{variant:"success"}):o("Facing issues while copying Unity Block to clipboard",{variant:"error"})}else o("Could not load Unity configuration to copy",{variant:"error"})},[t,s,a,o]),isLoading:n}},Cm=({isOpen:t,formValues:s,onClose:a})=>{const{copyUnityBlock:n,isLoading:o}=di(s),r=()=>{n(),a()};return e.jsx(Ds,{open:t,maxWidth:"lg",title:"Preview data",footer:e.jsxs(_s,{children:[e.jsx(ae,{variant:"secondary",onPress:a,children:"Dismiss"}),e.jsx(ae,{variant:"accent",isDisabled:o,onPress:r,children:"Copy Unity Block"})]}),onClose:a,children:e.jsx(ii,{formValues:s})})},jm=()=>{const{isLoading:t,configTemplates:s}=E.useSelector(w=>w.config),{isInitialised:a,data:n,pagination:o,sort:r}=E.useSelector(w=>w.config.configList),[l,i]=h.useState({title:"Configurations",description:"Manage configurations here"}),[c,d]=h.useState(null),[u,p]=h.useState(!1),{id:f}=ee.useParams(),g=ee.useNavigate(),C=E.useDispatch(),{enqueueSnackbar:b}=ye.useSnackbar(),x=()=>{g(`/config-mgmt/${f}/new`)},j=w=>{const D=w;let M="asc";w===r.key&&(M=r.order==="asc"?"desc":"asc"),C(Vs({sort:{key:D,order:M}})),C(vt({id:f}))},y=h.useRef(ct.debounce(w=>{t||(C(Vs({search:w})),C(vt({id:f})))},800)).current,v=w=>{C(vt({id:f,pageIndex:w}))},L=(w,D)=>{C(Vs({pagination:{pageSize:w}})),C(vt({id:f,pageIndex:D}))},S=w=>{C(Js({id:w,client:f})).then(D=>{_.isFulfilled(D)&&D.payload.jsonData?(d(D.payload.jsonData),p(!0)):_.isRejected(D)&&b(D.payload,{variant:"error"})})},P=w=>{g(`/config-mgmt/${f}/edit/${w}`)},A=w=>{C(Ea({id:w})).then(D=>{_.isFulfilled(D)&&(b("Configuration deleted successfully",{variant:"success"}),C(vt({id:f})))})};return h.useEffect(()=>{s.length>0&&(C(Vs({sort:{key:"createdDate",order:"desc"}})),C(vt({id:f})).then(w=>{console.debug(`Fetching config list for id: ${f}`),w.payload.errorCode&&(b(w.payload.errorMessage||`Configuration with id ${f} not found!`,{variant:"error"}),g("/config-mgmt"))}))},[f,s,g,C,b]),h.useEffect(()=>{if(s.length>0){const w=s.find(D=>D.id===f);console.debug(`Config template for id: ${f} =>`,w),w&&w.permission?i({title:w.title,description:w.description}):(b("Permission not found!",{variant:"error"}),g("/config-mgmt"))}},[f,s,g,b]),h.useEffect(()=>()=>{C(Vs({reset:!0}))},[f,C]),e.jsxs(We,{className:"panther",...l,actions:e.jsxs(ae,{onPress:x,children:[e.jsx(vo,{}),e.jsx(je,{children:"Add New Configuration"})]}),children:[e.jsx("div",{className:"page-content",children:e.jsx(sm,{isLoading:!a,data:n,pagination:o,sort:r,onSearch:y,onSort:j,onPageChange:v,onPageSizeChange:L,onView:S,onEdit:P,onDelete:A})}),e.jsx(Cm,{isOpen:u,formValues:c,onClose:w=>{p(!1),C(Ro({client:f}))}}),t&&e.jsx(Ke,{})]})},vm=()=>{const t=ce(n=>n.token),{id:s}=ee.useParams();h.useEffect(()=>{a()},[t]);async function a(){try{if(!t)return;const n=await Yd(t,s);window.open(n,"_blank","noopener,noreferrer")}catch{return}}return e.jsxs("p",{className:"mt-4 text-center",children:["Your download will start shortly. If it does not start automatically,",e.jsx("a",{className:"underline cursor-pointer",onClick:()=>{Oe({name:Be.RE_TRY_EXPORT}),a()},children:"click here"})]})},ui=({children:t,slideIndex:s})=>e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"flex flex-row transition-all duration-0 delay-0 ease-in-out will-change-transform h-full",style:{direction:"ltr",transform:`translate(${s*-100}%,0%)`},children:t&&t.length>0&&t.map((a,n)=>e.jsx("div",{className:"w-full shrink-0",children:a},`swipeable-${n}`))})});ui.propTypes={children:te.node,slideIndex:te.number};const ym=({elements:t,linkedSchemaId:s,title:a})=>e.jsxs("div",{className:"flex flex-col flex-1",children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold break-words font-base text-300",children:a}),e.jsx("hr",{className:"h-px mt-2 mb-4 bg-gray-200 border-0"})]}),t&&t.length>0&&t.map(n=>e.jsx(Ns,{type:n.type,title:n.title,elements:n.children,properties:n.properties,id:n.id,slot:n.slot,linkedSchemaId:s},n.id))]}),Sm=({field:t,fieldState:s,options:a,title:n,id:o})=>{const{name:r,value:l,onChange:i}=t,{error:c,invalid:d}=s,[u,p]=h.useState(l);h.useEffect(()=>{a&&a.length>1&&a.length===l.length&&p([...l,"selectAll"])},[a]);const f=g=>{a.length>1&&g.length===a.length&&!g.includes("selectAll")?p([...g,"selectAll"]):p(g);const C=g.filter(b=>b!=="selectAll");i(C)};return e.jsx("div",{className:"w-full pb-3",children:e.jsxs(Lc,{name:r,value:u,onChange:f,isInvalid:d,errorMessage:c==null?void 0:c.message,label:n,size:"XL",isDisabled:a.length<1,children:[a&&a.length>1&&e.jsx(xt,{value:"selectAll",id:"selectAll",isRequired:!1,size:"XL",onChange:g=>{if(g){const C=a.map(b=>b.value);i(C),p([...C,"selectAll"])}else i([]),p([])},children:"Select All"}),a.length>0&&a.map(g=>e.jsx(xt,{id:g.value,value:g.value,onChange:C=>{!C&&u.includes("selectAll")&&a.length>1&&p(b=>b.filter(x=>x!=="selectAll"))},children:g.label},`${o}-${g.value}`))]})})},Em=({id:t,control:s,properties:a,options:n=[],title:o})=>e.jsx(yo,{name:t,defaultValue:[],control:s,rules:{required:a.required?"Please check this box if you want to proceed.":""},render:({field:r,fieldState:l})=>e.jsx(Sm,{field:r,fieldState:l,options:n,title:o,properties:a,id:t})}),km=({id:t,pos:s,name:a,control:n,title:o})=>{const{enqueueSnackbar:r}=ye.useSnackbar(),l=["image/png","image/jpeg","image/jpg"],i=()=>{r("File format is not supported",{variant:"error"})};return e.jsx(yo,{name:`${t}.${s}.${a}`,control:n,rules:{required:"Please upload an image"},render:({field:{name:c,value:d,onChange:u},fieldState:{invalid:p,error:f}})=>{const g=async C=>{try{const b=await om(C);u(b),r("Image added successfully.",{variant:"success"})}catch{r("Could not upload the Image",{variant:"error"})}};return e.jsxs("fieldset",{name:c,children:[e.jsx("h4",{className:"font-bold break-words text-300",children:o}),e.jsx("p",{className:"font-bold text-red-800",children:p?f==null?void 0:f.message:""}),e.jsx(qr,{isFilled:!!d,onDrop:async C=>{let b=C.items.filter(x=>x.kind==="file").filter(x=>l.includes(x.type));if(b.length>0){const x=await b[0].getFile();g(x)}else i()},children:e.jsxs(uo,{children:[!d&&e.jsx(Nc,{children:e.jsx(Pc,{})}),!d&&e.jsx(Is,{children:"Drag & Drop or Browse to Upload"}),e.jsx(Ts,{children:d&&e.jsx("img",{className:"h-[135px] w-[200px]",src:d,alt:`${t}.${s}.${c}`})}),e.jsx(Gr,{acceptedFileTypes:l,onSelect:C=>{const x=Array.from(C).filter(j=>l.includes(j.type));x.length>0?g(x[0]):i()},children:e.jsx(_s,{children:e.jsx(ae,{variant:"accent",children:"Browse files"})})})]})})]})}})},Rm=({field:t,index:s,remove:a,id:n,control:o})=>e.jsxs("div",{className:"flex flex-row items-center w-full gap-6 px-6 pb-6",children:[e.jsx(km,{name:"mainImage",control:o,id:n,pos:s,title:"Image"},`mainImage-${t.id}`),e.jsx(ae,{UNSAFE_style:{height:"50px",width:"50px"},onPress:()=>{a(s)},children:e.jsx(jo,{})})]});const Lm=({control:t,id:s,fields:a,remove:n})=>(console.debug("UploadDialogContent",a.length),e.jsx("div",{className:"flex flex-row flex-wrap justify-center w-full h-full",children:e.jsx("div",{className:"flex flex-col flex-1 w-full",children:a.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs(uo,{children:[e.jsx(Is,{children:"Add Images Here"}),e.jsx(Ts,{children:"Click the 'Add' Button to Upload Images"})]})}):e.jsx("ol",{className:"cfm-upload--dialog--list",children:a.map((o,r)=>e.jsx("li",{className:"flex",children:e.jsx(Rm,{field:o,index:r,remove:n,id:s,control:t},o.id)},r))})})})),Nm=({id:t,title:s,properties:a})=>{const{control:n,trigger:o,formState:{errors:r,isDirty:l},unregister:i}=Ge(),[c,d]=h.useState(!1),u=h.useRef(),{fields:p,append:f,remove:g}=Ic({control:n,name:t,rules:{required:a.required}}),C=Tc(r,t),b=async()=>{const y=p.flatMap((L,S)=>Object.keys(p[S]).map(P=>`${t}[${S}].${P}`));await o(y)&&d(!1)},x=ol({control:n,name:t,defaultValue:[]});h.useEffect(()=>{u.current=x.length},[x]),h.useEffect(()=>()=>{u.current<1&&i(t)},[]);const j=h.useCallback(()=>{f({mainImage:""})},[f]);return e.jsxs("div",{children:[e.jsx(ae,{variant:"accent",onPress:()=>d(!0),children:a.buttonTitle||"Upload"}),l&&(C==null?void 0:C.root)&&e.jsx("p",{className:"text-red-800",children:" * Please Add Images"}),x&&e.jsx("div",{className:"flex gap-6 py-1",children:x.map((y,v)=>e.jsx("div",{children:e.jsx("img",{width:"100",height:"100",src:y.mainImage,alt:`MainImage ${v}`})},v))}),e.jsx(ho,{type:"fullscreen",onDismiss:()=>d(!1),children:c&&e.jsxs(fo,{children:[e.jsx(Is,{slot:"title",children:s}),e.jsx(Ts,{children:e.jsx(Lm,{id:t,fields:p,remove:g,control:n,properties:a})}),e.jsx(_s,{children:e.jsx(ae,{onPress:b,variant:"secondary",children:"Close"})}),e.jsx(Yr,{children:e.jsxs(ae,{variant:"accent",onPress:j,children:[e.jsx(_c,{}),e.jsx(je,{children:"Add Images"})]})})]})})]})},Pm=({id:t,control:s,properties:a,options:n=[],title:o})=>e.jsx(yo,{name:t,defaultValue:[],control:s,rules:{required:a.required&&"Please select one of these options."},render:({field:r,fieldState:l})=>{const{name:i,value:c,onChange:d}=r,{error:u,invalid:p}=l;return e.jsx("div",{className:"w-full pb-3",children:e.jsx(sl,{name:i,value:c,onChange:d,isInvalid:p,errorMessage:p?u==null?void 0:u.message:"",label:o,size:"XL",orientation:"horizontal",isDisabled:n.length<1,children:n.length>0&&n.map(f=>e.jsx(al,{id:f.value,value:f.value,children:f.label},`${t}-${f.value}`))})})}}),ws=h.createContext(null),Im=(t,s)=>{const{config:a}=h.useContext(ws),{getValues:n,unregister:o}=Ge(),[r,l]=h.useState([]),c=ha(t).replace(/\$|<|>/g,""),d=n(c),u=h.useCallback(p=>{const f=n(s);if(f){const C=Object.keys(f).filter(b=>!p.includes(b)).map(b=>`${s}.${b}`);o(C)}},[n,s,o]);return h.useEffect(()=>{const{linkedSchema:p}=a;if(d&&d.length>0){const f=d.map(g=>p.find(C=>C.name===g)).filter(g=>g);l(f),u(d)}},[d,a,u]),t?r:[]},pi=({children:t})=>e.jsx("div",{className:"flex flex-row flex-1 gap-2",children:t}),Tm=({id:t,config:s,slotName:a})=>{const{fieldsMetadata:n}=s,{steps:o=[]}=n,{children:r,title:l}=o[0]||{};return e.jsxs("div",{className:"flex flex-col w-full h-full pt-6 border-gray-300",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("h4",{className:"font-bold break-words font-base text-300",children:l}),e.jsx("hr",{className:"h-px mt-2 mb-4 bg-gray-200 border-0"})]}),e.jsx("div",{className:"flex flex-col w-full h-full",children:e.jsx(pi,{children:r&&r.length>0&&r.map(i=>e.jsx(Ns,{id:i.id,type:i.type,title:i.title,properties:i.properties,elements:i.children,linkedSchemaId:a},`${t}-${i.id}-${a}`))})})]})},_m=({slot:t,id:s})=>{const a=Im(t,s);return e.jsx("div",{className:"flex flex-col w-full h-full",children:e.jsx("div",{className:"flex flex-col",children:a.length>0&&a.map(n=>e.jsx(Tm,{id:s,config:n,slotName:n.name},`${s}-${n.name}`))})})};const Am=({options:t=[],id:s,title:a,properties:n,control:o,resetNextSteps:r})=>{const{field:{name:l,value:i,onChange:c,ref:d},fieldState:{error:u,invalid:p}}=Cn({name:s,control:o,rules:{required:n.required&&"Please select an item in the list."},defaultValue:""}),f=h.useCallback(g=>{c(g),n!=null&&n.resetNextSections&&g!==i&&r()},[c,n==null?void 0:n.resetNextSections,r,i]);return e.jsx("div",{className:"w-full pb-3",children:e.jsx(mo,{ref:d,name:l,label:a,onSelectionChange:f,selectedKey:i,isInvalid:p,errorMessage:p?u==null?void 0:u.message:"",size:"L",children:t.length>0&&t.map(({value:g,label:C,icon:b,isDisabled:x=!1})=>e.jsxs(qs,{id:g,value:g,textValue:g,isDisabled:x,children:[b&&e.jsx("div",{slot:"icon",className:"cfm-picker-item__img",children:e.jsx("img",{className:"object-contain h-300 w-300",src:b,alt:C})}),e.jsx(je,{slot:"label",children:e.jsx("span",{className:"ml-50",children:C})})]},`${s}-${g}`))})})};const Dm=({id:t,control:s,properties:a})=>{Cn({name:t,control:s});const{getValues:n,setValue:o}=Ge(),[r,l]=h.useState([]),[i,c]=h.useState(1),[d,u]=h.useState(a.rowsPerPage?a.rowsPerPage:a.pageSizes[0]),p=a.tableHeader,f={columns:[{label:"#",size:"xxs",align:"left"},...p.map(S=>({label:S,align:"left"}))]},g=(S,P)=>{const w=(S.startsWith("/")?S:`/${S}`).split("/"),D=w[1];return P[D]&&w.splice(1,1),w.join("/")};h.useEffect(()=>{const S=n(),{sourceUrl:P,destinationUrl:A,locale:w,uniqueLocales:D}=S;if(!P||!A)return;const M=w&&w.length?g(P,D):P,T=w&&w.length?w.map(({name:H})=>({source:`/${H}${M}`,destination:A})):[{source:M,destination:A}];l(T),o(t,T)},[n,o,t]);const C=Math.ceil(r.length/d),b=(i-1)*d,x=r.slice(b,b+d),j=()=>{i<C&&c(i+1)},y=()=>{i>1&&c(i-1)},v=S=>{u(S),c(1)},L=S=>{c(S)};return e.jsx("div",{className:"inputTable",children:e.jsx(ne,{header:f,isEmpty:r.length===0,emptyTableMessage:"No Url found!",toolbar:e.jsx(me,{title:`(${r.length}) Records`}),pagination:e.jsx(fe,{currentPage:i,totalPages:C,totalItems:r.length,pageSize:d,pageSizes:a.pageSizes,onPageChange:L,onPageSizeChange:v,onNext:j,onPrevious:y}),children:e.jsx("tbody",{children:x.map((S,P)=>e.jsxs("tr",{children:[e.jsx(m,{val:b+P+1}),e.jsx(m,{val:S.source,align:"left"}),e.jsx(m,{val:S.destination,align:"left"})]},P))})})})},Om=({control:t,properties:s,title:a,id:n})=>{var f,g;let o={};s.pattern&&(o={pattern:{value:new RegExp((f=s.pattern)==null?void 0:f.value),message:(g=s.pattern)==null?void 0:g.message}});const{field:{name:r,value:l,onChange:i,onBlur:c,ref:d},fieldState:{invalid:u,error:p}}=Cn({name:n,control:t,rules:{required:s.required&&"Please fill this field.",...o},defaultValue:""});return e.jsx("div",{className:"w-full pb-3",children:e.jsx(Rs,{name:r,label:a,ref:d,value:l,onChange:i,onBlur:c,isInvalid:u,errorMessage:u?p==null?void 0:p.message:"",size:"L"})})};function Um({control:t,id:s,title:a,properties:n={}}){const{masterLocales:o,masterFilterGroups:r,countryOptions:l,languageOptions:i,totalLocalesCount:c,saveSelectedLocales:d}=Os(),{setValue:u}=Ge(),p=E.useSelector(v=>v.local.savedLocales),f=E.useSelector(v=>v.session.siteData.authorUrls),{field:{value:g,onChange:C}}=Cn({name:s,control:t,rules:{required:n.required},defaultValue:p||[]}),[b,x]=h.useState(!1),j=(v,L)=>{const S=new Set([...v.flatMap(P=>P.locales.map(A=>A.name)),...L.flatMap(P=>P.locales)]);return Array.from(S).reduce((P,A)=>(P[A]={name:A},P),{})};h.useEffect(()=>{const v=j(o,r);u("uniqueLocales",v)},[o,r,u]);const y=v=>{C(v),x(!1)};return e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex flex-col flex-[0.3]",children:[e.jsx("label",{className:"text-gray-700 text-[16px] font-medium",children:a}),e.jsx("table",{className:"locale-selector",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx(kn,{selectedLocales:g,onAdd:()=>x(!0)}),b&&e.jsx(En,{initialSelectedLocales:g,masterLocales:o,masterFilterGroups:r,countryOptions:l,languageOptions:i,totalLocalesCount:c,localeNames:f,onLocalesSelected:y,onLocalesSaved:d,onClose:()=>x(!1)})]})})})]})})})}const hi=({fill:t="#ffffff"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 0 18 18",width:"18",children:e.jsx("path",{d:"M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z",fill:t})});hi.propTypes={fill:te.string};const wm=({elements:t,title:s,properties:a})=>{const n=ee.useNavigate();return e.jsxs("div",{className:"flex flex-col w-full h-full",children:[e.jsxs("div",{className:"flex items-center w-full p-4",children:[e.jsx("h3",{className:"flex-1 m-0 font-bold break-words text-600",children:s}),e.jsx(Ac,{staticColor:"white",onPress:()=>{n("/home")},children:e.jsx(hi,{})})]}),e.jsx("div",{className:"flex flex-col w-full px-4 overflow-auto",children:e.jsx("div",{className:a!=null&&a.colWidth?"w-full":"w-3/5",children:e.jsx(pi,{children:t&&t.length>0&&t.map(o=>e.jsx(Ns,{id:o.id,type:o.type,title:o.title,slot:o.slot,properties:o.properties,elements:o.children},o.id))})})})]})},Mm=({title:t})=>{const{getValues:s}=Ge(),{copyUnityBlock:a,isLoading:n}=di(s());return e.jsx(ae,{variant:"primary",isDisabled:n,onPress:a,children:t})},fi=({configurationMetadataCollection:t,product:s})=>{const a=t.find(r=>r.name==="product")||{},{values:n=[]}=a;return n.find(r=>r.value.toLowerCase()===s.toLowerCase())},$m=(t,s,a)=>{a.forEach(n=>{t.forEach(o=>{const r=mi(o,n);s.insertAdjacentHTML("beforeend",r)})})},mi=(t,s)=>{const o=ha(t,!0).map(r=>r.replace(/\$|<|>/g,"")).reduce((r,l)=>(s[l]&&(r[`$<${l}>`]=s[l]),r),{});return Pn(t,o)},Ms=(t,s,a)=>{t.forEach(({content:n="",iterable:o=!1,children:r,parentId:l})=>{const i=document.createElement("li");if(n)if(o){const c=a[l];$m(n,i,c)}else{const c=mi(n,a);i.insertAdjacentHTML("beforeend",c)}if(r&&r.length>0){const c=document.createElement("ul");i.appendChild(c),Ms(r,c,a)}s.appendChild(i)})},Fm=(t,s,a)=>{const n=s.product,{configurationMetadataCollection:o}=a,r=fi({configurationMetadataCollection:o,product:n}),l=document.createElement("li");return l.innerHTML=`<span class="icon icon-product-icon"></span><a href="${r.icon}">${r.icon}</a> <a href="/unity/assets/test/startover.svg">https://main--unity--adobecom.hlx.page/unity/assets/test/startover.svg</a>`,t.appendChild(l),t},Vm=(t,s,a)=>{const n=s.featureValues.removeBackground,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="removeBackground")||{},{templates:{franklinTemplate:l}}=r;return l&&Ms(l,t,n),t},Bm=(t,s,a)=>{const n=s.featureValues.changeBackground,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="changeBackground")||{},{templates:{franklinTemplate:l}}=r;return l&&Ms(l,t,n),t},Km=(t,s,a)=>{const n=s.featureValues.hueSat,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="hueSat")||{},{templates:{franklinTemplate:l}}=r;if(l){const i=document.createElement("li");Ms(l,i,n),t.appendChild(i)}return t},Hm=(t,s,a)=>{const n=s.featureValues.upload,{linkedSchema:o}=a;if(!o||!n)return t;const r=o.find(i=>i.name==="upload")||{},{templates:{franklinTemplate:l}}=r;if(l){const i=document.createElement("li");Ms(l,i,n),t.appendChild(i)}return t},zm=(t,s,a)=>{const{configurationMetadataCollection:n}=a,o=s.product,r=fi({configurationMetadataCollection:n,product:o}),l=s.featureValues.redirectionToApp,{linkedSchema:i}=a;if(!i||!l)return t;const c=i.find(u=>u.name==="redirectionToApp")||{},{templates:{franklinTemplate:d}}=c;return d&&Ms(d,t,{...l,redirectionSvg:r.icon}),t},qm=t=>(xl.forEach(s=>{const a=document.createElement("li");a.textContent=s,t.appendChild(a)}),t),Gm=(t,s)=>{const a=document.createElement("div");a.classList.add("unity"),a.classList.add(`workflow-${t.product.toLowerCase()}`),a.classList.add(`${t.colorMode}`);const n=document.createElement("div");a.appendChild(n);const o=document.createElement("div");n.appendChild(o);const r=document.createElement("ul"),l=ci(Fm,Vm,Bm,Km,Hm,zm,qm)(r,t,s);return o.appendChild(l),a.outerHTML},Jm=()=>{const[t,s]=h.useState(!1),[a,n]=h.useState(!1),{getValues:o,formState:{isValid:r}}=Ge(),{config:l}=h.useContext(ws);h.useEffect(()=>{n(!!t)},[t]);const i=()=>{const f=o(),C={unity:Gm(f,l),source:"milo-studio"};setTimeout(()=>{var b;(b=document.querySelector("iframe.iframeClass.iframePreviewLabel"))==null||b.contentWindow.postMessage(JSON.stringify(C),"*")},2e3),setTimeout(()=>{n(!1)},5e3)},[c,d]=h.useState("desktop"),u=()=>{i()},p=st("iframeClass","iframePreviewLabel w-full h-full",{"max-w-[768px] max-h[1024px] scale-75":c&&c==="tablet"},{"max-w-[360px] max-h-[640px] scale-75":c&&c==="mobile"});return e.jsxs(e.Fragment,{children:[e.jsx(ae,{variant:"accent",isDisabled:!r,onPress:()=>{s(!0)},children:"Live Preview"}),e.jsx(ho,{type:"fullscreen",onDismiss:()=>s(!1),children:t&&e.jsx(fo,{children:({close:f})=>e.jsxs(e.Fragment,{children:[e.jsx(Is,{slot:"title",children:"Live Preview"}),e.jsx(Ts,{children:e.jsxs("div",{className:"flex flex-col w-full h-full",children:[e.jsx("div",{className:"flex flex-row items-start p-6",children:e.jsxs(mo,{label:"Change Viewport",onSelectionChange:d,defaultSelectedKey:c,children:[e.jsxs(qs,{id:"desktop",value:"desktop",textValue:"desktop",children:[e.jsx(Dc,{}),e.jsx(je,{slot:"label",children:"Desktop"})]}),e.jsxs(qs,{id:"tablet",value:"tablet",textValue:"tablet",children:[e.jsx(Oc,{}),e.jsx(je,{slot:"label",children:"Tablet"})]}),e.jsxs(qs,{id:"mobile",value:"mobile",textValue:"mobile",children:[e.jsx(Uc,{}),e.jsx(je,{slot:"label",children:"Mobile"})]})]})}),e.jsxs("div",{className:"flex justify-center w-full h-full",children:[a&&e.jsx(Ke,{}),e.jsx("iframe",{id:"UnityPreviewIframe",onLoad:u,src:"https://unity-preview--unity--adobecom.hlx.live/preview.html?martech=off",className:p})]})]})}),e.jsx(_s,{children:e.jsx(ae,{onPress:f,variant:"accent",children:"Close"})})]})})})]})},Wm=t=>a=>{const{getValues:n}=Ge(),o=n();return e.jsx(t,{formValues:o,...a})},Ym=t=>{const{getValues:s}=Ge(),[a,n]=h.useState([]),{config:o}=h.useContext(ws),r=ha(t),l=r.replace(/\$|<|>/g,""),i=s(l);return h.useEffect(()=>{let c=t;r&&i&&l&&(c=Pn(t,{[r]:i}));const d=o.configurationMetadataCollection,u=nm(d,c);n(u)},[i,r,l,t,o.configurationMetadataCollection]),t?a:[]},xs=t=>a=>{const{properties:n}=a,{control:o}=Ge(),r=Ym(n.metaDataId),{onResetNextSections:l}=h.useContext(ws),i=h.useCallback(()=>{l()},[l]);return e.jsx(t,{...a,control:o,options:r,resetNextSteps:i})},Zm=({id:t,shouldClearValues:s,elements:a})=>{const n=h.useMemo(()=>Vo(a),[a]),{unregister:o}=Ge();h.useEffect(()=>{s&&(o(t),a&&a.length>0&&o(n))},[t,s,o,n,a])},Xm=t=>(s,a)=>{switch(t){case"notEqual":return s!==a;case"and":return s&&a;case"or":return s||a;case"equal":return s===a;default:return s}},Bo=(t,s)=>{const{condition:a,operands:n=[]}=t;if(!a||n.length<1)return!1;const o=n.map(r=>{if(r&&typeof r=="object"&&!Array.isArray(r))return Bo(r,s);if(Fo.test(r)){const l=ha(r),i=l.replace(/\$|<|>/g,""),c=ct.get(s,i,"");return Pn(r,{[l]:c})}else return r});return o.length<2?a==="falsy"?!o[0]:!!o[0]:o.reduce(Xm(a))},Qm=({renderConditions:t})=>{const{getValues:s,control:a}=Ge(),n=ol({control:a,disabled:!t,name:t==null?void 0:t.subscriptions});if(!t)return!0;const o=t==null?void 0:t.subscriptions.reduce((r,l,i)=>(r[l]=n[i],r),{});return Bo(t.conditions,{...o,...s()})},Ar={Select:t=>xs(Am)(t),TextField:t=>xs(Om)(t),CheckboxGroup:t=>xs(Em)(t),RadioGroup:t=>xs(Pm)(t),SectionFields:t=>e.jsx(_m,{...t}),SelectLocale:t=>xs(Um)(t),Table:t=>xs(Dm)(t),Column:t=>e.jsx(ym,{...t}),Step:t=>e.jsx(wm,{...t}),ImageUpload:t=>e.jsx(Nm,{...t}),UnityLivePreview:t=>e.jsx(Jm,{...t}),UnityCopyBlock:t=>e.jsx(Mm,{...t}),ConfigurationDisplay:t=>Wm(ii)(t),default:()=>e.jsx("div",{children:"Work in Progress"})},e0=({type:t,title:s,elements:a,properties:n,id:o,linkedSchemaId:r,slot:l})=>{const i=Ar[t]||Ar.default,c=Qm({renderConditions:n==null?void 0:n.renderConditions});return Zm({id:o,elements:a,shouldClearValues:!c}),e.jsx(e.Fragment,{children:c&&e.jsx(i,{title:s,type:t,properties:n,elements:a,id:o,slot:l,linkedSchemaId:r})})},Ns=({id:t,type:s,title:a,elements:n=[],properties:o,linkedSchemaId:r,slot:l})=>e.jsx(e.Fragment,{children:e.jsx(e0,{id:t,type:s,title:a,properties:o,elements:n,linkedSchemaId:r,slot:l})}),t0=({steps:t,activeStep:s})=>e.jsx("div",{className:"flex gap-2",children:t.map((a,n)=>e.jsx(wc,{variant:n===s?"informative":"neutral",size:"S",role:"status","aria-label":"status"},n))}),s0=({steps:t,onSubmitForm:s,onResetForm:a})=>{const[n,o]=h.useState(!1),{setActiveStep:r,activeStep:l}=h.useContext(ws),[i,c]=h.useState([]),[d,u]=h.useState(Hn),{handleSubmit:p,trigger:f,clearErrors:g,getValues:C,formState:{isDirty:b}}=Ge(),x=()=>{u(_r),r(A=>A-1),g()},j=async A=>{await f()&&(l===t.length-1?s(A):(u(Hn),r(D=>D+1)))},y=h.useCallback(A=>{if(!A)return!1;const w=C();return!Bo(A.conditions,w)},[C]);h.useEffect(()=>{const A=t[l],{properties:w={}}=A,{additionalCta:D=[],renderConditions:M}=w;if(D.length>0?c(D):c([]),M){const T=y(M);T&&d===Hn&&r(H=>H+1),T&&d===_r&&r(H=>H-1)}},[l,t,d,y]);const v=()=>{o(!0)},L=()=>{o(!1)},S=()=>{a(),o(!1),r(0)},P=()=>e.jsx(Hl,{isOpen:n,setOpen:o,content:e.jsx("p",{children:"Are you sure you want to reset the form?"}),btnContent:e.jsxs(e.Fragment,{children:[e.jsx(ae,{onPress:L,variant:"secondary",children:"No"}),e.jsx(ae,{onPress:S,variant:"negative",children:"Yes"})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col h-full",onSubmit:p(j),children:[e.jsx("div",{className:"w-full pb-12 overflow-hidden",children:e.jsx(ui,{slideIndex:l,children:t.map((A,w)=>{if(l===w)return e.jsx(Ns,{id:A.id,type:A.type,title:A.title,elements:A.children,properties:A.properties},A.id)})})}),e.jsx("div",{className:"absolute bottom-0 flex w-full pb-4 transform -translate-x-1/2 bg-white border-t left-1/2 rounded-bl-2xl rounded-br-2xl",children:e.jsxs("div",{className:"flex items-center justify-between w-full gap-2 mt-4 mx-200",children:[e.jsx(ae,{type:"button",variant:"secondary",onPress:x,isDisabled:l===0,children:"Back"}),e.jsx(t0,{steps:t,activeStep:l}),e.jsxs("div",{className:"flex gap-3",children:[l!==t.length-1?e.jsx(ae,{type:"submit",variant:"secondary",children:"Next"}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{variant:"secondary",onPress:v,isDisabled:!b,children:"Reset"}),e.jsx(ae,{type:"submit",variant:"accent",children:"Save"})]}),i.map(({id:A,type:w,title:D,properties:M})=>e.jsx(Ns,{id:A,type:w,title:D,properties:M},A))]})]})})]}),P()]})},a0=({step:t,onSubmitForm:s})=>{const{handleSubmit:a}=Ge(),n=o=>{s(o)};return e.jsxs("form",{className:"flex flex-col h-full",onSubmit:a(n),children:[e.jsx(Ns,{id:t.id,type:t.type,title:t.title,elements:t.children}),e.jsx("div",{className:"flex items-center justify-between w-full gap-2 mt-4 mx-200",children:e.jsx("div",{className:"flex items-center justify-end w-full gap-2 mt-4 mx-200",children:e.jsx(ae,{type:"submit",variant:"accent",children:"Update"})})})]})},gi=({config:t,onSubmitClient:s,initialValues:a})=>{const{fieldsMetadata:n}=t,{steps:o}=n,r=Mc({mode:"onSubmit",values:a}),[l,i]=h.useState(0),c=h.useCallback(p=>{console.debug(p),s(p)},[s]),d=h.useCallback(()=>{r.reset({...a})},[a,r]);if(!o||o.length<1)return e.jsx("div",{children:"No Steps for form"});const u=()=>{const p=o.slice(l+1,o.length-1);l!==o.length-1&&p.forEach(f=>{const{children:g}=f,{unregister:C}=r;if(g.length>0){const b=Vo(g);C(b)}})};return e.jsx(ws.Provider,{value:{config:t,onResetNextSections:u,setActiveStep:i,activeStep:l},children:e.jsx("div",{className:"flex flex-row w-full h-full",children:e.jsx($c,{...r,children:e.jsx("div",{className:"flex flex-col w-full h-full p-4",children:o.length>1?e.jsx(s0,{steps:o,onSubmitForm:c,onResetForm:d}):e.jsx(a0,{step:o[0],onSubmitForm:c})})})})})},Dr=()=>{const t=E.useDispatch(),{id:s}=ee.useParams(),{data:a,isLoading:n}=hu(s?"editredirects":"redirects"),o=ce(u=>{var p;return(p=u.defaultTenant)==null?void 0:p.value}),r=E.useSelector(u=>u.config.redirects.formValues),l=ee.useNavigate(),{enqueueSnackbar:i}=ye.useSnackbar(),c=E.useSelector(u=>u.redirects.isLoading);h.useEffect(()=>()=>{t(Ro({client:"redirects"}))},[]),h.useEffect(()=>{s&&t(La({id:s,client:"redirects"}))},[s]);const d=async u=>{t(tn({formValues:{...u},tenant:o})).unwrap().then(p=>{p.Invalid.length&&i(`${p.Invalid.length} URLs Redirect failed`,{variant:"error"}),p.Accepted.length&&!p.Invalid.length&&(i(`${p.Accepted.length} URLs Redirect successful`,{variant:"info"}),l("/config-mgmt/redirects"));const{client:f}=p;f&&l("/config-mgmt/redirects")}).catch(p=>{i(p,{variant:"error"})})};return e.jsx(pa,{children:e.jsxs("div",{className:"flex w-full h-full",children:[a&&a.fieldsMetadata&&e.jsx("div",{className:"w-4/5 mx-auto h-[90%] bg-redirects bg-[length:110%_110%] bg-no-repeat shadow-xl shadow-gray-500 rounded-2xl relative mt-9 ",children:e.jsx(gi,{config:a,initialValues:r,onSubmitClient:d})}),(c||n)&&e.jsx(Ke,{})]})})},Ko=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"99.039",height:"94.342",focusable:"false",fill:"currentColor",stroke:"currentColor",className:"text-gray-500",children:e.jsxs("g",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M93.113 88.415a5.38 5.38 0 0 1-7.61 0L58.862 61.773a1.018 1.018 0 0 1 0-1.44l6.17-6.169a1.018 1.018 0 0 1 1.439 0l26.643 26.643a5.38 5.38 0 0 1 0 7.608z",strokeWidth:"2.99955"}),e.jsx("path",{strokeWidth:"2",d:"M59.969 59.838l-3.246-3.246M61.381 51.934l3.246 3.246M64.609 61.619l13.327 13.327"}),e.jsx("path",{strokeWidth:"3",d:"M13.311 47.447A28.87 28.87 0 1 0 36.589 1.5c-10.318 0-20.141 5.083-24.7 13.46M2.121 38.734l15.536-15.536M17.657 38.734L2.121 23.198"})]})}),In=({Icon:t,heading:s,description:a})=>e.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full text-center",children:[t,s&&e.jsx("h3",{className:"font-light font-base text-700 mt-300",children:s}),a&&e.jsx("section",{className:"italic font-base text-100 font-regular mt-50",children:a})]});In.propTypes={Icon:te.node,heading:te.string,description:te.string};const n0=()=>e.jsx("div",{className:"flex items-center h-96",children:e.jsx(In,{Icon:e.jsx(Ko,{}),heading:"No Redirections Found",description:"Please update filters to see matching redirect conditions"})}),o0=()=>{const{masterLocales:t,masterFilterGroups:s,countryOptions:a,languageOptions:n,totalLocalesCount:o,saveSelectedLocales:r}=Os(),l=E.useSelector(L=>L.local.savedLocales),[i,c]=h.useState(!1),[d,u]=h.useState([]),[p,f]=h.useState(""),[g,C]=h.useState(""),b=E.useSelector(L=>L.session.siteData.authorUrls),x=E.useDispatch(),j=L=>{u(L),c(!1)},y=()=>{u(l),c(!0)},v=()=>{x(en({source:p,destination:g}))};return e.jsx("div",{className:"flex flex-col w-full px-8 py-6",children:e.jsxs("div",{className:"flex items-center space-x-4 ",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Source"}),e.jsx("div",{className:"pt-3 pb-3",children:e.jsx(oa,{"aria-label":"redirect-source-search",value:p,onChange:f})})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Destination"}),e.jsx("div",{className:"pt-3 pb-3",children:e.jsx(oa,{"aria-label":"redirect-destination-search",value:g,onChange:C})})]}),e.jsxs("div",{className:"flex flex-col flex-[0.3]",children:[e.jsx("p",{className:"pl-2 text-sm font-medium",children:"Locale"}),e.jsx(kn,{selectedLocales:d,onAdd:L=>y()}),i&&e.jsx(En,{initialSelectedLocales:d,masterLocales:t,masterFilterGroups:s,countryOptions:a,languageOptions:n,totalLocalesCount:o,localeNames:b,onLocalesSelected:j,onLocalesSaved:r,onClose:L=>c(!1)})]}),e.jsx("div",{className:"pt-3",children:e.jsx(ae,{type:"search",variant:"accent",onPress:v,children:"Search"})})]})})},r0={columns:[{label:"#",size:"xxs"},{label:"Source"},{label:"Destination"},{label:"Actions",stick:"right"}]},l0=()=>{const{data:t,isInitialised:s}=E.useSelector(u=>u.redirects.searchResults),[a,n]=h.useState([]),o=()=>{},r=()=>{},{slice:l,pagination:i,setCurrentPage:c,setPageSize:d}=_o({source:a,initialPageSize:20,sourceSetter:n});return h.useEffect(()=>{t&&n(t)},[t]),!s||t.length===0?null:e.jsx(ne,{className:"px-8 pb-8",header:r0,useAltHeaderBg:!0,pagination:e.jsx(fe,{pageSizes:[20,50,100],...i,onPageChange:c,onPageSizeChange:d}),children:e.jsx("tbody",{children:l.map(u=>e.jsxs("tr",{children:[e.jsx(m,{val:u._num}),e.jsx(m,{val:u.src}),e.jsx(m,{val:u.dst}),e.jsx(i0,{onEdit:o,onDelete:r})]},`row-${u._num}`))})})},i0=(t,s)=>e.jsxs("td",{className:"flex justify-center actions-cell stick-right",children:[e.jsx(kt,{onPress:t,children:e.jsx(Co,{})}),e.jsx(Us,{useSpectrumButton:!0,onPress:s,children:e.jsx(jo,{})})]}),c0=()=>{const{isInitialised:t,data:s}=E.useSelector(r=>r.redirects.searchResults),a={title:"Redirects",description:"Redirects Configurations"},n=ee.useNavigate(),o=()=>n("/config-mgmt/redirects/new");return e.jsx(pa,{children:e.jsxs(We,{className:"panther",...a,actions:e.jsxs(ae,{onClick:o,children:[e.jsx(vo,{}),e.jsx(je,{children:"Add New Redirect"})]}),children:[e.jsx(o0,{}),t&&s.length===0&&e.jsx(n0,{}),e.jsx(l0,{})]})})},xi=({query:t,type:s,path:a,blocks:n,variations:o})=>({[lt.QUERY]:t,[lt.TYPE]:s,...a&&a.length>0&&{[lt.PATH]:a},...n&&n.length>0&&{[lt.BLOCK]:n.join(",")},...o&&o.length>0&&{[lt.VARIATIONS]:o.join(",")}}),d0=async t=>{if(!(navigator!=null&&navigator.clipboard))return console.error("Copy to Clipboard not supported."),!1;try{return await navigator.clipboard.writeText(t),!0}catch(s){return console.error(s),!1}},bi=""+new URL("magnify-icon.svg",import.meta.url).href,Ci=({hasDropdown:t=!0,closeModal:s=()=>{},onEnterPress:a=()=>{}})=>{const{fetchSearchResultsAdvanced:n,fetchSearchResults:o,setQuery:r,setSearchDropdownVisible:l,resetSearchResults:i,isSearchDropdownVisible:c,setNoResult:d,resetError:u,query:p,resetPagination:f}=q(Fc(({fetchSearchResultsAdvanced:v,fetchSearchResults:L,setQuery:S,setSearchDropdownVisible:P,resetSearchResults:A,isSearchDropdownVisible:w,setNoResult:D,resetError:M,query:T,resetPagination:H})=>({fetchSearchResultsAdvanced:v,fetchSearchResults:L,setQuery:S,setSearchDropdownVisible:P,resetSearchResults:A,isSearchDropdownVisible:w,setNoResult:D,resetError:M,query:T,resetPagination:H}))),g=()=>{t&&(l(!0),s())},C=v=>{v.key==="Enter"&&(v.preventDefault(),t||(f(),n()),a())},b=h.useCallback(io(()=>{o()},800),[]),x=h.useCallback(v=>{const{target:{value:L}}=v;d(!1),u(),r(L),L||(i(),f()),t&&L&&L.length&&b()},[t]),j=st("relative flex w-full",{"z-[1001]":c&&t}),y=st("block w-full p-2 text-sm text-gray-900 border border-gray-300 focus:outline-none bg-gray-50 ps-600 rounded-3xl",{"rounded-bl-none":c&&t,"rounded-br-none":c&&t});return e.jsxs("div",{className:j,children:[e.jsx("div",{className:"absolute inset-y-0 flex items-center pointer-events-none start-0 ps-300",children:e.jsx("img",{src:bi})}),e.jsx("input",{type:"search",id:"default-search",className:y,placeholder:"Search your files",value:p||"",required:!0,onChange:x,onFocus:g,onKeyDown:C,autoComplete:"off"})]})};Ci.propTypes={hasDropdown:te.bool,closeModal:te.func,onEnterPress:te.func};const u0=({fill:t="#222"})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"m10,18.75c-4.8252,0-8.75-3.9248-8.75-8.75S5.1748,1.25,10,1.25s8.75,3.9248,8.75,8.75-3.9248,8.75-8.75,8.75Zm0-16c-3.99805,0-7.25,3.25195-7.25,7.25s3.25195,7.25,7.25,7.25,7.25-3.25195,7.25-7.25-3.25195-7.25-7.25-7.25Z",fill:t}),e.jsx("path",{d:"m10.00064,5.26036c.23065-.00813.45538.07387.62661.22862.33033.36505.33033.92102,0,1.28607-.16935.15851-.39483.24308-.62664.23504-.23635.00948-.46589-.08035-.63302-.24775-.16207-.1679-.24916-.39432-.24137-.62755-.01238-.23497.06959-.46515.2277-.6394.17358-.16474.40786-.24988.64671-.23503Z",fill:t}),e.jsx("path",{d:"m10,15.0625c-.41406,0-.75-.33594-.75-.75v-4.83496c0-.41406.33594-.75.75-.75s.75.33594.75.75v4.83496c0,.41406-.33594.75-.75.75Z",fill:t})]}),p0=({htmlString:t=""})=>{const s=t.split("<em>"),a=[];for(let n=0;n<s.length;n++)if(!s[n].includes("</em>"))a.push(s[n]);else{let o="",r=!1;for(let l=0;l<s[n].length;l++)!r&&s[n][l]==="<"&&s[n][l+1]==="/"&&s[n][l+2]==="e"&&s[n][l+3]==="m"&&s[n][l+4]===">"?(a.push(h.createElement("span",{className:"font-base font-bold text-150 overflow-hidden truncate"},o)),o="",l+=4,r=!0):o+=s[n][l];o&&a.push(o)}return h.createElement("p",{className:"truncate"},...a)},ji=({title:t,path:s,highlights:a})=>e.jsxs("div",{className:"flex flex-row items-center w-full gap-6 border-b-2 border-gray-300 px-600 py-300 hover:bg-gray-200",children:[e.jsxs("div",{className:"flex flex-col w-[70%]",children:[t?e.jsx("a",{href:s,className:"flex flex-row items-center justify-between w-full",target:"_blank",rel:"noreferrer",onClick:()=>Oe({name:t}),children:e.jsx("p",{className:"overflow-hidden font-bold text-gray-900 underline truncate font-base text-150",children:t})}):e.jsx(Ie,{}),s?e.jsx("a",{href:s,className:"flex flex-row items-center justify-between w-full",target:"_blank",rel:"noreferrer",onClick:()=>Oe({name:s}),children:e.jsx("p",{className:"overflow-hidden italic text-gray-600 truncate font-base text-150",children:s})}):e.jsx(Ie,{}),a&&a.length>0&&a[0]&&e.jsx(p0,{htmlString:a[0]})]}),e.jsx("div",{className:"flex flex-row w-[30%] justify-end",children:a&&a.length>0&&e.jsxs("p",{children:[a.length," matches"]})})]});ji.propTypes={title:te.string,path:te.string,highlights:te.arrayOf(te.string)};const h0=()=>{const t=q(r=>r.searchResults),s=q(r=>r.query),a=q(r=>r.noResult),n=q(r=>r.isLoading),o=()=>s&&!a?e.jsx("ul",{className:"w-full h-full overflow-y-scroll",children:(!n||t.length>0?t:Array.from(new Array(5).fill({}))).map(({path:r,title:l,highlights:i},c)=>e.jsx(ji,{path:r,title:l,highlights:i},`${c}-${r}-${l}`))}):a?e.jsx(In,{Icon:e.jsx(Ko,{}),heading:"No Results found",description:"Please modify your search criteria and try again"}):s?e.jsx("div",{className:"h-full"}):e.jsx("div",{className:"flex",children:e.jsx("p",{className:"font-base px-600",children:"Please enter one or more search terms in search box above"})});return e.jsx("div",{className:"flex w-full h-full",children:o()})},Ho=({isOpen:t,onClose:s,header:a,content:n,footer:o,showCloseButton:r=!0,showBackdrop:l=!0,backdropClickable:i=!0,customClassName:c})=>{const[d,u]=h.useState(!1),p=h.useRef(null),[f,g]=h.useState(t);h.useEffect(()=>{g(t)},[t]),h.useEffect(()=>{const j=y=>{p.current.contains(y.target)||b()};if(f&&!l)return document.addEventListener("click",j),()=>{document.removeEventListener("click",j)}},[f,d,l]);const C=()=>{u(!0)},b=()=>{g(!1),s&&(s(),u(!1))},x=()=>e.jsxs("div",{className:"p-2.5 absolute right-2 top-4 cursor-pointer rounded-full hover:bg-gray-200 hover:rounded-full",onClick:b,children:[e.jsx("div",{className:"w-200 h-25 bg-static-black rotate-45 top-0.5 relative"}),e.jsx("div",{className:"w-200 h-25 bg-static-black top-25 opacity-0 relative"}),e.jsx("div",{className:"w-200 h-25 bg-static-black -rotate-45 -top-25 relative"})]});return e.jsxs(e.Fragment,{children:[!l&&f&&e.jsxs("div",{ref:p,className:`bg-white rounded-medium shadow-lg absolute ${c||""}`,onClick:j=>{j.stopPropagation(),C()},children:[r&&x(),a&&e.jsx("div",{className:"modal-header mb-200",children:a}),n&&e.jsx("div",{className:"modal-body mb-200",children:n}),o&&e.jsx("div",{className:"modal-footer",children:o})]}),l&&f&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex justify-center items-center",onClick:()=>i?b():null,children:e.jsxs("div",{className:`bg-static-white p-300 rounded-medium relative ${c||""}`,onClick:j=>j.stopPropagation(),children:[r&&x(),a&&e.jsx("div",{className:"modal-header mb-200",children:a}),n&&e.jsx("div",{className:"modal-body mb-200",children:n}),o&&e.jsx("div",{className:"modal-footer",children:o})]})})]})},hs=({className:t=""})=>e.jsx("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.293 0.292988L5 3.58592L1.707 0.292988C1.51891 0.108277 1.26549 0.00531799 1.00188 0.00651181C0.738261 0.00770563 0.485783 0.112956 0.299376 0.299362C0.11297 0.485769 0.00771959 0.738247 0.00652577 1.00186C0.00533195 1.26548 0.108291 1.5189 0.293002 1.70699L4.293 5.70699C4.48042 5.8945 4.73465 5.99989 4.99977 5.99996C5.26489 6.00003 5.51918 5.89478 5.70669 5.70736L9.70706 1.70699C9.89262 1.51907 9.9963 1.26537 9.99547 1.00127C9.99463 0.737174 9.88935 0.484134 9.7026 0.297393C9.51585 0.110652 9.2628 0.00537737 8.99871 0.00455201C8.73461 0.00372665 8.48092 0.107418 8.293 0.292988Z",fill:"#222222"})});hs.propTypes={className:te.string};const zo=()=>e.jsxs("svg",{width:"33",height:"25",viewBox:"0 0 33 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("mask",{id:"mask0_38_1340",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"10",y:"4",width:"16",height:"17",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.5218 13.3889H23.68C23.5598 13.3909 23.4437 13.433 23.3501 13.5085C23.2565 13.5841 23.1909 13.6887 23.1636 13.8058C22.9276 14.6632 22.471 15.4439 21.8393 16.0699C21.2076 16.6958 20.4228 17.1453 19.5632 17.3735C18.7037 17.6016 17.7993 17.6005 16.9403 17.3702C16.0813 17.1399 15.2977 16.6885 14.6676 16.0609L14.36 15.7533L16.1173 13.9951C16.1507 13.9625 16.1771 13.9234 16.1951 13.8804C16.2132 13.8373 16.2224 13.7911 16.2222 13.7444C16.2224 13.6536 16.1877 13.5661 16.1254 13.5C16.0631 13.4339 15.9778 13.3941 15.8871 13.3889H11.1093C11.0509 13.3891 10.995 13.4124 10.9537 13.4537C10.9124 13.495 10.8891 13.5509 10.8889 13.6093V18.3871C10.8941 18.4778 10.9339 18.5631 11 18.6254C11.0661 18.6877 11.1536 18.7224 11.2444 18.7222C11.2908 18.7221 11.3367 18.7128 11.3794 18.6948C11.4222 18.6768 11.4609 18.6505 11.4933 18.6173L13.1013 17.0102L13.2596 17.1684C14.1485 18.0868 15.2663 18.7514 16.4978 19.0938C17.3947 19.3319 18.3306 19.3855 19.2488 19.2514C20.1671 19.1173 21.0485 18.7982 21.8398 18.3134C22.6311 17.8287 23.3158 17.1884 23.8525 16.4313C24.3891 15.6742 24.7665 14.8161 24.9618 13.9089C24.9728 13.8449 24.9697 13.7793 24.9526 13.7166C24.9356 13.654 24.905 13.5958 24.8631 13.5462C24.8211 13.4967 24.7688 13.4569 24.7099 13.4297C24.6509 13.4025 24.5867 13.3886 24.5218 13.3889Z",fill:"#222222"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.7555 6.27777C24.7092 6.27786 24.6633 6.28718 24.6206 6.30519C24.5778 6.3232 24.5391 6.34953 24.5067 6.38266L22.8969 7.98977L22.7387 7.83155C21.8502 6.91347 20.733 6.24887 19.5022 5.90622C18.6053 5.66808 17.6694 5.61446 16.7512 5.74859C15.8329 5.88272 14.9515 6.20182 14.1602 6.68656C13.3688 7.17131 12.6841 7.81161 12.1475 8.5687C11.6109 9.32578 11.2335 10.1839 11.0382 11.0911C11.0271 11.1555 11.0303 11.2215 11.0476 11.2845C11.0649 11.3474 11.0959 11.4058 11.1383 11.4555C11.1808 11.5051 11.2336 11.5448 11.2931 11.5717C11.3526 11.5986 11.4174 11.6121 11.4827 11.6111H12.32C12.4402 11.6091 12.5563 11.567 12.6499 11.4915C12.7435 11.4159 12.8091 11.3113 12.8364 11.1942C13.0724 10.3368 13.529 9.55613 14.1607 8.93014C14.7924 8.30416 15.5772 7.85468 16.4367 7.62653C17.2963 7.39837 18.2007 7.3995 19.0597 7.6298C19.9187 7.86011 20.7023 8.31154 21.3324 8.93911L21.64 9.24666L19.8827 11.0049C19.8493 11.0375 19.8228 11.0765 19.8048 11.1196C19.7868 11.1626 19.7776 11.2089 19.7778 11.2556C19.7776 11.3464 19.8123 11.4339 19.8746 11.5C19.9369 11.5661 20.0222 11.6059 20.1129 11.6111H24.8907C24.949 11.6106 25.0048 11.5873 25.046 11.546C25.0873 11.5048 25.1106 11.449 25.1111 11.3907V6.61288C25.1059 6.52217 25.0661 6.4369 25 6.37458C24.9339 6.31226 24.8464 6.27762 24.7555 6.27777Z",fill:"#222222"})]}),e.jsx("g",{mask:"url(#mask0_38_1340)",children:e.jsx("rect",{x:"10",y:"4.5",width:"16",height:"16",fill:"#8F8F8F"})})]});const f0=({value:t})=>e.jsxs(Vc,{className:"flex items-center text-160 font-base text-gray-900 search-checkbox justify-start p-100 hover:bg-gray-300",value:t,children:[e.jsx("div",{className:"w-[1.143rem] h-[1.143rem] border-2 border-solid border-gray-900 rounded flex items-center justify-center transition-all checkbox",children:e.jsx("svg",{className:"w-[1rem] h-[1rem] fill-none stroke-gray-50 stroke-[3px] transition-all ",viewBox:"0 0 18 18","aria-hidden":"true",children:e.jsx("polyline",{points:"1 9 7 14 15 4"})})}),e.jsx("div",{className:"ps-300",children:t})]}),m0=({placeholder:t="",value:s,onChange:a})=>e.jsxs(Bc,{className:"flex relative w-full",value:s,autoComplete:"off",children:[e.jsx("div",{className:"absolute inset-y-0 flex items-center pointer-events-none start-0 ps-300",children:e.jsx("img",{src:bi})}),e.jsx(rl,{className:"block w-full p-2 text-sm text-gray-900 border border-gray-300 bg-gray-50 ps-600 rounded-3xl",onChange:a,placeholder:t})]}),vi=({value:t,onChange:s,placeholder:a="Search",options:n,search:o,onSearchTextChange:r})=>e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(m0,{placeholder:a,onChange:r,value:o}),e.jsx(Kc,{className:"w-full overflow-y-auto relative h-[22rem] pt-100",onChange:s,value:t,children:n&&n.length>0&&n.map(l=>e.jsx(f0,{value:l},l))})]}),g0=()=>{const t=q(y=>y.visibleModal),s=q(y=>y.setVisibleModal),a=q(y=>y.allBlocks),n=q(y=>y.setVariations),[o,r]=h.useState(t==="blockSelect"),l=q(y=>y.blockSearch),i=q(y=>y.setBlockSearch),[c,d]=h.useState(a),u=q(y=>y.fetchVariations);h.useEffect(()=>{t!=="blockSelect"&&r(!1)},[t]),h.useEffect(()=>{o||u()},[o,u]);const p=()=>{r(!0),s("blockSelect")},f=()=>{r(!1),s("")},g=q(y=>y.blocks),C=q(y=>y.setBlocks),b=h.useCallback(y=>{C(y),n([])},[C,n]),x=h.useCallback(y=>{const v=y.target.value;i(v)},[i]);h.useEffect(()=>{if(l&&l.length>0){const y=a.filter(v=>v.includes(l));d(y)}else d(a)},[l,d,a]);const j=()=>{C([]),n([]),i("")};return e.jsxs("div",{className:"relative",children:[e.jsxs(Me,{onPress:p,className:"inline-flex w-[7.5rem] h-[2.5rem] items-center justify-between border-2 border-gray-300 rounded-xl px-75 outline-none [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2",children:["Blocks",e.jsx("span",{className:"bg-gray-300 w-[1.5rem] h-[1.5rem] inline-flex items-center justify-center rounded-md",children:e.jsx(hs,{className:"h-150 w-150"})})]}),e.jsx(Ho,{isOpen:o,onClose:f,showCloseButton:!1,showBackdrop:!1,backdropClickable:!1,customClassName:"top-[2.4rem] w-[14rem] border-10 border-gray-200 z-[9999] p-200 mt-100",content:e.jsx(vi,{options:c,onChange:b,value:g,placeholder:"Search",search:l,onSearchTextChange:x}),footer:e.jsx("div",{className:"flex flex-row items-center justify-end",children:e.jsxs(Me,{className:"inline-flex items-center gap-x-1 py-40 sm:min-w-[72px] min-h-[32px] px-150 rounded border cursor-pointer",children:[e.jsx(zo,{}),e.jsx("p",{className:"font-bold font-base text-200",onClick:j,children:"Reset"})]})})})]})},x0=()=>{const{enqueueSnackbar:t}=ye.useSnackbar(),s=q(n=>n.searchResults),a=async()=>{if(s&&s.length>0){const n=s.map(r=>r.path).join(`
`);await d0(n)?t(`${s.length} Page Records copied`,{variant:"success"}):t("Could copy the records",{variant:"error"})}else t("There are no records to copy",{variant:"info"})};return e.jsxs(Me,{className:"inline-flex items-center justify-between gap-1 px-75  [&[data-disabled]]:opacity-50",isDisabled:!s||s.length<1,onPress:()=>{a(),Oe({name:Be.COPY_TO_CLIPBOARD})},children:[e.jsx(Hc,{}),e.jsx(ln,{className:"font-bold underline font-base text-200",children:"Copy"})]})},b0=()=>{var c;const{enqueueSnackbar:t}=ye.useSnackbar(),s=q(d=>d.searchResults),a={},{value:n=""}=((c=ce.getState())==null?void 0:c.defaultTenant)??{},o=ce(d=>d.token),r=q(d=>d.blocks),l=q(d=>d.variations);a.query=q(d=>d.query),a.type=q(d=>d.type),a.path=q(d=>d.path),a.order=q(d=>d.order),a.sortBy=q(d=>d.sortBy),r.length&&(a.blocks=r.join(",")),l.length&&(a.classes=l.join(","));const i=async()=>{try{if(!o||!n)return;if(!await Wd(n,o,a)){t("Couldn't export the results",{variant:"error"});return}t("Records have been successfully exported. Please check your email for download",{variant:"success"})}catch{return}};return e.jsxs(Me,{className:"inline-flex items-center justify-between gap-1 px-75  [&[data-disabled]]:opacity-50",isDisabled:!s||s.length<1,onPress:()=>{i(),Oe({name:Be.SEARCH_EXPORT_TO_EXCEL})},children:[e.jsx(So,{}),e.jsx(ln,{className:"font-bold underline font-base text-200",children:"Export"})]})},C0=()=>e.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.9164 3.93333L13.2698 3.42978C13.1769 3.35785 13.0592 3.32565 12.9426 3.34023C12.826 3.3548 12.7199 3.41496 12.6476 3.50755L6.58756 11.2924L3.63333 8.35378C3.54999 8.27046 3.43696 8.22365 3.31911 8.22365C3.20126 8.22365 3.08824 8.27046 3.00489 8.35378L2.416 8.94444C2.33268 9.02779 2.28587 9.14082 2.28587 9.25867C2.28587 9.37652 2.33268 9.48954 2.416 9.57289L6.38311 13.5284C6.42768 13.5733 6.48131 13.6081 6.5404 13.6305C6.5995 13.653 6.6627 13.6626 6.7258 13.6587C6.7889 13.6548 6.85044 13.6374 6.90631 13.6079C6.96217 13.5783 7.01109 13.5371 7.04978 13.4871L13.9942 4.55689C14.0666 4.46387 14.099 4.34594 14.0844 4.22901C14.0698 4.11208 14.0094 4.00572 13.9164 3.93333Z",fill:"#0F62FE"})}),j0=({options:t,onSelectionChange:s,label:a="",value:n=""})=>{const o=l=>{s(l)},r=t.find(l=>l.value===n);return e.jsxs(zc,{"aria-label":"Type select",className:"border-2 border-gray-300  w-auto h-[2.5rem] rounded-xl px-75 outline-none [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2",onSelectionChange:o,selectedKey:n,children:[a&&e.jsx(rs,{children:a}),e.jsxs(Me,{className:"inline-flex w-[7.5rem] h-full items-center justify-between outline-none ",children:[e.jsx(qc,{children:e.jsx("span",{children:r.label})}),e.jsx("span",{className:"bg-gray-300 w-[1.5rem] h-[1.5rem] inline-flex items-center justify-center rounded-md",children:e.jsx(hs,{className:"h-150 w-150"})})]}),e.jsx(ca,{children:e.jsx(ll,{className:"bg-gray-50 w-[8rem] shadow-xl rounded-lg type-list",children:t.map(l=>e.jsx(il,{className:"p-200 hover:bg-gray-300 focus-visible:border-transparent [&[data-focus-visible]]:outline-none [&[data-focused]]:bg-gray-300",id:l.value,value:l.value,children:e.jsxs("div",{className:"flex flex-row items-center justify-between ",children:[e.jsx("span",{children:l.label}),l.value===n&&e.jsx(C0,{})]})},l.value))})})]})};function v0({comboClass:t,labelRequired:s=!0,label:a,renderEmptyState:n=()=>{},children:o,placeholderText:r="",...l}){return e.jsxs(Gc,{className:t,...l,children:[s&&e.jsx(rs,{className:"react-aria-comboBox-label",children:a}),e.jsxs("div",{className:"react-aria-control-container",children:[e.jsx(rl,{className:"react-aria-input",placeholder:r}),e.jsx(Me,{className:"react-aria-button",children:e.jsx(hs,{className:"h-150 w-150 fill-gray-50"})})]}),e.jsx(ca,{className:"dropdown-popup max-h-60 w-[--trigger-width] overflow-auto rounded-md bg-white text-base shadow-lg ring-1 ring-black/5 entering:animate-in entering:fade-in exiting:animate-out exiting:fade-out z-50",children:e.jsx(ll,{renderEmptyState:n,className:"p-1 outline-none max-h-60 hover:border-zinc-800",lastFocus:{focus:()=>{}},children:o})})]})}function y0(t){return e.jsx(il,{...t,className:({isFocused:s,isDisabled:a})=>`flex items-center gap-2 py-2 pl-2 pr-4 outline-none rounded cursor-pointer my-item ${a?"text-gray-500 cursor-text":""} ${s?"focused":""}`})}const S0=()=>{const t=q(g=>g.visibleModal),s=q(g=>g.setVisibleModal),[a,n]=h.useState(t==="pathSelect"),o=ce(g=>g.defaultTenant),r=ce(g=>g.getFolderPath),l=ce(g=>g.folderPath),i=q(g=>g.setPath),c=q(g=>g.path),d=ce(g=>g.token),u=h.useCallback(io(g=>{r(o,d,g)},500),[o,d]);h.useEffect(()=>{t!=="pathSelect"&&n(!1)},[t]);const p=()=>{n(!0),s("pathSelect")},f=()=>{n(!1),s("")};return e.jsxs("div",{className:"relative",children:[e.jsxs(Me,{onPress:p,className:"inline-flex w-[7.5rem] h-[2.5rem] items-center justify-between border-2 border-gray-300 rounded-xl px-75 outline-none [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2",children:["Path",e.jsx("span",{className:"bg-gray-300 w-[1.5rem] h-[1.5rem] inline-flex items-center justify-center rounded-md",children:e.jsx(hs,{className:"h-150 w-150"})})]}),e.jsx(Ho,{isOpen:a,onClose:f,content:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm font-semibold text-neutral-600",children:[o.pathPrefix,"/"]}),e.jsx(v0,{comboClass:"create-page-react-aria-comboBox flex-1",labelRequired:!1,allowsCustomValue:!0,inputValue:c,onInputChange:g=>{i(g),u(g)},allowsEmptyCollection:!0,children:l.length>0&&l.map((g,C)=>e.jsx(y0,{children:g},C))})]}),showCloseButton:!1,showBackdrop:!1,backdropClickable:!1,customClassName:"top-[2.4rem] w-[23.125rem] border-10 border-gray-200 z-[9999] p-300 mt-100"})]})},E0=()=>e.jsxs("svg",{width:"21",height:"16",viewBox:"0 0 21 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M18.4605 10.3183C18.1669 10.1074 17.6913 10.1074 17.3977 10.3183L16.1753 11.1965V3.50008C16.1753 3.20196 15.8386 2.96008 15.4236 2.96008C15.0087 2.96008 14.672 3.20196 14.672 3.50008V11.1965L13.4496 10.3183C13.156 10.1073 12.6803 10.1073 12.3867 10.3183C12.0931 10.5292 12.0931 10.8709 12.3867 11.0819L14.8922 12.8819C14.9614 12.9316 15.0444 12.9708 15.1361 12.9982C15.2279 13.0257 15.3255 13.0401 15.4236 13.0401C15.5217 13.0401 15.6194 13.0257 15.7111 12.9982C15.8029 12.9708 15.8858 12.9316 15.9551 12.8819L18.4605 11.0819C18.7541 10.8709 18.7541 10.5292 18.4605 10.3183Z",fill:"#292929"}),e.jsx("path",{d:"M7.40602 11.24H2.89617C2.48121 11.24 2.14453 10.9982 2.14453 10.7C2.14453 10.4019 2.48121 10.16 2.89617 10.16H7.40602C7.82099 10.16 8.15766 10.4019 8.15766 10.7C8.15766 10.9982 7.82099 11.24 7.40602 11.24Z",fill:"#292929"}),e.jsx("path",{d:"M9.4104 8.36003H2.89617C2.48121 8.36003 2.14453 8.11815 2.14453 7.82003C2.14453 7.52191 2.48121 7.28003 2.89617 7.28003H9.4104C9.82536 7.28003 10.162 7.52191 10.162 7.82003C10.162 8.11815 9.82536 8.36003 9.4104 8.36003Z",fill:"#292929"}),e.jsx("path",{d:"M11.4148 5.48002H2.89617C2.48121 5.48002 2.14453 5.23815 2.14453 4.94002C2.14453 4.6419 2.48121 4.40002 2.89617 4.40002H11.4148C11.8297 4.40002 12.1664 4.6419 12.1664 4.94002C12.1664 5.23815 11.8297 5.48002 11.4148 5.48002Z",fill:"#292929"})]});const k0=()=>{const t=q(d=>d.setSortBy),s=q(d=>d.toggleOrder),a=q(d=>d.searchResults),n=q(d=>d.order),o=q(d=>d.fetchSearchResultsAdvanced),r=q(d=>d.resetPagination),l=st("transition-transform duration-200 ease-linear delay-0 outline-none [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2  [&[data-disabled]]:opacity-50",{"rotate-0":n==="desc","rotate-180":n==="asc"}),i=h.useCallback(d=>{t(d),r(),o(),Oe({name:d})},[o,t,r]),c=h.useCallback(()=>{s(),r(),o()},[o,s,r]);return e.jsxs("div",{className:"flex flex-row",children:[e.jsx(Me,{isDisabled:!a||a.length<1,className:l,onPress:()=>{c(),Oe({name:Be.SORT_ORDER})},children:e.jsx(E0,{})}),e.jsxs(Jc,{children:[e.jsxs(Me,{className:"inline-flex w-[4.5rem]  items-center justify-between px-75  [&[data-disabled]]:opacity-50",isDisabled:!a||a.length<1,children:[e.jsx("p",{className:"font-bold underline font-base",children:"SortBy"}),e.jsx("div",{className:"w-[1.5rem] h-full inline-flex flex-row items-end justify-end pb-40",children:e.jsx(hs,{className:"h-150 w-150"})})]}),e.jsx(ca,{children:e.jsxs(Wc,{className:"box-border overflow-auto p-25 min-w-[150px] outline-none bg-gray-50 shadow-xl rounded-lg border-10 border-gray-200 search-sortby",children:[e.jsx(_n,{onAction:()=>i("last-modified"),children:e.jsx("p",{className:"font-bold font-base text-100",children:"Date Modified"})}),e.jsx(_n,{onAction:()=>i("path"),children:e.jsx("p",{className:"font-bold font-base text-100",children:"Path"})}),e.jsx(_n,{onAction:()=>i("score"),children:e.jsx("p",{className:"font-bold font-base text-100",children:"Relevance"})})]})})]})]})},R0=()=>{const t=q(x=>x.visibleModal),s=q(x=>x.setVisibleModal),a=q(x=>x.allVariations),[n,o]=h.useState(t==="variationSelect"),[r,l]=h.useState(a),i=q(x=>x.variationSearch),c=q(x=>x.setVariationSearch);h.useEffect(()=>()=>{f([]),c("")},[]);const d=()=>{o(!0),s("variationSelect")};h.useEffect(()=>{t!=="variationSelect"&&o(!1)},[t]);const u=()=>{o(!1),s("")},p=q(x=>x.variations),f=q(x=>x.setVariations),g=h.useCallback(x=>{f(x)},[f]),C=h.useCallback(x=>{const j=x.target.value;c(j)},[c]);h.useEffect(()=>{if(i&&i.length>0){const x=a.filter(j=>j.includes(i));l(x)}else l(a)},[i,l,a]);const b=()=>{f([]),c("")};return e.jsxs("div",{className:"relative",children:[e.jsxs(Me,{className:"inline-flex w-[7.5rem] h-[2.5rem] items-center justify-between border-2 border-gray-300 rounded-xl px-75",onPress:d,children:["Variation",e.jsx("span",{className:"bg-gray-300 w-[1.5rem] h-[1.5rem] inline-flex items-center justify-center rounded-md",children:e.jsx(hs,{className:"h-150 w-150"})})]}),e.jsx(Ho,{isOpen:n,onClose:u,showCloseButton:!1,showBackdrop:!1,backdropClickable:!1,customClassName:"top-[2.4rem] w-[14rem] border-10 border-gray-200 z-[9999] p-200 mt-100",content:e.jsx(vi,{options:r,onChange:g,value:p,placeholder:"Search",search:i,onSearchTextChange:C}),footer:e.jsx("div",{className:"flex flex-row items-center justify-end",children:e.jsxs(Me,{className:"inline-flex items-center gap-x-1 py-40 sm:min-w-[72px] min-h-[32px] px-150 rounded border cursor-pointer",children:[e.jsx(zo,{}),e.jsx("p",{className:"font-base font-bold text-200",onClick:b,children:"Reset"})]})})})]})},L0=()=>{const t=q(j=>j.fetchSearchResultsAdvanced),s=q(j=>j.resetFilters),a=q(j=>j.allVariations),n=q(j=>j.setType),o=q(j=>j.type),r=q(j=>j.resetPagination),l=q(j=>j.resetSearchResults),i=q(j=>j.query),c=q(j=>j.path),d=q(j=>j.blocks),u=q(j=>j.variations),[p,f]=ee.useSearchParams(),g=h.useCallback(j=>{n(j)},[n]),C=q(j=>j.setVisibleModal),b=()=>{C(""),r(),t(),i&&i.length>0?f(xi({query:i,type:o,path:c,blocks:d,variations:u})):f()},x=()=>{C(""),s(),r(),l(),f()};return e.jsxs("div",{className:"flex flex-row items-center w-full gap-6 pl-600",children:[e.jsxs("div",{className:"flex flex-row items-center w-[70%] gap-6 flex-wrap",children:[e.jsx(j0,{options:Ad,onSelectionChange:g,value:o}),e.jsx(S0,{}),e.jsx(g0,{}),a&&a.length>0&&e.jsx(R0,{}),e.jsx(Me,{className:"inline-flex items-center justify-center px-3 py-1 text-sm font-semibold bg-gray-800 border-2 border-gray-800 cursor-pointer rounded-2xl hover:bg-gray-900 outline-none [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2",onPress:()=>{b(),Oe({name:Be.SEARCH_APPLY,searchQuery:i,searchType:o,searchPath:c,searchBlocks:d,searchVariations:u})},children:e.jsx(rs,{className:"block font-bold cursor-pointer text-gray-50 font-base text-200",children:"Apply"})}),e.jsx(Me,{className:"inline-flex items-center justify-center px-3 py-1 text-sm font-semibold bg-gray-200 border-2 border-gray-200 cursor-pointer rounded-3xl hover:bg-gray-300 outline-0 [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2",onPress:()=>{x(),Oe({name:Be.SEARCH_RESET})},children:e.jsx(rs,{className:"block font-bold text-gray-800 cursor-pointer font-base text-200",children:"Reset"})})]}),e.jsxs("div",{className:"flex flex-row items-center justify-end w-[30%] gap-6 h-full pr-500",children:[e.jsx(b0,{}),e.jsx(x0,{}),e.jsx(k0,{})]})]})},N0=()=>{const t=q(d=>d.fetchSearchResultsAdvanced),s=q(d=>d.size),a=q(d=>d.currentPage),n=q(d=>d.totalPages),o=q(d=>d.totalItems),r=q(d=>d.setCurrentPage),l=q(d=>d.setSize),i=h.useCallback(d=>{r(d),t(),Oe({name:`${Be.PAGE_NO}-${d}`})},[]),c=h.useCallback(d=>{l(d),r(1),t(),Oe({name:`${Be.PAGE_SIZE}-${d}`})},[]);return e.jsx("div",{className:"flex flex-row items-center w-full search-pagination",children:e.jsx(fe,{currentPage:a,pageSize:s,totalPages:n,totalItems:o,onPageChange:i,onPageSizeChange:c})})},P0=()=>{const[t,s]=ee.useSearchParams(),a=ce(S=>S.defaultTenant),n=q(S=>S.setSize),o=q(S=>S.fetchSearchResultsAdvanced),r=q(S=>S.resetSearchResults),l=q(S=>S.fetchBlocks),i=q(S=>S.query),c=q(S=>S.setQuery),d=q(S=>S.setType),u=q(S=>S.setPath),p=q(S=>S.setBlocks),f=q(S=>S.setVariations),g=q(S=>S.fetchVariations),C=q(S=>S.type),b=q(S=>S.path),x=q(S=>S.blocks),j=q(S=>S.variations),y=q(S=>S.more),{enqueueSnackbar:v}=ye.useSnackbar();h.useEffect(()=>{n(100)},[n]),h.useEffect(()=>{y&&v("More than 10,000 records retrieved; only the first 10,000 are displayed",{variant:"info"})},[y,v]),h.useEffect(()=>{var P,A;const S=t.get(lt.QUERY)??"";d(t.get(lt.TYPE)??"all"),c(t.get(lt.QUERY)??""),u(t.get(lt.PATH)??""),p(((P=t.get(lt.BLOCK))==null?void 0:P.split(","))??[]),f(((A=t.get(lt.VARIATIONS))==null?void 0:A.split(","))??[]),r(),l(),g(),S&&S.length>0&&o()},[a]);const L=h.useCallback(()=>{i&&i.length>0&&s(xi({query:i,type:C,path:b,blocks:x,variations:j}))},[x,b,i,s,C,j]);return e.jsxs("div",{className:"h-full bg-white",children:[e.jsx(Fl,{}),e.jsxs("div",{className:"border py-300",children:[e.jsx("div",{className:"flex mb-4",children:e.jsxs("div",{className:"flex items-center w-full pl-600",children:[e.jsx("div",{className:"flex items-center w-2/5",children:e.jsx(Ci,{hasDropdown:!1,onEnterPress:()=>{L(),Oe({name:Be.SEARCH_INPUT,searchQuery:i,searchType:C,searchPath:b,searchBlocks:x,searchVariations:j})}})}),e.jsx("div",{className:"flex items-center pl-100",children:e.jsx("a",{href:"https://wiki.corp.adobe.com/display/workbench/Author%27s+Guide+for+Search",target:"_blank",rel:"noreferrer",onClick:()=>{Oe({name:Be.SEARCH_HELP})},children:e.jsx(u0,{})})}),e.jsx("div",{className:"flex-grow"}),e.jsxs(ee.Link,{className:"flex items-center justify-end me-500",to:"/search/advanced",onClick:()=>{Oe({name:Be.SEARCH_ADVANCED})},children:[e.jsx("span",{className:"font-bold underline font-base text-200 me-1",children:"Advanced Search"}),e.jsx(So,{width:16,height:16})]})]})}),e.jsx("div",{className:"flex w-full mb-4",children:e.jsx(L0,{})}),e.jsx("div",{className:"flex h-[70vh]",children:e.jsx(h0,{})}),e.jsx("div",{className:"sticky bottom-0 flex",children:e.jsx(N0,{})})]})]})};const sa=({className:t="",label:s,labelOff:a,checked:n,disabled:o,isEmphasized:r=!1,onChange:l})=>a?e.jsx(I0,{checked:n,labelOn:s,labelOff:a,disabled:o,isEmphasized:r,onChange:l}):e.jsx(bo,{className:`switch-root ${r&&"switch-emphasized"} ${t}`,control:e.jsx(cl,{checked:n,disabled:o,disableRipple:!0,onChange:l}),label:s}),I0=({className:t,labelOff:s,labelOn:a,checked:n,disabled:o,isEmphasized:r,onChange:l})=>{const i=h.useRef(null);return e.jsxs("div",{className:`switch-root switch-dual ${r&&"switch-emphasized"} ${t}`,onClick:c=>l({target:{checked:!n}}),children:[e.jsx("span",{className:`${n&&"opacity-40"}`,children:s}),e.jsx(cl,{ref:i,checked:n,disabled:o,disableRipple:!0,onChange:l}),e.jsx("span",{className:`${!n&&"opacity-40"}`,children:a})]})},T0=[{label:"Or"},{label:"And"}],_0=[{id:"all",label:"All"},{id:"block",label:"Block"},{id:"metadata",label:"Metadata"},{id:"paragraph",label:"Paragraph"},{id:"caas",label:"CaaS"},{id:"faas",label:"FaaS"}],A0=[{value:"like",label:"Like"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"exists",label:"Exists"},{value:"not_exists",label:"Not Exists"}],D0={type:"",name:"",isExact:!1,isAnd:!1,conditions:[],hasError:!1,hasWarning:!1,typeError:"",nameError:"",conditionsError:""},O0={block:{operation:"like",searchVal:"",row:"",col:"",searchValError:"",rowError:"",colError:"",searchValWarning:""},metadata:{operation:"like",key:"",val:"",keyError:"",valError:"",valWarning:""},paragraph:{val:"",valError:"",valWarning:""},caas:{operation:"like",searchValue:"",searchValError:"",key:"",keyError:"",val:"",valError:""},faas:{operation:"like",searchValue:"",searchValError:"",key:"",keyError:"",val:"",valError:""},all:{isLink:!1,val:"",valError:"",valWarning:""}},U0={block:{type:"Block",blockName:"",isExact:!1,blockNameError:""},metadata:{type:"Metadata",blockName:"",isExact:!1,keys:"",blockNameError:"",keysError:""}},w0={block:{type:"Block",blockName:"",row:"",col:"",blockNameError:"",rowError:"",colError:""},metadata:{type:"Metadata",blockName:"",keys:"",blockNameError:"",keysError:""}},bt={AND_OR_TABS:T0,BLOCK_TYPES:_0,OPERATION_TYPES:A0,EMPTY_BLOCK:D0,EMPTY_CONDITION:O0,EMPTY_EXCLUSION:U0,EMPTY_RETURN:w0},fn=3,Or={empty:"Required"},wt=t=>t?t.length<fn?`Minimun ${fn} charaters`:"":"Field is required",M0=(t,s)=>s==="block"||s==="metadata"?wt(t):"",zn=t=>t?yi(t):"Field is required",yi=t=>/^[0-9a-zA-Z(){}[\],.<>/?=+\-_*&#@!`~]$/.test(t)?"Invalid value":"",Ur=(t,s)=>s.length>0&&t.length===0?"Required":"",Si=t=>t.length>0&&t.length<fn?`Minimun ${fn} charaters`:"",$0=(t,s,a)=>{let n=!1;const o=t.map(r=>{if(s==="block"){const l=be(r.searchVal,[zn]);let i="",c="";return a&&(i=be(r.row,[d=>Ur(d,r.col)]),c=be(r.col,[d=>Ur(d,r.row)])),n||(n=l.length>0||i.length>0||c.length>0),{...r,searchValError:l,rowError:i,colError:c}}else if(s==="metadata"){let l=be(r.key,[wt]),i=be(r.val,[yi]);return r.operation!=="exists"&&r.operation!=="not_exists"&&(!r.key&&!i&&(i=be(r.val,[it.empty])),r.val&&l&&(l="")),n||(n=l.length>0||i.length>0),{...r,keyError:l,valError:i}}else if(s==="caas"||s==="faas"){let l="",i="",c="";return r.operation!=="exists"&&(!!r.searchValue||!!r.key||!!r.val?(l=(r.searchValue,""),i=(r.key,""),c=(r.val,"")):(l=be(r.searchValue,[zn]),i=be(r.key,[wt]),c=be(r.val,[wt]))),n||(n=l.length>0||i.length>0||c.length>0),{...r,searchValError:l,keyError:i,valError:c}}else{const l=be(r.val,[zn]);return n||(n=l.length>0),{...r,valError:l}}});return{hasErrors:n,conditions:o}},F0=t=>({...t,block:t.block.map(s=>({...s,blockNameError:be(s.blockName,[wt])})),metadata:t.metadata.map(s=>({...s,blockNameError:be(s.blockName,[wt]),keysError:be(s.keys,[Si])}))}),V0=t=>({block:t.block.map(s=>({...s,blockNameError:be(s.blockName,[wt]),rowError:be(s.row,[it.empty],Or),colError:be(s.col,[it.empty],Or)})),metadata:t.metadata.map(s=>({...s,blockNameError:be(s.blockName,[wt]),keysError:be(s.keys,[Si])}))}),B0=t=>{const{conditions:s,name:a,type:n,isExact:o,isLink:r}=t;switch(n){case"all":return s.map(l=>({operation:"LIKE",searchValue:l.val,isLink:r}));case"paragraph":return s.map(l=>({searchValue:l.val}));case"block":return s.map(l=>({operation:l.operation.toUpperCase(),searchValue:l.searchVal,...o&&l.row&&{row:parseInt(l.row)},...o&&l.col&&{col:parseInt(l.col)}}));case"metadata":return s.map(l=>({operation:l.operation.toUpperCase(),key:l.key,searchValue:l.val}));case"caas":case"faas":return s.map(l=>({operation:l.operation.toUpperCase(),key:l.key,value:l.val,searchValue:l.searchValue}));default:return console.error(`Invalid type for block ${a}: ${n}`),[]}},K0=t=>{const{blocks:s,exclusions:a,returns:n}=t,o=s.map(u=>{const{hasErrors:p,conditions:f}=$0(u.conditions,u.type,u.isExact),g=u.type?"":"Field is required",C=be(u.name,[j=>M0(j,u.type)]),b=u.type!=="block"&&f.length===0?`Conditions are required for ${u.type} type block`:"",x=p||g.length>0||C.length>0||b.length>0;return{...u,conditions:f,hasError:x,typeError:g,nameError:C,conditionsError:b}}),r=F0(a),l=V0(n),i=o.some(u=>u.hasError)||r.block.some(u=>u.blockNameError.length>0)||r.metadata.some(u=>u.blockNameError.length>0)||l.block.some(u=>u.blockNameError.length>0||u.rowError.length>0||u.colError.length>0)||l.metadata.some(u=>u.blockNameError.length>0),c=["searchVal","val"];for(let u of o)for(let p of u.conditions)c.forEach(f=>{var g;((g=p[f])==null?void 0:g.length)===1&&(p[`${f}Warning`]=i?"":"Only one character entered",u.hasWarning=!i)});const d=i?!1:o.some(u=>u.hasWarning);return{hasErrors:i,hasWarnings:d,validatedBlockParams:{...t,blocks:o,exclusions:r,returns:l}}},H0=(t,s,a,n,o)=>{const r=s==="selective",l=[it.empty,u=>it.franklinPreviewDomain(u,n,o)],i=[u=>u.length>0?"":"Locales are mandatory"],c=t.map(u=>({...u,searchType:s,crawlType:a,...r&&{urlsError:be(u.urls,l)},...!r&&{localesError:be(u.locales,i)},blockParamsError:u.blockParams?"":"Configuring Blocks is mandatory"}));return{hasErrors:c.some(u=>u.urlsError.length>0||u.localesError.length>0||u.blockParamsError.length>0),validatedRows:c}},z0=(t,s)=>{const a=s.siteData.instance.domain.franklinPreview,n=s.siteData.defaultLocaleCode,o=s.siteData.configs.PREVIEW_URL_DOMAINS,r={langmasterDirectory:s.siteData.instance.langmasterDirectory,locales:s.siteData.authorUrls,domain:a,previewByLiveDomains:o,defaultLocale:n};return t.map(l=>{const i=l.urls.split(/,|\n/).filter(x=>x).map(x=>F.trimUrl(x,n)),c=l.locales.map(({name:x})=>x),d=fl.util.generateUrls({urls:i,defaultLocale:n,instance:r,locales:c}).map(x=>x.indexOf(".md")>-1?x:`${x}.md`),{blocks:u,isAnd:p,exclusions:f,returns:g}=l.blockParams,C=l.searchType==="selective",b=(n==null?void 0:n.authorUrl)||(n==null?void 0:n.countryCode)||"us";return{AND:p,searchType:l.searchType,...C?{urls:d,includeXF:l.includeFragments,includeChild:l.includeChild,crawlType:l.crawlType}:{urls:l.locales.map(x=>`${a}/${x.name}`.replace(`/${b}`,""))},block:u.map(x=>({deepCrawl:!1,...x.type!=="all"&&{blockType:x.type},blockName:x.name,exact:x.isExact,AND:x.isAnd,condition:B0(x)})),exclude:[...f.block.map(x=>({blockType:"block",blockName:x.blockName,exact:x.isExact})),...f.metadata.map(x=>({blockType:"metadata",blockName:x.blockName,exact:x.isExact,keys:x.keys.split(",").map(j=>j.trim()).filter(j=>j)})),...f.paragraph?[{blockType:"paragraph"}]:[]],return:[...g.block.map(x=>({blockType:"block",blockName:x.blockName,...x.row&&{row:parseInt(x.row)},...x.col&&{col:parseInt(x.col)}})),...g.metadata.map(x=>({blockType:"metadata",blockName:x.blockName,keys:x.keys.split(",").map(j=>j.trim()).filter(j=>j)}))]}})},ro={validateBlockParams:K0,validateRows:H0,generateProcessUrls:z0};const q0=({blocks:t,blockIndex:s,onTabSelected:a})=>{const n=h.useRef(null),o=h.useRef(!1),r=l=>o.current&&(n.current.scrollLeft-=l.movementX);return h.useEffect(()=>{if(!n.current)return;const l=()=>o.current=!1,i=new ResizeObserver(c=>{const d=n.current.clientWidth<n.current.scrollWidth;console.debug("Tab bar overflow:",d)});return document.addEventListener("pointerup",l),i.observe(n.current),()=>{document.removeEventListener("pointerup",l),i.disconnect()}},[]),e.jsxs("div",{className:"blocks-tab-bar-container",children:[e.jsx("div",{className:"blocks-tab-bar",ref:n,onPointerDown:l=>o.current=!0,onPointerMove:r,children:Array.from(t).map((l,i)=>e.jsxs("div",{className:`${i===s&&"selected"} ${l.hasError&&"error"} ${l.hasWarning&&"warning"}`,onClick:c=>a(i),children:[e.jsxs("span",{children:["Block ",i+1]}),(l.hasError||l.hasWarning)&&e.jsx(nl,{className:"tab-error-icon"})]},`block-tab-${i}`))}),e.jsx("div",{className:"tab-bar-hr",children:e.jsx("div",{})})]})},Tt=({disabled:t,confirmMessage:s="Delete this row?",onDelete:a})=>e.jsx("td",{className:"size-xs",children:e.jsx("div",{className:"actions-cell",children:e.jsx(Us,{disabled:t,tooltip:"Delete Condition",confirmMessage:s,onConfirm:a,children:e.jsx(at,{})})})}),G0={columns:[{label:"Type",size:"xs"},{label:"Block Name",align:"left"},{label:"Exact"},{label:"Actions"}]},J0=({rows:t,onChange:s,onDelete:a})=>e.jsx(ne,{className:"blocks-table",header:G0,children:e.jsx("tbody",{children:t.map((n,o)=>e.jsxs("tr",{children:[e.jsx(m,{val:n.type}),e.jsx(Re,{val:n.blockName,error:n.blockNameError,name:"block-name",placeholder:"Enter value",onChange:({value:r})=>s(o,{blockName:r,blockNameError:""})}),e.jsx(Ao,{checked:n.isExact,onChange:r=>s(o,{isExact:r})}),e.jsx(Tt,{onDelete:r=>a(o)})]},`block-excl-tr-${o}`))})}),W0={columns:[{label:"Type",size:"xs"},{label:"Block Name",align:"left"},{label:"Exact"},{label:"Keys",align:"left"},{label:"Actions"}]},Y0=({rows:t,onChange:s,onDelete:a})=>e.jsx(ne,{className:"blocks-table",header:W0,children:e.jsx("tbody",{children:t.map((n,o)=>e.jsxs("tr",{children:[e.jsx(m,{val:n.type}),e.jsx(Re,{val:n.blockName,error:n.blockNameError,name:"block-name",placeholder:"Enter value",onChange:({value:r})=>s(o,{blockName:r,blockNameError:""})}),e.jsx(Ao,{checked:n.isExact,onChange:r=>s(o,{isExact:r})}),e.jsx(Re,{val:n.keys,error:n.keysError,name:"keys",placeholder:"Enter comma separated values",onChange:({value:r})=>s(o,{keys:r,keysError:""})}),e.jsx(Tt,{onDelete:r=>a(o)})]},`block-excl-tr-${o}`))})});const lo=({title:t,children:s})=>e.jsx("div",{className:"blocks-form-section-title",children:e.jsx("div",{children:s||t})}),Z0={columns:[{label:"Operation",size:"s",align:"left"},{label:"Search Value",size:"m",align:"left"},{label:"Actions"}]},X0={columns:[{label:"Operation",size:"s",align:"left"},{label:"Search Value",size:"m",align:"left"},{label:"Row",size:"xs"},{label:"Col",size:"xs"},{label:"Actions"}]},Q0=({rows:t,isExact:s,onChange:a,onDelete:n})=>e.jsx(ne,{className:"blocks-table",header:s?X0:Z0,children:e.jsx("tbody",{children:t.map((o,r)=>e.jsxs("tr",{children:[e.jsx(ua,{val:o.operation,options:bt.OPERATION_TYPES.slice(0,2),onChange:l=>a(r,{operation:l})}),e.jsx(Re,{val:o.searchVal,error:o.searchValError,warning:o.searchValWarning,name:"search-val",placeholder:"Enter value",onChange:({value:l})=>a(r,{searchVal:l,searchValError:"",searchValWarning:""})}),s&&e.jsxs(h.Fragment,{children:[e.jsx(Re,{val:o.row,error:o.rowError,name:"num",placeholder:"Enter num",pattern:/^([0-9]+)?$/,onChange:({value:l})=>a(r,{row:l,rowError:""})}),e.jsx(Re,{val:o.col,error:o.colError,name:"num",placeholder:"Enter num",pattern:/^([0-9]+)?$/,onChange:({value:l})=>a(r,{col:l,colError:""})})]}),e.jsx(Tt,{confirmMessage:"Delete this condition?",onDelete:l=>n(r)})]},`block-type-table-row-${r}`))})}),eg={columns:[{label:"Operation",size:"s",align:"left"},{label:"Search Url",size:"m",align:"left"},{label:"Key",size:"m",align:"left"},{label:"Value",size:"m",align:"left"},{label:"Actions"}]},tg=({rows:t,onChange:s,onDelete:a})=>{const n=bt.OPERATION_TYPES.filter(({value:l})=>["like","equals","exists"].includes(l)),o=(l,i)=>{const c={...t[l],...i};c.operation!=="exists"&&(c.searchValue||c.key||c.val)&&(c.searchValError="",c.keyError="",c.valError=""),s(l,c)},r=(l,i)=>{o(i,{operation:l,searchValue:"",key:"",val:"",searchValError:"",keyError:"",valError:""})};return e.jsx(ne,{className:"blocks-table",header:eg,children:e.jsx("tbody",{children:t.map((l,i)=>e.jsxs("tr",{children:[e.jsx(ua,{val:l.operation,options:n,onChange:c=>r(c,i)}),e.jsx(Re,{val:l.searchValue,error:l.searchValError,disabled:l.operation==="exists",name:"search-url",placeholder:"Enter Search Url",onChange:({value:c})=>o(i,{searchValue:c})}),e.jsx(Re,{val:l.key,error:l.keyError,name:"key",placeholder:"Enter key",onChange:({value:c})=>o(i,{key:c})}),e.jsx(Re,{val:l.val,error:l.valError,disabled:l.operation==="exists",name:"val",placeholder:"Enter value",onChange:({value:c})=>o(i,{val:c})}),e.jsx(Tt,{confirmMessage:"Delete this condition?",onDelete:()=>a(i)})]},`block-type-table-row-${i}`))})})},sg={columns:[{label:"Operation",size:"s",align:"left"},{label:"Search Url",size:"m",align:"left"},{label:"Key",size:"m",align:"left"},{label:"Value",size:"m",align:"left"},{label:"Actions"}]},ag=({rows:t,onChange:s,onDelete:a})=>{const n=bt.OPERATION_TYPES.filter(({value:l})=>["like","equals","exists"].includes(l)),o=(l,i)=>{const c={...t[l],...i};c.operation!=="exists"&&(c.searchValue||c.key||c.val)&&(c.searchValError="",c.keyError="",c.valError=""),s(l,c)},r=(l,i)=>{o(i,{operation:l,searchValue:"",key:"",val:"",searchValError:"",keyError:"",valError:""})};return e.jsx(ne,{className:"blocks-table",header:sg,children:e.jsx("tbody",{children:t.map((l,i)=>e.jsxs("tr",{children:[e.jsx(ua,{val:l.operation,options:n,onChange:c=>r(c,i)}),e.jsx(Re,{val:l.searchValue,error:l.searchValError,disabled:l.operation==="exists",name:"search-url",placeholder:"Enter Search Url",onChange:({value:c})=>o(i,{searchValue:c})}),e.jsx(Re,{val:l.key,error:l.keyError,name:"key",placeholder:"Enter key",onChange:({value:c})=>o(i,{key:c})}),e.jsx(Re,{val:l.val,error:l.valError,disabled:l.operation==="exists",name:"val",placeholder:"Enter value",onChange:({value:c})=>o(i,{val:c})}),e.jsx(Tt,{confirmMessage:"Delete this condition?",onDelete:()=>a(i)})]},`block-type-table-row-${i}`))})})},ng={columns:[{label:"Operation",size:"s",align:"left"},{label:"Key",size:"s",align:"left"},{label:"Value",size:"s",align:"left"},{label:"Actions"}]},og=({rows:t,onChange:s,onDelete:a})=>{const n=(r,l)=>{s(r,{...l,keyError:"",valError:"",valWarning:""})},o=(r,l)=>{n(l,{operation:r,...(r==="exists"||r==="not_exists")&&{val:""}})};return e.jsx(ne,{className:"blocks-table",header:ng,children:e.jsx("tbody",{children:t.map((r,l)=>e.jsxs("tr",{children:[e.jsx(ua,{val:r.operation,options:bt.OPERATION_TYPES,onChange:i=>o(i,l)}),e.jsx(Re,{val:r.key,error:r.keyError,name:"key",placeholder:"Enter key",onChange:({value:i})=>n(l,{key:i})}),e.jsx(Re,{val:r.val,error:r.valError,warning:r.valWarning,disabled:r.operation==="exists"||r.operation==="not_exists",name:"val",placeholder:"Enter value",onChange:({value:i})=>n(l,{val:i})}),e.jsx(Tt,{confirmMessage:"Delete this condition?",onDelete:i=>a(l)})]},`meta-type-table-row-${l}`))})})},rg={columns:[{label:"Value",align:"left"},{label:"Actions"}]},lg=({rows:t,onChange:s,onDelete:a})=>e.jsx(ne,{className:"blocks-table",header:rg,children:e.jsx("tbody",{children:t.map((n,o)=>e.jsxs("tr",{children:[e.jsx(Re,{val:n.val,error:n.valError,warning:n.valWarning,name:"val",placeholder:"Enter value",onChange:({value:r})=>s(o,{val:r,valError:"",valWarning:""})}),e.jsx(Tt,{confirmMessage:"Delete this condition?",onDelete:r=>a(o)})]},`para-type-table-row-${o}`))})});const ig=({type:t,name:s,isExact:a,isAnd:n,isLink:o,conditions:r,typeError:l,nameError:i,conditionsError:c,onBlockParamsChange:d,onTypeChange:u,onIsExactChange:p,onDelete:f})=>{const g=v=>{d({...v,hasError:!1,hasWarning:!1})},C=v=>{g({isLink:v})},b=v=>{g({name:v,nameError:""})},x=()=>{g({conditions:[...r,bt.EMPTY_CONDITION[t]],conditionsError:""})},j=(v,L)=>{const S=[...r];S[v]={...S[v],...L},g({conditions:S})},y=v=>{g({conditions:r.filter((L,S)=>v!==S),conditionsError:""})};return e.jsxs("div",{className:"input-block-container",children:[e.jsxs("div",{className:"block-inputs",children:[e.jsx(un,{label:"Block Type",value:t,error:l,options:bt.BLOCK_TYPES,onChange:v=>u(v.target.value)}),(t==="block"||t==="metadata")&&e.jsx(yn,{value:s,label:"Name",error:i,onChange:v=>b(v.target.value)})]}),e.jsxs("div",{className:"delete-row",children:[(t==="block"||t==="metadata")&&e.jsx(sa,{label:"Exact",checked:a,onChange:v=>p(v.target.checked)}),e.jsx(xe,{color:"secondary",startIcon:e.jsx(at,{}),onClick:f,children:"Delete Block"})]}),t&&e.jsxs(h.Fragment,{children:[e.jsx(lo,{title:"Conditions"}),e.jsxs("div",{className:"blocks-add-row",children:[e.jsx(xe,{className:`add-cond-btn ${c&&"color-error-imp"}`,variant:"text",color:"primary",startIcon:e.jsx(Yn,{}),onClick:x,children:"Add Condition"}),t==="all"&&e.jsx(sa,{className:"add-cond-toggle-button",label:"Include LINK",checked:o,onChange:v=>C(v.target.checked)}),r.length>1&&e.jsx(sa,{className:"add-cond-toggle-button",label:"AND",labelOff:"OR",checked:n,onChange:v=>g({isAnd:v.target.checked})})]}),r.length>0&&e.jsxs(h.Fragment,{children:[t==="block"&&e.jsx(Q0,{rows:r,isExact:a,onChange:j,onDelete:y}),t==="metadata"&&e.jsx(og,{rows:r,onChange:j,onDelete:y}),(t==="paragraph"||t==="all")&&e.jsx(lg,{rows:r,onChange:j,onDelete:y}),t==="caas"&&e.jsx(tg,{rows:r,isExact:a,onChange:j,onDelete:y}),t==="faas"&&e.jsx(ag,{rows:r,isExact:a,onChange:j,onDelete:y})]})]})]})},cg={columns:[{label:"Type",size:"xs"},{label:"Block Name",size:"m",align:"left"},{label:"Row",size:"xs"},{label:"Column",size:"xs"},{label:"Actions"}]},dg=({rows:t,onChange:s,onDelete:a})=>e.jsx(ne,{className:"blocks-table",header:cg,children:e.jsx("tbody",{children:t.map((n,o)=>e.jsxs("tr",{children:[e.jsx(m,{val:n.type}),e.jsx(Re,{val:n.blockName,error:n.blockNameError,name:"block-name",placeholder:"Enter value",onChange:({value:r})=>s(o,{blockName:r,blockNameError:""})}),e.jsx(Re,{val:n.row,error:n.rowError,name:"row",placeholder:"Enter num",pattern:/^([0-9]+)?$/,onChange:({value:r})=>s(o,{row:r,rowError:""})}),e.jsx(Re,{val:n.col,error:n.colError,name:"col",placeholder:"Enter num",pattern:/^([0-9]+)?$/,onChange:({value:r})=>s(o,{col:r,colError:""})}),e.jsx(Tt,{onDelete:r=>a(o)})]},`block-return-tr-${o}`))})}),ug={columns:[{label:"Block",size:"xs"},{label:"Block Name",align:"left"},{label:"Keys",align:"left"},{label:"Actions"}]},pg=({rows:t,onChange:s,onDelete:a})=>e.jsx(ne,{className:"blocks-table",header:ug,children:e.jsx("tbody",{children:t.map((n,o)=>e.jsxs("tr",{children:[e.jsx(m,{val:n.type}),e.jsx(Re,{val:n.blockName,error:n.blockNameError,name:"block-name",placeholder:"Enter value",onChange:({value:r})=>s(o,{blockName:r,blockNameError:""})}),e.jsx(Re,{val:n.keys,error:n.keysError,name:"keys",placeholder:"Enter comma separated values",onChange:({value:r})=>s(o,{keys:r})}),e.jsx(Tt,{onDelete:r=>a(o)})]},`block-return-tr-${o}`))})});const hg=[{type:"block",label:"Exclude Block"},{type:"metadata",label:"Exclude Metadata"}],fg=[{type:"block",label:"Return Block"},{type:"metadata",label:"Return Metadata"}],mg={block:[],metadata:[],paragraph:!1},gg={block:[],metadata:[]},xg=({initialParams:t,onSave:s,onClose:a})=>{const[n,o]=h.useState(Ae((t==null?void 0:t.blocks)||[])),[r,l]=h.useState((t==null?void 0:t.isAnd)||!1),[i,c]=h.useState(!1),[d,u]=h.useState(t!=null&&t.blocks?t.blocks.length-1:-1),[p,f]=h.useState(Ae((t==null?void 0:t.exclusions)||mg)),[g,C]=h.useState(Ae((t==null?void 0:t.returns)||gg)),[b,x]=h.useState(null),j=n[d]||null,y=()=>{const k=[...n,Ae(bt.EMPTY_BLOCK)];o(k),u(k.length-1)},v=k=>{o(I=>(I[d]={...I[d],...k},[...I]))},L=k=>{j.conditions.length>0?x({msg:e.jsxs("span",{children:["Are you sure you want to change the Block Type?",e.jsx("br",{}),"This will discard all added conditions."]}),onConfirm:S,confirmArgs:[k]}):S(k)},S=k=>{const I=[...n];I[d]={...bt.EMPTY_BLOCK,type:k},o(I);const Z=I.some(oe=>oe.type==="paragraph");c(Z),Z&&z(!1)},P=k=>{if(j.type==="block"&&!k&&j.conditions.length>0){x({msg:e.jsxs("span",{children:["Are you sure you want to switch Exact off?",e.jsx("br",{}),"This will discard ",e.jsx("b",{children:"row"})," and ",e.jsx("b",{children:"column"})," fields from conditions."]}),onConfirm:A});return}o(I=>(I[d].isExact=k,I[d].hasError=!1,[...I]))},A=()=>{o(k=>(k[d]={...k[d],conditions:k[d].conditions.map(I=>({...I,row:"",col:"",rowError:"",colError:""})),isExact:!1,hasError:!1},[...k]))},w=()=>{if(j.type){x({msg:"Are you sure you want to delete this block?",onConfirm:D});return}D()},D=()=>{const k=n.filter((I,Z)=>d!==Z);o(k),u(k.length-1)},M=k=>{f(I=>(I[k].push(Ae(bt.EMPTY_EXCLUSION[k])),{...I}))},T=(k,I,Z)=>{f(oe=>(oe[k][I]={...oe[k][I],...Z},{...oe}))},H=(k,I)=>{f(Z=>(Z[k]=Z[k].filter((oe,Ce)=>I!==Ce),{...Z}))},z=k=>{f(I=>({...I,paragraph:k}))},V=k=>{C(I=>(I[k].push(Ae(bt.EMPTY_RETURN[k])),{...I}))},O=(k,I,Z)=>{C(oe=>(oe[k][I]={...oe[k][I],...Z},{...oe}))},N=(k,I)=>{C(Z=>(Z[k]=Z[k].filter((oe,Ce)=>I!==Ce),{...Z}))},J=()=>{const k={blocks:n,isAnd:r,exclusions:p,returns:g};if(n.length===0&&g.block.length===0&&g.metadata.length===0){de("At least one block or return is mandatory",{variant:"error"});return}const{hasErrors:I,hasWarnings:Z,validatedBlockParams:oe}=ro.validateBlockParams(k),Ce=oe.blocks;o(Ce),f(oe.exclusions),C(oe.returns);const fs=Ce[d];if(I){if(Ce.length>0&&!fs.hasError){for(let _t in Ce)if(Ce[_t].hasError){u(parseInt(_t));break}}return}if(Z){x({msg:e.jsxs("span",{children:["The highlighted fields have only a single character.",e.jsx("br",{}),"Are you sure you want to proceed?"]}),onConfirm:_t=>s(oe)});return}s(oe)},se=()=>{const k={blocks:n,isAnd:r,exclusions:p,returns:g};let I;if(t===null?(n.length>0||r||p.block.length>0||p.metadata.length>0||p.paragraph||g.block.length>0||g.metadata.length>0)&&(I="All inputs will be discarded. Proceed?"):Yc(k,t)||(I="All changes will be discarded. Porceed?"),I){x({msg:I,onConfirm:a});return}a()},B=()=>{const k=b.confirmArgs||[];b.onConfirm(...k),x(null)},ie=()=>{x(null)};return e.jsx(Ds,{maxWidth:"lg",title:"Customise Query",className:"blocks-input-modal",highlightHeaderFooter:!0,onClose:se,footer:e.jsxs(h.Fragment,{children:[e.jsx(xe,{className:"margin-right-1x",color:"secondary",startIcon:e.jsx(Ps,{}),onClick:se,children:"Cancel"}),e.jsx(xe,{startIcon:e.jsx(is,{}),onClick:J,children:"Done"})]}),children:e.jsxs("div",{className:"blocks-input-form",children:[e.jsxs("div",{className:"blocks-row",children:[e.jsx(xe,{color:"primary",startIcon:e.jsx(dl,{}),onClick:y,children:"Add Block"}),n.length>1&&e.jsx(sa,{label:"AND",labelOff:"OR",checked:r,onChange:k=>l(!r)})]}),n.length>0&&e.jsxs(h.Fragment,{children:[e.jsx(q0,{blocks:n,blockIndex:d,onTabSelected:u}),e.jsx(ig,{type:j.type,name:j.name,isExact:j.isExact,isAnd:j.isAnd,isLink:j.isLink||!1,conditions:j.conditions,typeError:j.typeError,nameError:j.nameError,conditionsError:j.conditionsError,onBlockParamsChange:v,onTypeChange:L,onIsExactChange:P,onDelete:w})]}),e.jsx(lo,{title:"Exclusions"}),e.jsxs("div",{className:"blocks-add-row",children:[hg.map(k=>e.jsx(xe,{variant:"text",color:"primary",startIcon:e.jsx(Yn,{}),onClick:I=>M(k.type),children:k.label},`excl-${k.type}-btn`)),e.jsx(wo,{className:"excl-para-checkbox",label:"Exclude Paragraph",checked:p.paragraph,disabled:i,onChange:k=>z(k.target.checked)})]}),p.block.length>0&&e.jsx(J0,{rows:p.block,onChange:(k,I)=>T("block",k,I),onDelete:k=>H("block",k)}),p.metadata.length>0&&e.jsx(Y0,{rows:p.metadata,onChange:(k,I)=>T("metadata",k,I),onDelete:k=>H("metadata",k)}),e.jsx(lo,{title:"Global Return"}),e.jsx("div",{className:"blocks-add-row",children:fg.map(k=>e.jsx(xe,{variant:"text",color:"primary",startIcon:e.jsx(Yn,{}),onClick:I=>V(k.type),children:k.label},`return-${k.type}-btn`))}),g.block.length>0&&e.jsx(dg,{rows:g.block,onChange:(k,I)=>O("block",k,I),onDelete:k=>N("block",k)}),g.metadata.length>0&&e.jsx(pg,{rows:g.metadata,onChange:(k,I)=>O("metadata",k,I),onDelete:k=>N("metadata",k)}),b&&e.jsx(we,{className:"blocks-confirm-modal",onConfirm:B,onCancel:ie,children:e.jsx("h3",{className:"blocks-confirm-msg",children:b.msg})})]})})};const bg=({val:t,error:s,minRows:a=1,maxRows:n=3,name:o="textarea",size:r="auto",sizeMin:l="xs",align:i="left",placeholder:c="",pattern:d=/.*/,onChange:u=()=>{}})=>{const p=f=>{const{value:g,name:C}=f.target;d.test(g)&&u({value:g,name:C})};return e.jsx("td",{className:`size-${r} size-min-${l}`,children:e.jsxs("div",{className:`dyna-textarea ${s&&"edit-error"}`,children:[e.jsx(Zr,{className:`text-align-${i}`,value:t,name:o,minRows:a,maxRows:n,placeholder:c,onChange:p}),s&&e.jsx("div",{children:s})]})})},Cg=["Global Search","Selective Search"],jg=({isSelectiveSearch:t,isLocalesEnabled:s})=>{let a;return t?a=[{label:"URLs",align:"left"},{label:"Locales",align:"left"},{label:"Include Fragment",size:"xs"},{label:"Actions",size:"xs",stick:"right"}]:a=[{label:"Locales",size:"full",align:"left"},{label:"Actions",size:"xs",stick:"right"}],{columns:s?a:a.filter(({label:n})=>n!=="Locales")}},vg=({rows:t,isLocalesEnabled:s,isFixedLocale:a,searchType:n,crawlType:o,onSearchTypeChange:r,onCrawlTypeChange:l,onUrlsChange:i,onOpenLocaleModal:c,onIncludeFragmentsChange:d,onOpenBlocksModal:u,onClone:p,onDelete:f,onAddRow:g})=>{const C=n==="selective",b=o==="publish",x=yg;return e.jsx(ne,{enableXScroll:C,header:jg({isSelectiveSearch:C,isLocalesEnabled:s}),toolbar:e.jsxs(me,{className:"blocks-toolbar",tistle:"Add URLs and blocks",children:[e.jsx(Nn,{segments:Cg,index:Number(C),onChange:j=>r(j===1?"selective":"global")}),e.jsxs("div",{className:"bt-right-section",children:[C&&e.jsx(sa,{label:"Crawl Publish",labelOff:"Crawl Preview",checked:b,onChange:j=>l(b?"preview":"publish")}),e.jsx(xe,{color:"secondary",startIcon:e.jsx(xo,{}),onClick:g,children:"Add Row"})]})]}),children:e.jsx("tbody",{children:t.map((j,y)=>e.jsxs("tr",{children:[C&&e.jsx(bg,{val:j.urls,error:j.urlsError,maxRows:5,placeholder:"Enter your Urls (multiple urls should be in new line)",onChange:({value:v})=>i(v,y)}),s&&e.jsx(kn,{selectedLocales:j.locales,isFixed:a,error:j.localesError,trimDisplayValues:C,onAdd:v=>c(y)}),C&&e.jsx(Ao,{checked:j.includeFragments,onChange:v=>d(v,y)}),e.jsx(x,{isEdit:j.blockParams!==null,blockParamsError:j.blockParamsError,onEditBlock:v=>u(y),onClone:v=>p(j),onDelete:v=>f(y)})]},`blocks-input-table-row-${y}`))})})},yg=({isEdit:t,blockParamsError:s,onEditBlock:a,onClone:n,onDelete:o})=>e.jsx("td",{className:"stick-right",children:e.jsxs("div",{className:"actions-with-buttons",children:[e.jsxs("div",{className:"flex",children:[e.jsx(xe,{color:s?"negative":"primary",startIcon:t?e.jsx(Zc,{}):e.jsx(dl,{}),onClick:a,children:"Configure"}),e.jsx(xe,{variant:"outlined",color:"secondary",startIcon:e.jsx(Xr,{}),onClick:n,children:"Clone"}),e.jsx(xe,{variant:"outlined",color:"secondary",startIcon:e.jsx(at,{}),onClick:o,children:"Delete"})]}),s&&e.jsx("div",{className:"actions-error-msg",children:s})]})});const Sg=!1,qn=(t=null)=>({urls:"",locales:t?[t]:[],includeChild:!1,includeFragments:!1,blockParams:null,urlsError:"",blockParamsError:""}),Eg=({isVisible:t,portals:s})=>{const a=E.useSelector(G=>G.local.savedLocales),n=E.useSelector(G=>G.session),o=E.useSelector(G=>G.operations.blocks.searchType),[r,l]=h.useState([]),[i,c]=h.useState(!1),[d,u]=h.useState("preview"),[p,f]=h.useState([]),[g,C]=h.useState(!1),[b,x]=h.useState(null),j=h.useRef(-1),y=ee.useNavigate(),v=E.useDispatch(),{enqueueSnackbar:L}=ye.useSnackbar(),{masterLocales:S,masterFilterGroups:P,countryOptions:A,languageOptions:w,localeNames:D,fixedLocale:M,totalLocalesCount:T,isLocalesInitialised:H,isLocalesEnabled:z,saveSelectedLocales:V}=Os(),O=G=>{v(pr({searchType:G})),l(r.map(Y=>({...Y,urlsError:"",localesError:""})))},N=(G,Y)=>{l(re=>(re[Y].urls=G,re[Y].urlsError="",[...re]))},J=(G,Y)=>{B("includeChild",G,Y)},se=(G,Y)=>{B("includeFragments",G,Y)},B=(G,Y,re)=>{l(rt=>(rt[re][G]=Y,[...rt]))},ie=G=>{const Y=r[G];f(Y.locales.length>0?Y.locales:a),c(!0),j.current=G},k=G=>{l(Y=>{const re=Y[j.current];return re.locales=G,re.localesError&&G.length>0&&(re.localesError=""),[...Y]}),c(!1)},I=G=>{const Y=r[G];x(Y.blockParams),C(!0),j.current=G},Z=G=>{l(Y=>[...Y,Ae(G)])},oe=G=>{l(Y=>Y.length===1?[qn(M)]:Y.filter((re,rt)=>G!==rt))},Ce=()=>{l(G=>[...G,qn(M)])},fs=G=>{l(Y=>(Y[j.current].blockParams=G,Y[j.current].blockParamsError="",[...Y])),C(!1)},_t=async()=>{var qo,Go;const{hasErrors:G,validatedRows:Y}=ro.validateRows(r,o,d,n.siteData.instance.domain.franklinPreview,n.siteData.configs.PREVIEW_URL_DOMAINS);if(l(Y),G)return;const re=[];let rt=ro.generateProcessUrls(Y,n);if(o==="global"){const $s=await v(Fa(rt));let fa="";if(_.isFulfilled($s)&&(((qo=$s.payload.data)==null?void 0:qo.length)>0&&((Go=$s.payload.data)!=null&&Go.every(Ze=>Ze.urls.length>0))?(rt=[],$s.payload.data.forEach(Ze=>{var Jo,Wo,Yo;rt.push({AND:Ze.AND,searchType:Ze.searchType,urls:Ze.urls,block:Ze.block,exclude:Ze.exclude,return:Ze.return}),(Jo=Ze.stats)!=null&&Jo.query&&((Yo=(Wo=Ze.stats)==null?void 0:Wo.data)==null?void 0:Yo.length)>0&&re.push({query:Ze.stats.query,data:Ze.stats.data})})):fa="No urls found during search."),_.isRejected($s)&&(fa="Some error occured while searching"),fa){L(fa,{variant:"error"});return}}v(la(Ae(Y))),v(os(Ae(rt))),re.length>0&&v(pr({stats:re})),v(Ee())};return h.useEffect(()=>{H&&l([qn(M)])},[H,M]),t?e.jsxs("div",{className:"blocks-input-urls-container wizard-container",children:[Sg,e.jsx(vg,{rows:r,isLocalesEnabled:z,isFixedLocale:M!==null,searchType:o,crawlType:d,onSearchTypeChange:O,onCrawlTypeChange:u,onUrlsChange:N,onOpenLocaleModal:ie,onIncludeChildChange:J,onIncludeFragmentsChange:se,onOpenBlocksModal:I,onClone:Z,onDelete:oe,onAddRow:Ce}),i&&e.jsx(En,{initialSelectedLocales:p,masterLocales:S,masterFilterGroups:P,countryOptions:A,languageOptions:w,totalLocalesCount:T,localeNames:D,onLocalesSelected:k,onLocalesSaved:V,onClose:G=>c(!1)}),g&&e.jsx(xg,{initialParams:b,onSave:fs,onClose:G=>C(!1)}),s.footer&&Q.createPortal(e.jsx(pe,{prevLabel:"Back to Search",onNext:_t,onPrev:G=>y("/search")}),s.footer)]}):null};const kg={columns:[{label:"#",size:"xxs"},{label:"Locale"},{label:"URL Count"},{label:"Message"}]},Rg=({msg:t})=>e.jsx("td",{className:"message-cell",children:t?e.jsxs("div",{children:[e.jsx(ia,{}),t]}):"n/a"}),Lg=({isVisible:t,portals:s})=>{const{searchType:a,stats:n}=E.useSelector(i=>i.operations.blocks),o=E.useDispatch(),r=()=>{o(Ee())},l=()=>{o(he())};return t?e.jsxs("div",{className:"wizard-container blocks-options",children:[a==="selective"&&e.jsxs("div",{className:"no-table-msg",children:["Depending upon the complexity of the selected query, the search might take a while. Are you sure you want to proceed? Click"," ",e.jsx("span",{children:"Back"})," button to review selected query or click"," ",e.jsx("span",{children:"Confirm"})," button to search and display results."]}),a==="global"&&n.map((i,c)=>e.jsx(ne,{className:`${c>0&&"mt-12"}`,header:kg,useAltHeaderBg:!0,toolbar:e.jsx(me,{title:i.query}),children:e.jsx("tbody",{children:i.data.map((d,u)=>e.jsxs("tr",{className:d.message?"highlight-cell":"",children:[e.jsx(m,{val:u+1}),e.jsx(m,{val:d.locale}),e.jsx(m,{num:d.count}),e.jsx(Rg,{msg:d.message})]},u))})},i.query)),s.footer&&Q.createPortal(e.jsx(pe,{nextLabel:"Confirm",onNext:r,onPrev:l}),s.footer)]}):null},Ng={columns:[{label:"#"},{label:"Domain",align:"left",sortKey:"domain"},{label:"Locale",sortKey:"locale"},{label:"File",align:"left",sortKey:"file"},{label:"URL",align:"left",sortKey:"url"},{label:"Block Name",sortKey:"blockName"},{label:"Original Data",align:"left",sortKey:"mdData"},{label:"Condition",align:"left",sortKey:"condition"}]},Pg=({isVisible:t,portals:s})=>{const{processUrls:a}=E.useSelector(b=>b.operations),{isInitialised:n,data:o,pagination:r,sort:l}=E.useSelector(b=>b.operations.blockReport),i=E.useDispatch(),{processBatches:c}=Te(),{numberedRows:d}=Ne(r,o),u=b=>{i(le({sortKey:b,reportKey:"blockReport"})),i(Bt())},p=b=>{i(Bt({pageIndex:b}))},f=b=>{i(Le({pageSize:b,reportKey:"blockReport"})),i(Bt())},g=h.useCallback(()=>{i(Je("blockReport")),i(he())},[i]),C=h.useCallback(async()=>{const b=await i(Bt({pageIndex:1}));_.isRejected(b)&&de("Something went wrong while fetching the status report",{variant:"error"})},[i]);return h.useEffect(()=>{if(t){const x=[],j=a.reduce((y,v)=>y+v.urls.length,0);a.forEach(y=>{let v=0;for(;v<y.urls.length;)x.push({...y,urls:y.urls.slice(v,v+100)}),v+=100}),c({batches:x,processApi:t1,destination:"block report",totalItems:j,batchSize:100,onComplete:C,onCancel:g})}},[t,a,C,g,c,i]),t?e.jsxs("div",{className:"wizard-container",children:[e.jsx(ne,{header:Ng,isLoading:!n,isEmpty:o.length===0,sort:l,toolbar:e.jsx(me,{count:r.totalItems}),pagination:e.jsx(fe,{...r,onPageChange:p,onPageSizeChange:f}),onSort:u,children:e.jsx("tbody",{children:d.map((b,x)=>e.jsxs("tr",{children:[e.jsx(m,{val:b._num}),e.jsx(m,{val:b.domain,align:"left"}),e.jsx(m,{val:b.locale}),e.jsx(m,{val:b.file,align:"left"}),e.jsx(X,{url:b.url,align:"left"}),e.jsx(m,{val:b.blockName}),e.jsx(m,{val:b.mdData,align:"left"}),e.jsx(m,{val:b.condition&&JSON.stringify(b.condition),align:"left"})]},`blocks-report-tr-${x}`))})}),s.actions&&Q.createPortal(e.jsx(ke,{action:"BLOCK_REPORT",args:{useMsalToken:!0}}),s.actions),s.footer&&Q.createPortal(e.jsx(pe,{nextVisible:!1,onPrev:g}),s.footer)]}):null},Ig=[{name:"Query Builder",description:"Build and customise your query"},{name:"Confirmation",description:"Please confirm"},{name:"Search Results",description:"View and download search results"}],Tg=()=>e.jsx(He,{title:"Advanced Search",clearActions:{3:"BLOCK_REPORT"},steps:Ig,idGenerationStep:3,children:({currentStep:t,portals:s})=>e.jsxs(h.Fragment,{children:[e.jsx(Eg,{isVisible:t===1,portals:s}),e.jsx(Lg,{isVisible:t===2,portals:s}),e.jsx(Pg,{isVisible:t===3,portals:s})]})}),_g=()=>e.jsx(pa,{className:"panther",children:e.jsx(Tg,{})}),wr=()=>{const t=E.useDispatch(),{data:s,isLoading:a}=vl("unity"),n=E.useSelector(d=>d.config.unity.formValues),o=ee.useNavigate(),{enqueueSnackbar:r}=ye.useSnackbar(),l=E.useSelector(d=>d.config.isLoading),{id:i}=ee.useParams();h.useEffect(()=>()=>{t(Ro({client:"unity"}))},[]),h.useEffect(()=>{i&&t(Js({id:i,client:"unity"}))},[i]);const c=async d=>{let u=ka({formValues:{...d},client:"unity",schemaId:s.id});i&&(u=Ra({configId:i,formValues:{...d},client:"unity",schemaId:s.id})),t(u).unwrap().then(p=>{const{schemaId:f}=p;f&&o("/config-mgmt/unity")}).catch(p=>{r(p,{variant:"error"})})};return e.jsxs("div",{className:"flex w-full h-full",children:[s&&s.fieldsMetadata&&e.jsx("div",{className:"w-4/5 mx-auto h-[90%] bg-unity bg-[length:110%_110%] bg-no-repeat shadow-xl shadow-gray-500 rounded-2xl relative mt-9 ",children:e.jsx(gi,{config:s,initialValues:n,onSubmitClient:c})}),(l||a)&&e.jsx(Ke,{})]})},{VITE_MSAL_CLIENT_ID:Ag,VITE_MSAL_TENANT_ID:Dg}={VITE_DATA_ENGINE_URL:"https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",VITE_BATCH_PROCESSING_THRESHOLD:"25",VITE_MSAL_CLIENT_ID:"45bf0513-84c8-4764-9119-987f082543a7",VITE_MSAL_TENANT_ID:"fa7b1b5a-7b34-4387-94ae-d2c178decee1",VITE_MSAL_ROOT_KEY:"msal.token.keys.45bf0513-84c8-4764-9119-987f082543a7",VITE_NAKSHA_API_URL:"https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",VITE_NAKSHA_API_KEY:"milostudioservice",VITE_ENABLE_ANALYTICS:"true",VITE_ANALYTICS_SUITE_ID:"adbdocauthqa",VITE_ANALYTICS_URL:"https://sstats.adobe.com/",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Og={auth:{clientId:Ag,authority:`https://login.microsoftonline.com/${Dg}`,postLogoutRedirectUri:"/login",redirectUri:"/"},cache:{cacheLocation:Xc.LocalStorage}};function Ug(){const t=ee.useRouteError();return console.error(t),e.jsxs("div",{id:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:t.statusText||t.message})})]})}const mn=({title:t,description:s,img:a,imgSrc:n,link:o,linkLabel:r,linkDisabled:l=!1,extLinkArgs:i=["_blank","noreferrer"],onClick:c=()=>{}})=>{const d=ee.useNavigate(),u=()=>{o.startsWith("http")?window.open(o,...i):d(o),Oe({name:t}),c()},p=f=>{f.target.src="/icons/adobe.png"};return e.jsxs("div",{className:"flex flex-col w-[300px] bg-white border shadow-sm rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-x-4",children:[a,n&&e.jsx("img",{className:"w-12",src:n,alt:t,onError:p}),e.jsx("h3",{className:"font-bold text-gray-800 text-md",children:t})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-700",children:s}),e.jsx("div",{className:"flex flex-row-reverse items-end flex-1 pt-2 mt-2",children:e.jsx(ae,{fillStyle:"outline",isDisabled:l||!o,onPress:u,children:r})})]})},wg=t=>t.config.configTemplates,Mg=_.createSelector([wg],t=>{const s=t.filter(o=>o.enabled),a=s.filter(o=>o.category===sr.APPLICATION),n=s.filter(o=>o.category===sr.SYSTEM_CONFIGURATION);return{applicationConfigs:a,systemConfigs:n}}),$g=()=>{const{applicationConfigs:t,systemConfigs:s}=E.useSelector(Mg);return e.jsxs("section",{children:[e.jsx("div",{className:"py-200 bg-bottom bg-cover bg-root px-1200 min-h-[20rem]",children:(t==null?void 0:t.length)>0&&e.jsxs("div",{className:"pt-400",children:[e.jsx("h1",{className:"font-bold text-gray-900 font-base text-400 mb-200",children:"Application Configuration Management"}),e.jsx("ul",{className:"flex flex-wrap gap-4",children:t.map(a=>e.jsx(mn,{title:a.title,description:a.description,imgSrc:a.icon||"/icons/adobe.png",link:`/config-mgmt/${a.id}`,linkLabel:"Explore",linkDisabled:!a.permission},a.id))})]})}),e.jsx("div",{className:"py-200 px-1200",children:(s==null?void 0:s.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-bold text-gray-900 font-base text-400 mb-200",children:"System Configuration Management"}),e.jsx("ul",{className:"flex flex-wrap flex-1 gap-4",children:s.map(a=>e.jsx(mn,{title:a.title,description:a.description,imgSrc:a.icon||"/icons/adobe.png",link:`/config-mgmt/${a.id}`,linkLabel:"Explore",linkDisabled:!a.permission},a.id))})]})})]})},{VITE_NAKSHA_API_URL:Fg,VITE_NAKSHA_API_KEY:Vg}={VITE_DATA_ENGINE_URL:"https://wcms-milostudio-bulkops-deploy-ethos501-prod-or2-6cb495.cloud.adobe.io/da",VITE_BATCH_PROCESSING_THRESHOLD:"25",VITE_MSAL_CLIENT_ID:"45bf0513-84c8-4764-9119-987f082543a7",VITE_MSAL_TENANT_ID:"fa7b1b5a-7b34-4387-94ae-d2c178decee1",VITE_MSAL_ROOT_KEY:"msal.token.keys.45bf0513-84c8-4764-9119-987f082543a7",VITE_NAKSHA_API_URL:"https://wcms-milostudio-service-deploy-ethos501-prod-or2-6c8256.cloud.adobe.io/apis/da",VITE_NAKSHA_API_KEY:"milostudioservice",VITE_ENABLE_ANALYTICS:"true",VITE_ANALYTICS_SUITE_ID:"adbdocauthqa",VITE_ANALYTICS_URL:"https://sstats.adobe.com/",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function Bg(t,s,a=!1){const n=new URLSearchParams({refresh:a}),o=await fetch(`${Fg}/v1/sites/${s}/recent?${n}`,{headers:{Authorization:`Bearer ${t}`,"x-api-key":Vg}});return o.ok?await o.json():(console.error("Failed to fetch recent files:",o.statusText),[])}const Kg=()=>e.jsxs("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_102_4434)",children:[e.jsx("path",{d:"M17.7035 17.8705C17.6088 17.956 17.4887 17.9999 17.3676 17.9999C17.2816 17.9999 17.1957 17.978 17.1176 17.933C16.9291 17.8242 16.8334 17.6064 16.8793 17.3945L17.4066 14.9536L15.7299 13.1039C15.5834 12.9428 15.558 12.706 15.6674 12.518C15.7748 12.33 15.9955 12.2314 16.2055 12.2792L18.6459 12.8066L20.4965 11.1293C20.6576 10.9828 20.893 10.9579 21.0824 11.0668C21.2709 11.1757 21.3666 11.3935 21.3207 11.6054L20.7934 14.0463L22.4701 15.8959C22.6166 16.0571 22.642 16.2939 22.5326 16.4819C22.4242 16.6699 22.2065 16.7665 21.9945 16.7206L19.5541 16.1933L17.7035 17.8705Z",fill:"#893DE7"}),e.jsx("path",{opacity:"0.1",d:"M20.3285 31.9349L19.351 34.2157L21.6283 33.2421L21.6434 33.227L20.3417 31.9219L20.3285 31.9349Z",fill:"#893DE7"}),e.jsx("path",{opacity:"0.1",d:"M31.1461 21.1456L21.0497 31.217L22.3515 32.5221L32.448 22.4507L31.1461 21.1456Z",fill:"#893DE7"}),e.jsx("path",{opacity:"0.1",d:"M32.5267 19.77L31.8538 20.4412L33.1576 21.7443L33.8304 21.0732C34.0043 20.8994 34.1 20.668 34.1 20.4219C34.1 20.1758 34.0043 19.9438 33.8304 19.7695C33.4808 19.4228 32.8744 19.4214 32.5267 19.77Z",fill:"#893DE7"}),e.jsx("path",{opacity:"0.1",d:"M18.8461 30.5884L30.0998 19.3655V19.25C29.8236 19.2499 29.6 19.0263 29.6 18.75V11.2496C29.6 10.9733 29.8236 10.7497 30.0998 10.7496V10.5739L26.7826 13.582C26.4857 13.8516 26.1009 14 25.7006 14C25.4213 14 25.1439 13.9263 24.8998 13.7866C24.2904 13.4385 23.9789 12.7432 24.1234 12.0557L25.0922 7.57422L23.212 5.5H23.0995C23.0995 5.77637 22.8758 6 22.5995 6H7.09998C5.17029 6 3.59998 7.57031 3.59998 9.5V28.5C3.59998 30.4297 5.17029 32 7.09998 32H17.3691C17.6455 32 17.8691 32.2236 17.8691 32.5H17.91L18.5277 31.0586C18.6049 30.8794 18.7113 30.7227 18.8461 30.5884ZM6.09998 19.0005H12.1C12.3763 19.0005 12.6 19.2241 12.6 19.5005C12.6 19.7769 12.3763 20.0005 12.1 20.0005H6.09998C5.82361 20.0005 5.59998 19.7769 5.59998 19.5005C5.59998 19.2241 5.82361 19.0005 6.09998 19.0005ZM11.1 28.0015H6.09998C5.82361 28.0015 5.59998 27.7778 5.59998 27.5015C5.59998 27.2251 5.82361 27.0015 6.09998 27.0015H11.1C11.3763 27.0015 11.6 27.2251 11.6 27.5015C11.6 27.7778 11.3763 28.0015 11.1 28.0015ZM14.1 24.001H6.09998C5.82361 24.001 5.59998 23.7774 5.59998 23.501C5.59998 23.2246 5.82361 23.001 6.09998 23.001H14.1C14.3763 23.001 14.6 23.2246 14.6 23.501C14.6 23.7774 14.3763 24.001 14.1 24.001ZM17.3676 19C17.1058 19 16.847 18.9307 16.6195 18.7998C16.0511 18.4717 15.7631 17.8223 15.9017 17.1826L16.3207 15.2446L14.9887 13.7759C14.5482 13.2905 14.473 12.5825 14.8031 12.0151C15.0648 11.5566 15.5629 11.2671 16.099 11.2671C16.2094 11.2671 16.3197 11.2798 16.4281 11.3042L18.3549 11.7207L19.8246 10.3887C20.1 10.1382 20.4584 9.99951 20.8314 9.99951C21.0941 9.99951 21.3529 10.0689 21.5805 10.1997C22.1488 10.5283 22.4369 11.1777 22.2982 11.8174L21.8793 13.7554L23.2113 15.2241C23.6517 15.7095 23.7269 16.4175 23.3969 16.9849C23.1322 17.4443 22.6342 17.7319 22.1 17.7319C21.9935 17.7319 21.8871 17.7207 21.7826 17.6982L19.8451 17.2793L18.3754 18.6113C18.097 18.8628 17.7396 19 17.3676 19Z",fill:"#893DE7"}),e.jsx("path",{opacity:"0.1",d:"M31.0023 5.69824L31.8636 1.71338L28.8412 4.45361C28.6908 4.58642 28.4916 4.63965 28.3051 4.59863L24.3129 3.73633L27.0531 6.75928C27.183 6.90528 27.2367 7.10157 27.2006 7.28858L27.1976 7.29883L26.3353 11.2871L29.3588 8.54639C29.5033 8.41651 29.7035 8.36035 29.8949 8.40137L33.8871 9.26416L31.1469 6.24072C31.014 6.09765 30.9593 5.89355 31.0023 5.69824Z",fill:"#893DE7"}),e.jsx("path",{opacity:"0.1",d:"M19.7621 14.0864L20.015 12.9155L19.1273 13.7202C19.0072 13.8281 18.8422 13.8716 18.6859 13.8384L17.516 13.5854L18.3197 14.4722C18.4281 14.5918 18.472 14.7563 18.4379 14.9136L18.1849 16.0845L19.0726 15.2798C19.1918 15.1714 19.3549 15.1284 19.514 15.1616L20.684 15.4146L19.8803 14.5278C19.7719 14.4082 19.7279 14.2437 19.7621 14.0864Z",fill:"#893DE7"}),e.jsx("path",{d:"M11.1 27.0015H6.09998C5.82361 27.0015 5.59998 27.2251 5.59998 27.5015C5.59998 27.7778 5.82361 28.0015 6.09998 28.0015H11.1C11.3763 28.0015 11.6 27.7778 11.6 27.5015C11.6 27.2251 11.3763 27.0015 11.1 27.0015Z",fill:"#893DE7"}),e.jsx("path",{d:"M14.1 23.001H6.09998C5.82361 23.001 5.59998 23.2246 5.59998 23.501C5.59998 23.7773 5.82361 24.001 6.09998 24.001H14.1C14.3763 24.001 14.6 23.7773 14.6 23.501C14.6 23.2246 14.3763 23.001 14.1 23.001Z",fill:"#893DE7"}),e.jsx("path",{d:"M31.8197 19.0625L19.5531 31.2954C19.5081 31.3404 19.472 31.3941 19.4466 31.4527L18.1068 34.5801C18.0267 34.7676 18.0687 34.9854 18.2132 35.1299L18.4359 35.353C18.5316 35.4492 18.6595 35.5 18.7894 35.5C18.8558 35.5 18.9222 35.4868 18.9857 35.46L22.1097 34.124C22.1683 34.0986 22.221 34.063 22.2669 34.0181L34.5374 21.7808C34.8997 21.418 35.0999 20.9351 35.0999 20.4219C35.0999 19.9087 34.9007 19.4263 34.5365 19.0625C33.8099 18.3369 32.5462 18.3369 31.8197 19.0625ZM21.6282 33.2422L19.3509 34.2158L20.3284 31.9351L20.3416 31.922L21.6434 33.2271L21.6282 33.2422ZM22.3509 32.5216L21.049 31.2165L31.1457 21.1473L32.4495 22.4504L22.3509 32.5216ZM33.8304 21.0733L33.1575 21.7443L31.8537 20.4412L32.5267 19.7701C32.8743 19.4214 33.4808 19.4229 33.8304 19.7696C34.0042 19.9439 34.0999 20.1758 34.0999 20.4219C34.0999 20.668 34.0042 20.8994 33.8304 21.0733Z",fill:"#893DE7"}),e.jsx("path",{d:"M6.09998 20.0005H12.1C12.3763 20.0005 12.6 19.7769 12.6 19.5005C12.6 19.2241 12.3763 19.0005 12.1 19.0005H6.09998C5.82361 19.0005 5.59998 19.2241 5.59998 19.5005C5.59998 19.7769 5.82361 20.0005 6.09998 20.0005Z",fill:"#893DE7"}),e.jsx("path",{d:"M22.5326 16.4819C22.642 16.2939 22.6166 16.0571 22.4701 15.8959L20.7934 14.0463L21.3207 11.6054C21.3666 11.3935 21.2709 11.1757 21.0824 11.0668C20.893 10.9579 20.6576 10.9828 20.4965 11.1293L18.6459 12.8066L16.2055 12.2792C15.9955 12.2314 15.7748 12.33 15.6674 12.518C15.558 12.706 15.5834 12.9428 15.7299 13.1039L17.4066 14.9536L16.8793 17.3945C16.8334 17.6064 16.9291 17.8242 17.1176 17.933C17.1957 17.978 17.2816 17.9999 17.3676 17.9999C17.4887 17.9999 17.6088 17.956 17.7035 17.8705L19.5541 16.1933L21.9945 16.7206C22.2064 16.7665 22.4242 16.6699 22.5326 16.4819ZM19.5141 15.1616C19.3549 15.1284 19.1918 15.1713 19.0727 15.2797L18.185 16.0844L18.4379 14.9135C18.4721 14.7563 18.4281 14.5917 18.3197 14.4721L17.516 13.5854L18.6859 13.8383C18.8422 13.8715 19.0072 13.8281 19.1274 13.7201L20.0151 12.9155L19.7621 14.0864C19.7279 14.2436 19.7719 14.4081 19.8803 14.5278L20.684 15.4145L19.5141 15.1616Z",fill:"#893DE7"}),e.jsx("path",{d:"M30.1001 10.7495H30.0999C29.8238 10.7495 29.6 10.9733 29.6 11.2494V18.7501C29.6 19.0261 29.8238 19.2499 30.0999 19.2499H30.1001C30.3762 19.2499 30.6 19.0261 30.6 18.7501V11.2494C30.6 10.9733 30.3762 10.7495 30.1001 10.7495Z",fill:"#893DE7"}),e.jsx("path",{d:"M17.3691 32H7.09998C5.17029 32 3.59998 30.4297 3.59998 28.5V9.5C3.59998 7.57031 5.17029 6 7.09998 6H22.5995C22.8759 6 23.0995 5.77637 23.0995 5.5C23.0995 5.22363 22.8759 5 22.5995 5H7.09998C4.61853 5 2.59998 7.01855 2.59998 9.5V28.5C2.59998 30.9814 4.61853 33 7.09998 33H17.3691C17.6455 33 17.8691 32.7764 17.8691 32.5C17.8691 32.2236 17.6455 32 17.3691 32Z",fill:"#893DE7"}),e.jsx("path",{d:"M35.4408 9.48864L32.0218 5.71667L33.096 0.743037C33.1537 0.482296 33.0374 0.216667 32.806 0.0823965C32.5755 -0.0509035 32.2855 -0.0211235 32.0892 0.158567L28.3177 3.57849L23.3412 2.50281C23.0755 2.44715 22.8148 2.56433 22.682 2.79529C22.5482 3.02722 22.5794 3.31531 22.7591 3.51111L26.1781 7.28308L25.1019 12.2611C25.0472 12.5214 25.1644 12.786 25.3959 12.9183C25.4916 12.973 25.5961 12.9999 25.7005 12.9999C25.849 12.9999 25.9955 12.9457 26.1107 12.8412L29.8822 9.42127L34.8587 10.4969C35.1234 10.5526 35.3832 10.4359 35.5169 10.2054C35.6507 9.97499 35.6205 9.68737 35.4408 9.48864ZM29.8949 8.40124C29.7035 8.36022 29.5033 8.41638 29.3587 8.54626L26.3353 11.287L27.1976 7.2987L27.2005 7.28845C27.2367 7.10144 27.1829 6.90515 27.0531 6.75915L24.3128 3.7362L28.305 4.5985C28.4915 4.63952 28.6908 4.58629 28.8412 4.45348L31.8636 1.71325L31.0023 5.69811C30.9593 5.89342 31.014 6.09752 31.1468 6.24059L33.887 9.26403L29.8949 8.40124Z",fill:"#893DE7"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_102_4434",children:e.jsx("rect",{width:"36",height:"36",fill:"white",transform:"translate(0.599976)"})})})]}),Hg=()=>e.jsxs("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_102_4438)",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2399 1.44002C22.1119 1.31202 21.9629 1.20902 21.8019 1.13502L21.7999 6.01802C21.7999 6.53102 22.1859 6.95402 22.6829 7.01202L22.7999 7.01802H27.6819C27.6069 6.84102 27.4989 6.67802 27.3599 6.54002L22.2399 1.44002ZM21.1799 1.12114e-05C21.8409 -0.00197879 22.4749 0.261021 22.9399 0.730021L28.0599 5.83002C28.5299 6.29902 28.7959 6.93602 28.7999 7.60002V19.54C28.4659 19.54 28.1319 19.56 27.7999 19.6V8.01802H22.7999C21.7459 8.01802 20.8819 7.20302 20.8049 6.16802L20.7999 6.01802V1.00002H5.79993C4.74593 1.00002 3.88193 1.81602 3.80493 2.85102L3.79993 3.00002V29C3.79993 30.105 4.69493 31 5.79993 31H20.1599C20.2559 31.34 20.3729 31.674 20.5099 32H5.79993C4.14293 32 2.79993 30.657 2.79993 29V3.00002C2.79993 1.34302 4.14293 1.12114e-05 5.79993 1.12114e-05H21.1799Z",fill:"#E46F00"}),e.jsx("path",{opacity:"0.1",d:"M19.7999 28.54C19.801 26.3269 20.6174 24.1918 22.0931 22.5427C23.5689 20.8935 25.6006 19.8459 27.7999 19.6V7.6C27.7996 7.20231 27.6413 6.82103 27.3599 6.54L22.2399 1.44C21.9589 1.15862 21.5776 1.00035 21.1799 1H5.79993C5.26949 1 4.76079 1.21071 4.38571 1.58579C4.01064 1.96086 3.79993 2.46957 3.79993 3V29C3.79993 29.5304 4.01064 30.0391 4.38571 30.4142C4.76079 30.7893 5.26949 31 5.79993 31H20.1599C19.9259 30.2008 19.8048 29.3728 19.7999 28.54Z",fill:"#DA7B11"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2999 9C13.5759 9 13.7999 9.224 13.7999 9.5C13.7999 9.776 13.5759 10 13.2999 10H8.29993C8.02393 10 7.79993 9.776 7.79993 9.5C7.79993 9.224 8.02393 9 8.29993 9H13.2999ZM8.29993 15H21.2999C21.5759 15 21.7999 15.224 21.7999 15.5C21.7999 15.776 21.5759 16 21.2999 16H8.29993C8.02393 16 7.79993 15.776 7.79993 15.5C7.79993 15.224 8.02393 15 8.29993 15ZM20.2999 12C20.5759 12 20.7999 12.224 20.7999 12.5C20.7999 12.776 20.5759 13 20.2999 13H8.29993C8.02393 13 7.79993 12.776 7.79993 12.5C7.79993 12.224 8.02393 12 8.29993 12H20.2999ZM18.2999 26.0141C18.5999 26.0141 18.7999 26.2111 18.7999 26.5071C18.7999 26.8031 18.5999 27.0001 18.2999 27.0001H7.29993C6.99993 27.0001 6.79993 26.8031 6.79993 26.5071C6.79993 26.2111 6.99993 26.0141 7.29993 26.0141H18.2999ZM9.59993 23.8451C9.59993 24.1411 9.29993 24.4371 8.99993 24.4371C8.69993 24.4371 8.39993 24.1411 8.39993 23.8451C8.39993 22.0701 9.59993 20.3941 11.4999 19.1121C11.9999 18.8171 12.9999 19.1121 12.7999 19.9011L12.1999 22.2671L13.7999 21.0841C14.2999 20.6901 15.2999 20.9861 15.1999 21.7741L14.9999 22.7601C15.0999 22.6621 15.2999 22.5631 15.4999 22.3661C16.1999 21.9721 16.9999 21.8731 17.6999 21.9721C17.9999 21.9721 18.2999 22.0701 18.8999 22.1691C19.2999 22.2671 19.4999 22.2671 19.6999 22.2671C19.9999 22.2671 20.1999 22.5631 20.1999 22.8591C20.1999 23.1551 19.8999 23.3521 19.5999 23.3521C19.3999 23.3521 19.1999 23.2531 18.6999 23.2531C18.1999 23.1551 17.8999 23.1551 17.5999 23.0561C17.0999 22.9581 16.4999 23.0561 16.0999 23.2531C15.8999 23.3521 15.7999 23.4511 15.6999 23.5491C15.1999 24.0421 14.7999 24.2391 14.3999 24.1411C13.8999 24.0421 13.7999 23.6481 13.7999 23.1551V22.6621L13.8999 22.2671L11.6999 23.9441C11.2999 24.2391 10.6999 23.8451 10.7999 23.3521L11.5999 20.2961C10.2999 21.5771 9.59993 22.7601 9.59993 23.8451Z",fill:"#E46F00"}),e.jsx("g",{clipPath:"url(#clip1_102_4438)",children:e.jsx("path",{d:"M29.2198 35.5419H28.38C28.054 35.5415 27.7415 35.4118 27.5111 35.1813C27.2806 34.9507 27.151 34.6382 27.1507 34.3123V33.6677C26.8619 33.5761 26.5815 33.4596 26.3129 33.3194L25.8584 33.7768C25.6273 34.0063 25.3149 34.1352 24.9892 34.1356C24.6635 34.1359 24.3508 34.0075 24.1193 33.7784L23.5224 33.1827C23.2929 32.9522 23.164 32.6402 23.1639 32.315C23.1637 31.9897 23.2923 31.6776 23.5216 31.4469L23.9805 30.9879C23.8406 30.7186 23.724 30.4379 23.6318 30.1489H22.9873C22.6614 30.1486 22.349 30.0191 22.1185 29.7887C21.888 29.5583 21.7584 29.2459 21.7581 28.92V28.0802C21.7591 27.7544 21.8885 27.4421 22.1182 27.211C22.2321 27.0966 22.3675 27.0058 22.5167 26.9441C22.6659 26.8824 22.8259 26.8508 22.9873 26.8513H23.6323C23.7241 26.5627 23.8404 26.2826 23.9801 26.0139L23.5232 25.559C23.2943 25.3277 23.1656 25.0156 23.165 24.6901C23.1644 24.3647 23.2919 24.0521 23.52 23.8199L24.1193 23.2243C24.3491 22.9935 24.6612 22.8635 24.9868 22.8629C25.3125 22.8622 25.6251 22.991 25.8558 23.2208L25.8568 23.2218L26.3129 23.68C26.5818 23.5403 26.8621 23.4238 27.1508 23.3316V22.6879C27.1506 22.5265 27.1823 22.3667 27.244 22.2176C27.3056 22.0685 27.396 21.933 27.51 21.8188C27.6241 21.7046 27.7595 21.614 27.9085 21.5521C28.0575 21.4903 28.2173 21.4584 28.3787 21.4583H29.2198C29.5458 21.4587 29.8583 21.5884 30.0887 21.8189C30.3191 22.0494 30.4487 22.362 30.4491 22.6879V23.3324C30.7379 23.424 31.0182 23.5406 31.2869 23.6808L31.7414 23.2234C31.8552 23.1093 31.9905 23.0187 32.1393 22.9569C32.2882 22.895 32.4478 22.8631 32.609 22.8629C32.7701 22.8627 32.9298 22.8943 33.0788 22.9558C33.2278 23.0173 33.3632 23.1076 33.4773 23.2215L33.4841 23.2283L34.0737 23.8175C34.3046 24.0477 34.4346 24.3602 34.4351 24.6863C34.4355 25.0123 34.3065 25.3252 34.0762 25.5561L34.0733 25.559L33.6192 26.0123C33.7591 26.2815 33.8758 26.5622 33.9679 26.8513H34.6125C34.9383 26.8516 35.2508 26.9811 35.4813 27.2115C35.7117 27.4419 35.8414 27.7543 35.8417 28.0802V28.92C35.8414 29.2459 35.7117 29.5583 35.4813 29.7887C35.2508 30.0191 34.9383 30.1486 34.6125 30.1489H33.9675C33.8753 30.4382 33.7587 30.7191 33.6188 30.9887L34.0749 31.4477C34.3049 31.6756 34.4348 31.9855 34.4363 32.3093C34.4377 32.633 34.3104 32.9441 34.0825 33.174L34.0705 33.186L33.4829 33.7768C33.2518 34.0063 32.9394 34.1353 32.6137 34.1356C32.288 34.1359 31.9753 34.0076 31.7438 33.7785L31.2869 33.3203C31.018 33.4599 30.7377 33.5765 30.449 33.6686V34.3123C30.4487 34.6383 30.3191 34.9508 30.0887 35.1813C29.8582 35.4118 29.5458 35.5415 29.2198 35.5419ZM26.2389 32.0491C26.373 32.0493 26.5047 32.0858 26.6197 32.1549C26.9721 32.3679 27.3543 32.5273 27.7537 32.6277C27.9151 32.6675 28.0585 32.7604 28.1608 32.8915C28.2631 33.0225 28.3183 33.1841 28.3177 33.3504V34.3123C28.3176 34.3205 28.3191 34.3285 28.3222 34.3361C28.3252 34.3437 28.3298 34.3506 28.3355 34.3564C28.3412 34.3622 28.348 34.3668 28.3555 34.37C28.363 34.3732 28.371 34.3749 28.3792 34.375H29.2198C29.228 34.375 29.236 34.3734 29.2436 34.3703C29.2511 34.3672 29.258 34.3626 29.2638 34.3569C29.2695 34.3511 29.2741 34.3443 29.2773 34.3368C29.2804 34.3293 29.282 34.3212 29.2821 34.313V33.3471C29.2827 33.1794 29.3399 33.0168 29.4445 32.8856C29.549 32.7544 29.6948 32.6624 29.8582 32.6245C30.2523 32.5246 30.6294 32.3669 30.9772 32.1565C31.1195 32.0706 31.2866 32.035 31.4516 32.0554C31.6165 32.0757 31.7699 32.1509 31.887 32.2688L32.5682 32.9533C32.5807 32.9644 32.5969 32.9704 32.6137 32.9701C32.6304 32.9698 32.6464 32.9632 32.6585 32.9516L33.2481 32.3583L33.2449 32.3559L33.2481 32.2697L32.5666 31.5844C32.4497 31.4683 32.375 31.3166 32.3544 31.1532C32.3337 30.9898 32.3683 30.8242 32.4526 30.6827C32.6669 30.3294 32.8269 29.9459 32.9275 29.545C32.9664 29.3837 33.0586 29.2403 33.1893 29.1381C33.32 29.0359 33.4814 28.9808 33.6473 28.9819H34.6125C34.6289 28.982 34.6447 28.9755 34.6563 28.964C34.668 28.9524 34.6746 28.9367 34.6747 28.9203V28.0802C34.6747 28.072 34.6731 28.064 34.67 28.0565C34.6669 28.049 34.6623 28.0421 34.6566 28.0364C34.6508 28.0307 34.644 28.0261 34.6365 28.023C34.6289 28.0199 34.6209 28.0183 34.6128 28.0183H33.6473C33.4798 28.0189 33.3171 27.9625 33.1858 27.8584C33.0546 27.7543 32.9626 27.6086 32.9251 27.4454C32.8252 27.0498 32.6669 26.6713 32.4555 26.3224C32.3697 26.1795 32.3344 26.012 32.3553 25.8467C32.3762 25.6814 32.452 25.5279 32.5706 25.4109L33.2494 24.733V24.6427L32.6573 24.051L32.5682 24.047L31.8863 24.7322C31.7696 24.8496 31.6169 24.9245 31.4527 24.945C31.2884 24.9655 31.1221 24.9304 30.9801 24.8453C30.6276 24.6323 30.2454 24.473 29.8461 24.3725C29.6846 24.3327 29.5413 24.2398 29.439 24.1088C29.3367 23.9777 29.2815 23.8161 29.2821 23.6498V22.6879C29.2822 22.6798 29.2806 22.6717 29.2776 22.6641C29.2745 22.6565 29.27 22.6497 29.2643 22.6438C29.2586 22.638 29.2518 22.6334 29.2443 22.6302C29.2368 22.627 29.2287 22.6253 29.2206 22.6253H28.38L28.3177 22.6879V23.6531C28.3171 23.8208 28.2599 23.9834 28.1553 24.1146C28.0507 24.2458 27.905 24.3378 27.7416 24.3757C27.3475 24.4756 26.9704 24.6333 26.6226 24.8437C26.4801 24.9292 26.3132 24.9646 26.1483 24.9442C25.9834 24.9239 25.8301 24.8489 25.7127 24.7314L25.0316 24.047L25.0299 24.0486L24.9412 24.0527L24.3455 24.6443C24.3345 24.657 24.3287 24.6734 24.3293 24.6901C24.3299 24.7069 24.3369 24.7228 24.3487 24.7347L25.0311 25.4134C25.1486 25.5295 25.2239 25.6816 25.2449 25.8455C25.266 26.0093 25.2315 26.1755 25.1471 26.3175C24.9328 26.6709 24.7728 27.0544 24.6722 27.4552C24.6333 27.6165 24.5411 27.7599 24.4104 27.8622C24.2797 27.9644 24.1183 28.0195 23.9524 28.0184H22.9873L22.9251 28.0803V28.92C22.9251 28.9281 22.9267 28.9362 22.9298 28.9437C22.9329 28.9512 22.9375 28.958 22.9432 28.9638C22.949 28.9695 22.9558 28.9741 22.9633 28.9772C22.9708 28.9803 22.9789 28.9819 22.987 28.9819H23.9525C24.12 28.9813 24.2827 29.0377 24.414 29.1418C24.5452 29.2459 24.6371 29.3915 24.6747 29.5548C24.7746 29.9504 24.9328 30.3289 25.1443 30.6778C25.2301 30.8206 25.2654 30.9882 25.2445 31.1535C25.2236 31.3188 25.1478 31.4722 25.0291 31.5893L24.3472 32.2712C24.3358 32.2829 24.3294 32.2986 24.3296 32.3149C24.3298 32.3313 24.3364 32.3468 24.348 32.3583L24.9425 32.9524C24.9549 32.964 24.9714 32.9704 24.9884 32.9703C25.0055 32.9701 25.0218 32.9634 25.034 32.9515L25.7136 32.2679C25.7823 32.1986 25.8641 32.1435 25.9543 32.1059C26.0445 32.0684 26.1412 32.049 26.2389 32.0491ZM28.7999 31.2361C28.0769 31.234 27.3842 30.9451 26.8741 30.4328C26.3639 29.9204 26.0779 29.2266 26.079 28.5036C26.08 27.7805 26.3679 27.0875 26.8796 26.5766C27.3912 26.0657 28.0846 25.7788 28.8076 25.7788C29.5307 25.7788 30.2241 26.0657 30.7357 26.5766C31.2473 27.0875 31.5353 27.7805 31.5363 28.5036C31.5373 29.2266 31.2514 29.9204 30.7412 30.4328C30.231 30.9451 29.5384 31.234 28.8154 31.2361C28.8102 31.2361 28.8051 31.2361 28.7999 31.2361ZM28.7982 26.9303C28.4087 26.9307 28.0333 27.0759 27.7449 27.3377C27.4565 27.5996 27.2758 27.9593 27.2379 28.3469C27.2 28.7346 27.3076 29.1225 27.5398 29.4353C27.772 29.748 28.1122 29.9632 28.4942 30.0391C28.8763 30.1149 29.2729 30.046 29.607 29.8456C29.941 29.6453 30.1887 29.3279 30.3017 28.9552C30.4148 28.5824 30.3852 28.181 30.2187 27.8288C30.0522 27.4767 29.7607 27.199 29.4008 27.0499C29.2098 26.9707 29.005 26.93 28.7982 26.9303Z",fill:"#E46F00"})})]}),e.jsxs("defs",{children:[e.jsx("clipPath",{id:"clip0_102_4438",children:e.jsx("rect",{width:"36",height:"36",fill:"white",transform:"translate(0.799927)"})}),e.jsx("clipPath",{id:"clip1_102_4438",children:e.jsx("rect",{width:"15",height:"15",fill:"white",transform:"translate(21.2999 21)"})})]})]}),zg=()=>e.jsxs("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_102_4446)",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.08705 30.6936V32.4355H5.34511V30.6936H7.08705ZM10.5709 30.6936V32.4355H8.82895V30.6936H10.5709ZM14.0548 30.6936V32.4355H12.3129V30.6936H14.0548ZM21.0225 30.6936V32.4355H19.2806V30.6936H21.0225ZM17.5387 30.6936V32.4355H15.7967V30.6936H17.5387ZM3.22576 30.1129C3.34144 30.2154 3.468 30.305 3.60318 30.38V32.2671C3.05702 32.1033 2.55118 31.827 2.11818 31.456C1.68517 31.085 1.33459 30.6275 1.08895 30.1129H3.22576ZM2.44189 26.629V28.371H0.699951V26.629H2.44189ZM2.44189 23.1451V24.8871H0.699951V23.1452L2.44189 23.1451ZM3.60318 18.6684V20.5497C3.25113 20.7555 2.95891 21.0497 2.75543 21.4032H0.868341C1.06108 20.756 1.41206 20.1671 1.88955 19.6896C2.36704 19.2121 2.956 18.8611 3.60318 18.6684ZM14.0548 18.5V20.2419H12.3129V18.5H14.0548ZM10.5709 18.5V20.2419H8.82895V18.5H10.5709ZM7.08705 18.5V20.2419H5.34511V18.5H7.08705ZM21.0225 18.5V20.2419H19.2806V18.5H21.0225ZM17.5387 18.5V20.2419H15.7967V18.5H17.5387Z",fill:"#7CC33F"}),e.jsx("path",{opacity:"0.1",fillRule:"evenodd",clipRule:"evenodd",d:"M31.7555 32.5H25.6444C25.0123 32.5159 24.3998 32.2802 23.9414 31.8447C23.483 31.4092 23.2163 30.8095 23.2 30.1774V4.8226C23.2163 4.19054 23.483 3.59084 23.9414 3.15532C24.3998 2.71981 25.0123 2.48411 25.6444 2.50002H31.7555C32.3876 2.48411 33.0001 2.71981 33.4585 3.15532C33.9169 3.59084 34.1836 4.19054 34.2 4.8226V30.1774C34.1836 30.8095 33.9169 31.4092 33.4585 31.8447C33.0001 32.2802 32.3876 32.5159 31.7555 32.5Z",fill:"#7CC33F"}),e.jsx("path",{d:"M31.7555 1.50003H25.6444C24.7459 1.49644 23.8803 1.8384 23.2269 2.45516C22.9034 2.75893 22.6454 3.12565 22.4688 3.53277C22.2922 3.9399 22.2007 4.37883 22.2 4.82261V30.1774C22.2007 30.6212 22.2922 31.0602 22.4688 31.4673C22.6454 31.8744 22.9034 32.2411 23.227 32.5449C23.8804 33.1616 24.7459 33.5036 25.6444 33.5H31.7555C32.654 33.5036 33.5196 33.1617 34.173 32.5449C34.4965 32.2411 34.7545 31.8744 34.9311 31.4673C35.1077 31.0602 35.1992 30.6212 35.2 30.1774V4.82261C35.1992 4.37883 35.1077 3.93989 34.9311 3.53277C34.7545 3.12564 34.4965 2.75893 34.173 2.45516C33.5195 1.83841 32.654 1.49645 31.7555 1.50003ZM25.6444 2.50003H31.7555C32.3977 2.49645 33.0166 2.73995 33.4842 3.18011C33.7094 3.39048 33.889 3.64476 34.0121 3.92725C34.1352 4.20974 34.1992 4.51446 34.2 4.82261V30.1774C34.1992 30.4856 34.1352 30.7903 34.0121 31.0728C33.889 31.3553 33.7094 31.6096 33.4842 31.8199C33.0166 32.2601 32.3977 32.5036 31.7555 32.5H25.6444C25.0022 32.5036 24.3833 32.2601 23.9157 31.8199C23.6905 31.6096 23.5109 31.3553 23.3878 31.0728C23.2647 30.7903 23.2007 30.4856 23.2 30.1774V4.82261C23.2007 4.51446 23.2647 4.20974 23.3878 3.92725C23.5109 3.64476 23.6905 3.39048 23.9157 3.18011C24.3833 2.73995 25.0022 2.49645 25.6444 2.50003Z",fill:"#7CC33F"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.4553 2.5H16.8963C15.9655 2.50459 15.0454 2.69949 14.1927 3.07271C13.3399 3.44594 12.5725 3.9896 11.9376 4.67029C10.6251 6.0979 9.90577 7.97187 9.92589 9.911V11.5612H7.59237C7.5397 11.5608 7.48751 11.5712 7.43906 11.5919C7.3906 11.6125 7.34692 11.6429 7.31074 11.6812C7.23975 11.7612 7.2004 11.8643 7.20009 11.9712C7.19754 12.066 7.22974 12.1585 7.29062 12.2312L10.811 16.3718C10.8461 16.412 10.8894 16.4443 10.9379 16.4664C10.9865 16.4885 11.0393 16.4999 11.0927 16.4999C11.146 16.4999 11.1988 16.4885 11.2474 16.4664C11.2959 16.4443 11.3392 16.412 11.3743 16.3718L14.8947 12.2312C14.9556 12.1585 14.9878 12.066 14.9852 11.9712C14.9849 11.8643 14.9456 11.7612 14.8746 11.6812C14.8392 11.6419 14.7957 11.6108 14.747 11.5901C14.6984 11.5694 14.6458 11.5595 14.5929 11.5612H12.189V9.911C12.1545 8.63573 12.6278 7.39894 13.5048 6.47249C14.3819 5.54604 15.5909 5.00573 16.8661 4.97034H18.4251C18.6362 4.96315 18.8359 4.873 18.9809 4.71945C19.1259 4.56591 19.2045 4.36136 19.1996 4.15023V3.32011C19.2048 3.11392 19.1304 2.91365 18.9918 2.76091C18.8532 2.60818 18.661 2.51473 18.4553 2.5Z",fill:"#7CC33F"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_102_4446",children:e.jsx("rect",{width:"36",height:"36",fill:"white",transform:"translate(0.199951)"})})})]}),qg=()=>e.jsxs("svg",{width:"37",height:"36",viewBox:"0 0 37 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_102_4450)",children:[e.jsx("path",{d:"M21.7799 2.00001C22.3724 1.99837 22.9457 2.20975 23.3954 2.5956L23.5399 2.73001L28.6599 7.83001C29.0818 8.25096 29.3408 8.8078 29.391 9.40165L29.3999 9.60001V19.138L29.3911 19.1383C29.061 19.1609 28.7309 19.1954 28.4007 19.2418L28.3999 10.018L23.3999 10.0184C22.8953 10.0184 22.4094 9.82768 22.0395 9.48446C21.6696 9.14124 21.4431 8.67089 21.4054 8.1677L21.3999 8.01845V3.00001H6.3999C5.8953 3.00002 5.40934 3.19076 5.03945 3.534C4.66956 3.87723 4.44307 4.34759 4.40539 4.85079L4.3999 5.00001V31C4.39992 31.5046 4.59065 31.9906 4.93388 32.3604C5.27711 32.7303 5.74745 32.9568 6.25064 32.9945L6.3999 33H26.3999C26.9045 33 27.3905 32.8093 27.7603 32.466C28.1302 32.1228 28.3567 31.6525 28.3944 31.1493L28.3999 31L28.3994 27.9984C28.6794 28.2936 29.021 28.5234 29.3999 28.6715V31C29.3999 31.7652 29.1075 32.5014 28.5827 33.0581C28.0578 33.6148 27.34 33.9499 26.5762 33.9949L26.3999 34H6.3999C5.63477 34 4.89854 33.7077 4.34183 33.1828C3.78512 32.6579 3.44999 31.9401 3.40499 31.1763L3.3999 31V5.00001C3.39992 4.23487 3.69228 3.49866 4.21717 2.94195C4.74206 2.38525 5.45982 2.05012 6.22363 2.00513L6.3999 2.00001H21.7799ZM22.4014 3.13545L22.3999 8.01845C22.3999 8.26348 22.4899 8.49998 22.6527 8.68307C22.8155 8.86617 23.0399 8.98312 23.2833 9.01173L23.3999 9.01845L28.2819 9.01812C28.2256 8.88467 28.1502 8.76008 28.0582 8.64824L27.9599 8.54001L22.8399 3.44001C22.7131 3.31308 22.5646 3.20992 22.4014 3.13545Z",fill:"#BF5FE9"}),e.jsx("path",{opacity:"0.1",d:"M21.7799 3C22.1776 3.00035 22.5589 3.15862 22.8399 3.44L27.9599 8.54C28.2413 8.82103 28.3996 9.20231 28.3999 9.6L28.4007 19.2418C27.2589 19.4055 26.1394 19.6987 25.0639 20.1156C23.271 20.7784 21.6316 21.7989 20.2454 23.115C18.8593 24.4312 17.7553 26.0156 17.0006 27.7718L16.9502 27.8963L16.8672 28.1224L16.8158 28.3551L16.7913 28.4866C16.6906 29.1522 16.8346 29.8317 17.1967 30.3991C17.5588 30.9665 18.1144 31.3834 18.7605 31.5724C19.4065 31.7614 20.0992 31.7096 20.71 31.4268C21.3209 31.144 21.8084 30.6492 22.0822 30.0343C22.5397 28.9455 23.2181 27.9633 24.0744 27.1499C24.9307 26.3366 25.9464 25.7096 27.0573 25.3086L27.4047 25.1819C27.5202 25.142 27.6354 25.1045 27.7503 25.0692L27.8349 25.045L27.8262 25.0665C27.6334 25.5592 27.5849 26.0966 27.6864 26.6158C27.7879 27.1351 28.0352 27.6146 28.3994 27.9985L28.3999 31C28.3999 31.5304 28.1892 32.0391 27.8141 32.4142C27.439 32.7893 26.9303 33 26.3999 33H6.3999C5.86947 33 5.36076 32.7893 4.98569 32.4142C4.61062 32.0391 4.3999 31.5304 4.3999 31V5C4.3999 4.46957 4.61062 3.96086 4.98569 3.58579C5.36076 3.21071 5.86947 3 6.3999 3H21.7799Z",fill:"#BF5FE9"}),e.jsx("path",{d:"M19.1528 28.3413C19.8007 26.8251 20.7516 25.4572 21.9473 24.3218C23.1429 23.1864 24.558 22.3074 26.1057 21.7388C28.5789 20.7439 31.3113 20.5935 33.8787 21.3109L31.6875 18.0846L31.6459 18.0162C31.551 17.8399 31.5273 17.6338 31.5799 17.4406C31.6325 17.2474 31.7573 17.0817 31.9285 16.9778C32.0998 16.8739 32.3043 16.8398 32.5 16.8824C32.6957 16.925 32.8675 17.0411 32.9801 17.2068L36.2801 22.0664L36.3216 22.1347C36.4118 22.3127 36.4352 22.517 36.3877 22.7107C36.3402 22.9045 36.225 23.0748 36.0627 23.1909L35.8778 23.3174C35.8572 23.3329 35.836 23.3473 35.814 23.3606L31.1776 26.486L31.1091 26.5273C30.9325 26.6218 30.7263 26.6448 30.5332 26.5916C30.3401 26.5384 30.1748 26.4131 30.0715 26.2415C29.9681 26.07 29.9346 25.8652 29.9779 25.6697C30.0211 25.4741 30.1378 25.3026 30.3039 25.1906L33.7142 22.8908C31.3993 22.1796 28.91 22.2879 26.6656 23.1975C25.3095 23.6926 24.0696 24.4611 23.0227 25.4552C21.9759 26.4494 21.1445 27.6481 20.5802 28.9769C20.4959 29.1661 20.3399 29.3142 20.1464 29.3885C19.953 29.4627 19.738 29.4571 19.5487 29.3728C19.3594 29.2885 19.2113 29.1325 19.1371 28.9391C19.0628 28.7456 19.0685 28.5306 19.1528 28.3413Z",fill:"#BF5FE9"}),e.jsx("path",{d:"M8.8999 17.05H24.8999C25.0325 17.05 25.1597 17.1027 25.2535 17.1965C25.3472 17.2903 25.3999 17.4174 25.3999 17.55C25.3999 17.6827 25.3472 17.8098 25.2535 17.9036C25.1597 17.9974 25.0325 18.05 24.8999 18.05H8.8999C8.76729 18.05 8.64012 17.9974 8.54635 17.9036C8.45258 17.8098 8.3999 17.6827 8.3999 17.55C8.3999 17.4174 8.45258 17.2903 8.54635 17.1965C8.64012 17.1027 8.76729 17.05 8.8999 17.05ZM8.8999 21.05H20.8999C21.0325 21.05 21.1597 21.1027 21.2535 21.1965C21.3472 21.2903 21.3999 21.4174 21.3999 21.55C21.3999 21.6827 21.3472 21.8098 21.2535 21.9036C21.1597 21.9974 21.0325 22.05 20.8999 22.05H8.8999C8.76729 22.05 8.64012 21.9974 8.54635 21.9036C8.45258 21.8098 8.3999 21.6827 8.3999 21.55C8.3999 21.4174 8.45258 21.2903 8.54635 21.1965C8.64012 21.1027 8.76729 21.05 8.8999 21.05ZM8.8999 13.05H18.8999C19.0325 13.05 19.1597 13.1027 19.2535 13.1965C19.3472 13.2903 19.3999 13.4174 19.3999 13.55C19.3999 13.6827 19.3472 13.8098 19.2535 13.9036C19.1597 13.9974 19.0325 14.05 18.8999 14.05H8.8999C8.76729 14.05 8.64012 13.9974 8.54635 13.9036C8.45258 13.8098 8.3999 13.6827 8.3999 13.55C8.3999 13.4174 8.45258 13.2903 8.54635 13.1965C8.64012 13.1027 8.76729 13.05 8.8999 13.05Z",fill:"#BF5FE9"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_102_4450",children:e.jsx("rect",{width:"36",height:"36",fill:"white",transform:"translate(0.399902)"})})})]}),Gg=()=>e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_102_4442)",children:[e.jsx("path",{d:"M31.26 5.83001L26.14 0.73001C25.9096 0.497859 25.6354 0.313784 25.3332 0.188469C25.0311 0.063154 24.7071 -0.000905047 24.38 9.65928e-06H9C8.20435 9.65928e-06 7.44129 0.31608 6.87868 0.878689C6.31607 1.4413 6 2.20436 6 3.00001V19.73C6.33 19.66 6.66 19.6 7 19.56V3.00001C7 2.46958 7.21071 1.96087 7.58579 1.5858C7.96086 1.21072 8.46957 1.00001 9 1.00001H24.38C24.7777 1.00036 25.159 1.15862 25.44 1.44001L30.56 6.54001C30.8414 6.82104 30.9996 7.20232 31 7.60001V29C31 29.5304 30.7893 30.0392 30.4142 30.4142C30.0391 30.7893 29.5304 31 29 31H16.64C16.5444 31.3403 16.4275 31.6743 16.29 32H29C29.7956 32 30.5587 31.6839 31.1213 31.1213C31.6839 30.5587 32 29.7957 32 29V7.60001C31.9963 6.93552 31.7304 6.29937 31.26 5.83001Z",fill:"#0265DC"}),e.jsx("path",{opacity:"0.1",d:"M30.56 6.54L25.44 1.44C25.159 1.15862 24.7777 1.00035 24.38 1H9C8.46957 1 7.96086 1.21071 7.58579 1.58579C7.21071 1.96086 7 2.46957 7 3V19.56C7.33181 19.5198 7.66576 19.4998 8 19.5C9.39496 19.5009 10.7706 19.826 12.0184 20.4498C13.2661 21.0735 14.3518 21.9787 15.1897 23.094C16.0276 24.2093 16.5948 25.504 16.8465 26.8761C17.0982 28.2482 17.0275 29.6599 16.64 31H29C29.5304 31 30.0391 30.7893 30.4142 30.4142C30.7893 30.0391 31 29.5304 31 29V7.6C30.9996 7.20231 30.8414 6.82103 30.56 6.54Z",fill:"#0265DC"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.27051 20.7705C6.28675 20.7878 4.38915 21.5836 2.98637 22.9864C1.58358 24.3891 0.787841 26.2867 0.770508 28.2705C0.787841 30.2543 1.58358 32.1519 2.98637 33.5546C4.38915 34.9574 6.28675 35.7532 8.27051 35.7705C10.254 35.7523 12.1511 34.9563 13.5537 33.5537C14.9563 32.1511 15.7523 30.254 15.7705 28.2705C15.7523 26.287 14.9563 24.3899 13.5537 22.9873C12.1511 21.5847 10.254 20.7887 8.27051 20.7705ZM14.6425 29.6344C14.5664 29.974 14.463 30.3068 14.3332 30.6296C14.303 30.7063 14.2817 30.7871 14.2487 30.8618C14.0917 31.2268 13.9017 31.5767 13.6812 31.9072C13.6654 31.9309 13.6445 31.9508 13.6282 31.9745C13.4154 32.2827 13.1766 32.5722 12.9145 32.8397C12.8717 32.8861 12.8216 32.9224 12.7752 32.966C12.5101 33.2255 12.2234 33.4619 11.9183 33.6728L11.9067 33.6807C10.8774 34.3683 9.67291 34.7469 8.43537 34.7721C10.7286 33.044 10.4481 32.0321 11.7474 30.5869C12.1821 30.0073 10.4434 29.8625 8.99496 29.2829C7.11137 28.4135 7.83397 29.8625 6.38692 28.2686C5.51757 27.2544 5.22592 25.8073 7.83583 26.9646C8.12561 27.2544 8.27051 25.9504 8.85007 25.2259C9.13939 24.9366 9.13939 24.6468 9.28475 24.2121C9.23604 23.9869 9.10742 23.7869 8.92266 23.6492C8.7379 23.5115 8.50952 23.4454 8.27976 23.4631C8.05 23.4807 7.83442 23.581 7.67289 23.7454C7.51137 23.9097 7.41484 24.127 7.40116 24.357C7.40116 24.6468 6.38692 22.6183 7.11137 22.6183C6.61698 22.592 6.12897 22.4944 5.66246 22.3286C5.79853 22.2589 5.9411 22.2041 6.08041 22.147C6.75796 21.8971 7.47276 21.7632 8.19481 21.7508C8.21987 21.7495 8.24498 21.7495 8.27004 21.7508C8.41493 21.606 7.40069 22.7651 7.69048 22.7651C7.98026 22.7651 9.71896 23.1998 9.57407 23.3447C10.0719 22.4739 9.39435 21.9269 8.64202 21.7885C9.66164 21.8452 10.6532 22.1431 11.5352 22.6578C11.6926 22.7539 11.8603 22.831 12.0094 22.9416C12.0646 22.9806 12.1111 23.0298 12.1654 23.0702C12.4902 23.3234 12.7879 23.6096 13.0538 23.9242C12.764 24.0691 12.764 24.5033 12.9089 24.7931C13.1973 25.0815 13.2005 25.082 13.7717 24.7964C13.8646 24.9422 13.9385 25.0991 14.0193 25.2524C13.9324 25.2863 13.899 25.3731 13.7782 25.3731C13.3386 25.7897 13.0787 26.3613 13.0538 26.9665C13.0538 29.2847 13.6334 28.4154 14.3578 28.7052C14.4602 28.7995 14.5958 28.8496 14.7349 28.8445C14.7237 29.0692 14.7011 29.2932 14.6671 29.5156C14.6564 29.555 14.6513 29.5954 14.6425 29.6344ZM5.92484 34.3378C4.73508 33.8128 3.71466 32.9673 2.97752 31.8959C2.24038 30.8245 1.81553 29.5694 1.75038 28.2705C1.75518 27.9132 1.78966 27.5568 1.85348 27.2052C1.87624 27.0691 1.89528 26.9326 1.92639 26.7988C1.99116 26.5239 2.07385 26.2535 2.17391 25.9894C2.24311 25.806 2.32159 25.6262 2.40611 25.4502C2.46555 25.3253 2.53382 25.2064 2.60162 25.0861C2.75565 24.8107 2.92949 24.5469 3.12175 24.2967C3.20859 24.1838 3.30147 24.07 3.39435 23.9623C3.51741 23.823 3.64001 23.6837 3.77515 23.5527C3.95998 23.3803 4.15474 23.2189 4.35843 23.0693C4.49357 24.3645 3.34559 25.0894 3.77887 26.5332C4.35843 28.4168 5.08289 27.5474 5.95224 28.8515C6.95719 30.2869 8.5236 32.7176 7.70673 34.7349C7.09696 34.6876 6.497 34.5539 5.92484 34.3378Z",fill:"#0265DC"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3208 7C11.2391 6.99984 11.1604 7.03087 11.1008 7.08676C11.0411 7.14266 11.0051 7.21919 11 7.30075V9.65664C11 9.69601 11.008 9.73497 11.0235 9.77116C11.039 9.80735 11.0617 9.84001 11.0902 9.86717C11.1186 9.89623 11.1532 9.91853 11.1914 9.93241C11.2295 9.9463 11.2703 9.95141 11.3108 9.94737H11.6717C11.7119 9.94946 11.7522 9.94344 11.7901 9.92967C11.828 9.91589 11.8627 9.89464 11.8922 9.86717C11.9435 9.80504 11.9718 9.72716 11.9724 9.64661V7.93233H14.4887V14.0175H13.3458C13.2588 14.0247 13.1773 14.0632 13.1164 14.1259C13.0556 14.1885 13.0196 14.2712 13.015 14.3584V14.6992C13.0249 14.7825 13.0651 14.8592 13.128 14.9147C13.1908 14.9702 13.272 15.0006 13.3558 15H16.6741C16.7162 15 16.7579 14.9917 16.7968 14.9756C16.8358 14.9595 16.8711 14.9358 16.9009 14.906C16.9307 14.8762 16.9543 14.8409 16.9704 14.802C16.9866 14.763 16.9949 14.7213 16.9949 14.6792V14.2882C16.9911 14.2486 16.9795 14.2102 16.9608 14.1751C16.9421 14.14 16.9167 14.109 16.8859 14.0839C16.8551 14.0587 16.8197 14.0399 16.7816 14.0285C16.7435 14.0171 16.7036 14.0134 16.664 14.0175H15.471V8.00252H18.0174V9.69674C18.0134 9.73635 18.0175 9.77636 18.0296 9.8143C18.0417 9.85224 18.0614 9.88729 18.0876 9.91729C18.1152 9.94447 18.1482 9.96564 18.1844 9.97944C18.2207 9.99324 18.2594 9.99939 18.2981 9.99749H18.7191C18.7563 9.99923 18.7935 9.99296 18.8281 9.97913C18.8627 9.9653 18.8939 9.94421 18.9196 9.91729C18.9463 9.8893 18.9672 9.85626 18.981 9.82011C18.9947 9.78396 19.0011 9.74542 18.9998 9.70676V7.30076C18.9973 7.22179 18.9648 7.14674 18.909 7.09087C18.8531 7.035 18.7781 7.00251 18.6991 7H11.3208Z",fill:"#0265DC"}),e.jsx("path",{d:"M26.53 12H19.47C19.2104 12 19 12.2104 19 12.47V12.53C19 12.7896 19.2104 13 19.47 13H26.53C26.7896 13 27 12.7896 27 12.53V12.47C27 12.2104 26.7896 12 26.53 12Z",fill:"#0265DC"}),e.jsx("path",{d:"M26.53 14H19.47C19.2104 14 19 14.2104 19 14.47V14.53C19 14.7896 19.2104 15 19.47 15H26.53C26.7896 15 27 14.7896 27 14.53V14.47C27 14.2104 26.7896 14 26.53 14Z",fill:"#0265DC"}),e.jsx("path",{d:"M26.53 16H13.47C13.2104 16 13 16.2104 13 16.47V16.53C13 16.7896 13.2104 17 13.47 17H26.53C26.7896 17 27 16.7896 27 16.53V16.47C27 16.2104 26.7896 16 26.53 16Z",fill:"#0265DC"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_102_4442",children:e.jsx("rect",{width:"36",height:"36",fill:"white"})})})]}),Jg=()=>e.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"0.5",y:"0.5",width:"29",height:"29",rx:"1.5",fill:"#E9F0E3"}),e.jsx("rect",{x:"0.5",y:"0.5",width:"29",height:"29",rx:"1.5",stroke:"#65a30d"}),e.jsx("path",{d:"M12.0023 19.5535C11.4694 19.5535 10.9506 19.2775 10.6655 18.7836C10.2407 18.0471 10.4938 17.1031 11.2295 16.6783C11.5854 16.4721 12.0006 16.4182 12.399 16.5242C12.7966 16.6308 13.1288 16.8863 13.3345 17.2426C13.5404 17.5988 13.5949 18.0142 13.4886 18.4115C13.3819 18.8094 13.127 19.1416 12.7705 19.3473C12.5285 19.4873 12.2637 19.5535 12.0023 19.5535ZM11.4448 18.3336C11.6215 18.6389 12.0138 18.7437 12.3205 18.568C12.4687 18.4824 12.5748 18.3441 12.619 18.1789C12.6633 18.0137 12.6407 17.8408 12.5552 17.6926C12.4693 17.5443 12.3313 17.4383 12.1658 17.3937C12.0009 17.3498 11.828 17.3726 11.6795 17.4576C11.3733 17.6346 11.2681 18.0271 11.4448 18.3336Z",fill:"#65a30d"}),e.jsx("path",{d:"M12.2842 23.4128H11.7161C11.0968 23.4128 10.5715 22.9294 10.5202 22.3118L10.4523 21.498C10.2065 21.389 9.97385 21.2548 9.75588 21.0954L9.01643 21.444C8.45627 21.7071 7.77482 21.495 7.46545 20.9577L7.18157 20.4667C6.86721 19.9212 7.01985 19.2397 7.53665 18.8806L8.20813 18.4147C8.17913 18.1464 8.17913 17.8774 8.20754 17.6103L7.53635 17.1444C7.01956 16.7847 6.86692 16.1032 7.18157 15.5583L7.46545 15.0667C7.77541 14.5306 8.45598 14.3167 9.01643 14.581L9.75412 14.929C9.86428 14.8481 9.97649 14.7749 10.0925 14.7081C10.2068 14.6419 10.3272 14.581 10.4523 14.5259L10.5199 13.7126C10.5718 13.0956 11.0968 12.6128 11.7158 12.6128H12.2839C12.9032 12.6128 13.4285 13.0962 13.4798 13.7132L13.5478 14.5271C13.793 14.636 14.0259 14.7702 14.2439 14.9296L14.9836 14.581C15.5429 14.3161 16.2246 14.5294 16.5346 15.0673L16.8185 15.5589C17.1278 16.0944 16.972 16.7911 16.4634 17.1444L15.7919 17.6108C15.8206 17.8792 15.8209 18.1482 15.7925 18.4153L16.4634 18.8806C16.9805 19.2403 17.1331 19.9218 16.8185 20.4667L16.5349 20.9589C16.2249 21.495 15.5446 21.7095 14.9836 21.444L14.2456 21.0966C14.1357 21.1769 14.0241 21.2501 13.9084 21.3169C13.9084 21.3175 13.9081 21.3175 13.9078 21.3175C13.7927 21.3843 13.6734 21.444 13.5478 21.4991L13.4801 22.3124C13.4282 22.9294 12.9029 23.4128 12.2842 23.4128ZM9.81593 20.1198C9.92111 20.1198 10.0251 20.1567 10.1083 20.2276C10.3817 20.4614 10.691 20.6401 11.0274 20.7591C11.1943 20.8177 11.3112 20.9694 11.3262 21.1458L11.4173 22.2374C11.4299 22.3921 11.5614 22.5128 11.7161 22.5128H12.2842C12.4389 22.5128 12.5701 22.3921 12.583 22.2374L12.6739 21.1464C12.6885 20.9706 12.8051 20.8194 12.9715 20.7597C13.1505 20.6964 13.3093 20.6237 13.4573 20.5388C13.6073 20.4515 13.7499 20.3501 13.8932 20.2277C14.0282 20.114 14.2175 20.0882 14.3766 20.1632L15.3671 20.6296C15.5089 20.697 15.6785 20.6425 15.7553 20.5089L16.0389 20.0167C16.1177 19.8802 16.0796 19.7097 15.9501 19.62L15.051 18.996C14.9054 18.8952 14.8324 18.7183 14.865 18.5443C14.93 18.1933 14.93 17.8359 14.8644 17.4819C14.8321 17.3079 14.9048 17.131 15.0501 17.0302L15.9501 16.405C16.0793 16.3154 16.1177 16.1448 16.0392 16.0089L15.755 15.5167C15.6771 15.3819 15.5074 15.3286 15.3674 15.3954L14.376 15.8624C14.216 15.9374 14.0271 15.9122 13.892 15.7974C13.6175 15.5636 13.3081 15.3843 12.9727 15.2659C12.8057 15.2073 12.6888 15.0556 12.6738 14.8792L12.5827 13.7876C12.5701 13.6335 12.4389 13.5128 12.2839 13.5128H11.7158C11.5611 13.5128 11.4299 13.6335 11.417 13.7876L11.3262 14.8792C11.3115 15.0556 11.1943 15.2073 11.0273 15.2659C10.8539 15.3275 10.6907 15.4019 10.5422 15.4874C10.3922 15.5741 10.2501 15.6749 10.1077 15.7974C9.97295 15.9116 9.7834 15.9368 9.62315 15.8624L8.63262 15.3954C8.49287 15.3292 8.32266 15.3825 8.24473 15.5167L7.96085 16.0083C7.88233 16.1448 7.92042 16.3154 8.04991 16.405L8.94932 17.0296C9.09464 17.1304 9.16759 17.3073 9.13507 17.482C9.06973 17.8318 9.07003 18.1892 9.13565 18.5437C9.16788 18.7177 9.09523 18.8946 8.94991 18.9954L8.04991 19.62C7.92071 19.7097 7.88233 19.8808 7.96114 20.0173L8.24503 20.5083C8.32237 20.6425 8.49229 20.6958 8.63263 20.6296L9.62403 20.1626C9.68526 20.1339 9.7509 20.1198 9.81593 20.1198Z",fill:"#65a30d"}),e.jsx("line",{x1:"21.5",y1:"7",x2:"21.5",y2:"30",stroke:"#65a30d"}),e.jsx("line",{y1:"7.5",x2:"30",y2:"7.5",stroke:"#65a30d"})]}),Wg=()=>e.jsxs("svg",{width:"37",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M29.5 4C30.1345 4.00025 30.7453 4.24167 31.2085 4.67535C31.6717 5.10903 31.9527 5.70256 31.9947 6.3357L32 6.5V13.5C31.9997 14.1345 31.7583 14.7453 31.3246 15.2085C30.891 15.6717 30.2974 15.9527 29.6643 15.9947L29.5 16H5.5C4.86547 15.9997 4.25475 15.7583 3.79155 15.3246C3.32835 14.891 3.0473 14.2974 3.00532 13.6643L3 13.5V6.5C3.00025 5.86547 3.24167 5.25475 3.67535 4.79155C4.10903 4.32835 4.70256 4.0473 5.3357 4.00532L5.5 4H29.5ZM29.5 5H5.5C5.12723 5.00025 4.76788 5.13918 4.4919 5.38976C4.21591 5.64034 4.04302 5.98464 4.00687 6.35565L4 6.5V13.5C4.00025 13.8728 4.13918 14.2321 4.38976 14.5081C4.64034 14.7841 4.98464 14.957 5.35565 14.9931L5.5 15H29.5C29.8728 14.9997 30.2321 14.8608 30.5081 14.6102C30.7841 14.3597 30.957 14.0154 30.9931 13.6444L31 13.5V6.5C30.9997 6.12723 30.8608 5.76788 30.6102 5.4919C30.3597 5.21591 30.0154 5.04302 29.6444 5.00687L29.5 5Z",fill:"#CE2783"}),e.jsx("path",{d:"M13.6786 19C14.2667 19.0002 14.8328 19.2236 15.2627 19.625C15.6926 20.0263 15.9541 20.5758 15.9946 21.1626L16 21.3214V29.6786C15.9998 30.2667 15.7764 30.8328 15.375 31.2627C14.9737 31.6926 14.4242 31.9541 13.8374 31.9946L13.6786 32H5.32143C4.73331 31.9998 4.16718 31.7764 3.73731 31.375C3.30745 30.9737 3.04586 30.4242 3.00536 29.8374L3 29.6786V21.3214C3.00023 20.7333 3.22358 20.1672 3.62496 19.7373C4.02633 19.3074 4.57584 19.0459 5.16257 19.0054L5.32143 19H13.6786ZM13.6786 20H5.32143C4.9944 20.0002 4.67905 20.1216 4.43626 20.3407C4.19348 20.5598 4.04049 20.8611 4.00683 21.1864L4 21.3214V29.6786C4.00023 30.0056 4.12162 30.321 4.34073 30.5637C4.55984 30.8065 4.86113 30.9595 5.18643 30.9932L5.32143 31H13.6786C14.0056 30.9998 14.321 30.8784 14.5637 30.6593C14.8065 30.4402 14.9595 30.1389 14.9932 29.8136L15 29.6786V21.3214C14.9998 20.9944 14.8784 20.679 14.6593 20.4363C14.4402 20.1935 14.1389 20.0405 13.8136 20.0068L13.6786 20Z",fill:"#CE2783"}),e.jsx("path",{opacity:"0.1",fillRule:"evenodd",clipRule:"evenodd",d:"M29.5 4H5.5C4.83703 4.00024 4.20129 4.26371 3.7325 4.7325C3.26371 5.20129 3.00024 5.83703 3 6.5V13.5C3.00024 14.163 3.26371 14.7987 3.7325 15.2675C4.20129 15.7363 4.83703 15.9998 5.5 16H29.5C30.163 15.9998 30.7987 15.7363 31.2675 15.2675C31.7363 14.7987 31.9998 14.163 32 13.5V6.5C31.9998 5.83703 31.7363 5.20129 31.2675 4.7325C30.7987 4.26371 30.163 4.00024 29.5 4Z",fill:"#CE2783"}),e.jsx("path",{opacity:"0.1",fillRule:"evenodd",clipRule:"evenodd",d:"M13.6786 19H5.32143C4.70582 19.0002 4.11548 19.2449 3.68018 19.6802C3.24488 20.1155 3.00023 20.7058 3 21.3214V29.6786C3.00023 30.2942 3.24488 30.8845 3.68018 31.3198C4.11548 31.7551 4.70582 31.9998 5.32143 32H13.6786C14.2942 31.9998 14.8845 31.7551 15.3198 31.3198C15.7551 30.8845 15.9998 30.2942 16 29.6786V21.3214C15.9998 20.7058 15.7551 20.1155 15.3198 19.6802C14.8845 19.2449 14.2942 19.0002 13.6786 19Z",fill:"#CE2783"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 20H31.5C31.6326 20 31.7598 20.0527 31.8536 20.1464C31.9473 20.2402 32 20.3674 32 20.5C32 20.6326 31.9473 20.7598 31.8536 20.8536C31.7598 20.9473 31.6326 21 31.5 21H19.5C19.3674 21 19.2402 20.9473 19.1464 20.8536C19.0527 20.7598 19 20.6326 19 20.5C19 20.3674 19.0527 20.2402 19.1464 20.1464C19.2402 20.0527 19.3674 20 19.5 20Z",fill:"#CE2783"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 25H31.5C31.6326 25 31.7598 25.0527 31.8536 25.1464C31.9473 25.2402 32 25.3674 32 25.5C32 25.6326 31.9473 25.7598 31.8536 25.8536C31.7598 25.9473 31.6326 26 31.5 26H19.5C19.3674 26 19.2402 25.9473 19.1464 25.8536C19.0527 25.7598 19 25.6326 19 25.5C19 25.3674 19.0527 25.2402 19.1464 25.1464C19.2402 25.0527 19.3674 25 19.5 25Z",fill:"#CE2783"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 30H31.5C31.6326 30 31.7598 30.0527 31.8536 30.1464C31.9473 30.2402 32 30.3674 32 30.5C32 30.6326 31.9473 30.7598 31.8536 30.8536C31.7598 30.9473 31.6326 31 31.5 31H19.5C19.3674 31 19.2402 30.9473 19.1464 30.8536C19.0527 30.7598 19 30.6326 19 30.5C19 30.3674 19.0527 30.2402 19.1464 30.1464C19.2402 30.0527 19.3674 30 19.5 30Z",fill:"#CE2783"})]}),Yg=""+new URL("performance.png",import.meta.url).href,Zg=""+new URL("seo.png",import.meta.url).href,bs=["EXPRESS","BACOM","HOMEPAGE","MILO","FEDERAL","GWP_PLAYGROUND","DC","BACOM_PINK","BACOM_BLOG","CC","ADOBE_NEWS","HELPX_INTERNAL","EVENTS_MILO"],Xg=["HELPX"],Mr=[{id:"unity",label:"Unity",service:"Wizard",icon:Wg,route:"/config-mgmt/unity/new",enabled:!0,isExtendedMS:!1,supportedTenants:bs},{id:"bulkops",label:"Bulk Operations",service:"Automation Services",icon:Kg,route:"/bulkops",enabled:!0,isExtendedMS:!1,supportedTenants:bs},{id:"config-mgmt",label:"Configuration Management",service:"Configuration",icon:Hg,route:"/config-mgmt",enabled:!0,isExtendedMS:!1,supportedTenants:bs},{id:"ops-tools",label:"Operation Tools",service:"Tools operation services",icon:Jg,route:"/ops-tools",enabled:!0,isExtendedMS:!1,supportedTenants:bs},{id:"localization",label:"Localization",service:"Translation services",icon:Gg,route:"/localization",enabled:!0,isExtendedMS:!1,supportedTenants:bs},{id:"helpx-authoring",label:"HelpX Authoring",service:"Transformation services",icon:qg,route:"/helpx-authoring",enabled:!0,isExtendedMS:!0,supportedTenants:Xg},{id:"floodgate",label:"Floodgate",service:"Personalization services",icon:zg,route:"https://floodgateui--milo--adobecom.hlx.page/tools/floodgate?ref=floodgateui&repo=milo&owner=ad[]22.xlsx%26action%3Ddefault%26mobileredirect%3Dtrue",enabled:!1,isExtendedMS:!1,supportedTenants:bs}],Gn={home:Mr,my:[{label:"Check page performance",service:"Performance services",icon:Yg,route:"/performance",type:"performance"},{label:"Check SEO Metrics",service:"Performance services",icon:Zg,route:"/performance",type:"seo"}],team:Mr},Qg={home:Gn.home,my:Gn.my,team:Gn.team},ex=({activeTenant:t})=>{const s=ee.useNavigate(),a=ce(r=>r.activeWS);function n(r,l){return r.enabled&&r.supportedTenants.includes(l==null?void 0:l.value)}function o(r){const{route:l,isExtendedMS:i}=r;if(l.startsWith("http")){window.open(l);return}if(i){window.location.href=l;return}s(l)}return e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-gray-700 font-base text-100 font-regular",children:"Adobe Milo Studio"}),e.jsx("h1",{className:"mb-4 font-bold text-gray-800 text-400 font-base",children:a==="my"?"My tools":"Your go-to quick action"}),e.jsx("div",{className:"flex flex-wrap gap-x-200 gap-y-400",children:Qg[a].map(r=>e.jsxs("button",{disabled:!r.enabled,onClick:()=>{o(r),Oe({name:r.label})},className:st("action-container",{"pointer-events-none grayscale text-gray-500":!n(r,t)}),children:[e.jsx("div",{className:"flex items-center justify-center w-full transition duration-300 ease-in-out rounded-lg bg-slate-100 h-1200 hover:bg-slate-200 hover:scale-105",children:e.jsx(r.icon,{className:"scale-150",fill:"#000"})}),e.jsx("div",{className:`action-footer py-2 w-full ${r.id} text-center`,children:e.jsx("div",{className:"font-bold font-base text-100",children:r.label})})]},r.id))})]})},$r=""+new URL("word-icon.svg",import.meta.url).href,tx=""+new URL("picture.png",import.meta.url).href,sx=""+new URL("translate-doc.png",import.meta.url).href,ax=""+new URL("gpt4.png",import.meta.url).href,nx={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":ql,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":$r,file:$r,png:tx,"translate-manual":sx,"translate-machine":ax},ox=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7272 8.79541V13.909H3.27268V3.27268H8.99996C9.10845 3.27268 9.21251 3.22958 9.28923 3.15286C9.36595 3.07614 9.40905 2.97209 9.40905 2.86359V2.4545C9.40905 2.346 9.36595 2.24195 9.28923 2.16523C9.21251 2.08851 9.10845 2.04541 8.99996 2.04541H2.4545C2.346 2.04541 2.24195 2.08851 2.16523 2.16523C2.08851 2.24195 2.04541 2.346 2.04541 2.4545V14.7272C2.04541 14.8357 2.08851 14.9398 2.16523 15.0165C2.24195 15.0932 2.346 15.1363 2.4545 15.1363H15.5454C15.6539 15.1363 15.758 15.0932 15.8347 15.0165C15.9114 14.9398 15.9545 14.8357 15.9545 14.7272V8.79541C15.9545 8.74116 15.933 8.68913 15.8946 8.65077C15.8562 8.61241 15.8042 8.59086 15.75 8.59086H14.9318C14.8775 8.59086 14.8255 8.61241 14.7871 8.65077C14.7488 8.68913 14.7272 8.74116 14.7272 8.79541Z",fill:"#222222"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6738 2.04541C11.6306 2.04534 11.5883 2.05812 11.5523 2.08212C11.5163 2.10612 11.4883 2.14026 11.4717 2.18022C11.4551 2.22018 11.4508 2.26415 11.4593 2.30657C11.4677 2.34899 11.4886 2.38795 11.5192 2.4185L12.9715 3.87159L9.89102 6.9545C9.81432 7.03122 9.77124 7.13525 9.77124 7.24373C9.77124 7.35221 9.81432 7.45624 9.89102 7.53296L10.4695 8.11141C10.5075 8.14951 10.5526 8.17973 10.6023 8.20036C10.652 8.22098 10.7053 8.2316 10.7591 8.2316C10.8129 8.2316 10.8662 8.22098 10.9159 8.20036C10.9656 8.17973 11.0107 8.14951 11.0487 8.11141L14.1292 5.03096L15.5815 6.48323C15.612 6.51385 15.651 6.53471 15.6934 6.54316C15.7358 6.55162 15.7798 6.54729 15.8198 6.53073C15.8597 6.51417 15.8939 6.48612 15.9179 6.45013C15.9419 6.41415 15.9546 6.37185 15.9546 6.32859V2.04541H11.6738Z",fill:"#222222"})]});function rx(t){const s=new Array(5).fill(void 0);return t.length?t:s}const Ei=({title:t,files:s=[],onClickFiles:a,showSelector:n,initialSelectedFiles:o=[],noResults:r,fetchRecentFiles:l})=>{const[i,c]=h.useState(o),[d,u]=h.useState(!1);h.useEffect(()=>{d&&(s&&s.length>0||r)&&u(!1)},[s,d,u,r]);function p(C){if(!n||!C)return;let b=[];i.includes(C)?b=i.filter(x=>x!==C):b=[...i,C],c(b),a(C,b)}const f=async()=>{u(!0),l(!0),Oe({name:Be.REFRESH})},g=st("outline-none [&[data-focus-visible]]:outline [&[data-focus-visible]]:outline-blue-800 [&[data-focus-visible]]:outline-2",{"transition-transform duration-200 ease-linear delay-0 rotate-[360deg]":d});return e.jsx("div",{className:"flex justify-between mt-6 recent-files pb-400",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-row items-center pt-100 pb-200",children:[t&&e.jsx("h1",{className:"font-bold text-gray-900 font-base text-400",children:t}),e.jsx(Me,{className:g,onPress:f,children:e.jsx(zo,{})})]}),e.jsx("div",{className:"overflow-scroll max-h-96",children:r?e.jsx(In,{Icon:e.jsx(Ko,{}),heading:"No Files Found",description:"Please create a file in sharepoint to see it here"}):e.jsxs("table",{className:"w-full h-full p-4 overflow-scroll table-auto",children:[e.jsx("thead",{className:"sticky top-0 border-b border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1250"}),e.jsx("th",{className:"font-bold text-gray-700 uppercase font-base text-50",children:"Name"}),e.jsx("th",{className:"font-bold text-gray-700 uppercase font-base text-50",children:"Updated On"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:rx(s).map((C={},b)=>e.jsxs("tr",{className:st("row cursor-default border-b border-gray-300 border-solid",{selected:C.webUrl&&i.includes(C.webUrl)}),onClick:()=>p(C.webUrl),children:[e.jsx("td",{children:e.jsxs("div",{className:"flex justify-end",children:[n&&C.webUrl&&e.jsx("input",{type:"checkbox",checked:i.includes(C.webUrl),className:"mx-2 checkbox",onChange:()=>p(C.webUrl)}),C?e.jsx("img",{src:nx[C.mimeType],className:"img-title h-[32px] mx-2"}):e.jsx(Ie,{width:"32px",height:"32px"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col justify-items-center",children:[e.jsx("p",{className:"text-gray-800 font-base text-100 font-regular",children:C.name||e.jsx(Ie,{})}),e.jsx("p",{className:"text-gray-600 font-base text-75 font-regular",children:C?_d[C.mimeType]:e.jsx(Ie,{})})]})}),e.jsx("td",{className:"text-gray-700 font-base text-100 font-regular",children:C.lastModifiedDateTime?e.jsx(tl,{format:"MMM DD, YYYY",children:C.lastModifiedDateTime}):e.jsx(Ie,{})}),e.jsx("td",{children:e.jsx("div",{className:"flex justify-center invisible",children:C.webUrl&&e.jsx("a",{href:C.webUrl,target:"_blank",rel:"noreferrer",onClick:()=>Oe({name:`${Be.RECENT_FILES}-${C.name}`}),children:e.jsx(ox,{})})})})]},`${C.webUrl}-${b}`||`skeleton-${b}`))})]})})]})})};Ei.propTypes={title:te.string,files:te.array,showSelector:te.bool,onClickFiles:te.func,initialSelectedFiles:te.array,fetchRecentFiles:te.func};const lx=()=>{const t=ce(c=>c.token),s=ce(c=>c.recentFiles),a=ce(c=>c.setRecentFiles),n=ce(c=>c.account),o=ce(c=>c.defaultTenant),[r,l]=h.useState(!1);h.useEffect(()=>{const{value:c=""}=o;t&&c&&i()},[t,o]);const i=h.useCallback(async(c=!1)=>{const{value:d=""}=o;if(t&&d){l(!1),a([]);const u=await Bg(t,d,c);u.length===0&&l(!0),a(u)}},[t,o,l,a]);return e.jsxs("section",{children:[e.jsxs("div",{className:"py-8 bg-bottom bg-cover px-1200 bg-root",children:[e.jsxs("p",{className:"py-4 text-800 font-base",children:["Welcome, ",e.jsx("b",{children:n.name})]}),e.jsx("div",{className:"bg-white shadow-xl rounded-xl p-200 w-fit",children:e.jsx(ex,{activeTenant:o})})]}),t&&e.jsx("div",{className:"px-1200",children:e.jsx(Ei,{files:s,noResults:r,title:"Recent",fetchRecentFiles:i})})]})},ki=({children:t,tooltip:s,...a})=>s?e.jsxs(Jr,{children:[e.jsx(Zn,{...a,children:t}),e.jsx(Wr,{children:s})]}):e.jsx(Zn,{...a,children:t});ki.propTypes={tooltip:te.oneOfType([te.string,te.element]),children:te.node,...Zn.propTypes};const ix=t=>{if(t.every(a=>(a==null?void 0:a.action)===ar.TRANSLATE||(a==null?void 0:a.action)===ar.ENGLISH_COPY)){const a=t.reduce((o,r)=>{const{langCode:l,action:i}=r;return o[l]=i,o},{}),n=[];for(let o in ma)if(a[o]&&a[o]===ma[o].action){const r=ma[o].label,l=ma[o].dependsOnLabel;n.push(`${r} depends on the completion of the ${l} Translation. Please ensure the ${l} Translation is complete before proceeding with ${r}.`)}return n}return[]},Ri=({val:t=[],...s})=>{const a=()=>t.length>3?e.jsxs("p",{children:[t.slice(0,3).join(", "),e.jsxs("span",{title:t.join(", "),className:"bg-gray-300 inline-flex items-center justify-center min-w-[2rem] px-2 py-0 min-h-[1.5rem] rounded-3xl ml-65",children:["+",t.length-3]})]}):t.join(", ");return e.jsx(m,{className:"py-3 px-4",val:a(),...s})},cx={columns:[{label:"Language",align:"left"},{label:"Progress",align:"left"},{label:"Locales",align:"left"},{label:"Action",align:"left"},{label:"Last Modified Date",sortKey:"modifiedDate",align:"left"},{label:"Status",align:"center"}]},dx=()=>{const{enqueueSnackbar:t}=ye.useSnackbar(),s=E.useDispatch(),{projectId:a}=ee.useParams(),{isInitialised:n,details:o,sort:r}=E.useSelector(c=>c.localization.projectDetails),l=h.useCallback(()=>{s(Pa({projectId:a})).unwrap().catch(()=>{t("Failed to fetch project details",{variant:"error"})})},[s,a]);h.useEffect(()=>{s(Qn({sort:{key:"modifiedDate",order:"desc"}})),l()},[s,a,l]);const i=h.useCallback(c=>{const d=c;let u="asc";c===r.key&&(u=r.order==="asc"?"desc":"asc"),s(Qn({sort:{key:d,order:u}})),l()},[r.key,r.order,s,l]);return e.jsx(ne,{header:cx,isLoading:!n,sort:r,isEmpty:o.length===0,emptyTableMessage:"No Languages found!",onSort:i,children:e.jsx("tbody",{children:o.map(c=>e.jsxs("tr",{children:[e.jsx(m,{val:c.langCode,align:"left"}),e.jsx(m,{val:`${(c==null?void 0:c.done)??0}/${(c==null?void 0:c.total)??0}`,align:"left"}),e.jsx(Ri,{val:(c==null?void 0:c.locales)??[],align:"left"}),e.jsx(m,{val:c.action,align:"left"}),e.jsx(ge,{val:new Date(c.modifiedDate),tz:!1,align:"left"}),e.jsx(m,{val:c.status})]},c.id))})})},ux=()=>{const t=E.useSelector(s=>s.localization.projectDetails.urls);return e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs(rs,{className:"text-gray-700 mb-100 text-200 font-base font-regular",children:["List of Pages (",t.length,")"]}),e.jsx("div",{className:"h-[13.375rem] bg-gray-50 overflow-y-auto w-full pt-100 px-150 pb-150 rounded-lg border-25 border-solid border-gray-300 leading-small",children:t.map(s=>e.jsx("p",{children:s},s))})]})},px=()=>{const t=E.useSelector(i=>i.localization.isLoading),s=E.useSelector(i=>i.localization.projectDetails.projectName),a=E.useSelector(i=>i.localization.projectDetails.locUiUrl),n=E.useSelector(i=>i.localization.projectDetails.details),o=h.useMemo(()=>ix(n),[n]),r=E.useDispatch();h.useEffect(()=>()=>{r(Qn({reset:!0}))},[r]);const l=()=>e.jsx(ki,{fillStyle:"fill",variant:"primary",target:"_blank",referrerPolicy:"no-referrer",rel:"noopener noreferrer",href:a,isDisabled:!a,children:"View Details"});return e.jsxs(We,{className:"panther",title:`${s}`,actions:e.jsx(l,{}),children:[e.jsxs("div",{className:"page-content",children:[(o==null?void 0:o.length)>0&&e.jsx(Ft,{children:o.map(i=>e.jsx("div",{children:i},i))}),e.jsx(ux,{}),e.jsx(dx,{})]}),t&&e.jsx(Ke,{})]})};const Fr=({label:t,filterOptions:s=[],value:a,selectAllLabel:n="All",size:o="auto",align:r="center",stick:l="none",className:i="",rowSpan:c=1,colSpan:d=1,canRenderPopover:u,onPopoverOpenChange:p,onChange:f=()=>{}})=>{const[g,C]=h.useState([]),[b,x]=h.useState(!1),[j,y]=h.useState(!1),v=h.useRef(null),L=()=>{w(),y(!0)},S=()=>{const M=!b,T=g.map(H=>({...H,checked:M}));x(M),C(T)},P=M=>{const T=[...g];T[M].checked=!T[M].checked,C(T),n&&D(g)},A=()=>{f(g.filter(M=>M.checked).map(({value:M})=>M)),y(!1)},w=h.useCallback(()=>{C(M=>{const T=M.map(H=>({...H,checked:(a==null?void 0:a.includes(H.value))??!1}));return D(T),T})},[a]),D=M=>{const T=M.filter(H=>H.checked).map(({value:H})=>H);T.length===M.length?x(!0):T.length===0?x(!1):x(null)};return h.useEffect(()=>{s.length>0&&(typeof s[0]=="string"?C(s.map(M=>({value:M,label:M,checked:!1}))):C(s.map(M=>({...M,checked:!1}))))},[s]),h.useEffect(w,[w]),h.useEffect(()=>{u||y(!1)},[u]),h.useEffect(()=>p(j),[j]),e.jsx("th",{className:`${i} hcell-root size-${o} stick-${l}`,rowSpan:c,colSpan:d,children:e.jsxs("div",{className:`hcell align-${r}`,children:[e.jsxs("div",{className:`hcell-clickable ${a.length>0&&"icon-emphasis"}`,ref:v,onClick:L,children:[e.jsx("span",{children:t}),e.jsx(Qc,{width:16,height:16})]}),e.jsx(ca,{triggerRef:v,isOpen:j,onOpenChange:y,children:e.jsxs("div",{className:"dyna-filter-hcell-popover-content",children:[n&&e.jsx("div",{className:"checkbox-container",onClick:S,children:e.jsx(xt,{styles:`${Es.full} ${De.y4}`,isSelected:b||!1,isIndeterminate:b===null,onChange:S,children:n})}),g.map((M,T)=>e.jsx("div",{className:"checkbox-container",onClick:H=>P(T),children:e.jsx(xt,{styles:`${Es.full} ${De.y4}`,value:M.value,isSelected:M.checked,onChange:H=>P(T),children:M.label})},M.value)),e.jsx("div",{className:"apply-btn",children:e.jsx(ae,{styles:Es.full,variant:"accent",size:"S",onPress:A,children:"Apply"})})]})})]})})},Li=(t="page-body")=>{const[s,a]=h.useState(!1),[n,o]=h.useState(!0),r=h.useRef(()=>{o(l=>l&&!l)}).current;return h.useEffect(()=>{if(s){const l=document.querySelector(`#${t}`);return l.addEventListener("scroll",r),()=>{l.removeEventListener("scroll",r)}}},[s,r]),h.useEffect(()=>{!s&&!n&&o(!0)},[s,n]),{canRenderPopup:n,handlePopupOpenChange:a}},hx=t=>t.localization.projectList.data,fx=t=>t.localization.projectList.pagination,mx=t=>t.localization.projectList.sort,Vr=t=>t.localization.projectList.isInitialised,gx=t=>t.localization.projectList.type,xx=t=>t.localization.projectList.filters,bx=t=>t.localization.projectList.search,Cx=_.createSelector([hx,fx,mx,Vr,gx,xx,bx],(t,s,a,n,o,r,l)=>({data:t,pagination:s,sort:a,projectListIsInitializedSelector:Vr,isInitialised:n,type:o,filters:r,search:l})),Br={status:["CREATED","IN_PROGRESS","COMMITTED_FOR_TRANSLATION","SYNC_IN_PROGRESS","SYNC_DONE","COMPLETED","ERROR","CANCELLED"],rolloutStatus:["COMPLETED","ROLLOUT_READY","IN_PROGRESS","ERROR"]},ns={localization:"Localization",rollout:"Rollout",progress:"In Progress",completed:"Completed",error:"Error",CREATED:"Created",IN_PROGRESS:"In Progress",COMMITTED_FOR_TRANSLATION:"Committed for translation",SYNC_IN_PROGRESS:"Sync",SYNC_DONE:"Sync Done",COMPLETED:"Completed",CANCELLED:"Cancelled",ERROR:"Error",ROLLOUT_READY:"Rollout Ready"},Ni=({projectId:t,locUrl:s,projectKey:a,createdByEmail:n,editProject:o,promoteProject:r})=>{const l=ee.useNavigate(),i=ce(g=>{var C;return(C=g.defaultTenant)==null?void 0:C.value}),c=ce(g=>g.account),d=()=>{window.open(`${Gs[i]}&projectKey=${a}&workflow=edit`,"_blank","noopener noreferrer")},u=()=>{window.open(s,"_blank","noopener noreferrer")},p=()=>{l(`/localization/${t}`)},f=()=>{window.open(`${Gs[i]}&workflow=promoteRollout&projectKey=${a}`,"_blank","noopener noreferrer")};return e.jsxs("td",{className:"flex justify-center actions-cell stick-right",children:[e.jsx(kt,{tooltip:"Edit Draft",isDisabled:!o||!a||!Gs[i]||n!==c.username,onPress:d,children:e.jsx(Co,{})}),e.jsx(kt,{tooltip:"Preview",onPress:p,children:e.jsx(po,{})}),e.jsx(kt,{tooltip:"View details",isDisabled:!s,onPress:u,children:e.jsx(So,{})}),e.jsx(kt,{tooltip:"Rollout",isDisabled:!r,onPress:f,children:e.jsx(ed,{})})]})};Ni.propTypes={projectId:te.string.isRequired};const jx=()=>{const t=E.useDispatch(),{data:s=[],pagination:a,sort:n,isInitialised:o,type:r,filters:l,search:i}=E.useSelector(Cx),c=ce(v=>{var L;return(L=v.defaultTenant)==null?void 0:L.value}),[d,u]=h.useState(""),{canRenderPopup:p,handlePopupOpenChange:f}=Li();h.useEffect(()=>{c&&(t(gt({sort:{key:"createdDate",order:"desc"},filters:{status:[],rolloutStatus:[]}})),t(et({tenant:c})))},[c,t]),h.useEffect(()=>()=>{t(gt({reset:!0}))},[t]),h.useEffect(()=>{i!==d&&u(i)},[i]);const g=(v,L)=>{t(gt({filters:{[L]:v}})),t(et({tenant:c,pageIndex:1}))},C=v=>{u(v),b(v)},b=h.useMemo(()=>ct.debounce(v=>{t(gt({search:v})),t(et({tenant:c,pageIndex:1}))},800),[c,t]),x=h.useCallback(v=>{const L=v;let S="asc";v===n.key&&(S=n.order==="asc"?"desc":"asc"),t(gt({sort:{key:L,order:S}})),t(et({tenant:c}))},[c,n.key,n.order,t]),j=h.useCallback(v=>{t(et({tenant:c,pageIndex:v}))},[c,t]),y=h.useCallback(v=>{t(gt({pagination:{pageSize:v}})),t(et({tenant:c,pageIndex:1}))},[c,t]);return e.jsx(ne,{header:e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(_e,{label:"Project Id",size:"xs"}),e.jsx(_e,{label:"Project Name",align:"left",stick:"left"}),e.jsx(_e,{label:"Project Type",align:"left",stick:"left"}),e.jsx(_e,{label:"Created By",sortKey:"createdBy",align:"left",sort:n,onSort:x}),e.jsx(_e,{label:"Created Date",sortKey:"createdDate",align:"left",sort:n,onSort:x}),e.jsx(_e,{label:"Languages",align:"left"}),e.jsx(Fr,{label:"Localization Status",filterOptions:Br.status.map(v=>({label:ns[v]||v,value:v})),value:l.status,canRenderPopover:p,onPopoverOpenChange:f,onChange:v=>g(v,"status")}),e.jsx(Fr,{label:"Rollout Status",filterOptions:Br.rolloutStatus.map(v=>({label:ns[v]||v,value:v})),value:l.rolloutStatus,canRenderPopover:p,onPopoverOpenChange:f,onChange:v=>g(v,"rolloutStatus")}),e.jsx(_e,{label:"Actions",size:"xs",stick:"right"})]})}),isLoading:!o,sort:n,isEmpty:s.length===0,emptyTableMessage:"No projects found!",toolbar:e.jsxs(me,{title:`${r==="me"?"My":"All"} Projects (${a.totalItems})`,children:[e.jsx("div",{className:"flex-1"}),e.jsx(oa,{styles:De.start16,"aria-label":"config-list-search",value:d,onChange:C})]}),pagination:e.jsx(fe,{pageSizes:[20,50,100],...a,onPageChange:j,onPageSizeChange:y}),children:e.jsx("tbody",{children:s.map(v=>{var L;return e.jsxs("tr",{children:[e.jsx(m,{val:v.id}),e.jsx(m,{val:v.projectName,align:"left",stick:"left"}),e.jsx(m,{val:v.projectType,align:"left",stick:"left"}),e.jsx(m,{val:v.createdBy,align:"left"}),e.jsx(ge,{val:new Date(v.createdDate),tz:!1,align:"left"}),e.jsx(Ri,{val:(v==null?void 0:v.langCodes)??[],align:"left"}),e.jsx(m,{val:ns[v.status]||v.status}),e.jsx(m,{val:ns[v.rolloutStatus]||v.rolloutStatus}),e.jsx(Ni,{projectId:(L=v.id)==null?void 0:L.toString(),locUrl:v==null?void 0:v.locUiUrl,projectKey:v==null?void 0:v.projectKey,createdByEmail:v==null?void 0:v.createdByEmail,editProject:v==null?void 0:v.editProject,promoteProject:v==null?void 0:v.promoteProject})]},v.id)})})})},vx=({fill:t,stroke:s="#0265DC"})=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("circle",{cx:"9",cy:"9",r:"8.2",stroke:t||s,strokeWidth:"2",strokeDasharray:"2 2"})});const yx={progress:e.jsx(vx,{}),completed:e.jsx(gn,{}),error:e.jsx(ia,{})},Sx=({section:t,categoryLabel:s,index:a,canRenderTooltips:n,onTooltipOpenChange:o,onClick:r})=>e.jsxs("div",{className:`variant-${t.key} w-64 flex items-center py-2 pr-0 pl-2 last:pr-2`,children:[a>0&&e.jsx("div",{className:"h-full mr-2 bg-gray-200 w-25"}),e.jsxs(td,{delay:0,closeDelay:0,onOpenChange:o,children:[e.jsxs(Me,{className:"flex items-center w-full px-2 py-1 transition-all rounded-md outline-none cursor-auto hover:bg-static-gray-200 active:scale-95",onPress:r,children:[yx[t.key],e.jsx("div",{className:"flex-1 pl-2 leading-4 text-left",children:t.label}),e.jsx("div",{className:"section-count",children:t.total})]}),n&&e.jsxs(sd,{className:"flex flex-col p-3 bg-white rounded-lg pointer-events-none project-stat-section-popover",placement:"bottom",offset:4,children:[e.jsxs("h3",{className:`variant-${t.key} pb-2`,children:[s," ",t.label]}),t.fields.map(l=>e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex-1 pe-4",children:l.label}),e.jsx("span",{className:"font-bold",children:l.value})]},l.key))]})]})]}),Ex=()=>{const{stats:t}=E.useSelector(i=>i.localization.projectList),s=ce(i=>{var c;return(c=i.defaultTenant)==null?void 0:c.value}),a=E.useDispatch(),{canRenderPopup:n,handlePopupOpenChange:o}=Li(),r=(i,c)=>{const d=c.fields.map(({key:p})=>p);a(gt({search:"",filters:{...{status:[],rolloutStatus:[]},[i]:d}})),a(et({tenant:s,pageIndex:1}))},l=h.useMemo(()=>t?Object.entries(t).map(([i,c])=>({label:ns[i]||i,filterKey:c.filterKey,sections:["completed","progress","error"].map(d=>{const u=c[d],p=[];let f=0;return Object.entries(u).forEach(([g,C])=>{const b=parseInt(C)||0;p.push({key:g,label:ns[g]||g,value:b}),f+=b}),{key:d,label:ns[d]||d,total:f,fields:p}})})):[],[t]);return e.jsx("div",{className:"flex flex-col items-center w-full mx-0 mt-2 mb-8 project-stats-container",children:l.map(i=>e.jsxs("div",{children:[e.jsxs("h3",{className:"px-0 pt-4 pb-2",children:[i.label," Status"]}),e.jsx("div",{className:"flex bg-white rounded",children:i.sections.map((c,d)=>e.jsx(Sx,{section:c,categoryLabel:i.label,index:d,canRenderTooltips:n,onTooltipOpenChange:o,onClick:()=>r(i.filterKey,c)},c.label))})]},i.label))})},kx=on(aa()).subtract({years:1}),Rx=()=>{const t=E.useSelector(d=>d.localization.isLoading),{dateRange:s,type:a}=E.useSelector(d=>d.localization.projectList),n=ce(d=>{var u;return(u=d.defaultTenant)==null?void 0:u.value}),o=E.useDispatch(),{enqueueSnackbar:r}=ye.useSnackbar(),l=h.useCallback(d=>{o(gt({dateRange:{...d}})),n&&!t&&o(et({tenant:n,pageIndex:1}))},[o,n,t]),i=d=>{o(gt({reset:!0})),o(gt({type:d===0?"me":"all",sort:{key:"createdDate",order:"desc"},filters:{status:[],rolloutStatus:[]},dateRange:s})),o(et({tenant:n}))},c=()=>{Gs[n]?window.open(`${Gs[n]}&workflow=normal`,"_blank","noopener noreferrer"):o(Ia({tenant:n})).then(d=>{var u;if(_.isFulfilled(d))try{const p=new URL((u=d.payload)==null?void 0:u.path);window.open(p,"_blank","noopener noreferrer")}catch{r("Error encountered while creating project",{variant:"error"})}})};return e.jsxs(We,{className:"panther",title:"Localization",actions:e.jsxs(ae,{onPress:c,children:[e.jsx(vo,{}),e.jsx(je,{children:"Add New Project"})]}),children:[e.jsxs("div",{className:"page-content",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Nn,{segments:["My Projects","All Projects"],index:+(a==="all"),variant:"primary",onChange:i}),e.jsx($o,{label:"Date Range",value:s,labelPosition:"side",onDateChange:l,minValue:kx})]}),e.jsx(Ex,{}),e.jsx(jx,{})]}),t&&e.jsx(Ke,{})]})},Lx=""+new URL("cache_purge.png",import.meta.url).href,Nx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAABhklEQVR4Ae2YPUvDQBjH/3dpg1CQfoC6u3ZQcfMD1Elw1Y+QzoKNgzoV4+zkKggODi6ic7G4OwmKc6iLpE0e71IUqpfmbF4QvR/k7S4hvyT/JyEHGKbDkjoOW/0OgRyxWkcGOHDxNhq23avVR539lUIH6/0jRFgMrcjhFTbAjLAALwR0GcNG8Go13dumn3YMV7YSbTPOd7PIfGKjS4Tzai28cdfuU+82T2ivR9XwGXkhpMSzuNaR4igLTanyhDCWYhwP06SKFSIM+NBqTDRV4UipuVrUUR1SQZE+DCegsCeq7RsRI1lxbZQpFFeYKHtVl3wlqNrLzZAGRigNPaEAm/FUAlqhFh88Ty5FQM/i7YB6Yt6APk9kY0VnRy0hIeJMbNtsGQWhV/b2+M6Uwb/LkHZ2fiRkMpTKH3wPfZCaKZOhNMy3LBchk6HfRJKQH41oHgVBAS3Ic0BXSIx6HFsE7+s/VR7IC+XE90QuT1X9icMx+607T3RuIeNwjAJfXvDO5ZILwwy8A5BgmgXkXS50AAAAAElFTkSuQmCC",Px=[{title:"Cache Purge",imgSrc:Lx,path:"/ops-tools/cachePurge",linkLabel:"Explore",description:"Purges the Milo pages from the respective live cdn"},{title:"Page Indexing",imgSrc:Nx,path:"/ops-tools/pageIndexing",linkLabel:"Explore",description:"Index Milo pages and create/remove entry from query-index"}],Ix=()=>e.jsx("section",{children:e.jsx("div",{className:"py-8 bg-bottom bg-cover bg-root px-1200 min-h-[24rem]",children:e.jsx("ul",{className:"flex flex-wrap gap-4",children:Px.map(t=>e.jsx(mn,{title:t.title,imgSrc:t.imgSrc,description:t.description,link:t.path,linkLabel:t.linkLabel,isDisabled:!t.enabled},t.path))})})}),Jn=""+new URL("aem-sidekick.png",import.meta.url).href,Tx=""+new URL("hawkeye.png",import.meta.url).href,_x=""+new URL("milo-all-in-one.png",import.meta.url).href,Ax=[{title:"Hawkeye",description:"Link Auditor to support tracking validation for CTAs and other links on Adobe.com",imgSrc:Tx,path:"https://chromewebstore.google.com/detail/adobe-hawkeye-link-audito/ffiidihjbbghpfelfplkcgbdjkjdcajj",linkLabel:"Download"},{title:"AEM Sidekick",description:"AEM Sidekick allows authors of AEM sites to easily preview and publish content",imgSrc:Jn,path:"https://chrome.google.com/webstore/detail/ccfggkjabjahcjoljmgmklhpaccedipo",linkLabel:"Download"},{title:"Milo All-In-One",description:"Quick and Easy milo authoring tools for a.com pages",imgSrc:_x,path:"https://chromewebstore.google.com/detail/milo-all-in-one/dlbfpfnhdcbbilmaeiminlfflbpmojho",linkLabel:"Download"},{title:"GWP AOS Swagger",description:"GWP AOS Swagger allows authors to get the details of all adobe.com product offers and services",imgSrc:Jn,path:"https://gwp-aos-swagger.corp.adobe.com/",linkLabel:"Visit"},{title:"Spidy Link Checker",description:"Spidy allows authors to run link checker on N number of adobe.com live pages and generate a report",imgSrc:Jn,path:"https://spidy.corp.adobe.com/",linkLabel:"Visit"}],Dx=()=>e.jsx("section",{children:e.jsx("div",{className:"py-8 bg-bottom bg-cover bg-root px-1200 min-h-[24rem]",children:e.jsx("ul",{className:"flex flex-wrap gap-4",children:Ax.map(t=>e.jsx(mn,{title:t.title,imgSrc:t.imgSrc,description:t.description,link:t.path,linkLabel:t.linkLabel},t.path))})})});new ad(Og);const Ox=ee.createHashRouter([{path:"/",element:e.jsx(Fp,{}),errorElement:e.jsx(Ug,{}),children:[{path:"/",element:e.jsx(ee.Navigate,{to:"/home"})},{path:"/home",element:e.jsx(lx,{})},{path:"/config-mgmt",element:e.jsx(Tp,{}),children:[{path:"/config-mgmt",element:e.jsx($g,{})},{path:"/config-mgmt/redirects",element:e.jsx(c0,{})},{path:"/config-mgmt/:id",element:e.jsx(jm,{})}]},{path:"/config-mgmt/redirects/new",element:e.jsx(Dr,{})},{path:"/config-mgmt/redirects/edit/:id",element:e.jsx(Dr,{})},{path:"/config-mgmt/unity/edit/:id",element:e.jsx(wr,{})},{path:"/config-mgmt/unity/new",element:e.jsx(wr,{})},{path:"/localization",element:e.jsx(Rx,{})},{path:"/localization/:projectId",element:e.jsx(px,{})},{path:"/plugins",element:e.jsx(Dx,{})},{path:"/search",element:e.jsx(P0,{})},{path:"/exports/:id",element:e.jsx(vm,{})},{path:"/search/advanced",element:e.jsx(_g,{})},{path:"/ops-tools",element:e.jsx(Ix,{})},{path:"/ops-tools",element:e.jsx(pa,{className:"panther",navMenu:Td,navbarTitle:{name:"OPs Tools",routes:"/ops-tools"}}),children:[{path:"/ops-tools/cachePurge",element:e.jsx(K9,{})},{path:"/ops-tools/pageIndexing",element:e.jsx(em,{})}]},...O9]}]);nd.createRoot(document.getElementById("root")).render(e.jsx(wp,{children:e.jsx(Mp,{children:e.jsx(ee.RouterProvider,{router:Ox})})}));
